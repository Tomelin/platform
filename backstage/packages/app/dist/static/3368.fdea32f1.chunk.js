"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3368],{99980:(B,m,t)=>{t.d(m,{g:()=>g});var e=t(2784),i=t(90996),v=t(92980);function g(h){const{themeId:f,children:O,...T}=h;return e.createElement(v.T,{themeId:f},e.createElement(i.h,{...T}),O)}},92777:(B,m,t)=>{t.d(m,{d:()=>Et});var e=t(8554),i=t(95544),v=t(21324),g=t(5806),h=t(86619),f=t(90436),O=t(80030),T=t(79692),R=t(15459),u=t(19996),L=t(25505),A=t(38016),U=t(97570),n=t(2784),F=t(62862),x=t(85166),w=t(2465);function G(a){const o=(0,w.x)(a);(0,n.useEffect)(()=>()=>{o.current()},[])}function V(a,o,s,l=0){const c=(0,n.useRef)(),r=(0,n.useRef)(),d=(0,n.useRef)(a),P=(0,n.useRef)(),p=()=>{c.current&&(clearTimeout(c.current),c.current=void 0),r.current&&(clearTimeout(r.current),r.current=void 0)};return G(p),(0,n.useEffect)(()=>{d.current=a},o),(0,n.useMemo)(()=>{const S=()=>{if(p(),!P.current)return;const y=P.current;P.current=void 0,d.current.apply(y.this,y.args)},W=function(...y){c.current&&clearTimeout(c.current),P.current={args:y,this:this},c.current=setTimeout(S,s),l>0&&!r.current&&(r.current=setTimeout(S,l))};return Object.defineProperties(W,{length:{value:a.length},name:{value:`${a.name||"anonymous"}__debounced__${s}`}}),W},[s,l,...o])}function J(a,o,s,l=0){(0,n.useEffect)(V(a,o,s,l),o)}var N=t(98685),k=t(62367),Z=t(51847),z=t(59274),j=t(66088),C=t(23200);function M({enabled:a}){const o=(0,z.h_)(C.A),[s]=(0,n.useState)(async()=>{if(!a)return[];const l="relations.ownedBy";return o.getEntityFacets({facets:[l]}).then(c=>c.facets[l].map(r=>r.value).map(r=>{const{kind:d,name:P,namespace:p}=(0,e.of)(r);return{apiVersion:"backstage.io/v1beta1",kind:d,metadata:{name:P,namespace:p}}}).sort((r,d)=>(r.metadata.namespace||"").localeCompare(d.metadata.namespace||"","en-US")||r.metadata.name.localeCompare(d.metadata.name,"en-US")||r.kind.localeCompare(d.kind,"en-US"))).catch(()=>[])});return(0,j.Z)(async(l,c)=>{var y;const r=await s;if(!r)return{items:[]};const d=(y=c==null?void 0:c.limit)!=null?y:20,{text:P,start:p}=$(l),S=r.filter(nt=>Q(P,nt)),W=p+d;return{items:S.slice(0,W),...K({entities:S,limit:W,payload:{text:P,start:W}})}},[s],{loading:!0,value:{items:[]}})}function $(a){return H(a)&&a.cursor?JSON.parse(atob(a.cursor)):{text:a.text||"",start:0}}function H(a){return!!a.cursor}function K({entities:a,limit:o,payload:s}){return a.length>o?{cursor:btoa(JSON.stringify(s))}:{}}function Q(a,o){var l;const s=a.trim();return o.kind.includes(s)||((l=o.metadata.namespace)==null?void 0:l.includes(s))||o.metadata.name.includes(s)}function I(){const a=(0,z.h_)(C.A);return(0,j.Z)(async(o,s)=>{var P;const l=o,c=o,r=(P=s==null?void 0:s.limit)!=null?P:20;if(c.cursor){const p=await a.queryEntities({cursor:c.cursor,limit:r});return{cursor:p.pageInfo.nextCursor,items:[...c.items,...p.items]}}const d=await a.queryEntities({fullTextFilter:{term:l.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:r});return{cursor:d.pageInfo.nextCursor,items:d.items}},[],{loading:!0})}var Y=t(49257);function X({mode:a,initialSelectedOwnersRefs:o}){const s=a==="owners-only",l=I(),c=M({enabled:s}),[r,d]=s?c:l;return[r,d,_({enabled:!s,initialSelectedOwnersRefs:o})]}function _({enabled:a,initialSelectedOwnersRefs:o}){const s=(0,n.useRef)({}),l=(0,z.h_)(C.A),[,c]=(0,j.Z)(async()=>{(await l.getEntitiesByRefs({entityRefs:o})).items.forEach(d=>{d&&(s.current[(0,e.eE)(d)]=d)})},[]);return(0,Y.n)(()=>{a&&o.length>0&&c()}),{getEntity:r=>s.current[r],setEntity:r=>{s.current[(0,e.eE)(r)]=r}}}var ot=t(72579),et=t(9402),st=t(82394);const q=(0,T.Z)({root:{},label:{},input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),tt=(0,R.Z)(a=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(g.Z),ut=n.createElement(L.Z,{fontSize:"small"}),mt=n.createElement(u.Z,{fontSize:"small"});function dt(a){const o=q(),s=a.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:l}=(0,et.V)(a.entity);return n.createElement(i.Z,{className:o.fullWidth},n.createElement(tt,{className:o.fullWidth,control:n.createElement(v.Z,{icon:ut,checkedIcon:mt,checked:a.isSelected}),onClick:c=>c.preventDefault(),label:n.createElement(O.ZP,{title:l},n.createElement(i.Z,{display:"flex",alignItems:"center"},s?n.createElement(k.Z,{fontSize:"small"}):n.createElement(N.Z,{fontSize:"small"}),"\xA0",n.createElement(i.Z,{className:o.boxLabel},n.createElement(f.Z,{noWrap:!0},l))))}))}const Et=a=>{var lt,ct,it;const o=q(),{mode:s="owners-only"}=a||{},{updateFilters:l,filters:c,queryParameters:{owners:r}}=(0,F.wp)(),[d,P]=(0,n.useState)(""),p=(0,n.useMemo)(()=>[r].flat().filter(Boolean),[r]),[S,W]=(0,n.useState)(p.length?p:(ct=(lt=c.owners)==null?void 0:lt.values)!=null?ct:[]),[{value:y,loading:nt},at,rt]=X({mode:s,initialSelectedOwnersRefs:S});J(()=>at({text:d}),[d,at],250);const ft=(y==null?void 0:y.items)||[];return(0,n.useEffect)(()=>{if(p.length){const E=new x.rf(p);W(E.values)}},[p]),(0,n.useEffect)(()=>{l({owners:S.length?new x.rf(S):void 0})},[S,l]),["user","group"].includes(((it=c.kind)==null?void 0:it.value.toLocaleLowerCase("en-US"))||"")?null:n.createElement(i.Z,{className:o.root,pb:1,pt:1},n.createElement(f.Z,{className:o.label,variant:"button",component:"label"},"Owner",n.createElement(U.ZP,{PopperComponent:E=>n.createElement("div",{...E},E.children),multiple:!0,disableCloseOnSelect:!0,loading:nt,options:ft,value:S,getOptionSelected:(E,D)=>typeof D=="string"?(0,e.eE)(E)===D:E===D,getOptionLabel:E=>{const D=typeof E=="string"?rt.getEntity(E)||(0,e.of)(E,{defaultKind:"group",defaultNamespace:"default"}):E;return(0,Z.w)(D,(0,Z.$)(D))},onChange:(E,D)=>{P(""),W(D.map(b=>{const vt=typeof b=="string"?b:(0,e.eE)(b);return typeof b!="string"&&rt.setEntity(b),vt}))},filterOptions:E=>E,renderOption:(E,{selected:D})=>n.createElement(dt,{entity:E,isSelected:D}),size:"small",popupIcon:n.createElement(A.Z,{"data-testid":"owner-picker-expand"}),renderInput:E=>n.createElement(h.Z,{...E,className:o.input,onChange:D=>{P(D.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:E=>{const D=E.currentTarget;Math.abs(D.scrollHeight-D.clientHeight-D.scrollTop)<1&&(y!=null&&y.cursor)&&at({items:y.items,cursor:y.cursor})},"data-testid":"owner-picker-listbox"}})))}},26166:(B,m,t)=>{t.d(m,{D:()=>e});function e(i,v){return v.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?i:i.toLocaleLowerCase("en-US")}},98696:(B,m,t)=>{t.d(m,{H:()=>x});var e=t(2784),i=t(99949),v=t(51491),g=t(59274),h=t(58185),f=t(9277),O=t(14914),T=t(51847),R=t(12864),u=t(26535),L=t(15698),A=t(55990),U=t(94935),n=t(92366),F=t(26166);const x=w=>{const{entities:G,title:V,loading:J,columns:N,actions:k,options:Z}=w,[,z]=(0,i.Z)(),j=(0,v.t)(R.Fw),C=(0,g.h_)(h.D);if(!G)return null;const M=G.map(I=>{var X;const Y=(0,O.h)(I,f.S4);return{entity:I,resolved:{docsUrl:j({namespace:(0,F.D)((X=I.metadata.namespace)!=null?X:"default",C),kind:(0,F.D)(I.kind,C),name:(0,F.D)(I.metadata.name,C)}),ownedByRelations:Y,ownedByRelationsTitle:Y.map(_=>(0,T.$)(_,{defaultKind:"group"})).join(", ")}}}),$=[n.N.createNameColumn(),n.N.createOwnerColumn(),n.N.createKindColumn(),n.N.createTypeColumn()],H=[U.n.createCopyDocsUrlAction(z)],K=20,Q=M&&M.length>K;return e.createElement(e.Fragment,null,J||M&&M.length>0?e.createElement(u.i,{isLoading:J,options:{paging:Q,pageSize:K,search:!0,actionsColumnIndex:-1,...Z},data:M,columns:N||$,actions:k||H,title:V?`${V} (${M.length})`:`All (${M.length})`}):e.createElement(L.u,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:e.createElement(A.Q,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};x.columns=n.N,x.actions=U.n},94935:(B,m,t)=>{t.d(m,{n:()=>O});var e=t(2784),i=t(39981),v=t(15459),g=t(11640),h=t(28347);const f=(0,v.Z)({root:{color:"#f3ba37"}})(g.Z),O={createCopyDocsUrlAction(T){return R=>({icon:()=>e.createElement(i.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>T(`${window.location.origin}${R.resolved.docsUrl}`)})},createStarEntityAction(T,R){return u=>{const L=u.entity,A=T(L);return{cellStyle:{paddingLeft:"1em"},icon:()=>A?e.createElement(f,null):e.createElement(h.Z,null),tooltip:A?"Remove from favorites":"Add to favorites",onClick:()=>R(L)}}}}},92366:(B,m,t)=>{t.d(m,{N:()=>R});var e=t(2784),i=t(95544),v=t(79692);const g=(0,v.Z)(u=>({value:{marginBottom:u.spacing(.75)},subvalue:{color:u.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function h(u){const{value:L,subvalue:A}=u,U=g();return e.createElement(e.Fragment,null,e.createElement(i.Z,{className:U.value},L),e.createElement(i.Z,{className:U.subvalue},A))}var f=t(87603),O=t(19631);function T(u){return u.metadata.title||u.metadata.name}const R={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:u=>e.createElement(h,{value:e.createElement(f.rU,{to:u.resolved.docsUrl},T(u.entity)),subvalue:u.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:u})=>e.createElement(O.r,{entityRefs:u.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}}},53368:(B,m,t)=>{t.r(m),t.d(m,{TechDocsIndexPage:()=>j});var e=t(2784),i=t(73557),v=t(35182),g=t(70289),h=t(63003),f=t(62862),O=t(53818),T=t(17740),R=t(92777),u=t(82154),L=t(11091),A=t(73359);class U{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":A.n}}}const n=()=>{const{updateFilters:C}=(0,f.wp)();return(0,e.useEffect)(()=>{C({techdocs:new U})},[C]),null};var F=t(99949),x=t(76635),w=t(92600),G=t(67977),V=t(74595),J=t(98696),N=t(94935),k=t(92366);const Z=C=>{var q,tt;const{columns:M,actions:$,options:H}=C,{loading:K,error:Q,entities:I,filters:Y}=(0,f.wp)(),{isStarredEntity:X,toggleStarredEntity:_}=(0,V.C)(),[,ot]=(0,F.Z)(),et=(0,x.capitalize)((tt=(q=Y.user)==null?void 0:q.value)!=null?tt:"all"),st=[N.n.createCopyDocsUrlAction(ot),N.n.createStarEntityAction(X,_)];return Q?e.createElement(w.G,{severity:"error",title:"Could not load available documentation."},e.createElement(G.O,{language:"text",text:Q.toString()})):e.createElement(J.H,{title:et,entities:I,loading:K,actions:$||st,columns:M,options:H})};Z.columns=k.N,Z.actions=N.n;const z=C=>{const{initialFilter:M="owned",columns:$,actions:H,ownerPickerMode:K}=C;return e.createElement(L.j,null,e.createElement(v.V,null,e.createElement(g.y,{title:""},e.createElement(h.q,null,"Discover documentation in your ecosystem.")),e.createElement(f.UO,null,e.createElement(O._i,null,e.createElement(O._i.Filters,null,e.createElement(n,null),e.createElement(T.E,{initialFilter:M}),e.createElement(R.d,{mode:K}),e.createElement(u.x,null)),e.createElement(O._i.Content,null,e.createElement(Z,{actions:H,columns:$}))))))},j=C=>(0,i.pC)()||e.createElement(z,{...C})},11091:(B,m,t)=>{t.d(m,{j:()=>h});var e=t(2784),i=t(99980),v=t(59274),g=t(58185);const h=f=>{var u;const{children:O}=f,R=`Documentation available in ${(u=(0,v.h_)(g.D).getOptionalString("organization.name"))!=null?u:"Backstage"}`;return e.createElement(i.g,{title:"Documentation",subtitle:R,themeId:"documentation"},O)}},62367:(B,m,t)=>{var e,i=t(71600),v=t(34590);e={value:!0},m.Z=void 0;var g=v(t(2784)),h=i(t(50175)),f=(0,h.default)(g.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");m.Z=f},39981:(B,m,t)=>{var e,i=t(71600),v=t(34590);e={value:!0},m.Z=void 0;var g=v(t(2784)),h=i(t(50175)),f=(0,h.default)(g.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");m.Z=f}}]);})();

//# sourceMappingURL=3368.fdea32f1.chunk.js.map