(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9897],{63003:(ne,x,n)=>{"use strict";n.d(x,{q:()=>ve});var e=n(70666),z=n(95544),D=n(77277),N=n(49429),K=n(61837),Q=n(86136),ce=n(49378),f=n(12231),H=n(50758),O=n(79784),me=n(79692),ue=n(90436),ae=n(41156),p=n(2784),d=n(76635),Y=n.n(d),re=n(19126),We=n.n(re),U=n(10467),M=n(52267),pe=n(87603),de=n(74309),Ee=n(71911);const ge=(0,me.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),$=({icon:Z})=>{var S;const L=(0,e.q)(),b=Z&&(S=L.getSystemIcon(Z))!=null?S:M.by;return p.createElement(b,null)},oe=({link:Z})=>{var L;return p.createElement(pe.rU,{to:Z.url},(L=Z.title)!=null?L:Z.url)},he=({item:Z})=>{var L;return p.createElement(f.Z,null,p.createElement(Q.Z,null,p.createElement($,{icon:Z.icon})),p.createElement(ce.Z,{primary:Z.title,secondary:(L=Z.links)==null?void 0:L.reduce((b,S,T)=>[...b,T>0&&p.createElement("br",{key:T}),p.createElement(oe,{link:S,key:S.url})],[])}))};function ve(Z){const{t:L}=(0,Ee.i)(de.v),{title:b,items:S,children:T}=Z,{items:w}=(0,U.v)(),[ye,X]=(0,p.useState)(!1),[J,q]=(0,p.useState)(null),F=ge(),W=(0,ae.Z)(A=>A.breakpoints.down("sm")),le=A=>{q(A.currentTarget),X(!0)},G=()=>{X(!1)};return p.createElement(p.Fragment,null,p.createElement(z.Z,{display:"flex",ml:1},W?p.createElement(K.Z,{color:"primary",size:"small",onClick:le,"data-testid":"support-button","aria-label":"Support"},p.createElement(M.by,null)):p.createElement(D.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:le,startIcon:p.createElement(M.by,null)},L("supportButton.title"))),p.createElement(O.ZP,{"data-testid":"support-button-popover",open:ye,anchorEl:J,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:G},p.createElement(H.Z,{className:F.popoverList,autoFocusItem:!!J},b&&p.createElement(f.Z,{button:!1,alignItems:"flex-start",className:F.menuItem},p.createElement(ue.Z,{variant:"subtitle1"},b)),p.Children.map(T,(A,_)=>p.createElement(f.Z,{alignItems:"flex-start",key:`child-${_}`,className:F.menuItem},A)),(S!=null?S:w).map((A,_)=>p.createElement(he,{item:A,key:`item-${_}`}))),p.createElement(N.Z,null,p.createElement(D.Z,{color:"primary",onClick:G,"aria-label":"Close"},L("supportButton.close")))))}},89897:(ne,x,n)=>{"use strict";n.r(x),n.d(x,{ImportPage:()=>yt});var e=n(2784),z=n(73557),D=n(92980),N=n(90996),K=n(35182),Q=n(70289),ce=n(63003),f=n(59274),H=n(58185),O=n(60905),me=n(41156),ue=n(60364),ae=n(93006),p=n(7089),d=n(90436),Y=n(53179),re=n(10921),We=n(82717),U=n(83946);function M(){const t=(0,f.h_)(H.D);return(0,U.V9)(t)}const pe=t=>{const{exampleLocationUrl:a="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:o="https://github.com/backstage/backstage"}=t,r=(0,f.h_)(H.D),l=r.getOptionalString("app.title")||"Backstage",i=(0,f.h_)(Y.h),c=r.has("integrations.github"),s=M();return e.createElement(ae.r,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},e.createElement(d.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",l,"."),e.createElement(d.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),e.createElement(d.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,a)),e.createElement(d.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",l," catalog."),c&&e.createElement(e.Fragment,null,e.createElement(d.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",e.createElement(p.Z,{label:"GitHub only",variant:"outlined",size:"small"})),e.createElement(d.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,o)),e.createElement(d.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",e.createElement("code",null,s)," files in the repository, previews the entities, and adds them to the ",l," ","catalog."),i.preparePullRequest&&e.createElement(d.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",e.createElement("code",null,s)," and prepares the ",l," catalog to load all entities as soon as the Pull Request is merged.")))};var de=n(31377),Ee=n(63115),ge=n(31625),$=n(79692);function oe(t){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:t,previousStates:[]}}function he(t,a){switch(a.type){case"onAnalysis":{if(t.activeState!=="analyze")return t;const{activeState:o,previousStates:r}=t,[l,i,c,s]=a.args;return{...t,analysisUrl:i,activeFlow:l,analyzeResult:c,prepareResult:s==null?void 0:s.prepareResult,activeState:(s==null?void 0:s.prepareResult)===void 0?"prepare":"review",previousStates:r.concat(o)}}case"onPrepare":{if(t.activeState!=="prepare")return t;const{activeState:o,previousStates:r}=t,[l,i]=a.args;return{...t,prepareResult:l,activeState:"review",previousStates:i!=null&&i.notRepeatable?[]:r.concat(o)}}case"onReview":{if(t.activeState!=="review")return t;const{activeState:o,previousStates:r}=t,[l]=a.args;return{...t,reviewResult:l,activeState:"finish",previousStates:r.concat(o)}}case"onGoBack":{const{activeState:o,previousStates:r}=t;return{...t,activeState:r.length>0?r[r.length-1]:o,previousStates:r.slice(0,r.length-1)}}case"onReset":return{...oe(a.initialUrl),prepareResult:t.prepareResult};default:throw new Error}}const ve=t=>{const[a,o]=(0,e.useReducer)(he,t==null?void 0:t.initialUrl,oe),{activeFlow:r,activeState:l,analysisUrl:i,previousStates:c}=a;return{activeFlow:r,activeState:l,activeStepNumber:["analyze","prepare","review","finish"].indexOf(l),analysisUrl:i,analyzeResult:a.analyzeResult,prepareResult:a.prepareResult,reviewResult:a.reviewResult,onAnalysis:(s,E,u,C)=>o({type:"onAnalysis",args:[s,E,u,C]}),onPrepare:(s,E)=>o({type:"onPrepare",args:[s,E]}),onReview:s=>o({type:"onReview",args:[s]}),onGoBack:c.length>0?()=>o({type:"onGoBack"}):void 0,onReset:()=>o({type:"onReset",initialUrl:t==null?void 0:t.initialUrl})}};var Z=n(95544),L=n(21324),b=n(5806),S=n(74828),T=n(34546),w=n(86619),ye=n(55990),X=n(77277),J=n(4614);const q=(0,$.Z)(t=>({wrapper:{marginTop:t.spacing(1),marginRight:t.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:t.spacing(1),marginRight:t.spacing(1)}})),F=t=>{const{loading:a,...o}=t,r=q();return e.createElement("div",{className:r.wrapper},e.createElement(X.Z,{color:"primary",variant:"contained",...o,disabled:t.disabled||t.loading}),t.loading&&e.createElement(J.Z,{size:"1.5rem",className:r.buttonProgress}),t.loading)},W=t=>{const a=q();return e.createElement(X.Z,{variant:"outlined",className:a.button,...t},t.children||"Back")},le=t=>{const a=q();return e.createElement(ye.Q,{color:"primary",variant:"contained",className:a.button,...t},t.children)};var G=n(4989),A=n(8554),_=n(5971),ze=n(85056),Ne=n(77666),Ke=n(82113),we=n(61837),Pe=n(11776),fe=n(38402),Re=n(86136),Ge=n(9520),Ze=n(49378),Ve=n(84905),ke=n(38016);const He=(0,$.Z)(t=>({nested:{paddingLeft:t.spacing(4)}})),ee=t=>{const{locations:a,collapsed:o=!1,locationListItemIcon:r,onItemClick:l,firstListItem:i,withLinks:c=!1}=t,s=He(),E=(0,f.h_)(_.X),[u,C]=(0,e.useState)([]),g=m=>{C(y=>y.includes(m)?y.filter(v=>v!==m):y.concat(m))};function h(m){return m.sort((y,v)=>E.forEntity((0,A.eE)(y)).snapshot.entityRef.localeCompare(E.forEntity((0,A.eE)(v)).snapshot.entityRef))}return e.createElement(Pe.Z,null,i,a.map(m=>e.createElement(e.Fragment,{key:m.target},e.createElement(fe.Z,{dense:!0,button:!!l,onClick:()=>l==null?void 0:l(m.target)},e.createElement(Re.Z,null,r(m.target)),e.createElement(Ze.Z,{primary:m.target,secondary:`Entities: ${m.entities.length}`}),o&&e.createElement(Ge.Z,null,e.createElement(we.Z,{edge:"end",onClick:()=>g(m.target)},u.includes(m.target)?e.createElement(Ve.Z,null):e.createElement(ke.Z,null)))),e.createElement(Ke.Z,{in:!o||u.includes(m.target),timeout:"auto",unmountOnExit:!0},e.createElement(Pe.Z,{component:"div",disablePadding:!0,dense:!0},h(m.entities).map(y=>e.createElement(fe.Z,{key:(0,A.eE)(y),className:s.nested,...c?{component:ze.d,entityRef:y,button:c}:{}},e.createElement(Ze.Z,{primary:e.createElement(Ne.c,{entityRef:y})}))))))))};var Se=n(87603),$e=n(96795),Le=n.n($e),je=n(24978),Qe=n(96671),Ye=n(51491);const Xe=t=>{var a,o;for(const r of t)for(const l of r.entities)if(["component","api","resource"].includes(l.kind.toLocaleLowerCase("en-US")))return{kind:l.kind.toLocaleLowerCase("en-US"),namespace:(o=(a=l.namespace)==null?void 0:a.toLocaleLowerCase("en-US"))!=null?o:je.zG,name:l.name};return null},Je=({prepareResult:t,onReset:a})=>{const o=(0,Ye.t)(Qe.w);if(t.type==="repository")return e.createElement(e.Fragment,null,e.createElement(d.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Se.rU,{to:t.pullRequest.url,target:"_blank",rel:"noreferrer"},t.pullRequest.url)),e.createElement(d.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),e.createElement(O.Z,{container:!0,spacing:0},e.createElement(W,{onClick:a},"Register another")));const[r,l]=Le()(t.locations,c=>c.exists),i=Xe(l);return e.createElement(e.Fragment,null,l.length>0&&e.createElement(e.Fragment,null,e.createElement(d.Z,null,"The following entities have been added to the catalog:"),e.createElement(ee,{locations:l,locationListItemIcon:()=>e.createElement(G.Z,null),withLinks:!0})),r.length>0&&e.createElement(e.Fragment,null,e.createElement(d.Z,null,"A refresh was triggered for the following locations:"),e.createElement(ee,{locations:r,locationListItemIcon:()=>e.createElement(G.Z,null),withLinks:!0})),e.createElement(O.Z,{container:!0,spacing:0},i&&e.createElement(le,{to:o(i)},"View Component"),e.createElement(W,{onClick:a},"Register another")))};var Ie=n(5191),se=n(63955);const qe=t=>{const{onAnalysis:a,analysisUrl:o="",disablePullRequest:r=!1,exampleLocationUrl:l="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=t,i=(0,f.h_)(Ie.V),c=(0,f.h_)(Y.h),{register:s,handleSubmit:E,formState:{errors:u},watch:C}=(0,se.cI)({mode:"onTouched",defaultValues:{url:o}}),[g,h]=(0,e.useState)(!1),[m,y]=(0,e.useState)(void 0),v=(0,e.useCallback)(async({url:R})=>{var V,j,ie;h(!0);try{const P=await c.analyzeUrl(R);switch(P.type){case"repository":!r&&P.generatedEntities.length>0?a("no-location",R,P):(y("Couldn't generate entities for your repository"),h(!1));break;case"locations":{P.locations.length===1?a("single-location",R,P,{prepareResult:P}):P.locations.length>1?a("multiple-locations",R,P):(y("There are no entities at this location"),h(!1));break}default:{const te=`Received unknown analysis result of type ${P.type}. Please contact the support team.`;y(te),h(!1),i.post(new Error(te));break}}}catch(P){y((ie=(j=(V=P==null?void 0:P.data)==null?void 0:V.error)==null?void 0:j.message)!=null?ie:P.message),h(!1)}},[c,r,i,a]);return e.createElement("form",{onSubmit:E(v)},e.createElement(w.Z,{...(0,U.dv)(s("url",{required:!0,validate:{httpsValidator:R=>typeof R=="string"&&R.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"URL",placeholder:l,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:!!u.url,required:!0}),u.url&&e.createElement(S.Z,{error:!0},u.url.message),m&&e.createElement(S.Z,{error:!0},m),e.createElement(O.Z,{container:!0,spacing:0},e.createElement(F,{disabled:!!u.url||!C("url"),loading:g,type:"submit"},"Analyze")))};var _e=n(97570);const et=t=>{const{name:a,options:o,required:r,errors:l,rules:i,loading:c=!1,loadingText:s,helperText:E,errorHelperText:u,textFieldProps:C={}}=t;return e.createElement(se.Qr,{name:a,rules:i,render:({field:{onChange:g}})=>e.createElement(_e.ZP,{loading:c,loadingText:s,options:o||[],autoSelect:!0,freeSolo:!0,onChange:(h,m)=>g(m),renderInput:h=>e.createElement(w.Z,{...h,helperText:(l==null?void 0:l[a])&&u||E,error:!!(l!=null&&l[a]),margin:"normal",variant:"outlined",required:r,InputProps:{...h.InputProps,endAdornment:e.createElement(e.Fragment,null,c?e.createElement(J.Z,{color:"inherit",size:"1em"}):null,h.InputProps.endAdornment)},...C})})})};var tt=n(76635),Te=n(32272),Ae=n(23200),nt=n(51847),Be=n(4812);const at=t=>{const{defaultValues:a,onSubmit:o,render:r}=t,l=(0,se.cI)({mode:"onTouched",defaultValues:a}),{handleSubmit:i,watch:c,control:s,register:E,formState:u,setValue:C}=l;return e.createElement(se.RV,{...l},e.createElement("form",{onSubmit:i(o)},r({values:c(),formState:u,register:E,control:s,setValue:C})))};var Oe=n(94339),xe=n(24579),De=n(32552),rt=n(67977);const ot=t=>{const{repositoryUrl:a,entities:o,classes:r}=t,l=M();return e.createElement(Oe.Z,{variant:"outlined",className:r==null?void 0:r.card},e.createElement(De.Z,{title:e.createElement("code",null,`${(0,tt.trimEnd)(a,"/")}/${l}`)}),e.createElement(xe.Z,{className:r==null?void 0:r.cardContent},e.createElement(rt.O,{text:o.map(i=>re.ZP.stringify(i)).join(`---
`).trim(),language:"yaml"})))};var lt=n(22769);const st=t=>{const{title:a,description:o,classes:r}=t;return e.createElement(Oe.Z,{variant:"outlined",className:r==null?void 0:r.card},e.createElement(De.Z,{title:a,subheader:"Create a new Pull Request"}),e.createElement(xe.Z,{className:r==null?void 0:r.cardContent},e.createElement(lt.S,{content:o})))},it=(0,$.Z)(t=>({previewCard:{marginTop:t.spacing(1)},previewCardContent:{paddingTop:0}}));function Ce(t,a,o){return t.map(r=>({...r,apiVersion:r.apiVersion,kind:r.kind,metadata:{...r.metadata,name:a},spec:{...r.spec,...o?{owner:o}:{}}}))}const ct=t=>{var P,te,Ue,Me,be,Fe;const{analyzeResult:a,onPrepare:o,onGoBack:r,renderFormFields:l}=t,i=it(),c=(0,f.h_)(Ae.A),s=(0,f.h_)(Y.h),E=(0,f.h_)(Ie.V),[u,C]=(0,e.useState)(!1),[g,h]=(0,e.useState)(),m=M(),{loading:y,value:v,error:R}=(0,Be.Z)(()=>s.preparePullRequest(),[s.preparePullRequest]);(0,e.useEffect)(()=>{R&&E.post(R)},[R,E]);const{loading:V,value:j}=(0,Be.Z)(async()=>(await c.getEntities({filter:{kind:"group"}})).items.map(B=>(0,nt.$)(B,{defaultKind:"group"})).sort()),ie=(0,e.useCallback)(async I=>{C(!0);try{const B=await s.submitPullRequest({repositoryUrl:a.url,title:I.title,body:I.body,fileContent:Ce(a.generatedEntities,I.componentName,I.owner).map(k=>re.ZP.stringify(k)).join(`---
`)});o({type:"repository",url:a.url,integrationType:a.integrationType,pullRequest:{url:B.link},locations:[{target:B.location,entities:Ce(a.generatedEntities,I.componentName,I.owner).map(k=>({kind:k.kind,namespace:k.metadata.namespace,name:k.metadata.name}))}]},{notRepeatable:!0})}catch(B){(0,Te.BD)(B),h(B.message),C(!1)}},[a.generatedEntities,a.integrationType,a.url,s,o]);return e.createElement(e.Fragment,null,e.createElement(d.Z,null,"You entered a link to a ",a.integrationType," repository but a"," ",e.createElement("code",null,m)," could not be found. Use this form to open a Pull Request that creates one."),!y&&e.createElement(at,{onSubmit:ie,defaultValues:{title:(P=v==null?void 0:v.title)!=null?P:"",body:(te=v==null?void 0:v.body)!=null?te:"",owner:((Me=(Ue=a.generatedEntities[0])==null?void 0:Ue.spec)==null?void 0:Me.owner)||"",componentName:((Fe=(be=a.generatedEntities[0])==null?void 0:be.metadata)==null?void 0:Fe.name)||"",useCodeowners:!1},render:({values:I,formState:B,register:k,setValue:ft})=>e.createElement(e.Fragment,null,l({values:I,formState:B,register:k,setValue:ft,groups:j!=null?j:[],groupsLoading:V}),e.createElement(Z.Z,{marginTop:2},e.createElement(d.Z,{variant:"h6"},"Preview Pull Request")),e.createElement(st,{title:I.title,description:I.body,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),e.createElement(Z.Z,{marginTop:2,marginBottom:1},e.createElement(d.Z,{variant:"h6"},"Preview Entities")),e.createElement(ot,{entities:Ce(a.generatedEntities,I.componentName,I.owner),repositoryUrl:a.url,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),g&&e.createElement(S.Z,{error:!0},g),e.createElement(O.Z,{container:!0,spacing:0},r&&e.createElement(W,{onClick:r,disabled:u}),e.createElement(F,{type:"submit",disabled:!!(B.errors.title||B.errors.body||B.errors.owner),loading:u},"Create PR")))}))},mt=({analyzeResult:t,prepareResult:a,onPrepare:o,onGoBack:r})=>{const[l,i]=(0,e.useState)((a==null?void 0:a.locations.map(g=>g.target))||[]),[c,s]=Le()(t==null?void 0:t.locations,g=>g.exists),E=(0,e.useCallback)(async()=>{o({type:"locations",locations:s.filter(g=>l.includes(g.target))})},[s,o,l]),u=g=>{i(h=>h.includes(g)?h.filter(m=>m!==g):h.concat(g))},C=()=>{i(g=>g.length<s.length?s.map(h=>h.target):[])};return e.createElement(e.Fragment,null,s.length>0&&e.createElement(e.Fragment,null,e.createElement(d.Z,null,"Select one or more locations that are present in your git repository:"),e.createElement(ee,{firstListItem:e.createElement(fe.Z,{dense:!0,button:!0,onClick:C},e.createElement(Re.Z,null,e.createElement(L.Z,{edge:"start",checked:l.length===s.length,indeterminate:l.length>0&&l.length<s.length,tabIndex:-1,disableRipple:!0})),e.createElement(Ze.Z,{primary:"Select All"})),onItemClick:u,locations:s,locationListItemIcon:g=>e.createElement(L.Z,{edge:"start",checked:l.includes(g),tabIndex:-1,disableRipple:!0}),collapsed:!0})),c.length>0&&e.createElement(e.Fragment,null,e.createElement(d.Z,null,"These locations already exist in the catalog:"),e.createElement(ee,{locations:c,locationListItemIcon:()=>e.createElement(G.Z,null),withLinks:!0,collapsed:!0})),e.createElement(O.Z,{container:!0,spacing:0},r&&e.createElement(W,{onClick:r}),e.createElement(F,{disabled:l.length===0,onClick:E},"Review")))};var ut=n(92641);const pt=({prepareResult:t,onReview:a,onGoBack:o})=>{const r=(0,f.h_)(Ae.A),l=(0,f.h_)(H.D),i=(0,ut.z)(),c=l.getOptionalString("app.title")||"Backstage",[s,E]=(0,e.useState)(!1),[u,C]=(0,e.useState)(),g=!!(t.type==="locations"&&t.locations.some(m=>m.exists)),h=(0,e.useCallback)(async()=>{E(!0),i.captureEvent("click","import entity");try{let m=new Array;t.type==="locations"&&(m=await Promise.all(t.locations.filter(v=>v.exists).map(async v=>{var V;const R=(0,A.eE)((V=v.entities[0])!=null?V:v);return await r.refreshEntity(R),{target:v.target}})));const y=await Promise.all(t.locations.filter(v=>!v.exists).map(async v=>{const R=await r.addLocation({type:"url",target:v.target});return{target:R.location.target,entities:R.entities}}));a({...t,refreshed:m,locations:y})}catch(m){(0,Te.BD)(m),t.type==="repository"&&m.message.startsWith("Location was added but has no entities specified yet")?a({...t,locations:t.locations.map(y=>({target:y.target,entities:[]}))}):(C(m.message),E(!1))}},[t,a,r,i]);return e.createElement(e.Fragment,null,t.type==="repository"&&e.createElement(e.Fragment,null,e.createElement(d.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Se.rU,{to:t.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},t.pullRequest.url)),e.createElement(d.Z,{paragraph:!0},"You can already import the location and ",c," will fetch the entities as soon as the Pull Request is merged.")),e.createElement(d.Z,null,g?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),e.createElement(ee,{locations:t.locations,locationListItemIcon:()=>e.createElement(G.Z,null)}),u&&e.createElement(S.Z,{error:!0},u),e.createElement(O.Z,{container:!0,spacing:0},o&&e.createElement(W,{onClick:o,disabled:s}),e.createElement(F,{disabled:s,loading:s,onClick:()=>h()},g?"Refresh":"Import")))};function dt(t,a){switch(t){case"single-location":return{...a,prepare:()=>({stepLabel:e.createElement(T.Z,{optional:e.createElement(d.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:e.createElement(e.Fragment,null)})};case"multiple-locations":return{...a,prepare:(o,r)=>o.analyzeResult.type!=="locations"?a.prepare(o,r):{stepLabel:e.createElement(T.Z,{optional:e.createElement(d.Z,{variant:"caption"},"Discovered Locations: ",o.analyzeResult.locations.length)},"Select Locations"),content:e.createElement(mt,{analyzeResult:o.analyzeResult,prepareResult:o.prepareResult,onPrepare:o.onPrepare,onGoBack:o.onGoBack})}};case"no-location":return{...a,prepare:(o,r)=>o.analyzeResult.type!=="repository"?a.prepare(o,r):{stepLabel:e.createElement(T.Z,null,"Create Pull Request"),content:e.createElement(ct,{analyzeResult:o.analyzeResult,onPrepare:o.onPrepare,onGoBack:o.onGoBack,renderFormFields:({values:l,setValue:i,formState:c,groupsLoading:s,groups:E,register:u})=>e.createElement(e.Fragment,null,e.createElement(Z.Z,{marginTop:2},e.createElement(d.Z,{variant:"h6"},"Pull Request Details")),e.createElement(w.Z,{...(0,U.dv)(u("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.title,required:!0}),e.createElement(w.Z,{...(0,U.dv)(u("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.body,multiline:!0,required:!0}),e.createElement(Z.Z,{marginTop:2},e.createElement(d.Z,{variant:"h6"},"Entity Configuration")),e.createElement(w.Z,{...(0,U.dv)(u("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.componentName,required:!0}),!l.useCodeowners&&e.createElement(et,{name:"owner",errors:c.errors,options:E||[],loading:s,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),e.createElement(b.Z,{control:e.createElement(L.Z,{...(0,U.dv)(u("useCodeowners")),onChange:(C,g)=>{g&&i("owner","")}}),label:e.createElement(e.Fragment,null,"Use ",e.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),e.createElement(S.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return a}}const Et={analyze:(t,{apis:a})=>({stepLabel:e.createElement(T.Z,null,"Select URL"),content:e.createElement(qe,{key:"analyze",analysisUrl:t.analysisUrl,onAnalysis:t.onAnalysis,disablePullRequest:!a.catalogImportApi.preparePullRequest})}),prepare:t=>({stepLabel:e.createElement(T.Z,{optional:e.createElement(d.Z,{variant:"caption"},"Optional")},"Import Actions"),content:e.createElement(W,{onClick:t.onGoBack})}),review:t=>({stepLabel:e.createElement(T.Z,null,"Review"),content:e.createElement(pt,{prepareResult:t.prepareResult,onReview:t.onReview,onGoBack:t.onGoBack})}),finish:t=>({stepLabel:e.createElement(T.Z,null,"Finish"),content:e.createElement(Je,{prepareResult:t.prepareResult,onReset:t.onReset})})},gt=(0,$.Z)(()=>({stepperRoot:{padding:0}})),ht=t=>{const{initialUrl:a,generateStepper:o=dt,variant:r}=t,l=(0,f.h_)(Y.h),i=gt(),c=ve({initialUrl:a}),s=(0,e.useMemo)(()=>o(c.activeFlow,Et),[o,c.activeFlow]),E=u=>e.createElement(de.Z,null,u.stepLabel,e.createElement(Ee.Z,null,u.content));return e.createElement(ae.r,{variant:r},e.createElement(ge.Z,{classes:{root:i.stepperRoot},activeStep:c.activeStepNumber,orientation:"vertical"},E(s.analyze(c,{apis:{catalogImportApi:l}})),E(s.prepare(c,{apis:{catalogImportApi:l}})),E(s.review(c,{apis:{catalogImportApi:l}})),E(s.finish(c,{apis:{catalogImportApi:l}}))))},vt=()=>{const t=(0,ue.Z)(),a=(0,f.h_)(H.D),o=(0,me.Z)(t.breakpoints.down("sm")),r=a.getOptionalString("app.title")||"Backstage",l=[e.createElement(O.Z,{key:0,item:!0,xs:12,md:4,lg:6,xl:8},e.createElement(pe,null)),e.createElement(O.Z,{key:1,item:!0,xs:12,md:8,lg:6,xl:4},e.createElement(ht,null))];return e.createElement(D.T,{themeId:"home"},e.createElement(N.h,{title:"Register an existing component"}),e.createElement(K.V,null,e.createElement(Q.y,{title:`Start tracking your component in ${r}`},e.createElement(ce.q,null,"Start tracking your component in ",r," by adding it to the software catalog.")),e.createElement(O.Z,{container:!0,spacing:2},o?l:l.reverse())))},yt=()=>(0,z.pC)()||e.createElement(vt,null)},84905:(ne,x,n)=>{"use strict";var e,z=n(71600),D=n(34590);e={value:!0},x.Z=void 0;var N=D(n(2784)),K=z(n(50175)),Q=(0,K.default)(N.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");x.Z=Q},96795:(ne,x,n)=>{var e=n(36740),z=e(function(D,N,K){D[K?0:1].push(N)},function(){return[[],[]]});ne.exports=z}}]);})();

//# sourceMappingURL=9897.b95ba7f0.chunk.js.map