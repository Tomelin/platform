"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7056],{63003:(ve,N,e)=>{e.d(N,{q:()=>Pe});var i=e(70666),U=e(95544),z=e(77277),Y=e(49429),W=e(61837),q=e(86136),Ee=e(49378),ie=e(12231),ye=e(50758),Q=e(79784),u=e(79692),Ce=e(90436),d=e(41156),r=e(2784),pe=e(76635),le=e.n(pe),Re=e(19126),t=e.n(Re),ce=e(10467),se=e(52267),Ie=e(87603),oe=e(74309),ee=e(71911);const fe=(0,u.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),he=({icon:K})=>{var te;const V=(0,i.q)(),J=K&&(te=V.getSystemIcon(K))!=null?te:se.by;return r.createElement(J,null)},ge=({link:K})=>{var V;return r.createElement(Ie.rU,{to:K.url},(V=K.title)!=null?V:K.url)},X=({item:K})=>{var V;return r.createElement(ie.Z,null,r.createElement(q.Z,null,r.createElement(he,{icon:K.icon})),r.createElement(Ee.Z,{primary:K.title,secondary:(V=K.links)==null?void 0:V.reduce((J,te,s)=>[...J,s>0&&r.createElement("br",{key:s}),r.createElement(ge,{link:te,key:te.url})],[])}))};function Pe(K){const{t:V}=(0,ee.i)(oe.v),{title:J,items:te,children:s}=K,{items:p}=(0,ce.v)(),[g,v]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null),S=fe(),G=(0,d.Z)(f=>f.breakpoints.down("sm")),O=f=>{M(f.currentTarget),v(!0)},k=()=>{v(!1)};return r.createElement(r.Fragment,null,r.createElement(U.Z,{display:"flex",ml:1},G?r.createElement(W.Z,{color:"primary",size:"small",onClick:O,"data-testid":"support-button","aria-label":"Support"},r.createElement(se.by,null)):r.createElement(z.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:O,startIcon:r.createElement(se.by,null)},V("supportButton.title"))),r.createElement(Q.ZP,{"data-testid":"support-button-popover",open:g,anchorEl:E,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:k},r.createElement(ye.Z,{className:S.popoverList,autoFocusItem:!!E},J&&r.createElement(ie.Z,{button:!1,alignItems:"flex-start",className:S.menuItem},r.createElement(Ce.Z,{variant:"subtitle1"},J)),r.Children.map(s,(f,m)=>r.createElement(ie.Z,{alignItems:"flex-start",key:`child-${m}`,className:S.menuItem},f)),(te!=null?te:p).map((f,m)=>r.createElement(X,{item:f,key:`item-${m}`}))),r.createElement(Y.Z,null,r.createElement(z.Z,{color:"primary",onClick:k,"aria-label":"Close"},V("supportButton.close")))))}},17056:(ve,N,e)=>{e.r(N),e.d(N,{CatalogGraphPage:()=>Ze});var i=e(8554),U=e(92980),z=e(90996),Y=e(35182),W=e(70289),q=e(63003),Ee=e(51491),ie=e(92641),ye=e(96671),Q=e(51847),u=e(60905),Ce=e(27556),d=e(90436),r=e(79692),pe=e(36444),le=e(60008),Re=e(13737),t=e(2784),ce=e(73557),se=e(45327),Ie=e(21652),oe=e(39802),ee=e(95544);const fe={curveMonotoneX:"Monotone X",curveStepBefore:"Step Before"},he=["curveMonotoneX","curveStepBefore"],ge=({value:n,onChange:c})=>{const a=(0,t.useCallback)(h=>c(h),[c]);return t.createElement(ee.Z,{pb:1,pt:1},t.createElement(oe.H,{label:"Curve",selected:n,items:he.map(h=>({label:fe[h],value:h})),onChange:a}))};var X=e(40718);const Pe={[X.N.LEFT_RIGHT]:"Left to right",[X.N.RIGHT_LEFT]:"Right to left",[X.N.TOP_BOTTOM]:"Top to bottom",[X.N.BOTTOM_TOP]:"Bottom to top"},K=({value:n,onChange:c})=>{const a=(0,t.useCallback)(h=>c(h),[c]);return t.createElement(ee.Z,{pb:1,pt:1},t.createElement(oe.H,{label:"Direction",selected:n,items:Object.values(X.N).map(h=>({label:Pe[h],value:h})),onChange:a}))};var V=e(42494),J=e(61837),te=e(50581),s=e(20633),p=e(33375);const g=(0,r.Z)({formControl:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphMaxDepthFilter"}),v=({value:n,onChange:c})=>{const a=g(),h=(0,t.useRef)(c),[b,R]=(0,t.useState)(n);(0,t.useEffect)(()=>{h.current=c},[c]),(0,t.useEffect)(()=>{R(n)},[n]);const Z=(0,t.useCallback)(_=>{const $=Number(_.target.value),x=Number.isFinite($)&&$>0?$:Number.POSITIVE_INFINITY;R(x),h.current(x)},[]),I=(0,t.useCallback)(()=>{R(Number.POSITIVE_INFINITY),h.current(Number.POSITIVE_INFINITY)},[h]);return t.createElement(ee.Z,{pb:1,pt:1},t.createElement(V.Z,{variant:"outlined",className:a.formControl},t.createElement(d.Z,{variant:"button"},"Max Depth"),t.createElement(s.Z,{type:"number",placeholder:"\u221E Infinite",value:Number.isFinite(b)?String(b):"",onChange:Z,endAdornment:t.createElement(te.Z,{position:"end"},t.createElement(J.Z,{"aria-label":"clear max depth",onClick:I,edge:"end"},t.createElement(p.Z,null))),inputProps:{"aria-label":"maxp"},labelWidth:0})))};var E=e(59274),M=e(95475),S=e(23200),G=e(21324),O=e(5806),k=e(86619),f=e(19996),m=e(25505),y=e(38016),B=e(97570),L=e(4812);const T=(0,r.Z)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedKindsFilter"}),H=({value:n,onChange:c})=>{const a=T(),h=(0,E.h_)(M.$),b=(0,E.h_)(S.A),{error:R,value:Z}=(0,L.Z)(async()=>await b.getEntityFacets({facets:["kind"]}).then(x=>{var F;return((F=x.facets.kind)==null?void 0:F.map(ae=>ae.value).sort())||[]}));(0,t.useEffect)(()=>{R&&h.post({message:"Failed to load entity kinds",severity:"error"})},[R,h]);const I=(0,t.useMemo)(()=>Z&&Z.map(x=>x.toLocaleLowerCase("en-US")),[Z]),_=(0,t.useCallback)((x,F)=>{c(I&&I.every(ae=>F.includes(ae))?void 0:F)},[I,c]),$=(0,t.useCallback)(()=>{c(n!=null&&n.length?n:void 0)},[n,c]);return!(Z!=null&&Z.length)||!(I!=null&&I.length)||R?t.createElement(t.Fragment,null):t.createElement(ee.Z,{pb:1,pt:1},t.createElement(d.Z,{variant:"button"},"Kinds"),t.createElement(B.ZP,{className:a.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:I,value:n!=null?n:I,getOptionLabel:x=>{var F;return(F=Z[I.indexOf(x)])!=null?F:x},onChange:_,onBlur:$,renderOption:(x,{selected:F})=>{var ae;return t.createElement(O.Z,{control:t.createElement(G.Z,{icon:t.createElement(m.Z,{fontSize:"small"}),checkedIcon:t.createElement(f.Z,{fontSize:"small"}),checked:F}),label:(ae=Z[I.indexOf(x)])!=null?ae:x})},size:"small",popupIcon:t.createElement(y.Z,{"data-testid":"selected-kinds-expand"}),renderInput:x=>t.createElement(k.Z,{...x,variant:"outlined"})}))},D=(0,r.Z)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedRelationsFilter"}),ne=({relationPairs:n,value:c,onChange:a})=>{const h=D(),b=(0,t.useMemo)(()=>n.flat(),[n]),R=(0,t.useCallback)((I,_)=>{a(b.every($=>_.includes($))?void 0:_)},[b,a]),Z=(0,t.useCallback)(()=>{a(c!=null&&c.length?c:void 0)},[c,a]);return t.createElement(ee.Z,{pb:1,pt:1},t.createElement(d.Z,{variant:"button"},"Relations"),t.createElement(B.ZP,{className:h.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:b,value:c!=null?c:b,onChange:R,onBlur:Z,renderOption:(I,{selected:_})=>t.createElement(O.Z,{control:t.createElement(G.Z,{icon:t.createElement(m.Z,{fontSize:"small"}),checkedIcon:t.createElement(f.Z,{fontSize:"small"}),checked:_}),label:I}),size:"small",popupIcon:t.createElement(y.Z,{"data-testid":"selected-relations-expand"}),renderInput:I=>t.createElement(k.Z,{...I,variant:"outlined"})}))};var de=e(82938);const P=(0,r.Z)({root:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphSwitchFilter"}),C=({label:n,value:c,onChange:a})=>{const h=P(),b=(0,t.useCallback)(R=>{a(R.target.checked)},[a]);return t.createElement(ee.Z,{pb:1,pt:1},t.createElement(O.Z,{control:t.createElement(de.Z,{checked:c,onChange:b,name:n,color:"primary"}),label:n,className:h.root}))};var o=e(19126),A=e.n(o),j=e(76539);function w({initialState:n={}}){const c=(0,ce.TH)(),a=(0,t.useMemo)(()=>A().parse(c.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[c.search]),[h,b]=(0,t.useState)(()=>{var l;return(Array.isArray(a.rootEntityRefs)?a.rootEntityRefs:(l=n==null?void 0:n.rootEntityRefs)!=null?l:[]).map(me=>(0,i.of)(me))}),[R,Z]=(0,t.useState)(()=>{var l;return typeof a.maxDepth=="string"?re(a.maxDepth):(l=n==null?void 0:n.maxDepth)!=null?l:Number.POSITIVE_INFINITY}),[I,_]=(0,t.useState)(()=>Array.isArray(a.selectedRelations)?a.selectedRelations:n==null?void 0:n.selectedRelations),[$,x]=(0,t.useState)(()=>{var l;return(l=Array.isArray(a.selectedKinds)?a.selectedKinds:n==null?void 0:n.selectedKinds)==null?void 0:l.map(me=>me.toLocaleLowerCase("en-US"))}),[F,ae]=(0,t.useState)(()=>{var l;return typeof a.unidirectional=="string"?a.unidirectional==="true":(l=n==null?void 0:n.unidirectional)!=null?l:!0}),[Oe,Ne]=(0,t.useState)(()=>{var l;return typeof a.mergeRelations=="string"?a.mergeRelations==="true":(l=n==null?void 0:n.mergeRelations)!=null?l:!0}),[De,Se]=(0,t.useState)(()=>{var l;return typeof a.direction=="string"?a.direction:(l=n==null?void 0:n.direction)!=null?l:X.N.LEFT_RIGHT}),[Fe,be]=(0,t.useState)(()=>{var l;return typeof a.curve=="string"?a.curve:(l=n==null?void 0:n.curve)!=null?l:"curveMonotoneX"}),[Te,xe]=(0,t.useState)(()=>{var l;return typeof a.showFilters=="string"?a.showFilters==="true":(l=n==null?void 0:n.showFilters)!=null?l:!0}),We=(0,t.useCallback)(()=>xe(l=>!l),[xe]),Be=(0,j.Z)(c.search);(0,t.useEffect)(()=>{c.search!==Be&&(Array.isArray(a.rootEntityRefs)&&b(a.rootEntityRefs.map(l=>(0,i.of)(l))),typeof a.maxDepth=="string"&&Z(re(a.maxDepth)),Array.isArray(a.selectedKinds)&&x(a.selectedKinds),Array.isArray(a.selectedRelations)&&_(a.selectedRelations),typeof a.unidirectional=="string"&&ae(a.unidirectional==="true"),typeof a.mergeRelations=="string"&&Ne(a.mergeRelations==="true"),typeof a.direction=="string"&&Se(a.direction),typeof a.showFilters=="string"&&xe(a.showFilters==="true"))},[Be,c.search,a,b,Z,x,_,ae,Ne,Se,xe]);const Me=(0,j.Z)(h.map(l=>(0,i.eE)(l)));return(0,t.useEffect)(()=>{const l=h.map(ue=>(0,i.eE)(ue)),me=A().stringify({rootEntityRefs:l,maxDepth:isFinite(R)?R:"\u221E",selectedKinds:$,selectedRelations:I,unidirectional:F,mergeRelations:Oe,direction:De,showFilters:Te},{arrayFormat:"brackets",addQueryPrefix:!0}),Ke=`${window.location.pathname}${me}`;!Me||l.length===Me.length&&l.every((ue,Ue)=>ue===Me[Ue])?window.history.replaceState(null,document.title,Ke):window.history.pushState(null,document.title,Ke)},[h,R,$,I,F,Oe,De,Te,Me]),{rootEntityNames:h,setRootEntityNames:b,maxDepth:R,setMaxDepth:Z,selectedRelations:I,setSelectedRelations:_,selectedKinds:$,setSelectedKinds:x,unidirectional:F,setUnidirectional:ae,mergeRelations:Oe,setMergeRelations:Ne,direction:De,setDirection:Se,curve:Fe,setCurve:be,showFilters:Te,toggleShowFilters:We}}function re(n){return n==="\u221E"?Number.POSITIVE_INFINITY:Number(n)}const Ae=(0,r.Z)(n=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:n.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:n.spacing(1),gridAutoRows:"auto",[n.breakpoints.up("lg")]:{display:"block"},[n.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[n.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[n.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}}),{name:"PluginCatalogGraphCatalogGraphPage"}),Ze=n=>{const{relationPairs:c=Ie.v,initialState:a,entityFilter:h}=n,b=(0,ce.s0)(),R=Ae(),Z=(0,Ee.t)(ye.w),{maxDepth:I,setMaxDepth:_,selectedKinds:$,setSelectedKinds:x,selectedRelations:F,setSelectedRelations:ae,unidirectional:Oe,setUnidirectional:Ne,mergeRelations:De,setMergeRelations:Se,direction:Fe,setDirection:be,curve:Te,setCurve:xe,rootEntityNames:We,setRootEntityNames:Be,showFilters:Me,toggleShowFilters:l}=w({initialState:a}),me=(0,ie.z)(),Ke=(0,t.useCallback)((ue,Ue)=>{var ze,Ge;const Le=(0,i.of)(ue.id);if(Ue.shiftKey){const He=Z({kind:Le.kind.toLocaleLowerCase("en-US"),namespace:Le.namespace.toLocaleLowerCase("en-US"),name:Le.name});me.captureEvent("click",(ze=ue.entity.metadata.title)!=null?ze:(0,Q.$)(Le),{attributes:{to:He}}),b(He)}else me.captureEvent("click",(Ge=ue.entity.metadata.title)!=null?Ge:(0,Q.$)(Le)),Be([Le])},[Z,b,Be,me]);return t.createElement(U.T,{themeId:"home"},t.createElement(z.h,{title:"Catalog Graph",subtitle:We.map(ue=>(0,Q.$)(ue)).join(", ")}),t.createElement(Y.V,{stretch:!0,className:R.content},t.createElement(W.y,{titleComponent:t.createElement(Re.Z,{value:"show filters",selected:Me,onChange:()=>l()},t.createElement(pe.Z,null)," Filters")},t.createElement(q.q,null,"Start tracking your component in by adding it to the software catalog.")),t.createElement(u.Z,{container:!0,alignItems:"stretch",className:R.container},Me&&t.createElement(u.Z,{item:!0,xs:12,lg:2,className:R.filters},t.createElement(v,{value:I,onChange:_}),t.createElement(H,{value:$,onChange:x}),t.createElement(ne,{value:F,onChange:ae,relationPairs:c}),t.createElement(K,{value:Fe,onChange:be}),t.createElement(ge,{value:Te,onChange:xe}),t.createElement(C,{value:Oe,onChange:Ne,label:"Simplified"}),t.createElement(C,{value:De,onChange:Se,label:"Merge Relations"})),t.createElement(u.Z,{item:!0,xs:!0,className:R.fullHeight},t.createElement(Ce.Z,{className:R.graphWrapper},t.createElement(d.Z,{variant:"caption",color:"textSecondary",display:"block",className:R.legend},t.createElement(le.Z,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."),t.createElement(se._,{...n,rootEntityNames:We,maxDepth:I,kinds:$&&$.length>0?$:void 0,relations:F&&F.length>0?F:void 0,mergeRelations:De,unidirectional:Oe,onNodeClick:Ke,direction:Fe,relationPairs:c,entityFilter:h,className:R.graph,zoom:"enabled",curve:Te}))))))}},45327:(ve,N,e)=>{e.d(N,{_:()=>te});var i=e(8554),U=e(65872),z=e(43103),Y=e(59274),W=e(5191),q=e(4614),Ee=e(79692),ie=e(60364),ye=e(12524),Q=e.n(ye),u=e(2784),Ce=e(10368);const d=(0,Ce.Z)(s=>({text:{fill:s.palette.textContrast},secondary:{fill:s.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function r({edge:{relations:s}}){const p=d();return u.createElement("text",{className:p.text,textAnchor:"middle"},s.map((g,v)=>u.createElement("tspan",{key:g,className:Q()(v%2!==0&&p.secondary)},v>0&&u.createElement("tspan",null," / "),g)))}var pe=e(70666),le=e(51847),Re=e(72379);function t({kind:s,...p}){var E;const v=(E=(0,pe.q)().getSystemIcon(`kind:${s.toLocaleLowerCase("en-US")}`))!=null?E:Re.Z;return u.createElement(v,{...p})}var ce=e(24978);const se=(0,Ee.Z)(s=>({node:{fill:s.palette.grey[300],stroke:s.palette.grey[300],"&.primary":{fill:s.palette.primary.light,stroke:s.palette.primary.light},"&.secondary":{fill:s.palette.secondary.light,stroke:s.palette.secondary.light}},text:{fill:s.palette.getContrastText(s.palette.grey[300]),"&.primary":{fill:s.palette.primary.contrastText},"&.secondary":{fill:s.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function Ie({node:{id:s,entity:p,color:g="default",focused:v,onClick:E}}){const M=se(),[S,G]=(0,u.useState)(0),[O,k]=(0,u.useState)(0),f=(0,pe.q)(),m=(0,u.useRef)(null);(0,u.useLayoutEffect)(()=>{if(m.current){let{height:A,width:j}=m.current.getBBox();A=Math.round(A),j=Math.round(j),(A!==O||j!==S)&&(G(j),k(A))}},[S,O]);const{kind:y,metadata:{name:B,namespace:L=ce.zG,title:T}}=p,H=f.getSystemIcon(`kind:${y.toLocaleLowerCase("en-US")}`),D=10,ne=O,de=H?ne+D:0,P=de+S+D*2,C=O+D*2,o=T!=null?T:y&&B&&L?(0,le.$)({kind:y,name:B,namespace:L}):s;return u.createElement("g",{onClick:E,className:Q()(E&&M.clickable)},u.createElement("rect",{className:Q()(M.node,g==="primary"&&"primary",g==="secondary"&&"secondary"),width:P,height:C,rx:10}),H&&u.createElement(t,{kind:y,y:D,x:D,width:ne,height:ne,className:Q()(M.text,v&&"focused",g==="primary"&&"primary",g==="secondary"&&"secondary")}),u.createElement("text",{ref:m,className:Q()(M.text,v&&"focused",g==="primary"&&"primary",g==="secondary"&&"secondary"),y:C/2,x:de+(S+D*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},o))}var oe=e(21652),ee=e(40718),fe=e(98331),he=e(23200),ge=e(66088);function X(){const s=(0,Y.h_)(he.A),p=(0,u.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[g,v]=(0,u.useState)({}),E=(0,u.useCallback)(()=>{const{cachedEntities:f,requestedEntities:m}=p.current,y={};m.forEach(B=>{const L=f.get(B);L&&(y[B]=L)}),v(y)},[p,v]),[M,S]=(0,ge.Z)(async()=>{const{requestedEntities:f,cachedEntities:m}=p.current,y=Array.from(f).filter(L=>!m.has(L));if(y.length===0){E();return}const{items:B}=await s.getEntitiesByRefs({entityRefs:y});B.forEach(L=>{if(L){const T=(0,i.eE)(L);m.set(T,L)}}),E()},[p,E]),{loading:G,error:O}=M,k=(0,u.useCallback)(f=>{const m=new Set(f),{requestedEntities:y}=p.current;(m.size!==y.size||Array.from(m).some(B=>!y.has(B)))&&(p.current.requestedEntities=m,S(),E())},[p,S,E]);return{entities:g,loading:G,error:O,requestEntities:k}}var Pe=e(76635);function K({rootEntityRefs:s,filter:{maxDepth:p=Number.POSITIVE_INFINITY,relations:g,kinds:v,entityFilter:E}={}}){const{entities:M,loading:S,error:G,requestEntities:O}=X();return(0,u.useEffect)(()=>{const f=new Set([...s]),m=new Set;let y=[...s],B=0;for(;y.length>0&&(!isFinite(p)||B<p);){const L=y;for(y=[];L.length>0;){const T=L.shift(),H=M[T];if(m.add(T),H&&H.relations){if(E&&!E(H))continue;for(const D of H.relations)(!g||g.includes(D.type))&&(!v||v.some(ne=>D.targetRef.startsWith(`${ne.toLocaleLowerCase("en-US")}:`)))&&(m.has(D.targetRef)||(y.push(D.targetRef),f.add(D.targetRef)))}}++B}O([...f])},[M,s,p,g,v,E,O]),{entities:E?(0,Pe.pickBy)(M,(f,m)=>E(f)):M,loading:S,error:G}}function V({rootEntityRefs:s,maxDepth:p=Number.POSITIVE_INFINITY,unidirectional:g=!0,mergeRelations:v=!0,kinds:E,relations:M,entityFilter:S,onNodeClick:G,relationPairs:O=oe.v}){const[k,f]=(0,u.useState)({}),{entities:m,loading:y,error:B}=K({rootEntityRefs:s,filter:{maxDepth:p,kinds:E,relations:M,entityFilter:S}});return(0,fe.Z)(()=>{var de;if(!m||Object.keys(m).length===0){f({});return}const L=Object.entries(m).map(([P,C])=>{const o=s.includes(P),A={id:P,entity:C,focused:o,color:o?"secondary":"primary",kind:C.kind,name:C.metadata.name,namespace:C.metadata.namespace||ce.zG,title:C.metadata.title,spec:C.spec};return G&&(A.onClick=j=>G(A,j)),A}),T=[],H=new Set,D=[...s];for(;D.length>0;){const P=D.pop(),C=m[P];H.add(P),C&&((de=C==null?void 0:C.relations)==null||de.forEach(o=>{var A,j;if(m[o.targetRef]&&!(M&&!M.includes(o.type))&&!(E&&!E.some(w=>o.targetRef.startsWith(`${w.toLocaleLowerCase("en-US")}:`)))){if(!g||!H.has(o.targetRef))if(v){const w=(A=O.find(([Ae,Ze])=>Ae===o.type||Ze===o.type))!=null?A:[o.type],[re]=w;T.push({from:re===o.type?P:o.targetRef,to:re===o.type?o.targetRef:P,relations:w,label:"visible"})}else T.push({from:P,to:o.targetRef,relations:[o.type],label:"visible"});if(H.has(o.targetRef)||(D.push(o.targetRef),H.add(o.targetRef)),g){const w=T.findIndex(re=>P===re.from&&o.targetRef===re.to&&!re.relations.includes(o.type));if(w>=0)if(v){const re=(j=O.find(([Ae,Ze])=>Ae===o.type||Ze===o.type))!=null?j:[o.type];T[w].relations=[...T[w].relations,...re]}else T[w].relations=[...T[w].relations,o.type]}}}))}const ne=T.reduce((P,C)=>{const o=P.findIndex(A=>A.from===C.from&&A.to===C.to);return o>=0?(P[o]={...P[o],relations:Array.from(new Set([...P[o].relations,...C.relations]))},P):[...P,C]},[]);f({nodes:L,edges:ne})},100,[m,s,E,M,g,v,G,O]),{loading:y,error:B,...k}}const J=(0,Ee.Z)(s=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${s.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),te=s=>{const{rootEntityNames:p,maxDepth:g=2,unidirectional:v=!0,mergeRelations:E=!0,kinds:M,relations:S,entityFilter:G,direction:O=ee.N.LEFT_RIGHT,onNodeClick:k,relationPairs:f=oe.v,className:m,zoom:y="enabled",renderNode:B,renderLabel:L,curve:T,showArrowHeads:H}=s,D=(0,ie.Z)(),ne=J(),de=(0,u.useMemo)(()=>(Array.isArray(p)?p:[p]).map(w=>(0,i.eE)(w)),[p]),P=(0,Y.h_)(W.V),{loading:C,error:o,nodes:A,edges:j}=V({rootEntityRefs:de,maxDepth:g,unidirectional:v,mergeRelations:E,kinds:M,relations:S,entityFilter:G,onNodeClick:k,relationPairs:f});return(0,u.useEffect)(()=>{o&&P.post(o)},[P,o]),u.createElement("div",{className:Q()(ne.container,m)},C&&u.createElement(q.Z,{className:ne.progress}),A&&j&&u.createElement(U.m,{nodes:A,edges:j,renderNode:B||Ie,renderLabel:L||r,direction:O,className:ne.graph,paddingX:D.spacing(4),paddingY:D.spacing(4),labelPosition:z.N.LabelPosition.RIGHT,labelOffset:D.spacing(1),zoom:y,curve:T,showArrowHeads:H}))}},21652:(ve,N,e)=>{e.d(N,{v:()=>U});var i=e(9277);const U=[[i.$1,i.S4],[i.Dg,i.X9],[i.Zj,i.M_],[i.aS,i.cz],[i._b,i.wP],[i.KS,i.hr],[i.nP,i.w$]]},19996:(ve,N,e)=>{var i,U=e(71600),z=e(34590);i={value:!0},N.Z=void 0;var Y=z(e(2784)),W=U(e(50175)),q=(0,W.default)(Y.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");N.Z=q},25505:(ve,N,e)=>{var i,U=e(71600),z=e(34590);i={value:!0},N.Z=void 0;var Y=z(e(2784)),W=U(e(50175)),q=(0,W.default)(Y.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");N.Z=q},60008:(ve,N,e)=>{var i,U=e(71600),z=e(34590);i={value:!0},N.Z=void 0;var Y=z(e(2784)),W=U(e(50175)),q=(0,W.default)(Y.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap");N.Z=q},13737:(ve,N,e)=>{e.d(N,{Z:()=>u});var i=e(59740),U=e(7896),z=e(2784),Y=e(6277),W=e(41128),q=e(15459),Ee=e(60345),ie=e(97580),ye=function(d){return{root:(0,U.Z)({},d.typography.button,{boxSizing:"border-box",borderRadius:d.shape.borderRadius,padding:11,border:"1px solid ".concat((0,W.Fq)(d.palette.action.active,.12)),color:(0,W.Fq)(d.palette.action.active,.38),"&$selected":{color:d.palette.action.active,backgroundColor:(0,W.Fq)(d.palette.action.active,.12),"&:hover":{backgroundColor:(0,W.Fq)(d.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,W.Fq)(d.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,W.Fq)(d.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:d.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:d.typography.pxToRem(15)}}},Q=z.forwardRef(function(d,r){var pe=d.children,le=d.classes,Re=d.className,t=d.disabled,ce=t===void 0?!1:t,se=d.disableFocusRipple,Ie=se===void 0?!1:se,oe=d.onChange,ee=d.onClick,fe=d.selected,he=d.size,ge=he===void 0?"medium":he,X=d.value,Pe=(0,i.Z)(d,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]),K=function(J){ee&&(ee(J,X),J.isDefaultPrevented())||oe&&oe(J,X)};return z.createElement(Ee.Z,(0,U.Z)({className:(0,Y.default)(le.root,Re,ce&&le.disabled,fe&&le.selected,ge!=="medium"&&le["size".concat((0,ie.Z)(ge))]),disabled:ce,focusRipple:!Ie,ref:r,onClick:K,onChange:oe,value:X,"aria-pressed":fe},Pe),z.createElement("span",{className:le.label},pe))});const u=(0,q.Z)(ye,{name:"MuiToggleButton"})(Q)}}]);})();

//# sourceMappingURL=7056.3caa2c3a.chunk.js.map