(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4076],{75997:(V,C,n)=>{"use strict";n.d(C,{O:()=>E});var S=n(79692),u=n(80030),y=n(2784),x=n(90436);const Z=(0,S.Z)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:R})=>R||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function E(R){var L;const j=Z(R);return y.createElement(u.ZP,{title:(L=R.title)!=null?L:R.text||"",placement:R.placement},y.createElement(x.Z,{className:j.typo,variant:"inherit"},R.text))}},64668:(V,C,n)=>{"use strict";n.r(C),n.d(C,{GroupProfileCard:()=>bt,MembersListCard:()=>dt,MyGroupsSidebarItem:()=>na,OwnershipCard:()=>Qt,UserProfileCard:()=>Zt});var S=n(24978),u=n(8554),y=n(85056),x=n(89173),Z=n(23200),E=n(95544),R=n(60905),j=n(82938),L=n(90436),M=n(79692),$=n(12420),l=n(7896),h=n(59740),e=n(2784),w=n(6277),T=n(15459),B=n(68079),Ue=n(96234),ke=n(24514);function Fe(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=a.boundaryCount,r=t===void 0?1:t,o=a.componentName,s=o===void 0?"usePagination":o,d=a.count,i=d===void 0?1:d,c=a.defaultPage,v=c===void 0?1:c,m=a.disabled,g=m===void 0?!1:m,p=a.hideNextButton,A=p===void 0?!1:p,f=a.hidePrevButton,N=f===void 0?!1:f,G=a.onChange,P=a.page,b=a.showFirstButton,z=b===void 0?!1:b,I=a.showLastButton,H=I===void 0?!1:I,Q=a.siblingCount,O=Q===void 0?1:Q,D=(0,h.Z)(a,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),F=(0,ke.Z)({controlled:P,default:v,name:s,state:"page"}),ce=(0,Ue.Z)(F,2),k=ce[0],ae=ce[1],ne=function(J,q){P||ae(q),G&&G(J,q)},W=function(J,q){var sa=q-J+1;return Array.from({length:sa},function(la,ia){return J+ia})},oe=W(1,Math.min(r,i)),Y=W(Math.max(i-r+1,r+1),i),he=Math.max(Math.min(k-O,i-r-O*2-1),r+2),Oe=Math.min(Math.max(k+O,r+O*2+2),Y[0]-2),oa=[].concat((0,B.Z)(z?["first"]:[]),(0,B.Z)(N?[]:["previous"]),(0,B.Z)(oe),(0,B.Z)(he>r+2?["start-ellipsis"]:r+1<i-r?[r+1]:[]),(0,B.Z)(W(he,Oe)),(0,B.Z)(Oe<i-r-1?["end-ellipsis"]:i-r>r?[i-r]:[]),(0,B.Z)(Y),(0,B.Z)(A?[]:["next"]),(0,B.Z)(H?["last"]:[])),De=function(J){switch(J){case"first":return 1;case"previous":return k-1;case"next":return k+1;case"last":return i;default:return null}},ra=oa.map(function(U){return typeof U=="number"?{onClick:function(q){ne(q,U)},type:"page",page:U,selected:U===k,disabled:g,"aria-current":U===k?"true":void 0}:{onClick:function(q){ne(q,De(U))},type:U,page:De(U),selected:!1,disabled:g||U.indexOf("ellipsis")===-1&&(U==="next"||U==="last"?k>=i:k<=1)}});return(0,l.Z)({items:ra},D)}var _=n(41128),We=n(60364),Ve=n(60345),de=n(3752);const Ze=(0,de.Z)(e.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Pe=(0,de.Z)(e.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Se=(0,de.Z)(e.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ne=(0,de.Z)(e.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var ve=n(97580),He=function(t){return{root:(0,l.Z)({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:t.palette.text.primary}),page:{transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:t.palette.action.focus},"&$selected":{backgroundColor:t.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:(0,_.Fq)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:1,color:t.palette.action.disabled,backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:t.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:t.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15),"& $icon":{fontSize:t.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.primary.dark,"@media (hover: none)":{backgroundColor:t.palette.primary.main}},"&$disabled":{color:t.palette.action.disabled}}},textSecondary:{"&$selected":{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.secondary.dark,"@media (hover: none)":{backgroundColor:t.palette.secondary.main}},"&$disabled":{color:t.palette.action.disabled}}},outlined:{border:"1px solid ".concat(t.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(t.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:t.palette.primary.main,border:"1px solid ".concat((0,_.Fq)(t.palette.primary.main,.5)),backgroundColor:(0,_.Fq)(t.palette.primary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,_.Fq)(t.palette.primary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:t.palette.secondary.main,border:"1px solid ".concat((0,_.Fq)(t.palette.secondary.main,.5)),backgroundColor:(0,_.Fq)(t.palette.secondary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,_.Fq)(t.palette.secondary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},rounded:{borderRadius:t.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:t.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:t.typography.pxToRem(20),margin:"0 -8px"}}},Qe=e.forwardRef(function(t,r){var o=t.classes,s=t.className,d=t.color,i=d===void 0?"standard":d,c=t.component,v=t.disabled,m=v===void 0?!1:v,g=t.page,p=t.selected,A=p===void 0?!1:p,f=t.shape,N=f===void 0?"round":f,G=t.size,P=G===void 0?"medium":G,b=t.type,z=b===void 0?"page":b,I=t.variant,H=I===void 0?"text":I,Q=(0,h.Z)(t,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),O=(0,We.Z)(),D=O.direction==="rtl"?{previous:Ne,next:Se,last:Ze,first:Pe}:{previous:Se,next:Ne,first:Ze,last:Pe},F=D[z];return z==="start-ellipsis"||z==="end-ellipsis"?e.createElement("div",{ref:r,className:(0,w.default)(o.root,o.ellipsis,m&&o.disabled,P!=="medium"&&o["size".concat((0,ve.Z)(P))])},"\u2026"):e.createElement(Ve.Z,(0,l.Z)({ref:r,component:c,disabled:m,focusVisibleClassName:o.focusVisible,className:(0,w.default)(o.root,o.page,o[H],o[N],s,i!=="standard"&&o["".concat(H).concat((0,ve.Z)(i))],m&&o.disabled,A&&o.selected,P!=="medium"&&o["size".concat((0,ve.Z)(P))])},Q),z==="page"&&g,F?e.createElement(F,{className:o.icon}):null)});const je=(0,T.Z)(He,{name:"MuiPaginationItem"})(Qe);var Ke={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function Xe(a,t,r){return a==="page"?"".concat(r?"":"Go to ","page ").concat(t):"Go to ".concat(a," page")}var Ye=e.forwardRef(function(t,r){var o=t.boundaryCount,s=t.classes,d=t.className,i=t.color,c=i===void 0?"standard":i,v=t.count,m=t.defaultPage,g=t.disabled,p=t.getItemAriaLabel,A=p===void 0?Xe:p,f=t.hideNextButton,N=t.hidePrevButton,G=t.onChange,P=t.page,b=t.renderItem,z=b===void 0?function(Y){return e.createElement(je,Y)}:b,I=t.shape,H=I===void 0?"round":I,Q=t.showFirstButton,O=t.showLastButton,D=t.siblingCount,F=t.size,ce=F===void 0?"medium":F,k=t.variant,ae=k===void 0?"text":k,ne=(0,h.Z)(t,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),W=Fe((0,l.Z)({},t,{componentName:"Pagination"})),oe=W.items;return e.createElement("nav",(0,l.Z)({"aria-label":"pagination navigation",className:(0,w.default)(s.root,d),ref:r},ne),e.createElement("ul",{className:s.ul},oe.map(function(Y,he){return e.createElement("li",{key:he},z((0,l.Z)({},Y,{color:c,"aria-label":A(Y.type,Y.page,Y.selected),shape:H,size:ce,variant:ae})))})))});const Je=(0,T.Z)(Ke,{name:"MuiPagination"})(Ye);var ue=n(4812),qe=n(43434);function _e(a){let t=0;for(let o=0;o<a.length;o++)t=a.charCodeAt(o)+((t<<5)-t);let r="#";for(let o=0;o<3;o++){const s=t>>o*8&255;r+=`00${s.toString(16)}`.slice(-2)}return r}function et(a){var s;const t=a.trim().split(" "),r=(s=t[0])!=null?s:"",o=t.length>1?t[t.length-1]:"";return r&&o?`${r.charAt(0)}${o.charAt(0)}`:r.charAt(0)}var tt=n(12524),me=n.n(tt);const at=(0,M.Z)(a=>({avatar:{width:"4rem",height:"4rem",color:a.palette.common.white,backgroundColor:t=>t.backgroundColor},avatarText:{fontWeight:a.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function fe(a){var m,g;const{displayName:t,picture:r,customStyles:o}=a,s={...o},d={fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight},i=at(r?{}:{backgroundColor:_e(t||"")}),c=me()((m=a.classes)==null?void 0:m.avatar,i.avatar),v=me()((g=a.classes)==null?void 0:g.avatarText,i.avatarText);return e.createElement(qe.Z,{alt:t,src:r,className:c,style:s},t&&e.createElement(L.Z,{variant:"h6",component:"span",className:v,style:d},et(t)))}var K=n(87603),Re=n(75997),ye=n(37630),Le=n(67700),pe=n(93006),re=n(59274),se=n(9277),ie=n(14914);const nt=async(a,t)=>(a.length===0?{items:[]}:await t.getEntities({filter:{kind:"User","relations.memberof":a.map(o=>(0,u.eE)({kind:"group",namespace:o.namespace.toLocaleLowerCase("en-US"),name:o.name.toLocaleLowerCase("en-US")}))}})).items,ot=async(a,t)=>{var i;const r=new Map,s=[{kind:a.kind,namespace:(i=a.metadata.namespace)!=null?i:S.zG,name:a.metadata.name}],d=[];for(;s.length>0;){const c=s.shift(),v=await t.getEntityByRef(c);r.set((0,u.eE)(c),!0);const m=(0,ie.h)(v,se._b,{kind:"Group"}).filter(g=>!r.has((0,u.eE)(g)));m.forEach(g=>r.set((0,u.eE)(g),!0)),s.push(...m),d.push(...m)}return d},rt=async(a,t)=>nt(await ot(a,t),t),st=a=>{const t=new Map;return a.filter(r=>{const o=(0,u.eE)(r),s=t.has(o);return t.set(o,!0),!s})},it=(0,M.Z)(a=>(0,$.Z)({card:{border:`1px solid ${a.palette.divider}`,boxShadow:a.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:a.spacing(4,1,1),flex:"1",minWidth:"0px"},avatar:{position:"absolute",top:"-2rem"}}),{name:"MembersListCardComponent"}),lt=a=>{var i;const t=it(),{metadata:{name:r,description:o},spec:{profile:s}}=a.member,d=(i=s==null?void 0:s.displayName)!=null?i:r;return e.createElement(E.Z,{className:t.card},e.createElement(E.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},e.createElement(fe,{displayName:d,picture:s==null?void 0:s.picture,classes:t}),e.createElement(E.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},e.createElement(L.Z,{variant:"h6"},e.createElement(y.d,{"data-testid":"user-link",entityRef:a.member,title:d})),(s==null?void 0:s.email)&&e.createElement(K.rU,{to:`mailto:${s.email}`},e.createElement(Re.O,{text:s.email})),o&&e.createElement(L.Z,{variant:"subtitle2"},o))))},ct=(0,M.Z)(a=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:a.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${a.spacing(34)}px))`}})),dt=a=>{var ne;const{memberDisplayTitle:t="Members",pageSize:r=50,showAggregateMembersToggle:o,relationsType:s="direct"}=a,d=ct(),{entity:i}=(0,x.X2)(),{metadata:{name:c,namespace:v},spec:{profile:m}}=i,g=(0,re.h_)(Z.A),p=(ne=m==null?void 0:m.displayName)!=null?ne:c,A=v||S.zG,[f,N]=e.useState(1),G=(W,oe)=>{N(oe)},[P,b]=(0,e.useState)(s==="aggregated"),{loading:z,value:I}=(0,ue.Z)(async()=>P?await rt(i,g):[],[g,i,P]),{loading:H,error:Q,value:O}=(0,ue.Z)(async()=>(await g.getEntities({filter:{kind:"User","relations.memberof":[(0,u.eE)({kind:"group",namespace:A.toLocaleLowerCase("en-US"),name:c.toLocaleLowerCase("en-US")})]}})).items,[g,i]),D=st([...O!=null?O:[],...I&&P?I:[]].sort((W,oe)=>(0,u.eE)(W).localeCompare((0,u.eE)(oe))));if(H)return e.createElement(ye.E,null);if(Q)return e.createElement(Le.G,{error:Q});const F=Math.ceil(((D==null?void 0:D.length)||0)/r),ce=F<2?"":`, page ${f} of ${F}`,k=e.createElement(Je,{count:F,page:f,onChange:G,showFirstButton:!0,showLastButton:!0});let ae;return D&&D.length>0?ae=e.createElement(E.Z,{className:d.memberList},D.slice(r*(f-1),r*f).map(W=>e.createElement(lt,{member:W,key:(0,u.eE)(W)}))):ae=e.createElement(E.Z,{p:2},e.createElement(L.Z,null,"This group has no ",t.toLocaleLowerCase(),".")),e.createElement(R.Z,{item:!0,className:d.root},e.createElement(pe.r,{title:`${t} (${(D==null?void 0:D.length)||0}${ce})`,subheader:`of ${p}`,...F<=1?{}:{actions:k},className:d.root,cardClassName:d.cardContent},o&&e.createElement(e.Fragment,null,"Direct Members",e.createElement(j.Z,{color:"primary",checked:P,onChange:()=>{b(!P)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),P&&z?e.createElement(ye.E,null):ae))};var ut=n(30593),ge=n(61837),Ee=n(11776),ee=n(38402),le=n(86136),te=n(49378),X=n(80030),$e=n(19631),mt=n(95475),pt=n(73655),ze=n(99688),gt=n(52866),be=n(27604),we=n(13384),xe=n(62367),ht=n(70666),Ce=n(52160),vt=n(85256);const ft=({href:a,Icon:t,text:r})=>e.createElement(ee.Z,{key:a},e.createElement(le.Z,null,t?e.createElement(t,null):e.createElement(Ce.Z,null)),e.createElement(te.Z,null,e.createElement(K.rU,{to:a},r))),Ie=({links:a})=>{const t=(0,ht.q)(),r=o=>{var s;return o&&(s=t.getSystemIcon(o))!=null?s:Ce.Z};return a===void 0?null:e.createElement(e.Fragment,null,e.createElement(vt.Z,null),a.map(o=>e.createElement(ft,{key:o.url,href:o.url,text:o.title,Icon:r(o.icon)})))};var yt=n(75098),Et=n(38571);const $t=a=>e.createElement(E.Z,{display:"flex",alignItems:"center"},e.createElement(xe.Z,{fontSize:"inherit"}),e.createElement(E.Z,{ml:1},a.title)),bt=a=>{var H,Q,O;const t=(0,re.h_)(Z.A),r=(0,re.h_)(mt.$),{entity:o}=(0,x.X2)(),{allowed:s}=(0,yt.N)(Et.es),d=(0,e.useCallback)(async()=>{await t.refreshEntity((0,u.eE)(o)),r.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[t,r,o]);if(!o)return e.createElement(ze.Z,{severity:"error"},"Group not found");const{metadata:{name:i,description:c,title:v,annotations:m,links:g},spec:{profile:p}}=o,A=(0,ie.h)(o,se._b,{kind:"Group"}),f=(0,ie.h)(o,se.wP,{kind:"group"}),N=m==null?void 0:m[ut.P1],G=(N==null?void 0:N.startsWith("url:"))||(N==null?void 0:N.startsWith("file:")),P=(H=o.metadata.annotations)==null?void 0:H[S.Tf],b=(O=(Q=p==null?void 0:p.displayName)!=null?Q:v)!=null?O:i,z=p!=null&&p.email?`mailto:${p.email}`:"#",I=P?e.createElement(ge.Z,{"aria-label":"Edit",title:"Edit Metadata",component:K.rU,to:P},e.createElement(be.Z,null)):e.createElement(ge.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},e.createElement(be.Z,null));return e.createElement(pe.r,{title:e.createElement($t,{title:b}),subheader:c,variant:a.variant,action:e.createElement(e.Fragment,null,G&&s&&e.createElement(ge.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:d},e.createElement(gt.Z,null)),I)},e.createElement(R.Z,{container:!0,spacing:3},e.createElement(R.Z,{item:!0,xs:12,sm:2,xl:1},e.createElement(fe,{displayName:b,picture:p==null?void 0:p.picture})),e.createElement(R.Z,{item:!0,md:10,xl:11},e.createElement(Ee.Z,null,(p==null?void 0:p.email)&&e.createElement(ee.Z,null,e.createElement(le.Z,null,e.createElement(X.ZP,{title:"Email"},e.createElement(we.Z,null))),e.createElement(te.Z,{primary:e.createElement(K.rU,{to:z},p.email),secondary:"Email"})),e.createElement(ee.Z,null,e.createElement(le.Z,null,e.createElement(X.ZP,{title:"Parent Group"},e.createElement(pt.Z,null))),e.createElement(te.Z,{primary:f.length?e.createElement($e.r,{entityRefs:f,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),e.createElement(ee.Z,null,e.createElement(le.Z,null,e.createElement(X.ZP,{title:"Child Groups"},e.createElement(xe.Z,null))),e.createElement(te.Z,{primary:A.length?e.createElement($e.r,{entityRefs:A,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(a==null?void 0:a.showLinks)&&e.createElement(Ie,{links:g})))))};var xt=n(98685);const Ct=a=>a.title?e.createElement(E.Z,{display:"flex",alignItems:"center"},e.createElement(xt.Z,{fontSize:"inherit"}),e.createElement(E.Z,{ml:1},a.title)):null,Zt=a=>{var g,p;const{entity:t}=(0,x.X2)();if(!t)return e.createElement(ze.Z,{severity:"error"},"User not found");const r=(g=t.metadata.annotations)==null?void 0:g[S.Tf],{metadata:{name:o,description:s,links:d},spec:{profile:i}}=t,c=(p=i==null?void 0:i.displayName)!=null?p:o,v=i!=null&&i.email?`mailto:${i.email}`:void 0,m=(0,ie.h)(t,se.hr,{kind:"Group"});return e.createElement(pe.r,{title:e.createElement(Ct,{title:c}),subheader:s,variant:a.variant,action:e.createElement(e.Fragment,null,r&&e.createElement(ge.Z,{"aria-label":"Edit",title:"Edit Metadata",component:K.rU,to:r},e.createElement(be.Z,null)))},e.createElement(R.Z,{container:!0,spacing:3,alignItems:"flex-start"},e.createElement(R.Z,{item:!0,xs:12,sm:2,xl:1},e.createElement(fe,{displayName:c,picture:i==null?void 0:i.picture})),e.createElement(R.Z,{item:!0,md:10,xl:11},e.createElement(Ee.Z,null,(i==null?void 0:i.email)&&e.createElement(ee.Z,null,e.createElement(le.Z,null,e.createElement(X.ZP,{title:"Email"},e.createElement(we.Z,null))),e.createElement(te.Z,null,e.createElement(K.rU,{to:v!=null?v:""},i.email))),e.createElement(ee.Z,null,e.createElement(le.Z,null,e.createElement(X.ZP,{title:"Member of"},e.createElement(xe.Z,null))),e.createElement(te.Z,null,e.createElement($e.r,{entityRefs:m,defaultKind:"Group"}))),(a==null?void 0:a.showLinks)&&e.createElement(Ie,{links:d})))))};var Pt=n(9520),Ae=n(51491),St=n(19928),Nt=n.n(St),Rt=n(91299),Lt=n(51847),zt=n(14162),wt=n.n(zt),It=n(19126),At=n.n(It),Tt=n(76635);const Mt=wt()(5),Bt=(a,t)=>{const{kind:r,type:o}=t,s=a.map(i=>(0,Lt.$)((0,u.of)(i),{defaultKind:"group"})),d={kind:r.toLocaleLowerCase("en-US"),type:o,owners:s,user:"all"};return At().stringify({filters:d},{arrayFormat:"repeat"})},Gt=a=>[...(0,ie.h)(a,se.hr,{kind:"Group"}).map(({kind:o,namespace:s,name:d})=>(0,u.eE)({kind:o,namespace:s,name:d})),(0,u.eE)(a)],Ot=a=>a!==void 0,Te=async(a,t,r=[])=>{const o=(0,ie.h)(a,se._b,{kind:"Group"}),s=o.length>0,d=(0,u.eE)(a);if(s){const i=o.map(p=>(0,u.eE)(p)),m=(await Mt(()=>t.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:i}))).items.filter(Ot).filter(p=>!r.includes((0,u.eE)(p))),g=(await Promise.all(m.map(p=>Te(p,t,[...r,d])))).flatMap(p=>p);return(0,Tt.uniq)([...g,d])}return[d]},Dt=async(a,t,r)=>{const o=a.kind==="Group",s=t==="aggregated",d=a.kind==="User";return s&&o?Te(a,r):s&&d?Gt(a):[(0,u.eE)(a)]},Ut=(a,t,r)=>r.getEntities({filter:[{kind:t,"relations.ownedBy":a}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function kt(a,t,r,o=6){const s=(0,re.h_)(Z.A),d=r!=null?r:["Component","API","System"],{loading:i,error:c,value:v}=(0,ue.Z)(async()=>{const m=await Dt(a,t,s);return(await Ut(m,d,s)).items.reduce((f,N)=>{var P,b;const G=f.find(z=>{var I;return z.kind===N.kind&&z.type===((I=N.spec)==null?void 0:I.type)});return G?G.count+=1:f.push({kind:N.kind,type:(b=(P=N.spec)==null?void 0:P.type)==null?void 0:b.toString(),count:1}),f},[]).sort((f,N)=>N.count-f.count).slice(0,o).map(f=>({counter:f.count,type:f.type,kind:f.kind,queryParams:Bt(m,f)}))},[s,a,t]);return{componentsWithCounters:v,loading:i,error:c}}const Ft=(0,M.Z)(a=>(0,$.Z)({card:{border:`1px solid ${a.palette.divider}`,boxShadow:a.shadows[2],borderRadius:"4px",padding:a.spacing(2),transition:`${a.transitions.duration.standard}ms`,"&:hover":{boxShadow:a.shadows[4]},height:"100%"},bold:{fontWeight:a.typography.fontWeightBold},smallFont:{fontSize:a.typography.body2.fontSize},entityTypeBox:{background:t=>a.getPageTheme({themeId:t.type}).backgroundImage,color:t=>a.getPageTheme({themeId:t.type}).fontColor}})),Wt=({counter:a,type:t,kind:r,url:o})=>{const s=Ft({type:t!=null?t:r}),d=t!=null?t:r,i=d.length>10,c=e.createElement(E.Z,{className:`${s.card} ${s.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},e.createElement(L.Z,{className:s.bold,variant:"h6"},a),e.createElement(E.Z,{sx:{width:"100%",textAlign:"center"}},e.createElement(L.Z,{className:`${s.bold} ${i&&s.smallFont}`,variant:"h6"},e.createElement(Re.O,{text:Nt()(d.toLocaleUpperCase("en-US"),a)}))),t&&e.createElement(L.Z,{variant:"subtitle1"},r));return o?e.createElement(K.rU,{to:o,variant:"body2"},c):c},Vt=({className:a,entity:t,relationsType:r,entityFilterKind:o,entityLimit:s=6})=>{const d=(0,Ae.t)(Rt.x),{componentsWithCounters:i,loading:c,error:v}=kt(t,r,o,s);return c?e.createElement(ye.E,null):v?e.createElement(Le.G,{error:v}):e.createElement(R.Z,{container:!0,className:a},i==null?void 0:i.map(m=>{var g;return e.createElement(R.Z,{item:!0,xs:6,md:6,lg:4,key:(g=m.type)!=null?g:m.kind},e.createElement(Wt,{counter:m.counter,kind:m.kind,type:m.type,url:d&&`${d()}/?${m.queryParams}`}))}))},Ht=(0,M.Z)(a=>({card:{maxHeight:"100%"},cardContent:{display:"flex",flexDirection:"column",overflow:"hidden"},list:{[a.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[a.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[a.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}},grid:{overflowY:"auto",marginTop:0}})),Qt=a=>{const{variant:t,entityFilterKind:r,hideRelationsToggle:o,relationsType:s,entityLimit:d=6}=a,i=o===void 0?!1:o,c=Ht(),{entity:v}=(0,x.X2)(),m=v.kind==="User"?"aggregated":"direct",[g,p]=(0,e.useState)(s!=null?s:m);return(0,e.useEffect)(()=>{s||p(m)},[p,m,s]),e.createElement(pe.r,{title:"Ownership",variant:t,className:c.card,cardClassName:c.cardContent},!i&&e.createElement(Ee.Z,{dense:!0},e.createElement(ee.Z,{className:c.list},e.createElement(te.Z,{className:c.listItemText}),e.createElement(Pt.Z,{className:c.listItemSecondaryAction},"Direct Relations",e.createElement(X.ZP,{placement:"top",arrow:!0,title:`${g==="direct"?"Direct":"Aggregated"} Relations`},e.createElement(j.Z,{color:"primary",checked:g!=="direct",onChange:()=>{p(g==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),e.createElement(Vt,{className:c.grid,entity:v,entityLimit:d,relationsType:g,entityFilterKind:r}))};var Me=n(78447),jt=n(97498),Be=n(73557),Kt=n(16060),Xt=n(83543),Yt=n(59797),Jt=n(91825),Ge=n(75984),qt=n(77277);const _t=(0,M.Z)(a=>{var t,r;return{item:{height:48,width:"100%","&:hover":{background:((t=a.palette.navigation.navItem)==null?void 0:t.hoverBackground)||"#6f6f6f",color:a.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:a.palette.navigation.color,padding:a.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:a.palette.common.white},label:{margin:a.spacing(1.75),marginLeft:a.spacing(1),fontSize:a.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((r=a.palette.navigation.navItem)==null?void 0:r.hoverBackground)||"#6f6f6f",color:a.palette.navigation.selectedColor}},textContent:{color:a.palette.navigation.color,paddingLeft:a.spacing(4),paddingRight:a.spacing(1),fontSize:a.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ea=a=>{var P;const{title:t,subtitle:r,to:o,icon:s,dropdownItems:d,exact:i}=a,c=_t(),{setIsHoveredOn:v}=(0,e.useContext)(Jt.Ag),m=()=>{v(!1)},g=(0,Be.WU)(o!=null?o:""),p=(0,Be.TH)();let A=(0,Ge.E)(p,g,i);const[f,N]=(0,e.useState)((P=a.initialShowDropdown)!=null?P:!1),G=()=>{N(!f)};return d!==void 0?(d.some(b=>{const z=(0,Kt.i3)(b.to);return A=(0,Ge.E)(p,z,i),A}),e.createElement(E.Z,{className:c.itemContainer},e.createElement(X.ZP,{title:t,enterDelay:500,enterNextDelay:500},e.createElement(qt.Z,{role:"button",onClick:G,onTouchStart:b=>b.stopPropagation(),className:me()(c.item,A?c.selected:void 0)},s&&e.createElement(s,{fontSize:"small"}),e.createElement(L.Z,{variant:"subtitle1",component:"span",className:c.label},t,e.createElement("br",null),r&&e.createElement(L.Z,{variant:"caption",component:"span",className:c.subtitle},r)),f?e.createElement(Yt.Z,{className:c.dropdownArrow}):e.createElement(Xt.Z,{className:c.dropdownArrow}))),d&&f&&e.createElement(E.Z,{className:c.dropdown},d.map((b,z)=>e.createElement(X.ZP,{key:z,title:b.title,enterDelay:500,enterNextDelay:500},e.createElement(K.rU,{to:b.to,underline:"none",className:c.dropdownItem,onClick:m,onTouchStart:I=>I.stopPropagation()},e.createElement(L.Z,{component:"span",className:c.textContent},b.title))))))):e.createElement(E.Z,{className:c.itemContainer},e.createElement(X.ZP,{title:t,enterDelay:500,enterNextDelay:500},e.createElement(K.rU,{to:o,underline:"none",className:me()(c.item,A?c.selected:void 0),onClick:m,onTouchStart:b=>b.stopPropagation()},s&&e.createElement(s,{fontSize:"small"}),e.createElement(L.Z,{variant:"subtitle1",component:"span",className:c.label},t,e.createElement("br",null),r&&e.createElement(L.Z,{variant:"caption",component:"span",className:c.subtitle},r)))))};var ta=n(62039),aa=n(96671);const na=a=>{const{singularTitle:t,pluralTitle:r,icon:o,filter:s}=a,d=(0,re.h_)(ta.$),i=(0,re.h_)(Z.A),c=(0,Ae.t)(aa.w),{value:v}=(0,ue.Z)(async()=>{const m=await d.getBackstageIdentity();return(await i.getEntities({filter:[{kind:"group","relations.hasMember":m.userEntityRef,...s!=null?s:{}}],fields:["metadata","kind"]})).items},[]);if(!(v!=null&&v.length))return null;if(v.length===1){const m=v[0];return e.createElement(Me.R6,{text:t,to:c((0,u.iB)(m)),icon:o})}return e.createElement(Me.R6,{icon:o,text:r},e.createElement(jt.k,{title:r},v==null?void 0:v.map(function(g){return e.createElement(ea,{title:g.metadata.title||g.metadata.name,subtitle:g.metadata.namespace!==S.zG?g.metadata.namespace:void 0,to:c((0,u.iB)(g)),icon:o,key:(0,u.eE)(g)})})))}},73655:(V,C,n)=>{"use strict";var S,u=n(71600),y=n(34590);S={value:!0},C.Z=void 0;var x=y(n(2784)),Z=u(n(50175)),E=(0,Z.default)(x.createElement("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");C.Z=E},52866:(V,C,n)=>{"use strict";var S,u=n(71600),y=n(34590);S={value:!0},C.Z=void 0;var x=y(n(2784)),Z=u(n(50175)),E=(0,Z.default)(x.createElement("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");C.Z=E},62367:(V,C,n)=>{"use strict";var S,u=n(71600),y=n(34590);S={value:!0},C.Z=void 0;var x=y(n(2784)),Z=u(n(50175)),E=(0,Z.default)(x.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");C.Z=E},52160:(V,C,n)=>{"use strict";var S,u=n(71600),y=n(34590);S={value:!0},C.Z=void 0;var x=y(n(2784)),Z=u(n(50175)),E=(0,Z.default)(x.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language");C.Z=E},14162:(V,C,n)=>{"use strict";const S=n(14950),u=y=>{if(!((Number.isInteger(y)||y===1/0)&&y>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const x=new S;let Z=0;const E=()=>{Z--,x.size>0&&x.dequeue()()},R=async(M,$,...l)=>{Z++;const h=(async()=>M(...l))();$(h);try{await h}catch{}E()},j=(M,$,...l)=>{x.enqueue(R.bind(null,M,$,...l)),(async()=>(await Promise.resolve(),Z<y&&x.size>0&&x.dequeue()()))()},L=(M,...$)=>new Promise(l=>{j(M,l,...$)});return Object.defineProperties(L,{activeCount:{get:()=>Z},pendingCount:{get:()=>x.size},clearQueue:{value:()=>{x.clear()}}}),L};V.exports=u},19928:function(V){(function(C,n){V.exports=n()})(this,function(){var C=[],n=[],S={},u={},y={};function x(l){return typeof l=="string"?new RegExp("^"+l+"$","i"):l}function Z(l,h){return l===h?h:l===l.toLowerCase()?h.toLowerCase():l===l.toUpperCase()?h.toUpperCase():l[0]===l[0].toUpperCase()?h.charAt(0).toUpperCase()+h.substr(1).toLowerCase():h.toLowerCase()}function E(l,h){return l.replace(/\$(\d{1,2})/g,function(e,w){return h[w]||""})}function R(l,h){return l.replace(h[0],function(e,w){var T=E(h[1],arguments);return Z(e===""?l[w-1]:e,T)})}function j(l,h,e){if(!l.length||S.hasOwnProperty(l))return h;for(var w=e.length;w--;){var T=e[w];if(T[0].test(h))return R(h,T)}return h}function L(l,h,e){return function(w){var T=w.toLowerCase();return h.hasOwnProperty(T)?Z(w,T):l.hasOwnProperty(T)?Z(w,l[T]):j(T,w,e)}}function M(l,h,e,w){return function(T){var B=T.toLowerCase();return h.hasOwnProperty(B)?!0:l.hasOwnProperty(B)?!1:j(B,B,e)===B}}function $(l,h,e){var w=h===1?$.singular(l):$.plural(l);return(e?h+" ":"")+w}return $.plural=L(y,u,C),$.isPlural=M(y,u,C),$.singular=L(u,y,n),$.isSingular=M(u,y,n),$.addPluralRule=function(l,h){C.push([x(l),h])},$.addSingularRule=function(l,h){n.push([x(l),h])},$.addUncountableRule=function(l){if(typeof l=="string"){S[l.toLowerCase()]=!0;return}$.addPluralRule(l,"$0"),$.addSingularRule(l,"$0")},$.addIrregularRule=function(l,h){h=h.toLowerCase(),l=l.toLowerCase(),y[l]=h,u[h]=l},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(l){return $.addIrregularRule(l[0],l[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(l){return $.addPluralRule(l[0],l[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(l){return $.addSingularRule(l[0],l[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach($.addUncountableRule),$})},14950:V=>{class C{constructor(u){this.value=u,this.next=void 0}}class n{constructor(){this.clear()}enqueue(u){const y=new C(u);this._head?(this._tail.next=y,this._tail=y):(this._head=y,this._tail=y),this._size++}dequeue(){const u=this._head;if(u)return this._head=this._head.next,this._size--,u.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let u=this._head;for(;u;)yield u.value,u=u.next}}V.exports=n}}]);})();

//# sourceMappingURL=4076.cb31b111.chunk.js.map