(()=>{var k4=Object.defineProperty;var Xx=Q=>{throw TypeError(Q)};var P4=(Q,B,x)=>B in Q?k4(Q,B,{enumerable:!0,configurable:!0,writable:!0,value:x}):Q[B]=x;var Jd=(Q,B,x)=>P4(Q,typeof B!="symbol"?B+"":B,x),Qx=(Q,B,x)=>B.has(Q)||Xx("Cannot "+x);var st=(Q,B,x)=>(Qx(Q,B,"read from private field"),x?x.call(Q):B.get(Q)),Dr=(Q,B,x)=>B.has(Q)?Xx("Cannot add the same private member more than once"):B instanceof WeakSet?B.add(Q):B.set(Q,x),lr=(Q,B,x,j)=>(Qx(Q,B,"write to private field"),j?j.call(Q,x):B.set(Q,x),x);(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8157],{16820:(Q,B,x)=>{"use strict";x.d(B,{O:()=>D});var j=x(95544),g=x(12420),F=x(79692),A=x(2784);const z=R=>(0,g.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:R.spacing(2)}}),J=(0,F.Z)(z,{name:"BackstageItemCardGrid"});function D(R){const{children:k,...L}=R,W=J(L);return A.createElement(j.Z,{className:W.root,...L},k)}},44614:(Q,B,x)=>{"use strict";x.d(B,{h:()=>R});var j=x(95544),g=x(12420),F=x(79692),A=x(90436),z=x(2784);const J=k=>(0,g.Z)({root:{color:k.palette.common.white,padding:k.spacing(2,2,3),backgroundImage:k.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),D=(0,F.Z)(J,{name:"BackstageItemCardHeader"});function R(k){const{title:L,subtitle:W,children:K}=k,H=D(k);return z.createElement(j.Z,{className:H.root},W&&z.createElement(A.Z,{variant:"subtitle2",component:"h3"},W),L&&z.createElement(A.Z,{variant:"h6",component:"h4"},L),K)}},20995:(Q,B,x)=>{"use strict";x.d(B,{t:()=>G});var j=x(39802),g=x(59274),F=x(95475),A=x(95544),z=x(2784),J=x(85166),D=x(62862),R=x(18149),k=x(829),L=x(72579),W=x(82394),K=x(4812),H=x(23200);function q(){const X=(0,g.h_)(H.A),{error:_,loading:b,value:Z}=(0,K.Z)(async()=>await X.getEntityFacets({facets:["kind"]}).then(ee=>{var le;return((le=ee.facets.kind)==null?void 0:le.map(ce=>ce.value).sort())||[]}),[X]);return{loading:b,error:_,allKinds:Z!=null?Z:[]}}function re(X,_,b){let Z=X;return _&&(Z=Z.filter(ee=>_.some(le=>le.toLocaleLowerCase("en-US")===ee.toLocaleLowerCase("en-US")))),b&&!X.some(ee=>ee.toLocaleLowerCase("en-US")===b.toLocaleLowerCase("en-US"))&&(Z=Z.concat([b])),Z.sort().reduce((ee,le)=>(ee[le.toLocaleLowerCase("en-US")]=le,ee),{})}function V(X){var de,ue;const{filters:_,queryParameters:{kind:b},updateFilters:Z}=(0,D.wp)(),Y=(0,z.useMemo)(()=>[b].flat()[0],[b]),[ee,le]=(0,z.useState)((ue=Y!=null?Y:(de=_.kind)==null?void 0:de.value)!=null?ue:X.initialFilter);(0,z.useEffect)(()=>{Y&&le(Y)},[Y]),(0,z.useEffect)(()=>{var te,ge;(te=_.kind)!=null&&te.value&&le((ge=_.kind)==null?void 0:ge.value)},[_.kind]),(0,z.useEffect)(()=>{Z({kind:ee?new J.zo(ee):void 0})},[ee,Z]);const{allKinds:ce,loading:U,error:se}=q();return{loading:U,error:se,allKinds:ce!=null?ce:[],selectedKind:ee,setSelectedKind:le}}const G=X=>{const{allowedKinds:_,hidden:b,initialFilter:Z="component"}=X,Y=(0,g.h_)(F.$),{error:ee,allKinds:le,selectedKind:ce,setSelectedKind:U}=V({initialFilter:Z});if((0,z.useEffect)(()=>{ee&&Y.post({message:"Failed to load entity kinds",severity:"error"})},[ee,Y]),ee)return null;const se=re(le,_,ce),de=Object.keys(se).map(ue=>({value:ue,label:se[ue]}));return b?null:z.createElement(A.Z,{pb:1,pt:1},z.createElement(j.H,{label:"Kind",items:de,selected:ce.toLocaleLowerCase("en-US"),onChange:ue=>U(String(ue))}))}},93724:(Q,B,x)=>{"use strict";x.d(B,{n:()=>q});var j=x(42494),g=x(61837),F=x(29611),A=x(50581),z=x(15223),J=x(79692),D=x(33375),R=x(21853),k=x(2784),L=x(48760),W=x(62862),K=x(85166);const H=(0,J.Z)(re=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),q=()=>{const re=H(),{updateFilters:V,queryParameters:{text:G}}=(0,W.wp)(),X=(0,k.useMemo)(()=>[G].flat()[0],[G]),[_,b]=(0,k.useState)(X!=null?X:"");return(0,L.Z)(()=>{V({text:_.length?new K.SZ(_):void 0})},250,[_,V]),(0,k.useEffect)(()=>{X&&b(X)},[X]),k.createElement(z.Z,{className:re.searchToolbar},k.createElement(j.Z,null,k.createElement(F.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:re.input,placeholder:"Search",autoComplete:"off",onChange:Z=>b(Z.target.value),value:_,startAdornment:k.createElement(A.Z,{position:"start"},k.createElement(R.Z,null)),endAdornment:k.createElement(A.Z,{position:"end"},k.createElement(g.Z,{"aria-label":"clear search",onClick:()=>b(""),edge:"end",disabled:_.length===0},k.createElement(D.Z,null)))})))}},4467:(Q,B,x)=>{"use strict";x.d(B,{U:()=>W});var j=x(2784),g=x(4812),F=x(18149),A=x.n(F),z=x(829),J=x.n(z),D=x(59274),R=x(23200),k=x(62862),L=x(85166);function W(){var se;const K=(0,D.h_)(R.A),{filters:{kind:H,type:q},queryParameters:{type:re},updateFilters:V}=(0,k.wp)(),G=(0,j.useMemo)(()=>[re].flat().filter(Boolean),[re]),[X,_]=(0,j.useState)(G.length?G:(se=q==null?void 0:q.getTypes())!=null?se:[]);(0,j.useEffect)(()=>{G.length&&_(G)},[G]);const[b,Z]=(0,j.useState)([]),Y=(0,j.useMemo)(()=>H==null?void 0:H.value,[H]),{error:ee,loading:le,value:ce}=(0,g.Z)(async()=>Y?await K.getEntityFacets({filter:{kind:Y},facets:["spec.type"]}).then(ue=>ue.facets["spec.type"]||[]):[],[Y,K]),U=(0,j.useRef)(ce);return(0,j.useEffect)(()=>{const de=U.current;if(U.current=ce,le||!Y||de===ce||!ce)return;const ue=[...new Set(J()(ce,ge=>-ge.count).map(ge=>ge.value.toLocaleLowerCase("en-US")))];Z(ue);const te=X.filter(ge=>ue.includes(ge));A()(X,te)||_(te)},[le,Y,X,_,ce]),(0,j.useEffect)(()=>{V({type:X.length?new L.Bf(X):void 0})},[X,V]),{loading:le,error:ee,availableTypes:b,selectedTypes:X,setSelectedTypes:_}}},18157:(Q,B,x)=>{"use strict";var ss,Mi,En,os,Il,eo,Xr,ls,to;x.r(B),x.d(B,{Router:()=>x4});var j={};x.r(j),x.d(j,{DescriptionField:()=>uA});var g=x(2784),F=x(73557),A=x(32430),z=x(8320);const J=s=>(0,A.v)(s,e=>e.selectByComponentData({key:z.n}).findComponentData({key:z.r})),D="scaffolder.layout.v1",R="scaffolder.layouts.wrapper.v1",k=s=>(0,A.v)(s,e=>e.selectByComponentData({key:R}).findComponentData({key:D}));var L=x(34202),W=x(48828),K=x(52391),H=x(95133),q=x(91865),re=x(98449),V=x(58674),G=x(44798),X=x(80798),_=x(21594),b=x(22769),Z=x(42494),Y=x(79692);const ee=(0,Y.Z)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),le=s=>{const{children:e,displayLabel:i=!0,rawErrors:l=[],errors:a,help:c,rawDescription:u,required:f,disabled:h}=s,d=ee();return g.createElement(Z.Z,{fullWidth:!0,error:!!l.length,required:f,disabled:h},e,i&&u?g.createElement(b.S,{content:u,linkTarget:"_blank",className:d.markdownDescription}):null,a,c)};var ce=x(56939),U=x(29611);const se=s=>{var u;const{setSecrets:e,secrets:i}=(0,L.T)(),{name:l,onChange:a,schema:{title:c}}=s;return g.createElement(g.Fragment,null,g.createElement(ce.Z,{htmlFor:c},c),g.createElement(U.Z,{id:c,"aria-describedby":c,onChange:f=>{var h,d;a(Array((h=f.target)==null?void 0:h.value.length).fill("*").join("")),e({[l]:(d=f.target)==null?void 0:d.value})},value:(u=i[l])!=null?u:"",type:"password",autoComplete:"off"}))},de=s=>{const{schema:{description:e},rawErrors:i,disabled:l,errors:a,required:c}=s;return g.createElement(le,{rawErrors:i,rawDescription:e,disabled:l,errors:a,required:c},g.createElement(se,{...s}))};var ue=x(99155),te=x(46076),ge=x(35947),Ze=x(12448),Xe=x(61411),gt=x(72013),Fe=x(57378),De=x(767),Ft=x(62787);const Et=[{component:W.E,name:"EntityPicker",schema:te.ks},{component:K.p,name:"EntityNamePicker",validation:H.e,schema:ge.K},{component:q.I,name:"EntityTagsPicker",schema:Ze.o},{component:V.O,name:"RepoUrlPicker",validation:G.h,schema:Xe.k},{component:re.D,name:"OwnerPicker",schema:gt.f},{component:X.X,name:"OwnedEntityPicker",schema:Fe.L},{component:_.c,name:"MyGroupsPicker",schema:De.E},{component:de,name:"Secret"},{component:ue.KM,name:"MultiEntityPicker",schema:Ft.Vq,validation:ue.u8}];var rt=x(67869),$i=x(17182),Mr=x(4812),Gn=x(31900),qe=x(27616),Rl=x(70660),fs=x(8284),he=x(95544),je=x(82113),Ae=x(60905),et=x(27556),It=x(37390),Bt=x(97485),Kt=x(15584),At=x(91256),Jn=x(58987),pn=x(89571),Ve=x(90436),Yn=x(12524),wn=x.n(Yn),ot=x(38016),ar=x(84905),at=x(59274),ft=x(51491),Qc=x(67977),ei=x(37630),hs=x(44303),Yd=x(15698),ds=x(92980),ms=x(90996),Fi=x(35182),_c=x(7089),an=x(61837),Cn=x(86136),On=x(49378),An=x(12231),qc=x(50758),eu=x(79784),Xd=x(88188),Qd=x(30254),_d=x(27604),_x=x(5075),tu=x(43054);const qx=(0,Y.Z)(s=>({button:{color:s.page.fontColor}}));function Ll(s){const{onEditorClicked:e,onActionsClicked:i,onTasksClicked:l,onCreateClicked:a}=s,c=qx(),[u,f]=(0,g.useState)();if(!e&&!i)return null;const h=m=>{f(m.currentTarget)},d=()=>{f(void 0)};return g.createElement(g.Fragment,null,g.createElement(an.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!u,"aria-haspopup":"true",role:"button",onClick:h,"data-testid":"menu-button",color:"inherit",className:c.button},g.createElement(tu.Z,null)),g.createElement(eu.ZP,{"aria-labelledby":"long-menu",open:!!u,onClose:d,anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(qc.Z,null,a&&g.createElement(An.Z,{onClick:a},g.createElement(Cn.Z,null,g.createElement(Xd.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Create"})),e&&g.createElement(An.Z,{onClick:e},g.createElement(Cn.Z,null,g.createElement(_d.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Template Editor"})),i&&g.createElement(An.Z,{onClick:i},g.createElement(Cn.Z,null,g.createElement(Qd.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Installed Actions"})),l&&g.createElement(An.Z,{onClick:l},g.createElement(Cn.Z,null,g.createElement(_x.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Task List"})))))}const eS=(0,Y.Z)(s=>({code:{fontFamily:"Menlo, monospace",padding:s.spacing(1),backgroundColor:s.palette.type==="dark"?s.palette.grey[700]:s.palette.grey[300],display:"inline-block",borderRadius:5,border:`1px solid ${s.palette.grey[500]}`,position:"relative"},codeRequired:{"&::after":{position:"absolute",content:'"*"',top:0,right:s.spacing(.5),fontWeight:"bolder",color:s.palette.error.light}}})),tS=s=>g.createElement(Ae.Z,{container:!0},s.examples.map((e,i)=>g.createElement(g.Fragment,{key:`example-${i}`},g.createElement(Ae.Z,{item:!0,lg:3},g.createElement(he.Z,{padding:4},g.createElement(Ve.Z,null,e.description))),g.createElement(Ae.Z,{item:!0,lg:9},g.createElement(he.Z,{padding:1},g.createElement(Qc.O,{text:e.example,showLineNumbers:!0,showCopyCodeButton:!0,language:"yaml"})))))),nS=()=>{const s=(0,at.h_)(Gn.l),e=eS(),{loading:i,value:l,error:a}=(0,Mr.Z)(async()=>s.listActions()),[c,u]=(0,g.useState)({});if(i)return g.createElement(ei.E,null);if(a)return g.createElement(g.Fragment,null,g.createElement(hs.y,{error:a}),g.createElement(Yd.u,{missing:"info",title:"No information to display",description:"There are no actions installed or there was an issue communicating with backend."}));const f=p=>!p||p.length<1?g.createElement(Ve.Z,null,"No schema defined"):g.createElement(At.Z,{component:et.Z},g.createElement(It.Z,{size:"small"},g.createElement(Jn.Z,null,g.createElement(pn.Z,null,g.createElement(Kt.Z,null,"Name"),g.createElement(Kt.Z,null,"Title"),g.createElement(Kt.Z,null,"Description"),g.createElement(Kt.Z,null,"Type"))),g.createElement(Bt.Z,null,p))),h=p=>{var v,y;return p.type?p.type!=="array"?[p.type].flat():[`${p.type}(${(y=(v=p.items)==null?void 0:v.type)!=null?y:"unknown"})`]:["unknown"]},d=(p,v)=>{const y=v==null?void 0:v.properties;if(y)return Object.entries(y).map(S=>{var P,M,$;const[E]=S,w=`${p}.${E}`,C=S[1],O=wn()(e.code,{[e.codeRequired]:(P=v.required)==null?void 0:P.includes(E)}),I=h(C);return g.createElement(g.Fragment,{key:w},g.createElement(pn.Z,{key:w},g.createElement(Kt.Z,null,g.createElement("div",{className:O},E)),g.createElement(Kt.Z,null,C.title),g.createElement(Kt.Z,null,C.description),g.createElement(Kt.Z,null,I.map(N=>N.includes("object")?g.createElement(_c.Z,{label:N,key:N,icon:c[w]?g.createElement(ar.Z,null):g.createElement(ot.Z,null),variant:"outlined",onClick:()=>u(ne=>{const ie={...ne};return ie[w]=!ne[w],ie})}):g.createElement(_c.Z,{label:N,key:N,variant:"outlined"})))),g.createElement(pn.Z,null,g.createElement(Kt.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6},g.createElement(je.Z,{in:c[w],timeout:"auto",unmountOnExit:!0},g.createElement(he.Z,{sx:{margin:1}},g.createElement(Ve.Z,{variant:"h6",component:"div"},E),f(d(w,C.type==="array"?{properties:($=(M=C.items)==null?void 0:M.properties)!=null?$:{}}:C)))))))})},m=(p,v,y)=>{if(y)return g.createElement(g.Fragment,null,g.createElement(Ve.Z,{variant:"h6",component:"h4"},p),y.map((S,E)=>g.createElement("div",{key:E},f(d(`${v}.${E}`,S)))))};return l==null?void 0:l.map(p=>{var y,S,E,w,C,O;if(p.id.startsWith("legacy:"))return;const v=m("oneOf",`${p.id}.input`,(S=(y=p.schema)==null?void 0:y.input)==null?void 0:S.oneOf);return g.createElement(he.Z,{pb:4,key:p.id},g.createElement(Ve.Z,{variant:"h4",component:"h2",className:e.code},p.id),p.description&&g.createElement(b.S,{content:p.description}),((E=p.schema)==null?void 0:E.input)&&g.createElement(he.Z,{pb:2},g.createElement(Ve.Z,{variant:"h5",component:"h3"},"Input"),f(d(`${p.id}.input`,(w=p==null?void 0:p.schema)==null?void 0:w.input)),v),((C=p.schema)==null?void 0:C.output)&&g.createElement(he.Z,{pb:2},g.createElement(Ve.Z,{variant:"h5",component:"h3"},"Output"),f(d(`${p.id}.output`,(O=p==null?void 0:p.schema)==null?void 0:O.output))),p.examples&&g.createElement(qe.Z,null,g.createElement(fs.Z,{expandIcon:g.createElement(ot.Z,null)},g.createElement(Ve.Z,{variant:"h5",component:"h3"},"Examples")),g.createElement(Rl.Z,null,g.createElement(he.Z,{pb:2},g.createElement(tS,{examples:p.examples})))))})},rS=()=>{const s=(0,F.s0)(),e=(0,ft.t)(rt.Wp),i=(0,ft.t)(rt.p3),l=(0,ft.t)(rt._Z),a={onEditorClicked:()=>s(e()),onActionsClicked:void 0,onTasksClicked:()=>s(i()),onCreateClicked:()=>s(l())};return g.createElement(ds.T,{themeId:"home"},g.createElement(ms.h,{pageTitleOverride:"Create a New Component",title:"Installed actions",subtitle:"This is the collection of all installed actions"},g.createElement(Ll,{...a})),g.createElement(Fi.V,null,g.createElement(nS,null)))};var iS=x(26535),so=x(87603),ps=x(53818),ti=x(94339),oo=x(11776),sS=x(47603),oS=x(56881);const lS=(0,Y.Z)(s=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:s.spacing(1,0,1,0)},title:{margin:s.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:s.palette.text.primary},menuItem:{minHeight:s.spacing(6)},groupWrapper:{margin:s.spacing(1,1,2,1)}}),{name:"ScaffolderReactOwnerListPicker"});function aS(){return[{name:"Task Owner",items:[{id:"owned",label:"Owned",icon:sS.Z},{id:"all",label:"All",icon:oS.Z}]}]}const cS=s=>{const{filter:e,onSelectOwner:i}=s,l=lS(),a=aS();return g.createElement(ti.Z,{className:l.root},a.map(c=>g.createElement(g.Fragment,{key:c.name},g.createElement(Ve.Z,{variant:"subtitle2",component:"span",className:l.title},c.name),g.createElement(ti.Z,{className:l.groupWrapper},g.createElement(oo.Z,{disablePadding:!0,dense:!0,role:"menu"},c.items.map(u=>g.createElement(An.Z,{key:u.id,divider:!0,ContainerProps:{role:"menuitem"},onClick:()=>i(u.id),selected:u.id===e,className:l.menuItem,"data-testid":`owner-picker-${u.id}`},u.icon&&g.createElement(Cn.Z,{className:l.listIcon},g.createElement(u.icon,{fontSize:"small"})),g.createElement(On.Z,null,g.createElement(Ve.Z,{variant:"body1"},u.label)))))))))};var Fn=x(26228),uS=x(75951),nu=x.n(uS);const fS=({createdAt:s})=>{const e=Fn.ou.fromISO(s),i=Fn.Xp.fromDateTimes(e,Fn.ou.local()).toDuration().valueOf();return g.createElement(Ve.Z,{paragraph:!0},nu()(i,{round:!0})," ago")};var Nl=x(23200),qd=x(85056),Xn=x(8554);const hS=({entityRef:s})=>{var c,u,f;const e=(0,at.h_)(Nl.A),{value:i,loading:l,error:a}=(0,Mr.Z)(()=>e.getEntityByRef(s||""),[e,s]);return s?l||a?null:g.createElement(qd.d,{entityRef:(0,Xn.of)(s),title:(f=(u=(c=i==null?void 0:i.spec)==null?void 0:c.profile)==null?void 0:u.displayName)!=null?f:i==null?void 0:i.metadata.name}):g.createElement(Ve.Z,{paragraph:!0},"Unknown")};var ru=x(83890);const dS=({status:s})=>{switch(s){case"processing":return g.createElement(ru.wA,null,s);case"completed":return g.createElement(ru.Kq,null,s);case"error":default:return g.createElement(ru.vK,null,s)}},mS=({entityRef:s})=>{const e=(0,at.h_)(Gn.l),{value:i,loading:l,error:a}=(0,Mr.Z)(()=>e.getTemplateParameterSchema(s||""),[e,s]);return l||a||!s?null:g.createElement(qd.d,{entityRef:(0,Xn.of)(s),title:i==null?void 0:i.title})},pS=s=>{var d;const{initiallySelectedFilter:e="owned"}=s,i=(0,at.h_)(Gn.l),l=(0,ft.t)(rt._Z),[a,c]=(0,g.useState)(e),{value:u,loading:f,error:h}=(0,Mr.Z)(()=>{var m;return i.listTasks?(m=i.listTasks)==null?void 0:m.call(i,{filterByOwnership:a}):(console.warn("listTasks is not implemented in the scaffolderApi, please make sure to implement this method."),Promise.resolve({tasks:[]}))},[i,a]);return f?g.createElement(ei.E,null):h?g.createElement(g.Fragment,null,g.createElement(hs.y,{error:h}),g.createElement(Yd.u,{missing:"info",title:"No information to display",description:"There are no tasks or there was an issue communicating with backend."})):g.createElement(ps._i,null,g.createElement(ps._i.Filters,null,g.createElement(cS,{filter:a,onSelectOwner:m=>c(m)})),g.createElement(ps._i.Content,null,g.createElement(iS.i,{data:(d=u==null?void 0:u.tasks)!=null?d:[],title:"Tasks",columns:[{title:"Task ID",field:"id",render:m=>g.createElement(so.rU,{to:`${l()}/tasks/${m.id}`},m.id)},{title:"Template",field:"spec.templateInfo.entity.metadata.title",render:m=>{var p;return g.createElement(mS,{entityRef:(p=m.spec.templateInfo)==null?void 0:p.entityRef})}},{title:"Created",field:"createdAt",render:m=>g.createElement(fS,{createdAt:m.createdAt})},{title:"Owner",field:"createdBy",render:m=>{var p,v;return g.createElement(hS,{entityRef:(v=(p=m.spec)==null?void 0:p.user)==null?void 0:v.ref})}},{title:"Status",field:"status",render:m=>g.createElement(dS,{status:m.status})}]})))},gS=s=>{const e=(0,F.s0)(),i=(0,ft.t)(rt.Wp),l=(0,ft.t)(rt._H),a=(0,ft.t)(rt._Z),c={onEditorClicked:()=>e(i()),onActionsClicked:()=>e(l()),onTasksClicked:void 0,onCreateClicked:()=>e(a())};return g.createElement(ds.T,{themeId:"home"},g.createElement(ms.h,{pageTitleOverride:"Templates Tasks",title:"List template tasks",subtitle:"All tasks that have been started"},g.createElement(Ll,{...c})),g.createElement(Fi.V,null,g.createElement(pS,{...s})))};var lo=x(70666),em=x(52267),tm=x(70289),yS=x(63003),nm=x(62862),vS=x(93724),bS=x(20995),xS=x(17740),SS=x(82154),ES=x(82108),wS=x.n(ES),iu=x(21324),$l=x(5806),Fl=x(86619),CS=x(19996),OS=x(25505),AS=x(97570),kS=x(4467),rm=x(95475);const PS=g.createElement(OS.Z,{fontSize:"small"}),TS=g.createElement(CS.Z,{fontSize:"small"}),IS=(0,Y.Z)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),DS=()=>{const s=IS(),e=(0,at.h_)(rm.$),{error:i,loading:l,availableTypes:a,selectedTypes:c,setSelectedTypes:u}=(0,kS.U)();return l?g.createElement(ei.E,null):i?(e.post({message:`Failed to load entity types with error: ${i}`,severity:"error"}),null):a?g.createElement(he.Z,{className:s.root,pb:1,pt:1},g.createElement(Ve.Z,{className:s.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),g.createElement(AS.ZP,{PopperComponent:f=>g.createElement("div",{...f},f.children),multiple:!0,id:"categories-picker",options:a,value:c,onChange:(f,h)=>u(h),renderOption:(f,{selected:h})=>g.createElement($l.Z,{control:g.createElement(iu.Z,{icon:PS,checkedIcon:TS,checked:h}),label:wS()(f)}),size:"small",popupIcon:g.createElement(ot.Z,null),renderInput:f=>g.createElement(Fl.Z,{...f,variant:"outlined"})})):null};var MS=x(83741),im=x(5191),RS=x(16820),LS=x(9277),ao=x(92641),NS=x(14914),$S=x(19631),FS=x(14503),gs=x(24579),Rr=x(85256),kn=x(77277),co=x(52160),su=x(60364),BS=x(44614),jS=x(56017);const WS=(0,Y.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:s})=>s,color:({cardFontColor:s})=>s},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),VS=s=>{const{template:{metadata:{title:e,name:i},spec:{type:l}}}=s,{getPageTheme:a}=(0,su.Z)(),c=a({themeId:l}),u=WS({cardFontColor:c.fontColor,cardBackgroundImage:c.backgroundImage}),f=g.createElement("div",{className:u.subtitleWrapper},g.createElement("div",null,l),g.createElement("div",null,g.createElement(jS.L,{entity:s.template,style:{padding:0}})));return g.createElement(BS.h,{title:e!=null?e:i,subtitle:f,classes:{root:u.header}})},ZS=(0,Y.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),sm=({icon:s,text:e,url:i})=>{const l=ZS();return g.createElement("div",{className:l.linkText},g.createElement(s,{fontSize:"small"}),g.createElement(so.rU,{style:{marginLeft:"8px"},to:i},e||i))};var ni=x(39203),Bi=x(95689);const zS=(0,Y.Z)(s=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:s.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:s.palette.link}})),US=s=>{var y,S,E,w,C,O,I;const{onSelected:e,template:i}=s,l=zS(),a=(0,ao.z)(),c=(0,NS.h)(i,LS.S4),u=(0,lo.q)(),f=P=>{var M;return P&&(M=u.getSystemIcon(P))!=null?M:co.Z},h=!!((y=i.metadata.tags)!=null&&y.length),d=!!((S=s.additionalLinks)!=null&&S.length)||!!((E=i.metadata.links)!=null&&E.length),m=!h&&!d,{allowed:p}=(0,ni.g)({permission:Bi.Wq}),v=(0,g.useCallback)(()=>{a.captureEvent("click","Template has been opened"),e==null||e(i)},[a,e,i]);return g.createElement(ti.Z,null,g.createElement(VS,{template:i}),g.createElement(gs.Z,null,g.createElement(Ae.Z,{container:!0,spacing:2},g.createElement(Ae.Z,{item:!0,xs:12},g.createElement(he.Z,{className:l.box},g.createElement(b.S,{className:l.markdown,content:(w=i.metadata.description)!=null?w:"No description"}))),m&&g.createElement(Ae.Z,{item:!0,xs:12},g.createElement(Rr.Z,{"data-testid":"template-card-separator"})),h&&g.createElement(g.Fragment,null,g.createElement(Ae.Z,{item:!0,xs:12},g.createElement(Rr.Z,{"data-testid":"template-card-separator--tags"})),g.createElement(Ae.Z,{item:!0,xs:12},g.createElement(Ae.Z,{container:!0,spacing:2},(C=i.metadata.tags)==null?void 0:C.map(P=>g.createElement(Ae.Z,{key:`grid-${P}`,item:!0},g.createElement(_c.Z,{style:{margin:0},size:"small",label:P,key:P})))))),d&&g.createElement(g.Fragment,null,g.createElement(Ae.Z,{item:!0,xs:12},g.createElement(Rr.Z,{"data-testid":"template-card-separator--links"})),g.createElement(Ae.Z,{item:!0,xs:12},g.createElement(Ae.Z,{container:!0,spacing:2},(O=s.additionalLinks)==null?void 0:O.map(({icon:P,text:M,url:$},N)=>g.createElement(Ae.Z,{className:l.linkText,item:!0,xs:6,key:N},g.createElement(sm,{icon:P,text:M,url:$}))),(I=i.metadata.links)==null?void 0:I.map(({url:P,icon:M,title:$},N)=>g.createElement(Ae.Z,{className:l.linkText,item:!0,xs:6,key:N},g.createElement(sm,{icon:f(M),text:$||P,url:P})))))))),g.createElement(FS.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},g.createElement("div",{className:l.footer},g.createElement("div",{className:l.ownedBy},c.length>0&&g.createElement(g.Fragment,null,g.createElement(em.tB,{fontSize:"small"}),g.createElement($S.r,{style:{marginLeft:"8px"},entityRefs:c,defaultKind:"Group",hideIcons:!0}))),p?g.createElement(kn.Z,{size:"small",variant:"outlined",color:"primary",onClick:v},"Choose"):null)))},HS=s=>{const{templates:e,title:i,components:{CardComponent:l}={},onSelected:a}=s,c=typeof i=="string"?g.createElement(tm.y,{title:i}):i;if(e.length===0)return null;const u=l||US;return g.createElement(Fi.V,null,c,g.createElement(RS.O,null,e.map(({template:f,additionalLinks:h})=>g.createElement(u,{key:(0,Xn.eE)(f),additionalLinks:h,template:f,onSelected:a}))))},KS=s=>{const{loading:e,error:i,entities:l}=(0,nm.wp)(),{groups:a,templateFilter:c,TemplateCardComponent:u,onTemplateSelected:f}=s,h=(0,at.h_)(im.V),d=(0,g.useCallback)(m=>{f==null||f(m)},[f]);return e?g.createElement(ei.E,null):i?(h.post(i),null):!l||!l.length?g.createElement(Ve.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",g.createElement(so.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):g.createElement(g.Fragment,null,a.map(({title:m,filter:p},v)=>{const y=l.filter(MS.t).filter(S=>c?c(S):!0).filter(p).map(S=>{var w,C;const E=(C=(w=s.additionalLinksForEntity)==null?void 0:w.call(s,S))!=null?C:[];return{template:S,additionalLinks:E}});return g.createElement(HS,{key:v,templates:y,title:m,components:{CardComponent:u},onSelected:d})}))};var GS=x(41156),om=x(39857),JS=x(38571);const YS=s=>{const{title:e,to:i}=s,{allowed:l}=(0,ni.g)({permission:JS.x7}),a=(0,GS.Z)(c=>c.breakpoints.down("xs"));return!i||!l?null:a?g.createElement(an.Z,{component:om.rU,color:"primary",title:e,size:"small",to:i},g.createElement(Xd.Z,null)):g.createElement(kn.Z,{component:om.rU,variant:"contained",color:"primary",to:i},e)},XS={title:"Templates",filter:()=>!0},QS=s=>[...s,{title:"Other Templates",filter:e=>![...s].some(({filter:i})=>i(e))}],_S=s=>{var C,O,I;const e=(0,ft.t)(rt.Jd),{TemplateCardComponent:i,groups:l=[],templateFilter:a,headerOptions:c}=s,u=(0,F.s0)(),f=(0,ft.t)(rt.Wp),h=(0,ft.t)(rt._H),d=(0,ft.t)(rt.p3),m=(0,ft.t)(rt.jU),p=(0,ft.t)(rt.QQ),v=(0,lo.q)(),y=l.length?QS(l):[XS],S={onEditorClicked:((C=s==null?void 0:s.contextMenu)==null?void 0:C.editor)!==!1?()=>u(f()):void 0,onActionsClicked:((O=s==null?void 0:s.contextMenu)==null?void 0:O.actions)!==!1?()=>u(h()):void 0,onTasksClicked:((I=s==null?void 0:s.contextMenu)==null?void 0:I.tasks)!==!1?()=>u(d()):void 0},E=(0,g.useCallback)(P=>{var ne,ie;const{kind:M,namespace:$,name:N}=(0,Xn.of)((0,Xn.eE)(P));return(ne=P.metadata.annotations)!=null&&ne["backstage.io/techdocs-ref"]&&m?[{icon:(ie=v.getSystemIcon("docs"))!=null?ie:em.zG,text:"View TechDocs",url:m({kind:M,namespace:$,name:N})}]:[]},[v,m]),w=(0,g.useCallback)(P=>{const{namespace:M,name:$}=(0,Xn.of)((0,Xn.eE)(P));u(p({namespace:M,templateName:$}))},[u,p]);return g.createElement(nm.UO,null,g.createElement(ds.T,{themeId:"home"},g.createElement(ms.h,{pageTitleOverride:"Create a new component",title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",...c},g.createElement(Ll,{...S})),g.createElement(Fi.V,null,g.createElement(tm.y,{title:"Available Templates"},g.createElement(YS,{title:"Register Existing Component",to:e&&e()}),g.createElement(yS.q,null,"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...).")),g.createElement(ps._i,null,g.createElement(ps._i.Filters,null,g.createElement(vS.n,null),g.createElement(bS.t,{initialFilter:"template",hidden:!0}),g.createElement(xS.E,{initialFilter:"all",availableFilters:["all","starred"]}),g.createElement(DS,null),g.createElement(SS.x,null)),g.createElement(ps._i.Content,null,g.createElement(KS,{groups:y,templateFilter:a,TemplateCardComponent:i,onTemplateSelected:w,additionalLinksForEntity:E}))))))};var qS=x(24978),eE=x(37224),tE=x(76777),lm=x(93006);const nE=s=>{const e=(0,at.h_)(Gn.l),{value:i,loading:l,error:a}=(0,Mr.Z)(()=>e.getTemplateParameterSchema(s),[e,s]);return{manifest:i,loading:l,error:a}};var ou=x(31625),Bl=x(31377),jl=x(34546),Wl=x(67358);const am={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},rE=Object.prototype.toString;function it(s){const e=rE.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const iE="object",sE="array";function oE(s,e={}){return s.replace(/\{\{\w+\}\}/g,i=>{const l=i.replace(/[{}]/g,""),a=e[l],c=it(a);return c===iE||c===sE?JSON.stringify(a):a})}function lE(s,e,i=s){var l;const a=(l=am[s])!==null&&l!==void 0?l:i;return oE(a,e)}function aE(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function cE(s,e){return{type:"error",name:s,code:aE(s),message:lE(s,e),data:e}}function Ne(s){return cE.bind(null,s)}function uo(s,e=[]){for(let i=0;i<s.length;i+=1){const l=s[i];Array.isArray(l)?uo(l,e):e.push(l)}return e}const ji={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function fo(s,e,i){const l={...e};return Object.defineProperty(l,"getOneOfOrigin",{enumerable:!1,value:()=>({index:i,schema:s})}),l}function Pn(s){return(s==null?void 0:s.type)==="error"}function uE(s){return s instanceof Promise}function Vl(s){return Pn(s)||uE(s)}function T4(s){return isJsonError(s)}const{DECLARATOR_ONEOF:ys}=ji;function lu(s,e,i=s.rootSchema,l="#"){if(e!=null&&i[ys]){const u=[],f=i[ys],h=e[i[ys]];if(h===void 0)return s.errors.missingOneOfPropertyError({property:f,pointer:l,schema:i,value:e});for(let d=0;d<i.oneOf.length;d+=1){const m=s.resolveRef(i.oneOf[d]),p=s.step(f,m,e,l);if(Pn(p))return p;let v=uo(s.validate(h,p,l));if(v=v.filter(Vl),v.length>0)u.push(...v);else return fo(i,m,d)}return s.errors.oneOfPropertyError({property:f,value:h,pointer:l,schema:i,errors:u})}const a=[],c=[];for(let u=0;u<i.oneOf.length;u+=1){const f=s.resolveRef(i.oneOf[u]);let h=uo(s.validate(e,f,l));h=h.filter(Vl),h.length>0?c.push(...h):a.push({index:u,schema:f})}return a.length===1?fo(i,a[0].schema,a[0].index):a.length>1?s.errors.multipleOneOfError({value:e,pointer:l,schema:i,matches:a}):s.errors.oneOfError({value:JSON.stringify(e),pointer:l,schema:i,oneOf:i.oneOf,errors:c})}function fE(s,e,i,l){if(i==null||e.properties==null)return-1;let a=0;const c=Object.keys(e.properties);for(let u=0;u<c.length;u+=1){const f=c[u];i[f]!=null&&s.isValid(i[f],e.properties[f],l)&&(a+=1)}return a}function Zl(s,e,i=s.rootSchema,l="#"){if(e!=null&&i[ys]){const c=[],u=i[ys],f=e[i[ys]];if(f===void 0)return s.errors.missingOneOfPropertyError({property:u,pointer:l,schema:i,value:e});for(let h=0;h<i.oneOf.length;h+=1){const d=s.resolveRef(i.oneOf[h]),m=s.step(u,d,e,l);if(Pn(m))return m;let p=uo(s.validate(f,m,l));if(p=p.filter(Vl),p.length>0)c.push(...p);else return fo(i,d,h)}return s.errors.oneOfPropertyError({property:u,value:f,pointer:l,schema:i,errors:c})}const a=[];for(let c=0;c<i.oneOf.length;c+=1){const u=s.resolveRef(i.oneOf[c]);s.isValid(e,u,l)&&a.push({schema:u,index:c})}if(a.length===1)return fo(i,a[0].schema,a[0].index);if(it(e)==="object"){let c,u=-1,f=0;for(let h=0;h<i.oneOf.length;h+=1){const d=s.resolveRef(i.oneOf[h]),m=fE(s,d,e);f<m&&(f=m,c=i.oneOf[h],u=h)}return c===void 0?s.errors.oneOfError({value:JSON.stringify(e),pointer:l,schema:i,oneOf:i.oneOf}):fo(i,c,u)}return a.length>1?s.errors.multipleOneOfError({matches:a,pointer:l,schema:i,value:e}):s.errors.oneOfError({value:JSON.stringify(e),pointer:l,schema:i,oneOf:i.oneOf})}const hE=(s,e,i,l)=>{if(Array.isArray(e.oneOf)){const a=s.resolveOneOf(i,e,l);if(Pn(a))return a}};var dE=x(39714),cm=x.n(dE);const mE=(s,e)=>e,ho=(s,e)=>cm()(s,e,{arrayMerge:mE}),pE=(s,e)=>{const i=s.concat(e);return i.filter((l,a)=>i.indexOf(l)===a)},gE=(s,e)=>cm()(s,e,{arrayMerge:pE});function cn(s,e){const i=it(s),l=it(e);if(i!==l)return s;const a=gE(s,e);return s.getOneOfOrigin?Object.defineProperty(a,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(a,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),a}function mo(s,...e){const i={};return Object.keys(s).forEach(l=>{e.includes(l)||(i[l]=s[l])}),s.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:s.getOneOfOrigin}),i}var yE=Function.prototype.toString,au=Object.create,vE=Object.prototype.toString,bE=function(){function s(){this._keys=[],this._values=[]}return s.prototype.has=function(e){return!!~this._keys.indexOf(e)},s.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},s.prototype.set=function(e,i){this._keys.push(e),this._values.push(i)},s}();function xE(){return new bE}function SE(){return new WeakMap}var EE=typeof WeakMap!="undefined"?SE:xE;function cu(s){if(!s)return au(null);var e=s.constructor;if(e===Object)return s===Object.prototype?{}:au(s);if(e&&~yE.call(e).indexOf("[native code]"))try{return new e}catch{}return au(s)}function wE(s){var e="";return s.global&&(e+="g"),s.ignoreCase&&(e+="i"),s.multiline&&(e+="m"),s.unicode&&(e+="u"),s.sticky&&(e+="y"),e}function CE(s){return s.flags}var OE=/test/g.flags==="g"?CE:wE;function um(s){var e=vE.call(s);return e.substring(8,e.length-1)}function AE(s){return s[Symbol.toStringTag]||um(s)}var kE=typeof Symbol!="undefined"?AE:um,PE=Object.defineProperty,TE=Object.getOwnPropertyDescriptor,fm=Object.getOwnPropertyNames,uu=Object.getOwnPropertySymbols,hm=Object.prototype,dm=hm.hasOwnProperty,IE=hm.propertyIsEnumerable,mm=typeof uu=="function";function DE(s){return fm(s).concat(uu(s))}var ME=mm?DE:fm;function zl(s,e,i){for(var l=ME(s),a=0,c=l.length,u=void 0,f=void 0;a<c;++a)if(u=l[a],!(u==="callee"||u==="caller")){if(f=TE(s,u),!f){e[u]=i.copier(s[u],i);continue}!f.get&&!f.set&&(f.value=i.copier(f.value,i));try{PE(e,u,f)}catch{e[u]=f.value}}return e}function RE(s,e){var i=new e.Constructor;e.cache.set(s,i);for(var l=0,a=s.length;l<a;++l)i[l]=e.copier(s[l],e);return i}function LE(s,e){var i=new e.Constructor;return e.cache.set(s,i),zl(s,i,e)}function pm(s,e){return s.slice(0)}function NE(s,e){return s.slice(0,s.size,s.type)}function $E(s,e){return new e.Constructor(pm(s.buffer))}function FE(s,e){return new e.Constructor(s.getTime())}function gm(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(l,a){i.set(a,e.copier(l,e))}),i}function BE(s,e){return zl(s,gm(s,e),e)}function jE(s,e){var i=cu(e.prototype);e.cache.set(s,i);for(var l in s)dm.call(s,l)&&(i[l]=e.copier(s[l],e));return i}function WE(s,e){var i=cu(e.prototype);e.cache.set(s,i);for(var l in s)dm.call(s,l)&&(i[l]=e.copier(s[l],e));for(var a=uu(s),c=0,u=a.length,f=void 0;c<u;++c)f=a[c],IE.call(s,f)&&(i[f]=e.copier(s[f],e));return i}var VE=mm?WE:jE;function ZE(s,e){var i=cu(e.prototype);return e.cache.set(s,i),zl(s,i,e)}function fu(s,e){return new e.Constructor(s.valueOf())}function zE(s,e){var i=new e.Constructor(s.source,OE(s));return i.lastIndex=s.lastIndex,i}function Ul(s,e){return s}function ym(s,e){var i=new e.Constructor;return e.cache.set(s,i),s.forEach(function(l){i.add(e.copier(l,e))}),i}function UE(s,e){return zl(s,ym(s,e),e)}var HE=Array.isArray,hu=Object.assign,KE=Object.getPrototypeOf||function(s){return s.__proto__},vm={array:RE,arrayBuffer:pm,blob:NE,dataView:$E,date:FE,error:Ul,map:gm,object:VE,regExp:zE,set:ym},GE=hu({},vm,{array:LE,map:BE,object:ZE,set:UE});function JE(s){return{Arguments:s.object,Array:s.array,ArrayBuffer:s.arrayBuffer,Blob:s.blob,Boolean:fu,DataView:s.dataView,Date:s.date,Error:s.error,Float32Array:s.arrayBuffer,Float64Array:s.arrayBuffer,Int8Array:s.arrayBuffer,Int16Array:s.arrayBuffer,Int32Array:s.arrayBuffer,Map:s.map,Number:fu,Object:s.object,Promise:Ul,RegExp:s.regExp,Set:s.set,String:fu,WeakMap:Ul,WeakSet:Ul,Uint8Array:s.arrayBuffer,Uint8ClampedArray:s.arrayBuffer,Uint16Array:s.arrayBuffer,Uint32Array:s.arrayBuffer,Uint64Array:s.arrayBuffer}}function bm(s){var e=hu({},vm,s),i=JE(e),l=i.Array,a=i.Object;function c(u,f){if(f.prototype=f.Constructor=void 0,!u||typeof u!="object")return u;if(f.cache.has(u))return f.cache.get(u);if(f.prototype=KE(u),f.Constructor=f.prototype&&f.prototype.constructor,!f.Constructor||f.Constructor===Object)return a(u,f);if(HE(u))return l(u,f);var h=i[kE(u)];return h?h(u,f):typeof u.then=="function"?u:a(u,f)}return function(f){return c(f,{Constructor:void 0,cache:EE(),copier:c,prototype:void 0})}}function YE(s){return bm(hu({},GE,s))}var I4=YE({}),XE=bm({});const Hl=XE;function Kl(s,e,i){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const l=s.validate(i,s.resolveRef(e.if));if(l.length===0&&e.then)return s.resolveRef(e.then);if(l.length!==0&&e.else)return s.resolveRef(e.else)}}}const QE=(s,e,i,l)=>{const a=Kl(s,e,i);if(a)return s.validate(i,a,l)};function xm(s,e,i){var l;const a={...(l=s.resolveRef(e))!==null&&l!==void 0?l:{}},c=Kl(s,a,i);return c||mo(a,"if","then","else")}function du(s,e,i=s.rootSchema){let l=Hl(i);for(let a=0;a<i.allOf.length;a+=1){const c=xm(s,i.allOf[a],e);l=cn(l,c)}return delete l.allOf,l}function Sm(s,e){const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;let l={};return i.forEach(a=>{l=cn(l,s.resolveRef(a))}),l}const _E=(s,e,i,l)=>{const{allOf:a}=e;if(!Array.isArray(a)||a.length===0)return;const c=[];return e.allOf.forEach(u=>{c.push(...s.validate(i,u,l))}),c};function qE(s){return s.filter((e,i)=>s.indexOf(e)===i)}function ri(s){return it(s)==="object"}function Em(s,e,i){const{dependencies:l}=e;if(!ri(l)||!ri(i))return;let a=!1,c={required:[]};if(Object.keys(l).forEach(u=>{var f,h;if(i[u]==null&&!(!((f=e.required)===null||f===void 0)&&f.includes(u)||!((h=c.required)===null||h===void 0)&&h.includes(u)))return;const d=l[u];if(Array.isArray(d)){a=!0,c.required.push(...d);return}if(ri(d)){a=!0,c=cn(c,s.resolveRef(d));return}}),a)return c.required=qE(c.required),c}const ew=(s,e,i,l)=>{if(it(e.dependencies)!=="object")return;const a=[];return Object.keys(i).forEach(c=>{if(e.dependencies[c]===void 0||e.dependencies[c]===!0)return;if(e.dependencies[c]===!1){a.push(s.errors.missingDependencyError({pointer:l,schema:e,value:i}));return}let u;const f=it(e.dependencies[c]);if(f==="array")u=e.dependencies[c].filter(h=>i[h]===void 0).map(h=>s.errors.missingDependencyError({missingProperty:h,pointer:l,schema:e,value:i}));else if(f==="object")u=s.validate(i,e.dependencies[c],l);else throw new Error(`Invalid dependency definition for ${l}/${c}. Must be string[] or schema`);a.push(...u)}),a.length>0?a:void 0};function wm(s,e,i){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let l;return e.anyOf.forEach(a=>{a=s.resolveRef(a),s.isValid(i,a)&&(l=l?cn(l,a):a)}),l}function mu(s,e,i=s.rootSchema,l="#"){const{anyOf:a}=i;if(!Array.isArray(a)||a.length===0)return i;const c=wm(s,i,e);if(c==null)return s.errors.anyOfError({pointer:l,schema:i,value:e,anyOf:JSON.stringify(a)});const u=cn(i,c);return mo(u,"anyOf")}const tw=(s,e,i,l)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let a=0;a<e.anyOf.length;a+=1)if(s.isValid(i,e.anyOf[a]))return;return s.errors.anyOfError({pointer:l,schema:e,value:i,anyOf:e.anyOf})}},Cm=["allOf","anyOf","oneOf","dependencies","if","then","else"],nw=["allOf","anyOf","oneOf","dependencies","if"];function rw(s){const e=Object.keys(s);return nw.findIndex(i=>e.includes(i))!==-1}function pu(s,e,i,l){let a,c;if(e=s.resolveRef(e),e.oneOf){const m=Zl(s,i,e,l);Pn(m)?c=m:m&&(a=cn(a!=null?a:{},m))}if(Array.isArray(e.allOf)){const m=e.allOf.map(p=>{if(rw(p)){let v=pu(s,p,i,l);return v?(v=cn(p,v),mo(v,...Cm)):void 0}return p});if(m.length>0){const p=Sm(s,{allOf:m});a=cn(a!=null?a:{},p)}}const u=wm(s,e,i);u&&(a=cn(a!=null?a:{},u));const f=Em(s,e,i);f&&(a=cn(a!=null?a:{},f));const h=Kl(s,e,i);if(h&&(a=cn(a!=null?a:{},h)),a==null)return c;const d=pu(s,a,i,l);return d&&(a=cn(a,d)),mo(a,...Cm)}const iw=["allOf","anyOf","oneOf","dependencies","if","then","else"];function Om(s,e,i,l){let a=pu(s,e,i,l);return a?(a=cn(e,a),mo(a,...iw)):e}class Gl{constructor(e,i){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=Hl(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(i)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,i){this.config.addRemoteSchema(this,e,i)}compileSchema(e){var i;return this.config.compileSchema(this,e,(i=this.rootSchema)!==null&&i!==void 0?i:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,i,l,a){return this.config.each(this,e,i,l,a)}eachSchema(e,i=this.rootSchema){return this.config.eachSchema(i,e)}getChildSchemaSelection(e,i){return this.config.getChildSchemaSelection(this,e,i)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,i,l=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,i,l)}isValid(e,i,l){return this.config.isValid(this,e,i,l)}resolveAnyOf(e,i,l){return this.config.resolveAnyOf(this,e,i,l)}resolveAllOf(e,i){return this.config.resolveAllOf(this,e,i)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,i,l){return this.config.resolveOneOf(this,e,i,l)}setSchema(e){this.rootSchema=e}step(e,i,l,a){return this.config.step(this,e,i,l,a)}validate(e,i,l){return this.config.validate(this,e,i,l)}}function gu(s,e,i){i.id=i.id||e,s.remotes[e]=s.compileSchema(i)}var Lr=x(67142),po=x.n(Lr),sw=x(44091);const Am="[^?/{}*,()#]+",ow=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${Am}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,lw=/(children|text|type|start|end|rest|errors|fullText|\d+)/,aw=/(children|text|type|\d+)/,D4=s=>JSON.stringify(s,(e,i)=>e===""||lw.test(e)?i:void 0,2),cw=s=>JSON.stringify(s,(e,i)=>e===""||e==="rest"&&i!==""||aw.test(e)?i:void 0,2),uw=new sw.Z.Parser(ow),km=s=>uw.getAST(s),M4=s=>JSON.parse(cw(s)),gn=0,R4=1,Pm=2,Wi=3,Jl=(s,e)=>`${s}/${e}`,Tm=Object.prototype.toString,fw=/Object|Array/,yu=s=>fw.test(Tm.call(s)),hw=s=>Tm.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase();function Im(s){return new RegExp(s.text.replace(/(^{|}$)/g,""))}function dw(s,e){Array.isArray(s)?s.forEach(e):Object.prototype.toString.call(s)==="[object Object]"&&Object.keys(s).forEach(function(i){e(s[i],i,s)})}function Dm(s){return Array.isArray(s)?s.map(function(e,i){return`${i}`}):Object.prototype.toString.call(s)==="[object Object]"?Object.keys(s):[]}const ii={mem:[],get(s,e){const i=s[gn][e];if(!ii.mem.includes(i))return yu(i)&&ii.mem.push(i),[i,e,s[gn],Jl(s[Wi],e)]},reset(){ii.mem.length=0}},vu={any(s,e){const i=e[gn];return Dm(i).map(l=>[i[l],l,i,Jl(e[Wi],l)])},all(s,e){const i=[e];return dw(e[gn],(l,a)=>{const c=ii.get(e,a);c&&i.push(...vu.all(s,c))}),i},regex(s,e){const i=Im(s),l=e[gn];return Dm(l).filter(a=>i.test(a)).map(a=>[l[a],a,l,Jl(e[Wi],a)])}},Yl={escaped:(s,e)=>Yl.property(s,e),property:(s,e)=>{const i=s.text;if(e[gn]&&e[gn][i]!==void 0)return[e[gn][i],i,e[gn],Jl(e[Wi],i)]},typecheck:(s,e)=>{const i=s.text.replace(/^\?:/,"");if(i==="value")return yu(e[gn])?void 0:e;if(hw(e[gn])===i)return e},lookahead:(s,e)=>{let i=!0,l=!1;return s.children.forEach(a=>{if(a.type==="expression"){const c=Yl.expression(a,e)!==void 0;i=l===!0?i||c:i&&c}else l=a.type==="orExpr"}),i?e:void 0},expression:(s,e)=>{const i=s.children[0].text,l=s.children[1],a=s.children[2],c=e[gn];if(yu(c)!==!1)return mw(c[i],l,a)?e:void 0}};function mw(s,e,i){if(e===void 0)return s!==void 0;let l;const a=`${s}`;return i.type==="regex"?l=Im(i).test(a):l=a===i.text,e.type==="isnot"&&(l=l===!1&&s!==void 0),l}function pw(s,e,i,l){const a=[];for(let c=0,u=e.length;c<u;c+=1)a.push(...s(i,e[c],i,l));return a}function gw(s,e,i,l){const a=[];for(let c=0,u=e.length;c<u;c+=1){const f=s(i,e[c],l);f&&a.push(f)}return a}function yw(s,e,i){let l=s;return e.children.forEach(a=>{if(vu[a.type])l=pw(vu[a.type],l,a,i);else if(Yl[a.type])l=gw(Yl[a.type],l,a,i);else throw new Error(`Unknown filter ${a.type}`)}),l}function vw(s,e,i){const l=[];let a=s;return e.children.forEach(c=>{if(c.type==="orPattern"){l.push(...a),a=s;return}a=bu(a,c,i)}),l.push(...a),l}function bw(s){if(s==null)return 1;if(s==="*"||s==="+")return 1/0;const e=parseInt(s);return isNaN(e)?1:e}function xw(s,e,i){const l=[],a=e.children.find(h=>h.type==="quantifier"),c=bw(a&&a.text);let u=s;a&&a.text==="*"&&l.push(...u);let f=0;for(;u.length>0&&f<c;)u=vw(u,e,i),l.push(...u),f+=1;return l}function Sw(s,e,i){let l=s;return e.children.forEach(a=>l=bu(l,a,i)),l}function bu(s,e,i){let l;return e.type==="query"?l=yw(s,e,i):e.type==="pattern"?l=xw(s,e,i):l=Sw(s,e,i),ii.reset(),ii.mem.push(s),l}function Ew(s,e){return ii.reset(),ii.mem.push(s),bu([[s,null,null,"#"]],e)}const Mm={value:s=>s.map(e=>e[gn]),pointer:s=>s.map(e=>e[Wi]),all:s=>s,map:s=>{const e={};return s.forEach(i=>e[i[Wi]]=i[gn]),e}};var cr;(function(s){s.POINTER="pointer",s.VALUE="value",s.ALL="all",s.MAP="map"})(cr||(cr={})),si.POINTER=cr.POINTER,si.VALUE=cr.VALUE,si.ALL=cr.ALL,si.MAP=cr.MAP;function si(s,e,i=cr.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const l=km(e);if(l==null)throw new Error(`empty ast for '${e}'`);if(l.rest!=="")throw new Error(`Failed parsing queryString from: '${l.rest}'`);const a=Ew(s,l);return typeof i=="function"?a.map(c=>i(...c)):Mm[i]?Mm[i](a):a}const ww=["root","recursion"];function Rm(s,e=[]){return ww.includes(s.type)?(s.children.forEach(i=>Rm(i,e)),e):(e.push(s.text),e)}function Lm(s){if(s==null||s==="")return[];const e=km(s);return Rm(e)}const xu=s=>JSON.parse(JSON.stringify(s)),Cw=Object.prototype.toString,vs=s=>Cw.call(s).match(/\s([^\]]+)\]/).pop().toLowerCase(),Nm=new RegExp(`^("[^"]+"|${Am})$`),Ow=["string","number","boolean","null"],Aw=/^\[\d*\]$/,$m=/^\[(\d+)\]$/,kw=/^".+"$/,Fm=/(^\[\d*\]$|^\d+$)/;function Bm(s){return parseInt(s.replace(/^(\[|\]$)/,""))}function jm(s){return kw.test(s)?s.replace(/(^"|"$)/g,""):s}function Pw(s,e,i){s.length<=e?s[e]=i:s.splice(e,0,i)}function Tw(s,e){const i=[];return s.forEach(l=>i.push(...si(l[0],e,cr.ALL))),i}function Wm(s,e,i,l){const a=s[0];if(/^\[\]$/.test(e)){a.push(i);const c=a.length-1;return[a[c],c,a,`${s[3]}/${c}}`]}if(l==null&&vs(a[e])==="object"&&vs(i)==="object")return Object.assign(a[e],i),[a[e],e,a,`${s[3]}/${e}}`];if(l===go.INSERT_ITEMS||l==null&&$m.test(e)){const c=Bm(e);return Pw(a,c,i),[a[c],c,a,`${s[3]}/${c}}`]}if(l===go.REPLACE_ITEMS||l==null){const c=Bm(e);return a[c]=i,[a[c],c,a,`${s[3]}/${c}}`]}throw new Error(`Unknown array index '${e}' with force-option '${l}'`)}function Iw(s,e,i,l){return e=jm(e),s.filter(a=>Array.isArray(a[0])&&Fm.test(e)?!0:Ow.includes(vs(a[0][e]))===!1).map(a=>{const c=i?[]:{},u=a[0],f=vs(c),h=vs(u[e]);return Array.isArray(u)&&h!==f?Wm(a,e,c,l):(u[e]=u[e]||c,[u[e],e,u,`${a[3]}/${e}`])})}var Xl;(function(s){s.REPLACE_ITEMS="replace",s.INSERT_ITEMS="insert"})(Xl||(Xl={})),go.REPLACE_ITEMS=Xl.REPLACE_ITEMS,go.INSERT_ITEMS=Xl.INSERT_ITEMS;function go(s,e,i,l){if(e==null)return xu(s);if(e=e.replace(/(\/$)/g,""),e==="")return xu(i);const a=xu(s);let c=[[a,null,null,"#"]];const u=Lm(e),f=u.pop(),h=Aw.test(f)&&$m.test(f)===!1;if(Nm.test(f)===!1||h)throw new Error(`Unsupported query '${e}' ending with non-property`);return u.forEach((d,m)=>{if(d==="__proto__"||d==="prototyped"||d==="constructor")return;if(Nm.test(d)===!1){c=Tw(c,d);return}const p=m>=u.length-1?f:u[m+1],v=Fm.test(p);c=Iw(c,d,v,l)}),c.forEach(d=>{let m=i;vs(i)==="function"&&(m=i(d[3],f,d[0],`${d[3]}/${f}`));const p=d[0];if(Array.isArray(p))Wm(d,f,m,l);else{const v=jm(f);if(v==="__proto__"||v==="prototyped"||v==="constructor")return;p[v]=m}}),a}function Dw(s,e,i=!1){const l=[],a=si(s,e,cr.ALL);return a.forEach(function(c){l.push(c[0]),(0,Lr.remove)(s,c[Wi],!0)}),a.forEach(function(c){Array.isArray(c[Pm])&&(0,Lr.removeUndefinedItems)(c[Pm])}),i?l:s}const L4={get:si,set:go,split:Lm,remove:Dw,ReturnType:cr},Nr={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},Mw=Object.keys(Nr).filter(s=>Nr[s].type===!1),Vm=Object.prototype.hasOwnProperty;function Zm(s){if(ri(s)===!1)return;if(s.enum)return"enum";const e=s.type;if(Array.isArray(e)||Nr[e])return e;const i=Mw.filter(l=>s[l]);if(i.length===1)return i[0];if(i.length===0){for(let l=0,a=Nr.object.keywords.length;l<a;l+=1){const c=Nr.object.keywords[l];if(Vm.call(s,c))return"object"}for(let l=0,a=Nr.array.keywords.length;l<a;l+=1){const c=Nr.array.keywords[l];if(Vm.call(s,c))return"array"}return}throw new Error(`Mutiple typeIds [${i.join(", ")}] matched in ${JSON.stringify(s)}`)}function Rw(s){const e=[],i=Zm(s);if(i==null)return e;let l;if(Array.isArray(i)){l={};for(let a=0,c=i.length;a<c;a+=1)Object.assign(l,Nr[i[a]])}else l=Nr[i];return l.definitions==null||l.definitions.forEach(a=>{si(s,a,(c,u,f,h)=>{ri(c)&&Zm(c)&&e.push({pointer:po().join(po().split(h),!1),def:c})})}),e}function Lw(s,e){if(this.callback(s,e)===!0)return;Rw(s).forEach(l=>this.nextTypeDefs(l.def,po().join(e,l.pointer,!1)))}function Ql(s,e,i,l="definitions"){const a=e[l];Object.keys(a).forEach(c=>{if(a[c]===!1||ri(a[c])){s.nextTypeDefs(a[c],po().join(i,l,c,!1));return}})}function yo(s,e,i="#"){const l={callback:e,nextTypeDefs:Lw};l.nextTypeDefs(s,i),s.definitions!=null&&(l.callback=(a,c)=>{e(a,c),a.definitions!=null&&Ql(l,a,c)},Ql(l,s,i)),s.$defs!=null&&(l.callback=(a,c)=>{e(a,c),a.definitions!=null&&Ql(l,a,c)},Ql(l,s,i,"$defs"))}const Nw=/(#|\/)+$/,_l=/#$/,$w=/^[^:]+:\/\/[^/]+\//,Fw=/\/[^/]*$/,Bw=/#.*$/;function ql(s,e){return s==null&&e==null?"#":e==null?s.replace(_l,""):s==null?e.replace(_l,""):e[0]==="#"?`${s.replace(Bw,"")}${e.replace(Nw,"")}`:$w.test(e)?e.replace(_l,""):`${s.replace(Fw,"")}/${e.replace(_l,"")}`}const vo=/(#|\/)+$/g,jw=["",null,"#"];function Ww(s){if(jw.includes(s))return[];if(s=s.replace(vo,""),s.indexOf("#")===-1)return[s.replace(vo,"")];if(s.indexOf("#")===0)return[s.replace(vo,"")];const e=s.split("#");return e[0]=e[0].replace(vo,""),e[1]=`#${e[1].replace(vo,"")}`,e}const Vw=/(#|\/)+$/g,Zw=s=>it(s)==="object";function $r(s,e,i){if(Zw(i)&&(i=i.__ref||i.$ref),i==null)return e;let l;const a=i.replace(Vw,"");if(s.remotes[a])return l=s.remotes[a],l&&l.$ref?$r(s,e,l.$ref):l;if(s.ids[i])return l=(0,Lr.get)(e,s.ids[i]),l&&l.$ref?$r(s,e,l.$ref):l;const c=Ww(i);if(c.length===0)return e;if(c.length===1){if(i=c[0],s.remotes[i])return l=s.remotes[i],$r(s,e,l.$ref);if(s.ids[i])return l=(0,Lr.get)(e,s.ids[i]),l&&l.$ref?$r(s,e,l.$ref):l}if(c.length===2){const u=c[0];if(i=c[1],s.remotes[u])return s.remotes[u].getRef?s.remotes[u].getRef(i):$r(s,s.remotes[u],i);if(s.ids[u])return $r(s,(0,Lr.get)(e,s.ids[u]),i)}return l=(0,Lr.get)(e,s.ids[i]||i),l&&l.$ref?$r(s,e,l.$ref):l}const zm="__compiled",Um="__ref",zw="getRef",Uw="getRoot",Hw=/(#|\/)+$/g;function Kw(s,e,i=e,l=!1){if(!e||e[zm]!==void 0)return e;const a={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,zm,{enumerable:!1,value:!0}),Object.defineProperty(u,zw,{enumerable:!1,value:$r.bind(null,a,u)}),l===!1&&c.includes("$ref")===!1)return u;e!==i&&Object.defineProperty(u,"definitions",{enumerable:!1,value:Object.assign({},i.definitions,i.$defs,e.definitions,e.$defs)});const f={},h=()=>u;return yo(u,(d,m)=>{var p;if(d.id){if(d.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const w=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),C=(0,Lr.get)(u,w);d.id=(p=C.id)!==null&&p!==void 0?p:d.id}a.ids[d.id.replace(Hw,"")]=m}m=`#${m}`.replace(/##+/,"#");const v=m.replace(/\/[^/]+$/,""),y=m.replace(/\/[^/]+\/[^/]+$/,""),S=f[v]||f[y],E=ql(S,d.id);f[m]=E,a.ids[E]==null&&(a.ids[E]=m),d.$ref&&!d[Um]&&(Object.defineProperty(d,Um,{enumerable:!1,value:ql(E,d.$ref)}),Object.defineProperty(d,Uw,{enumerable:!1,value:h}))}),u}const Gw=Kw;function Su(s,e,i,l=s.rootSchema,a="#"){l=s.resolveRef(l),i(l,e,a);const c=it(e);c==="object"?Object.keys(e).forEach(u=>{const f=s.step(u,l,e,a),h=e[u];s.each(h,i,f,`${a}/${u}`)}):c==="array"&&e.forEach((u,f)=>{const h=s.step(f,l,e,a);s.each(u,i,h,`${a}/${f}`)})}const Eu={additionalItemsError:Ne("AdditionalItemsError"),additionalPropertiesError:Ne("AdditionalPropertiesError"),anyOfError:Ne("AnyOfError"),allOfError:Ne("AllOfError"),constError:Ne("ConstError"),containsError:Ne("ContainsError"),containsArrayError:Ne("ContainsArrayError"),containsAnyError:Ne("ContainsAnyError"),enumError:Ne("EnumError"),forbiddenPropertyError:Ne("ForbiddenPropertyError"),formatURLError:Ne("FormatURLError"),formatURIError:Ne("FormatURIError"),formatURIReferenceError:Ne("FormatURIReferenceError"),formatURITemplateError:Ne("FormatURITemplateError"),formatDateError:Ne("FormatDateError"),formatDateTimeError:Ne("FormatDateTimeError"),formatEmailError:Ne("FormatEmailError"),formatHostnameError:Ne("FormatHostnameError"),formatIPV4Error:Ne("FormatIPV4Error"),formatIPV4LeadingZeroError:Ne("FormatIPV4LeadingZeroError"),formatIPV6Error:Ne("FormatIPV6Error"),formatIPV6LeadingZeroError:Ne("FormatIPV6LeadingZeroError"),formatJsonPointerError:Ne("FormatJsonPointerError"),formatRegExError:Ne("FormatRegExError"),formatTimeError:Ne("FormatTimeError"),invalidSchemaError:Ne("InvalidSchemaError"),invalidDataError:Ne("InvalidDataError"),invalidTypeError:Ne("InvalidTypeError"),invalidPropertyNameError:Ne("InvalidPropertyNameError"),maximumError:Ne("MaximumError"),maxItemsError:Ne("MaxItemsError"),maxLengthError:Ne("MaxLengthError"),maxPropertiesError:Ne("MaxPropertiesError"),minimumError:Ne("MinimumError"),minItemsError:Ne("MinItemsError"),minItemsOneError:Ne("MinItemsOneError"),minLengthError:Ne("MinLengthError"),minLengthOneError:Ne("MinLengthOneError"),minPropertiesError:Ne("MinPropertiesError"),missingDependencyError:Ne("MissingDependencyError"),missingOneOfPropertyError:Ne("MissingOneOfPropertyError"),multipleOfError:Ne("MultipleOfError"),multipleOneOfError:Ne("MultipleOneOfError"),noAdditionalPropertiesError:Ne("NoAdditionalPropertiesError"),notError:Ne("NotError"),oneOfError:Ne("OneOfError"),oneOfPropertyError:Ne("OneOfPropertyError"),patternError:Ne("PatternError"),patternPropertiesError:Ne("PatternPropertiesError"),requiredPropertyError:Ne("RequiredPropertyError"),schemaWarning:Ne("SchemaWarning"),typeError:Ne("TypeError"),undefinedValueError:Ne("UndefinedValueError"),uniqueItemsError:Ne("UniqueItemsError"),unknownPropertyError:Ne("UnknownPropertyError"),valueNotEmptyError:Ne("ValueNotEmptyError")};var Jw=x(1170),Hm=x.n(Jw),Yw=x(21391);const Xw=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),Qw=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,_w=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,qw=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,eC=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,tC=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,nC=[0,31,28,31,30,31,30,31,31,30,31,30,31],rC=/^(?:\/(?:[^~/]|~0|~1)*)*$/,iC=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,sC=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,oC=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,wu={date:(s,e,i,l)=>{if(typeof i!="string"||i==="")return;const a=i.match(eC);if(!a)return s.errors.formatDateTimeError({value:i,pointer:l,schema:e});const c=+a[1],u=+a[2],f=+a[3],h=c%4===0&&(c%100!==0||c%400===0);if(!(u>=1&&u<=12&&f>=1&&f<=(u==2&&h?29:nC[u])))return s.errors.formatDateError({value:i,pointer:l,schema:e})},"date-time":(s,e,i,l)=>{if(!(typeof i!="string"||i===""))return i===""||Xw.test(i)?new Date(i).toString()==="Invalid Date"?s.errors.formatDateTimeError({value:i,pointer:l,schema:e}):void 0:s.errors.formatDateTimeError({value:i,pointer:l,schema:e})},email:(s,e,i,l)=>{if(typeof i!="string"||i==="")return;if(i[0]==='"')return s.errors.formatEmailError({value:i,pointer:l,schema:e});const[a,c,...u]=i.split("@");if(!a||!c||u.length!==0||a.length>64||c.length>253)return s.errors.formatEmailError({value:i,pointer:l,schema:e});if(a[0]==="."||a.endsWith(".")||a.includes(".."))return s.errors.formatEmailError({value:i,pointer:l,schema:e});if(!/^[a-z0-9.-]+$/i.test(c)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(a))return s.errors.formatEmailError({value:i,pointer:l,schema:e});if(!c.split(".").every(f=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(f)))return s.errors.formatEmailError({value:i,pointer:l,schema:e})},"idn-email":(s,e,i,l)=>{if(!(typeof i!="string"||i===""))try{(0,Yw.parse)(i);return}catch{return s.errors.formatEmailError({value:i,pointer:l,schema:e})}},hostname:(s,e,i,l)=>{if(typeof i=="string"&&!(i===""||qw.test(i)))return s.errors.formatHostnameError({value:i,pointer:l,schema:e})},ipv4:(s,e,i,l)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV4LeadingZeroError({value:i,pointer:l,schema:e});if(!(i.length<=15&&Qw.test(i)))return s.errors.formatIPV4Error({value:i,pointer:l,schema:e})}},ipv6:(s,e,i,l)=>{if(!(typeof i!="string"||i==="")){if(i&&i[0]==="0")return s.errors.formatIPV6LeadingZeroError({value:i,pointer:l,schema:e});if(!(i.length<=45&&_w.test(i)))return s.errors.formatIPV6Error({value:i,pointer:l,schema:e})}},"json-pointer":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!rC.test(i))return s.errors.formatJsonPointerError({value:i,pointer:l,schema:e})},"relative-json-pointer":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!iC.test(i))return s.errors.formatJsonPointerError({value:i,pointer:l,schema:e})},regex:(s,e,i,l)=>{if(typeof i=="string"&&/\\Z$/.test(i)===!1){try{new RegExp(i);return}catch{}return s.errors.formatRegExError({value:i,pointer:l,schema:e})}if(!(typeof i=="object"||typeof i=="number"||Array.isArray(i)))return s.errors.formatRegExError({value:i,pointer:l,schema:e})},time:(s,e,i,l)=>typeof i!="string"||i===""||i.match(tC)?void 0:s.errors.formatDateTimeError({value:i,pointer:l,schema:e}),uri:(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!Hm().isUri(i))return s.errors.formatURIError({value:i,pointer:l,schema:e})},"uri-reference":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!sC.test(i))return s.errors.formatURIReferenceError({value:i,pointer:l,schema:e})},"uri-template":(s,e,i,l)=>{if(!(typeof i!="string"||i==="")&&!oC.test(i))return s.errors.formatURITemplateError({value:i,pointer:l,schema:e})},url:(s,e,i,l)=>{if(!(i===""||Hm().isWebUri(i)))return s.errors.formatURLError({value:i,pointer:l,schema:e})}},Km={};function Cu(s,e=Km){const{pointer:i="#",data:l,schema:a=s.rootSchema,withSchemaWarning:c=!1}=e,u=po().split(i),f=Gm(s,s.resolveRef(a),u,"#",l);if(!(!c&&(f==null?void 0:f.code)==="schema-warning"))return f}function Gm(s,e,i,l,a=Km){if(i.length===0)return s.resolveRef(e);const c=i.shift();return e=s.step(c,e,a,l),Pn(e)?e:(a=a[c],Gm(s,e,i,`${l}/${c}`,a))}function lC(s){switch(it(s)){case"string":case"array":return(s==null?void 0:s.length)===0;case"null":case"undefined":return!0;case"object":return Object.keys(s).length===0;default:return!1}}const Jm=ji.templateDefaultOptions;let Fr;function Ou(s,e){const{$ref:i}=s;return i==null?!0:(Fr[e]==null||Fr[e][i]==null?0:Fr[e][i])<ji.GET_TEMPLATE_RECURSION_LIMIT}function Ym(s,e,i){const{$ref:l}=e;return l==null?e:(Fr[i]=Fr[i]||{},Fr[i][l]=Fr[i][l]||0,Fr[i][l]+=1,s.resolveRef(e))}function aC(s,e){if(s==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===s)return e}catch{}return null}function Xm(s,e,i,l,a){if(it(e)!=="object")return Object.assign({pointer:l},e);if(Ou(e,l)===!1&&i==null)return!1;let c=Hl(Ym(s,e,l));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(Ou(e.anyOf[0],`${l}/anyOf/0`)){const u=Ym(s,e.anyOf[0],`${l}/anyOf/0`);c=ho(c,u),c.pointer=e.anyOf[0].$ref||c.pointer}delete c.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((f,h)=>Ou(f,`${l}/allOf/${h}`)).reduceRight((f,h)=>f&&h,!0)){const f=[];let h=Hl(i);for(let m=0;m<e.allOf.length;m+=1)f.push(xm(s,e.allOf[m],h)),h=Qn(s,h,{type:e.type,...f[m]},`${l}/allOf/${m}`,a);const d=Sm(s,{allOf:f});d&&(c=cn(c,d))}return c.pointer=c.pointer||e.$ref||l,c}const Qm=s=>s&&typeof s=="object";function Qn(s,e,i,l,a){var c;if(i==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(l==null)throw new Error("Missing pointer");let u=Xm(s,i,e,l,a);if(!Qm(u))return;if(l=u.pointer,u!=null&&u.const)return u.const;if(Array.isArray(u.oneOf))if(lC(e)){const m=u.oneOf[0].type||u.type||u.const&&typeof u.const||it(e);u={...u.oneOf[0],type:m}}else{const m=Zl(s,e,u);if(Pn(m)){if(e!=null&&a.removeInvalidData!==!0)return e;u=u.oneOf[0],e=void 0}else m.type=(c=m.type)!==null&&c!==void 0?c:u.type,u=m}if(!Qm(u)||u.type==null)return;if(e instanceof File)return e;const f=Array.isArray(u.type)?cC(u.type,e,u.default):u.type,h=it(e);return e!=null&&h!==f&&!(h==="number"&&f==="integer")&&(e=aC(f,e)),_m[f]==null?a.removeInvalidData?void 0:e:_m[f](s,u,e,l,a)}function cC(s,e,i){if(e==null){if(i!=null){const a=it(i);if(s.includes(a))return a}return s[0]}const l=it(e);return s.includes(l)?l:s[0]}const _m={null:(s,e,i)=>bo(e,i,null),string:(s,e,i)=>bo(e,i,""),number:(s,e,i)=>bo(e,i,0),integer:(s,e,i)=>bo(e,i,0),boolean:(s,e,i)=>bo(e,i,!1),object:(s,e,i,l,a)=>{var c;const u=e.default===void 0?{}:e.default,f={},h=a.extendDefaults===!1&&e.default!==void 0?[]:(c=e.required)!==null&&c!==void 0?c:[];e.properties&&Object.keys(e.properties).forEach(p=>{const v=i==null||i[p]==null?u[p]:i[p],y=h.includes(p);(v!=null||y||a.addOptionalProps)&&(f[p]=Qn(s,v,e.properties[p],`${l}/properties/${p}`,a))});let d=Em(s,e,f);if(d){d=cn(e,d),delete d.dependencies;const p=Qn(s,i,d,`${l}/dependencies`,a);Object.assign(f,p)}i&&(a.removeInvalidData===!0&&(e.additionalProperties===!1||it(e.additionalProperties)==="object")?it(e.additionalProperties)==="object"&&Object.keys(i).forEach(p=>{f[p]==null&&s.isValid(i[p],e.additionalProperties)&&(f[p]=i[p])}):Object.keys(i).forEach(p=>f[p]==null&&(f[p]=i[p])));const m=Kl(s,e,f);if(m){const p=Qn(s,f,{type:"object",...m},l,a);Object.assign(f,p)}return f},array:(s,e,i,l,a)=>{var c,u;if(e.items==null)return i||[];const f=e.default===void 0?[]:e.default,h=i||f,d=a.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let p=0,v=Math.max(d!=null?d:0,(u=(c=e.items)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0);p<v;p+=1)h[p]=Qn(s,h[p]==null?f[p]:h[p],e.items[p],`${l}/items/${p}`,a);return h}if(it(e.items)!=="object")return h;const m=Xm(s,e.items,i,l,a);if(m===!1)return h;if(l=m.pointer||l,m.oneOf&&h.length===0){const p=m.oneOf[0];for(let v=0;v<d;v+=1)h[v]=Qn(s,h[v]==null?f[v]:h[v],p,`${l}/oneOf/0`,a);return h}if(m.oneOf&&h.length>0){const p=Math.max(d,h.length);for(let v=0;v<p;v+=1){let y=h[v]==null?f[v]:h[v],S=Zl(s,y,m);S==null||Pn(S)?y!=null&&a.removeInvalidData!==!0?h[v]=y:(y=void 0,S=m.oneOf[0],h[v]=Qn(s,y,S,`${l}/oneOf/${v}`,a)):h[v]=Qn(s,y,S,`${l}/oneOf/${v}`,a)}return h}if(m.type){for(let p=0,v=Math.max(d,h.length);p<v;p+=1)h[p]=Qn(s,h[p]==null?f[p]:h[p],m,`${l}/items`,a);return h}return h}};function bo(s,e,i){return e!=null?e:s.const?s.const:s.default===void 0&&Array.isArray(s.enum)?s.enum[0]:s.default===void 0?i:s.default}const Au=(s,e,i=s.rootSchema,l)=>(Fr={},l?Qn(s,e,i,"#",{...Jm,...l}):Qn(s,e,i,"#",Jm));function ku(s,e,i=s.rootSchema,l="#"){return s.validate(e,i,l).length===0}function qm(s){const e=[];let i=0;const l=s.length;for(;i<l;){const a=s.charCodeAt(i++);if(a>=55296&&a<=56319&&i<l){const c=s.charCodeAt(i++);(c&64512)==56320?e.push(((a&1023)<<10)+(c&1023)+65536):(e.push(a),i--)}else e.push(a)}return e}function ep(s){const e=`${s}`,i=e.indexOf(".");return i===-1?0:e.length-(i+1)}var uC=x(69378),tp=x.n(uC);const fC=Object.prototype.hasOwnProperty,np=(s,e)=>!(s[e]===void 0||!fC.call(s,e)),rp={additionalProperties:(s,e,i,l)=>{if(e.additionalProperties===!0||e.additionalProperties==null||it(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const a=[];let c=Object.keys(i).filter(f=>ji.propertyBlacklist.includes(f)===!1);const u=Object.keys(e.properties||{});if(it(e.patternProperties)==="object"){const f=Object.keys(e.patternProperties).map(h=>new RegExp(h));c=c.filter(h=>{for(let d=0;d<f.length;d+=1)if(f[d].test(h))return!1;return!0})}for(let f=0,h=c.length;f<h;f+=1){const d=c[f];if(u.indexOf(d)===-1){const m=ri(e.additionalProperties);if(m&&Array.isArray(e.additionalProperties.oneOf)){const p=s.resolveOneOf(i[d],e.additionalProperties,`${l}/${d}`);Pn(p)?a.push(s.errors.additionalPropertiesError({pointer:l,schema:e.additionalProperties,value:i,property:c[f],properties:u,errors:p.data.errors})):a.push(...s.validate(i[d],p,l))}else m?a.push(...s.validate(i[d],e.additionalProperties,`${l}/${d}`)):a.push(s.errors.noAdditionalPropertiesError({pointer:l,schema:e,value:i,property:c[f],properties:u}))}}return a},allOf:_E,anyOf:tw,dependencies:ew,enum:(s,e,i,l)=>{const a=it(i);if(a==="object"||a==="array"){const c=JSON.stringify(i);for(let u=0;u<e.enum.length;u+=1)if(JSON.stringify(e.enum[u])===c)return}else if(e.enum.includes(i))return;return s.errors.enumError({pointer:l,schema:e,value:i,values:e.enum})},format:(s,e,i,l)=>{if(s.validateFormat[e.format])return s.validateFormat[e.format](s,e,i,l)},items:(s,e,i,l)=>{if(e.items===!1)return Array.isArray(i)&&i.length===0?void 0:s.errors.invalidDataError({pointer:l,value:i,schema:e});const a=[];for(let c=0;c<i.length;c+=1){const u=i[c],f=s.step(c,e,i,l);if(Pn(f))return[f];const h=s.validate(u,f,`${l}/${c}`);a.push(...h)}return a},maximum:(s,e,i,l)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,value:i,pointer:l,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:l,schema:e,value:i})}},maxItems:(s,e,i,l)=>{if(!isNaN(e.maxItems)&&e.maxItems<i.length)return s.errors.maxItemsError({maximum:e.maxItems,length:i.length,schema:e,value:i,pointer:l})},maxLength:(s,e,i,l)=>{if(isNaN(e.maxLength))return;const a=qm(i).length;if(e.maxLength<a)return s.errors.maxLengthError({maxLength:e.maxLength,length:a,pointer:l,schema:e,value:i})},maxProperties:(s,e,i,l)=>{const a=Object.keys(i).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<a)return s.errors.maxPropertiesError({maxProperties:e.maxProperties,length:a,pointer:l,schema:e,value:i})},minLength:(s,e,i,l)=>{if(isNaN(e.minLength))return;const a=qm(i).length;if(e.minLength>a)return e.minLength===1?s.errors.minLengthOneError({minLength:e.minLength,length:a,pointer:l,schema:e,value:i}):s.errors.minLengthError({minLength:e.minLength,length:a,pointer:l,schema:e,value:i})},minimum:(s,e,i,l)=>{if(!isNaN(e.minimum)){if(e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:l,schema:e,value:i});if(e.exclusiveMinimum===!0&&e.minimum===i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:l,schema:e,value:i})}},minItems:(s,e,i,l)=>{if(!isNaN(e.minItems)&&e.minItems>i.length)return e.minItems===1?s.errors.minItemsOneError({minItems:e.minItems,length:i.length,pointer:l,schema:e,value:i}):s.errors.minItemsError({minItems:e.minItems,length:i.length,pointer:l,schema:e,value:i})},minProperties:(s,e,i,l)=>{if(isNaN(e.minProperties))return;const a=Object.keys(i).length;if(e.minProperties>a)return s.errors.minPropertiesError({minProperties:e.minProperties,length:a,pointer:l,schema:e,value:i})},multipleOf:(s,e,i,l)=>{if(isNaN(e.multipleOf)||typeof i!="number")return;const a=ep(i),c=ep(e.multipleOf);if(a>c)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:l,schema:e});const u=Math.pow(10,c),f=Math.round(i*u),h=Math.round(e.multipleOf*u);if(f%h/u!==0)return s.errors.multipleOfError({multipleOf:e.multipleOf,value:i,pointer:l,schema:e})},not:(s,e,i,l)=>{const a=[];return s.validate(i,e.not,l).length===0&&a.push(s.errors.notError({value:i,not:e.not,pointer:l,schema:e})),a},oneOf:hE,pattern:(s,e,i,l)=>{if(new RegExp(e.pattern,"u").test(i)===!1)return s.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:i,schema:e,value:i,pointer:l})},patternProperties:(s,e,i,l)=>{const a=e.properties||{},c=e.patternProperties;if(it(c)!=="object")return;const u=[],f=Object.keys(i),h=Object.keys(c).map(d=>({regex:new RegExp(d),patternSchema:c[d]}));return f.forEach(d=>{let m=!1;for(let p=0,v=h.length;p<v;p+=1)if(h[p].regex.test(d)){m=!0;const y=s.validate(i[d],h[p].patternSchema,`${l}/${d}`);y&&y.length>0&&u.push(...y)}a[d]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:d,pointer:l,schema:e,value:i,patterns:Object.keys(c).join(",")}))}),u},properties:(s,e,i,l)=>{const a=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(np(i,f)){const h=s.step(f,e,i,l),d=s.validate(i[f],h,`${l}/${f}`);a.push(...d)}}return a},propertiesRequired:(s,e,i,l)=>{const a=[],c=Object.keys(e.properties||{});for(let u=0;u<c.length;u+=1){const f=c[u];if(i[f]===void 0)a.push(s.errors.requiredPropertyError({key:f,pointer:l,schema:e,value:i}));else{const h=s.step(f,e,i,l),d=s.validate(i[f],h,`${l}/${f}`);a.push(...d)}}return a},required:(s,e,i,l)=>{if(Array.isArray(e.required)!==!1)return e.required.map(a=>{if(!np(i,a))return s.errors.requiredPropertyError({key:a,pointer:l,schema:e,value:i})})},requiredNotEmpty:(s,e,i,l)=>{if(Array.isArray(e.required)!==!1)return e.required.map(a=>{if(i[a]==null||i[a]==="")return s.errors.valueNotEmptyError({property:a,pointer:`${l}/${a}`,schema:e,value:i})})},uniqueItems:(s,e,i,l)=>{if((Array.isArray(i)&&e.uniqueItems)===!1)return;const a=[],c=[];return i.forEach((u,f)=>{for(let h=f+1;h<i.length;h+=1)tp()(u,i[h])&&!a.includes(h)&&(c.push(s.errors.uniqueItemsError({pointer:`${l}/${h}`,duplicatePointer:`${l}/${f}`,arrayPointer:l,value:JSON.stringify(u),schema:e})),a.push(h))}),c}};function Pu(s,e){return s==null||s.$ref==null?s:s.getRoot?s.getRoot().getRef(s):e.getRef(s)}function _n(s){if(s===void 0)return;const e={type:it(s)};return e.type==="object"&&ri(s)&&(e.properties={},Object.keys(s).forEach(i=>e.properties[i]=_n(s[i]))),e.type==="array"&&Array.isArray(s)&&(s.length===1?e.items=_n(s[0]):e.items=s.map(_n)),e}const hC={array:(s,e,i,l,a)=>{const c=l==null?void 0:l[e],u=it(i.items);if(u==="object")return Om(s,i.items,c,`${a}/${e}`)||s.resolveRef(i.items);if(u==="array"){if(i.items[e]===!0)return _n(c);if(i.items[e]===!1)return s.errors.invalidDataError({key:e,value:c,pointer:a,schema:i});if(i.items[e])return s.resolveRef(i.items[e]);if(i.additionalItems===!1)return s.errors.additionalItemsError({key:e,value:c,pointer:a,schema:i});if(i.additionalItems===!0||i.additionalItems===void 0)return _n(c);if(it(i.additionalItems)==="object")return i.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(i,null,2)} for ${JSON.stringify(l,null,2)}`)}return i.additionalItems!==!1&&c?_n(c):new Error(`Invalid array schema for ${e} at ${a}`)},object:(s,e,i,l,a)=>{var c;i=Om(s,i,l,a);const u=(c=i==null?void 0:i.properties)===null||c===void 0?void 0:c[e];if(u!==void 0){if(u===!1)return s.errors.forbiddenPropertyError({property:e,value:l,pointer:a,schema:i});if(u===!0)return _n(l==null?void 0:l[e]);const d=s.resolveRef(u);if(Pn(d))return d;if(d&&Array.isArray(d.oneOf)){const m=s.resolveOneOf(l[e],d,`${a}/${e}`);for(const p in d)p!=="oneOf"&&m[p]===void 0&&(m[p]=d[p]);return m}if(d)return d}const{patternProperties:f}=i;if(it(f)==="object"){let d;const m=Object.keys(f);for(let p=0,v=m.length;p<v;p+=1)if(d=new RegExp(m[p]),d.test(e))return f[m[p]]}const{additionalProperties:h}=i;return it(h)==="object"?i.additionalProperties:l&&(h===void 0||h===!0)?_n(l[e]):s.errors.unknownPropertyError({property:e,value:l,pointer:`${a}`,schema:i})}};function Tu(s,e,i,l,a="#"){var c;const u=it(l);let f=(c=i.type)!==null&&c!==void 0?c:u;if(Array.isArray(f)){if(!f.includes(u))return s.errors.typeError({value:l,pointer:a,expected:i.type,received:u,schema:i});f=u}const h=hC[f];if(h){const d=h(s,`${e}`,i,l,a);return d===void 0?s.errors.schemaWarning({pointer:a,value:l,schema:i,key:e}):d}return new Error(`Unsupported schema type ${i.type} for key ${e}`)}function Iu(s,e,i=s.rootSchema){var l;if(i.oneOf)return i.oneOf.map(c=>s.resolveRef(c));if(!((l=i.items)===null||l===void 0)&&l.oneOf)return i.items.oneOf.map(c=>s.resolveRef(c));const a=s.step(e,i,{},"#");return Pn(a)?a:[a]}const dC={array:(s,e,i,l)=>s.typeKeywords.array.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),object:(s,e,i,l)=>s.typeKeywords.object.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),string:(s,e,i,l)=>s.typeKeywords.string.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),integer:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),number:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),boolean:(s,e,i,l)=>s.typeKeywords.boolean.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),null:(s,e,i,l)=>s.typeKeywords.null.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l))};function mC(s,e){const i=it(s);return i==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(s)||isNaN(s)?"integer":"number":i}function Du(s,e,i=s.rootSchema,l="#"){if(i=s.resolveRef(i),it(i)==="boolean")return i?[]:[s.errors.invalidDataError({pointer:l,schema:i,value:e})];if(Pn(i))return[i];if(i.const!==void 0)return tp()(i.const,e)?[]:[s.errors.constError({pointer:l,schema:i,value:e,expected:i.const})];const a=mC(e,i.type),c=i.type||a;return a!==c&&(!Array.isArray(c)||!c.includes(a))?[s.errors.typeError({pointer:l,schema:i,value:e,received:a,expected:c})]:s.validateType[a]==null?[s.errors.invalidTypeError({pointer:l,schema:i,value:e,receivedType:a})]:uo(s.validateType[a](s,i,e,l)).filter(Vl)}const pC={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:rp,validateType:dC,validateFormat:wu,errors:Eu,addRemoteSchema:gu,compileSchema:Gw,createSchemaOf:_n,each:Su,eachSchema:yo,getChildSchemaSelection:Iu,getSchema:Cu,getTemplate:Au,isValid:ku,resolveAllOf:du,resolveAnyOf:mu,resolveOneOf:lu,resolveRef:Pu,step:Tu,validate:Du,templateDefaultOptions:ji.templateDefaultOptions};class W4 extends Gl{constructor(e,i={}){super(ho(pC,i),e)}}const ip="__compiled",sp="__ref",gC="getRef",yC="getRoot",vC=/(#|\/)+$/g;function op(s,e,i=e,l=!1){if(e===!0||e===!1||e===void 0||e[ip]!==void 0)return e;const a={ids:{},remotes:s.remotes},c=JSON.stringify(e),u=JSON.parse(c);if(Object.defineProperty(u,ip,{enumerable:!1,value:!0}),Object.defineProperty(u,gC,{enumerable:!1,value:$r.bind(null,a,u)}),l===!1&&c.includes("$ref")===!1)return u;u!==i&&Object.defineProperty(u,"$defs",{enumerable:!0,value:Object.assign({},i.definitions,i.$defs,u.definitions,u.$defs)});const f={},h=()=>u;return yo(u,(d,m)=>{var p;if(d.$id){if(d.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(m)){const w=m.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),C=(0,Lr.get)(u,w);d.$id=(p=C.$id)!==null&&p!==void 0?p:d.$id}a.ids[d.$id.replace(vC,"")]=m}m=`#${m}`.replace(/##+/,"#");const v=m.replace(/\/[^/]+$/,""),y=m.replace(/\/[^/]+\/[^/]+$/,""),S=f[v]||f[y],E=ql(S,d.$id);f[m]=E,a.ids[E]==null&&(a.ids[E]=m),d.$ref&&!d[sp]&&(Object.defineProperty(d,sp,{enumerable:!1,value:ql(E,d.$ref)}),Object.defineProperty(d,yC,{enumerable:!1,value:h}))}),u}const lp={...rp,contains:(s,e,i,l)=>{if(e.contains===!1)return s.errors.containsArrayError({pointer:l,value:i,schema:e});if(e.contains===!0)return Array.isArray(i)&&i.length===0?s.errors.containsAnyError({pointer:l,value:i,schema:e}):void 0;if(it(e.contains)==="object"){for(let a=0;a<i.length;a+=1)if(s.isValid(i[a],e.contains))return;return s.errors.containsError({pointer:l,schema:e,value:i})}},exclusiveMaximum:(s,e,i,l)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=i)return s.errors.maximumError({maximum:e.exclusiveMaximum,length:i,pointer:l,schema:e,value:i})},exclusiveMinimum:(s,e,i,l)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=i)return s.errors.minimumError({minimum:e.exclusiveMinimum,length:i,pointer:l,schema:e,value:i})},if:QE,maximum:(s,e,i,l)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<i)return s.errors.maximumError({maximum:e.maximum,length:i,pointer:l,schema:e,value:i})},minimum:(s,e,i,l)=>{if(!isNaN(e.minimum)&&e.minimum>i)return s.errors.minimumError({minimum:e.minimum,length:i,pointer:l,schema:e,value:i})},patternProperties:(s,e,i,l)=>{const a=e.properties||{},c=e.patternProperties;if(it(c)!=="object")return;const u=[],f=Object.keys(i),h=Object.keys(c).map(d=>({regex:new RegExp(d),patternSchema:c[d]}));return f.forEach(d=>{let m=!1;for(let p=0,v=h.length;p<v;p+=1)if(h[p].regex.test(d)){if(m=!0,h[p].patternSchema===!1){u.push(s.errors.patternPropertiesError({key:d,pointer:l,patterns:Object.keys(c).join(","),schema:e,value:i}));return}const y=s.validate(i[d],h[p].patternSchema,`${l}/${d}`);y&&y.length>0&&u.push(...y)}a[d]||m===!1&&e.additionalProperties===!1&&u.push(s.errors.patternPropertiesError({key:d,pointer:l,patterns:Object.keys(c).join(","),schema:e,value:i}))}),u},propertyNames:(s,e,i,l)=>{if(e.propertyNames===!1)return Object.keys(i).length===0?void 0:s.errors.invalidPropertyNameError({property:Object.keys(i),pointer:l,value:i,schema:e});if(e.propertyNames===!0||it(e.propertyNames)!=="object")return;const a=[],c=Object.keys(i),u={...e.propertyNames,type:"string"};return c.forEach(f=>{const h=s.validate(f,u,`${l}/${f}`);h.length>0&&a.push(s.errors.invalidPropertyNameError({property:f,pointer:l,validationError:h[0],value:i[f],schema:e}))}),a}},ap={array:(s,e,i,l)=>s.typeKeywords.array.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),object:(s,e,i,l)=>s.typeKeywords.object.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),string:(s,e,i,l)=>s.typeKeywords.string.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),integer:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),number:(s,e,i,l)=>s.typeKeywords.number.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),boolean:(s,e,i,l)=>s.typeKeywords.boolean.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l)),null:(s,e,i,l)=>s.typeKeywords.null.filter(a=>e&&e[a]!=null).map(a=>s.validateKeyword[a](s,e,i,l))},bC={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["enum","exclusiveMaximum","exclusiveMinimum","format","maximum","minimum","multipleOf","not","oneOf","allOf","anyOf","if"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:lp,validateType:ap,validateFormat:wu,errors:Eu,addRemoteSchema:gu,compileSchema:op,createSchemaOf:_n,each:Su,eachSchema:yo,getChildSchemaSelection:Iu,getSchema:Cu,getTemplate:Au,isValid:ku,resolveAllOf:du,resolveAnyOf:mu,resolveOneOf:lu,resolveRef:Pu,step:Tu,validate:Du,templateDefaultOptions:ji.templateDefaultOptions};class z4 extends Gl{constructor(e,i={}){super(ho(bC,i),e)}}const cp={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:lp,validateType:ap,validateFormat:wu,errors:Eu,addRemoteSchema:gu,compileSchema:op,createSchemaOf:_n,each:Su,eachSchema:yo,getChildSchemaSelection:Iu,getSchema:Cu,getTemplate:Au,isValid:ku,resolveAllOf:du,resolveAnyOf:mu,resolveOneOf:lu,resolveRef:Pu,step:Tu,validate:Du,templateDefaultOptions:ji.templateDefaultOptions};class up extends Gl{constructor(e,i={}){super(ho(cp,i),e)}}function xC(s,e){if(s==null||s.$ref==null)return s;const i=e.getRef(s),l=Object.assign({},i,s);return delete l.$ref,Object.defineProperty(l,"__ref",{enumerable:!1,value:s.__ref}),Object.defineProperty(l,"getRoot",{enumerable:!1,value:s.getRoot}),l}const SC={...cp,resolveOneOf:Zl,resolveRef:xC};class U4 extends Gl{constructor(e,i={}){super(ho(SC,i),e)}}const H4={strings:am},{parse:fp,stringify:hp}=JSON,{keys:EC}=Object,xo=String,dp="string",mp={},ea="object",pp=(s,e)=>e,wC=s=>s instanceof xo?xo(s):s,CC=(s,e)=>typeof e===dp?new xo(e):e,gp=(s,e,i,l)=>{const a=[];for(let c=EC(i),{length:u}=c,f=0;f<u;f++){const h=c[f],d=i[h];if(d instanceof xo){const m=s[d];typeof m===ea&&!e.has(m)?(e.add(m),i[h]=mp,a.push({k:h,a:[s,e,m,l]})):i[h]=l.call(i,h,m)}else i[h]!==mp&&(i[h]=l.call(i,h,d))}for(let{length:c}=a,u=0;u<c;u++){const{k:f,a:h}=a[u];i[f]=l.call(i,f,gp.apply(null,h))}return i},yp=(s,e,i)=>{const l=xo(e.push(i)-1);return s.set(i,l),l},vp=(s,e)=>{const i=fp(s,CC).map(wC),l=i[0],a=e||pp,c=typeof l===ea&&l?gp(i,new Set,l,a):l;return a.call({"":c},"",c)},bp=(s,e,i)=>{const l=e&&typeof e===ea?(m,p)=>m===""||-1<e.indexOf(m)?p:void 0:e||pp,a=new Map,c=[],u=[];let f=+yp(a,c,l.call({"":s},"",s)),h=!f;for(;f<c.length;)h=!0,u[f]=hp(c[f++],d,i);return"["+u.join(",")+"]";function d(m,p){if(h)return h=!h,p;const v=l.call(this,m,p);switch(typeof v){case ea:if(v===null)return v;case dp:return a.get(v)||yp(a,c,v)}return v}},K4=s=>fp(bp(s)),G4=s=>vp(hp(s));function Bn(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Br(s,e){if(!Bn(s))return;const{properties:i,items:l,anyOf:a,oneOf:c,allOf:u,dependencies:f,then:h,else:d}=s;for(const m in s)s.hasOwnProperty(m)&&m.startsWith("ui:")&&(e[m]=s[m],delete s[m]);if(Bn(i))for(const m in i){if(!i.hasOwnProperty(m))continue;const p=i[m];if(Bn(p)){if(!Bn(e[m])){const v={};e[m]=v}Br(p,e[m])}}if(Bn(l)){const m={};e.items=m,Br(l,m)}if(Array.isArray(a))for(const m of a)Bn(m)&&Br(m,e);if(Array.isArray(c))for(const m of c)Bn(m)&&Br(m,e);if(Array.isArray(u))for(const m of u)Bn(m)&&Br(m,e);if(Bn(f))for(const m of Object.keys(f)){const p=f[m];Bn(p)&&Br(p,e)}Bn(h)&&Br(h,e),Bn(d)&&Br(d,e)}const Mu=s=>{const e={},i=vp(bp(s));return Br(i,e),{uiSchema:e,schema:i}},OC=()=>{const s={__errors:[],addError:e=>{var i;(i=s.__errors)==null||i.push(e)}};return s};function AC(s){return!!s&&"__errors"in s}function xp(s){var e;if(!s)return!1;for(const i of Object.values(s)){if(AC(i)){if(((e=i.__errors)!=null?e:[]).length>0)return!0;continue}if(xp(i))return!0}return!1}function kC(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}const PC=s=>"type"in s&&s.type==="error",Sp=(s,e,i)=>{async function l(a,c="#",u=a){var m,p;const f=new up(s),h={},d=async(v,y,S,E,w)=>{const C=e[v];if(C){const O=OC();try{await C(S,O,{...i,formData:a,schema:E,uiSchema:w})}catch(I){O.addError(I.message)}h[y]=O}};for(const[v,y]of Object.entries(u)){const S=`${c}/${v}`,E=f.getSchema({pointer:S,data:a});if(!E)continue;if(PC(E))throw new Error(E.message);const{schema:w,uiSchema:C}=Mu(E),O=E&&E.items,I=async(M,$,N)=>{await d(M["ui:field"],v,y,$,N)},P=async M=>{if("ui:field"in M){const{schema:$,uiSchema:N}=Mu(E.items);await I(M,$,N)}};if("ui:field"in E)await I(E,w,C);else if(O&&"ui:field"in E.items)await P(E.items);else if(O&&E.items.type==="object"){const M=(p=(m=E.items)==null?void 0:m.properties)!=null?p:[];for(const[,$]of Object.entries(M))await P($)}else kC(y)&&(h[v]=await l(a,S,y))}return h}return async a=>await l(a)};var TC=x(48364);const IC=s=>{const e=Object.fromEntries(Object.entries(s.formState).map(([i,l])=>{var a;for(const c of s.schemas){const f=new up(c.mergedSchema).getSchema({pointer:`#/${i}`,data:s.formState});if(f){const h=(a=f["ui:backstage"])==null?void 0:a.review;if(h){if(h.mask)return[i,h.mask];if(h.show===!1)return[]}if(f["ui:widget"]==="password")return[i,"******"];if(f.enum&&f.enumNames)return[i,f.enumNames[f.enum.indexOf(l)]||l]}}return[i,l]}).filter(i=>i.length>0));return g.createElement(TC.x,{metadata:e})};var DC=x(19126),Ep=x.n(DC);const MC=s=>(0,g.useState)(()=>{if(s)return s;const e=Ep().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(e.formData)}catch{return{}}});var wp=x(30029);const RC=s=>{const e=(0,at.h_)(wp.W),l=s.steps.map(({title:a,description:c,schema:u})=>({title:a,description:c,mergedSchema:u,...Mu(u)})).filter(a=>{var u;const c=(u=a.uiSchema["ui:backstage"])==null?void 0:u.featureFlag;return c?e.isActive(c):!0}).map(a=>{var u,f,h,d;const c={...a,schema:{...a.schema,title:void 0}};return((u=a.schema)!=null&&u.properties||!((f=a.schema)!=null&&f.dependencies))&&(c.schema.properties=Object.fromEntries(Object.entries((d=(h=a.schema)==null?void 0:h.properties)!=null?d:{}).filter(([m])=>{var v,y;const p=(y=(v=a.uiSchema[m])==null?void 0:v["ui:backstage"])==null?void 0:y.featureFlag;return p?e.isActive(p):!0}))),c});return{presentation:s.presentation,steps:l}};var LC=x(9850),Ru=x.n(LC);function kt(s){return typeof File!="undefined"&&s instanceof File||typeof Date!="undefined"&&s instanceof Date?!1:typeof s=="object"&&s!==null&&!Array.isArray(s)}function NC(s){return s.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),kt(s.additionalItems)}function Cp(s){if(s==="")return;if(s===null)return null;if(/\.$/.test(s)||/\.0$/.test(s)||/\.\d*0$/.test(s))return s;const e=Number(s);return typeof e=="number"&&!Number.isNaN(e)?e:s}const bs="__additional_property",Lu="additionalProperties",So="allOf",ur="anyOf",Op="const",$C="default",J4="definitions",ta="dependencies",FC="enum",qn="__errors",oi="$id",BC="if",li="items",jC="_$junk_option_schema_id$_",na="$name",jn="oneOf",Dt="properties",WC="required",ra="submitButtonOptions",jt="$ref",Y4="__rjsf_additionalProperties",Nu="__rjsf_additionalProperties",Ap="__rjsf_rootSchema",VC="ui:field",$u="ui:widget",Eo="ui:options",ZC="ui:globalOptions";function tt(s={},e={}){return Object.keys(s).filter(i=>i.indexOf("ui:")===0).reduce((i,l)=>{const a=s[l];return l===$u&&kt(a)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),i):l===Eo&&kt(a)?{...i,...a}:{...i,[l.substring(3)]:a}},{...e})}function kp(s,e={},i){if(!s.additionalProperties)return!1;const{expandable:l=!0}=tt(e);return l===!1?l:s.maxProperties!==void 0&&i?Object.keys(i).length<s.maxProperties:!0}var zC=x(97030),Fu=x.n(zC);function Bu(s){const e={[qn]:[],addError(i){this[qn].push(i)}};if(Array.isArray(s))return s.reduce((i,l,a)=>({...i,[a]:Bu(l)}),e);if(Fu()(s)){const i=s;return Object.keys(i).reduce((l,a)=>({...l,[a]:Bu(i[a])}),e)}return e}var UC=x(13383),HC=x.n(UC);function yn(s,e){return HC()(s,e,(i,l)=>{if(typeof i=="function"&&typeof l=="function")return!0})}var KC=x(72579),Le=x.n(KC),GC=x(45455),ai=x.n(GC),JC=x(404),YC=x(17620),ia=x.n(YC);function ju(s,e){const i=e[s];return[ia()(e,[s]),i]}function Pp(s,e={},i=[]){const l=s||"";let a;if(l.startsWith("#"))a=decodeURIComponent(l.substring(1));else throw new Error(`Could not find a definition for ${s}.`);const c=JC.get(e,a);if(c===void 0)throw new Error(`Could not find a definition for ${s}.`);const u=c[jt];if(u){if(i.includes(u)){if(i.length===1)throw new Error(`Definition for ${s} is a circular reference`);const[m,...p]=i,v=[...p,l,m].join(" -> ");throw new Error(`Definition for ${m} contains a circular reference through ${v}`)}const[f,h]=ju(jt,c),d=Pp(h,e,[...i,l]);return Object.keys(f).length>0?{...f,...d}:d}return c}function Tp(s,e={}){return Pp(s,e,[])}var XC=x(93352),un=x.n(XC),QC=x(80537),Ip=x.n(QC),_C=x(29259),er=x.n(_C),qC=x(85505),Wu=x.n(qC),eO=x(58215),tO=x.n(eO),nO=x(61258),Dp=x.n(nO);function Mp(s,e,i){var l;if(s&&i){const a=Le()(s,i);if(a===void 0)return;for(let c=0;c<e.length;c++){const u=e[c],f=Le()(u,[Dt,i],{});if(!(f.type==="object"||f.type==="array")&&(f.const===a||!((l=f.enum)===null||l===void 0)&&l.includes(a)))return c}}}function Rp(s,e,i,l,a){if(e===void 0)return 0;const c=Mp(e,i,a);if(Ip()(c))return c;for(let u=0;u<i.length;u++){const f=i[u];if(a&&un()(f,[Dt,a])){const h=Le()(e,a),d=Le()(f,[Dt,a],{});if(s.isValid(d,h,l))return u}else if(f[Dt]){const h={anyOf:Object.keys(f[Dt]).map(m=>({required:[m]}))};let d;if(f.anyOf){const{...m}=f;m.allOf?m.allOf=m.allOf.slice():m.allOf=[],m.allOf.push(h),d=m}else d=Object.assign({},f,h);if(delete d.required,s.isValid(d,e,l))return u}else if(s.isValid(f,e,l))return u}return 0}function Vu(s,e,i,l,a){return Rp(s,e,i,l,a)}var rO=x(18149),Vi=x.n(rO),iO=x(16765),en=x.n(iO),sO=x(89466),oO=x.n(sO),lO=x(98537),aO=x.n(lO),cO=x(68632),uO=x.n(cO),fO=x(75652),hO=x.n(fO),dO=x(33372),mO=x.n(dO);function xs(s){let e;const i=Le()(s,"discriminator.propertyName",void 0);return Wu()(i)?e=i:i!==void 0&&console.warn(`Expecting discriminator to be a string, got "${typeof i}" instead`),e}function wo(s){return Array.isArray(s)?"array":typeof s=="string"?"string":s==null?"null":typeof s=="boolean"?"boolean":isNaN(s)?typeof s=="object"?"object":"string":"number"}var pO=x(26139),gO=x.n(pO);function ci(s){let{type:e}=s;return!e&&s.const?wo(s.const):!e&&s.enum?"string":!e&&(s.properties||s.additionalProperties)?"object":(Array.isArray(e)&&(e.length===2&&e.includes("null")?e=e.find(i=>i!=="null"):e=e[0]),e)}function jr(s,e){const i=Object.assign({},s);return Object.keys(e).reduce((l,a)=>{const c=s?s[a]:{},u=e[a];return s&&a in s&&kt(u)?l[a]=jr(c,u):s&&e&&(ci(s)==="object"||ci(e)==="object")&&a===WC&&Array.isArray(c)&&Array.isArray(u)?l[a]=gO()(c,u):l[a]=u,l},i)}function Tn(s,e,i={},l){return fr(s,e,i,l)[0]}function yO(s,e,i,l,a,c){const{if:u,then:f,else:h,...d}=e,m=s.isValid(u,c||{},i);let p=[d],v=[];if(l)f&&typeof f!="boolean"&&(v=v.concat(fr(s,f,i,c,l,a))),h&&typeof h!="boolean"&&(v=v.concat(fr(s,h,i,c,l,a)));else{const y=m?f:h;y&&typeof y!="boolean"&&(v=v.concat(fr(s,y,i,c,l,a)))}return v.length&&(p=v.map(y=>jr(d,y))),p.flatMap(y=>fr(s,y,i,c,l,a))}function Lp(s){return s.reduce((i,l)=>l.length>1?l.flatMap(a=>Dp()(i.length,c=>[...i[c]].concat(a))):(i.forEach(a=>a.push(l[0])),i),[[]])}function vO(s,e,i,l,a,c){const u=Np(s,e,i,l,a,c);if(u.length>1||u[0]!==e)return u;if(ta in e)return $p(s,e,i,l,a,c).flatMap(h=>fr(s,h,i,c,l,a));if(So in e&&Array.isArray(e.allOf)){const f=e.allOf.map(d=>fr(s,d,i,c,l,a));return Lp(f).map(d=>({...e,allOf:d}))}return[e]}function Np(s,e,i,l,a,c){const u=Co(e,i,a);return u!==e?fr(s,u,i,c,l,a):[e]}function Co(s,e,i){if(!kt(s))return s;let l=s;if(jt in l){const{$ref:a,...c}=l;if(i.includes(a))return l;i.push(a),l={...Tp(a,e),...c}}if(Dt in l){const a=[],c=oO()(l[Dt],(u,f,h)=>{const d=[...i];u[h]=Co(f,e,d),a.push(d)},{});aO()(i,hO()(uO()(a))),l={...l,[Dt]:c}}return li in l&&!Array.isArray(l.items)&&typeof l.items!="boolean"&&(l={...l,items:Co(l.items,e,i)}),Vi()(s,l)?s:l}function bO(s,e,i,l){const a={...e,properties:{...e.properties}},c=l&&kt(l)?l:{};return Object.keys(c).forEach(u=>{if(u in a.properties)return;let f={};typeof a.additionalProperties!="boolean"?jt in a.additionalProperties?f=Tn(s,{$ref:Le()(a.additionalProperties,[jt])},i,c):"type"in a.additionalProperties?f={...a.additionalProperties}:ur in a.additionalProperties||jn in a.additionalProperties?f={type:"object",...a.additionalProperties}:f={type:wo(Le()(c,[u]))}:f={type:wo(Le()(c,[u]))},a.properties[u]=f,en()(a.properties,[u,bs],!0)}),a}function fr(s,e,i,l,a=!1,c=[]){return kt(e)?vO(s,e,i,a,c,l).flatMap(f=>{let h=f;if(BC in h)return yO(s,h,i,a,c,l);if(So in h){if(a){const{allOf:m,...p}=h;return[...m,p]}try{h=mO()(h,{deep:!1})}catch(m){console.warn(`could not merge subschemas in allOf:
`,m);const{allOf:p,...v}=h;return v}}return Lu in h&&h.additionalProperties!==!1?bO(s,h,i,l):h}):[{}]}function xO(s,e,i,l,a){let c;const{oneOf:u,anyOf:f,...h}=e;if(Array.isArray(u)?c=u:Array.isArray(f)&&(c=f),c){const d=a===void 0&&l?{}:a,m=xs(e);c=c.map(v=>Co(v,i,[]));const p=Vu(s,d,c,i,m);if(l)return c.map(v=>jr(h,v));e=jr(h,c[p])}return[e]}function $p(s,e,i,l,a,c){const{dependencies:u,...f}=e;return xO(s,f,i,l,c).flatMap(d=>Fp(s,u,d,i,l,a,c))}function Fp(s,e,i,l,a,c,u){let f=[i];for(const h in e){if(!a&&Le()(u,[h])===void 0||i.properties&&!(h in i.properties))continue;const[d,m]=ju(h,e);return Array.isArray(m)?f[0]=SO(i,m):kt(m)&&(f=EO(s,i,l,h,m,a,c,u)),f.flatMap(p=>Fp(s,d,p,l,a,c,u))}return f}function SO(s,e){if(!e)return s;const i=Array.isArray(s.required)?Array.from(new Set([...s.required,...e])):e;return{...s,required:i}}function EO(s,e,i,l,a,c,u,f){return fr(s,a,i,f,c,u).flatMap(d=>{const{oneOf:m,...p}=d;if(e=jr(e,p),m===void 0)return e;const v=m.map(S=>typeof S=="boolean"||!(jt in S)?[S]:Np(s,S,i,c,u,f));return Lp(v).flatMap(S=>wO(s,e,i,l,S,c,u,f))})}function wO(s,e,i,l,a,c,u,f){const h=a.filter(d=>{if(typeof d=="boolean"||!d||!d.properties)return!1;const{[l]:m}=d.properties;if(m){const p={type:"object",properties:{[l]:m}};return s.isValid(p,f,i)||c}return!1});return!c&&h.length!==1?(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[e]):h.flatMap(d=>{const m=d,[p]=ju(l,m.properties),v={...m,properties:p};return fr(s,v,i,f,c,u).map(S=>jr(e,S))})}const CO={type:"object",$id:jC,properties:{__not_really_there__:{type:"number"}}};function Zu(s,e,i,l={}){let a=0;return i&&(er()(i.properties)?a+=tO()(i.properties,(c,u,f)=>{const h=Le()(l,f);if(typeof u=="boolean")return c;if(un()(u,jt)){const d=Tn(s,u,e,h);return c+Zu(s,e,d,h||{})}if((un()(u,jn)||un()(u,ur))&&h){const d=un()(u,jn)?jn:ur,m=xs(u);return c+Oo(s,e,h,Le()(u,d),-1,m)}if(u.type==="object")return c+Zu(s,e,u,h||{});if(u.type===wo(h)){let d=c+1;return u.default?d+=h===u.default?1:-1:u.const&&(d+=h===u.const?1:-1),d}return c},0):Wu()(i.type)&&i.type===wo(l)&&(a+=1)),a}function Oo(s,e,i,l,a=-1,c){const u=l.map(p=>Co(p,e,[])),f=Mp(i,l,c);if(Ip()(f))return f;const h=u.reduce((p,v,y)=>(Vu(s,i,[CO,v],e,c)===1&&p.push(y),p),[]);if(h.length===1)return h[0];h.length||Dp()(u.length,p=>h.push(p));const d=new Set,{bestIndex:m}=h.reduce((p,v)=>{const{bestScore:y}=p,S=u[v],E=Zu(s,e,S,i);return d.add(E),E>y?{bestIndex:v,bestScore:E}:p},{bestIndex:a,bestScore:0});return d.size===1&&a>=0?a:m}function zu(s){return Array.isArray(s.items)&&s.items.length>0&&s.items.every(e=>kt(e))}function sa(s,e,i=!1){if(Array.isArray(e)){const l=Array.isArray(s)?s:[],a=e.map((c,u)=>l[u]?sa(l[u],c,i):c);return i&&a.length<l.length&&a.push(...l.slice(a.length)),a}if(kt(e)){const l=Object.assign({},s);return Object.keys(e).reduce((a,c)=>(a[c]=sa(s?Le()(s,c):{},Le()(e,c),i),a),l)}return e}function Ss(s,e,i=!1){return Object.keys(e).reduce((l,a)=>{const c=s?s[a]:{},u=e[a];if(s&&a in s&&kt(u))l[a]=Ss(c,u,i);else if(i&&Array.isArray(c)&&Array.isArray(u)){let f=u;i==="preventDuplicates"&&(f=u.reduce((h,d)=>(c.includes(d)||h.push(d),h),[])),l[a]=c.concat(f)}else l[a]=u;return l},Object.assign({},s))}function OO(s){return Array.isArray(s.enum)&&s.enum.length===1||Op in s}function Bp(s,e,i={}){const l=Tn(s,e,i,void 0),a=l.oneOf||l.anyOf;return Array.isArray(l.enum)?!0:Array.isArray(a)?a.every(c=>typeof c!="boolean"&&OO(c)):!1}function Uu(s,e,i){return!e.uniqueItems||!e.items||typeof e.items=="boolean"?!1:Bp(s,e.items,i)}var Es;(function(s){s[s.Ignore=0]="Ignore",s[s.Invert=1]="Invert",s[s.Fallback=2]="Fallback"})(Es||(Es={}));function Hu(s,e=Es.Ignore,i=-1){if(i>=0){if(Array.isArray(s.items)&&i<s.items.length){const l=s.items[i];if(typeof l!="boolean")return l}}else if(s.items&&!Array.isArray(s.items)&&typeof s.items!="boolean")return s.items;return e!==Es.Ignore&&kt(s.additionalItems)?s.additionalItems:{}}function jp(s,e,i,l,a,c=[],u={}){const{emptyObjectFields:f="populateAllDefaults"}=u;if(l)s[e]=i;else if(f!=="skipDefaults")if(kt(i)){const h=a===void 0?c.includes(e):a;f==="skipEmptyDefaults"?ai()(i)||(s[e]=i):(!ai()(i)||c.includes(e))&&(h||f!=="populateRequiredDefaults")&&(s[e]=i)}else i!==void 0&&(f==="populateAllDefaults"||f==="skipEmptyDefaults"||c.includes(e))&&(s[e]=i)}function ui(s,e,{parentDefaults:i,rawFormData:l,rootSchema:a={},includeUndefinedValues:c=!1,_recurseList:u=[],experimental_defaultFormStateBehavior:f=void 0,required:h}={}){var d,m,p,v;const y=kt(l)?l:{},S=kt(e)?e:{};let E=i,w=null,C=u;if(kt(E)&&kt(S.default))E=Ss(E,S.default);else if($C in S)E=S.default;else if(jt in S){const O=S[jt];u.includes(O)||(C=u.concat(O),w=Tp(O,a))}else if(ta in S)w=$p(s,S,a,!1,[],y)[0];else if(zu(S))E=S.items.map((O,I)=>ui(s,O,{rootSchema:a,includeUndefinedValues:c,_recurseList:u,experimental_defaultFormStateBehavior:f,parentDefaults:Array.isArray(i)?i[I]:void 0,rawFormData:y,required:h}));else if(jn in S){const{oneOf:O,...I}=S;if(O.length===0)return;const P=xs(S);w=O[Oo(s,a,ai()(y)?void 0:y,O,0,P)],w=jr(I,w)}else if(ur in S){const{anyOf:O,...I}=S;if(O.length===0)return;const P=xs(S);w=O[Oo(s,a,ai()(y)?void 0:y,O,0,P)],w=jr(I,w)}if(w)return ui(s,w,{rootSchema:a,includeUndefinedValues:c,_recurseList:C,experimental_defaultFormStateBehavior:f,parentDefaults:E,rawFormData:y,required:h});switch(E===void 0&&(E=S.default),ci(S)){case"object":{const O=(f==null?void 0:f.allOf)==="populateDefaults"&&So in S?Tn(s,S,a,y):S,I=Object.keys(O.properties||{}).reduce((P,M)=>{var $;const N=ui(s,Le()(O,[Dt,M]),{rootSchema:a,_recurseList:u,experimental_defaultFormStateBehavior:f,includeUndefinedValues:c===!0,parentDefaults:Le()(E,[M]),rawFormData:Le()(y,[M]),required:($=O.required)===null||$===void 0?void 0:$.includes(M)});return jp(P,M,N,c,h,O.required,f),P},{});if(O.additionalProperties){const P=kt(O.additionalProperties)?O.additionalProperties:{},M=new Set;kt(E)&&Object.keys(E).filter(N=>!O.properties||!O.properties[N]).forEach(N=>M.add(N));const $=[];Object.keys(y).filter(N=>!O.properties||!O.properties[N]).forEach(N=>{M.add(N),$.push(N)}),M.forEach(N=>{var ne;const ie=ui(s,P,{rootSchema:a,_recurseList:u,experimental_defaultFormStateBehavior:f,includeUndefinedValues:c===!0,parentDefaults:Le()(E,[N]),rawFormData:Le()(y,[N]),required:(ne=O.required)===null||ne===void 0?void 0:ne.includes(N)});jp(I,N,ie,c,h,$)})}return I}case"array":{const O=((d=f==null?void 0:f.arrayMinItems)===null||d===void 0?void 0:d.populate)==="never",I=((m=f==null?void 0:f.arrayMinItems)===null||m===void 0?void 0:m.populate)==="requiredOnly",P=(f==null?void 0:f.emptyObjectFields)==="skipEmptyDefaults",M=(v=(p=f==null?void 0:f.arrayMinItems)===null||p===void 0?void 0:p.computeSkipPopulate)!==null&&v!==void 0?v:()=>!1,$=P?void 0:[];if(Array.isArray(E)&&(E=E.map((ve,pe)=>{const xe=Hu(S,Es.Fallback,pe);return ui(s,xe,{rootSchema:a,_recurseList:u,experimental_defaultFormStateBehavior:f,parentDefaults:ve,required:h})})),Array.isArray(l)){const ve=Hu(S);O?E=l:E=l.map((pe,xe)=>ui(s,ve,{rootSchema:a,_recurseList:u,experimental_defaultFormStateBehavior:f,rawFormData:pe,parentDefaults:Le()(E,[xe]),required:h}))}if(O)return E!=null?E:$;if(I&&!h)return E||void 0;const N=Array.isArray(E)?E.length:0;if(!S.minItems||Uu(s,S,a)||M(s,S,a)||S.minItems<=N)return E||$;const ne=E||[],ie=Hu(S,Es.Invert),fe=ie.default,ye=new Array(S.minItems-N).fill(ui(s,ie,{parentDefaults:fe,rootSchema:a,_recurseList:u,experimental_defaultFormStateBehavior:f,required:h}));return ne.concat(ye)}}return E}function Wp(s,e,i,l,a=!1,c){if(!kt(e))throw new Error("Invalid schema: "+e);const u=Tn(s,e,l,i),f=ui(s,u,{rootSchema:l,includeUndefinedValues:a,experimental_defaultFormStateBehavior:c,rawFormData:i});if(i==null||typeof i=="number"&&isNaN(i))return f;const{mergeExtraDefaults:h}=(c==null?void 0:c.arrayMinItems)||{};return kt(i)||Array.isArray(i)?sa(f,i,h):i}function Vp(s={}){return"widget"in tt(s)&&tt(s).widget!=="hidden"}function Zp(s,e,i={},l){if(i[$u]==="files")return!0;if(e.items){const a=Tn(s,e.items,l);return a.type==="string"&&a.format==="data-url"}return!1}function AO(s,e,i={},l,a){const c=tt(i,a),{label:u=!0}=c;let f=!!u;const h=ci(e);return h==="array"&&(f=Uu(s,e,l)||Zp(s,e,i,l)||Vp(i)),h==="object"&&(f=!1),h==="boolean"&&!i[$u]&&(f=!1),i[VC]&&(f=!1),f}function kO(s,e,i){if(!i)return e;const{errors:l,errorSchema:a}=e;let c=s.toErrorList(i),u=i;return ai()(a)||(u=Ss(a,i,!0),c=[...l].concat(c)),{errorSchema:u,errors:c}}const ws=Symbol("no Value");function Ku(s,e,i,l,a={}){let c;if(un()(i,Dt)){const u={};if(un()(l,Dt)){const d=Le()(l,Dt,{});Object.keys(d).forEach(m=>{un()(a,m)&&(u[m]=void 0)})}const f=Object.keys(Le()(i,Dt,{})),h={};f.forEach(d=>{const m=Le()(a,d);let p=Le()(l,[Dt,d],{}),v=Le()(i,[Dt,d],{});un()(p,jt)&&(p=Tn(s,p,e,m)),un()(v,jt)&&(v=Tn(s,v,e,m));const y=Le()(p,"type"),S=Le()(v,"type");if(!y||y===S)if(un()(u,d)&&delete u[d],S==="object"||S==="array"&&Array.isArray(m)){const E=Ku(s,e,v,p,m);(E!==void 0||S==="array")&&(h[d]=E)}else{const E=Le()(v,"default",ws),w=Le()(p,"default",ws);E!==ws&&E!==m&&(w===m?u[d]=E:Le()(v,"readOnly")===!0&&(u[d]=void 0));const C=Le()(v,"const",ws),O=Le()(p,"const",ws);C!==ws&&C!==m&&(u[d]=O===m?C:void 0)}}),c={...typeof a=="string"||Array.isArray(a)?void 0:a,...u,...h}}else if(Le()(l,"type")==="array"&&Le()(i,"type")==="array"&&Array.isArray(a)){let u=Le()(l,"items"),f=Le()(i,"items");if(typeof u=="object"&&typeof f=="object"&&!Array.isArray(u)&&!Array.isArray(f)){un()(u,jt)&&(u=Tn(s,u,e,a)),un()(f,jt)&&(f=Tn(s,f,e,a));const h=Le()(u,"type"),d=Le()(f,"type");if(!h||h===d){const m=Le()(i,"maxItems",-1);d==="object"?c=a.reduce((p,v)=>{const y=Ku(s,e,f,u,v);return y!==void 0&&(m<0||p.length<m)&&p.push(y),p},[]):c=m>0&&a.length>m?a.slice(0,m):a}}else typeof u=="boolean"&&typeof f=="boolean"&&u===f&&(c=a)}return c}function oa(s,e,i,l,a,c,u,f=[]){if(jt in e||ta in e||So in e){const m=Tn(s,e,c,u);if(f.findIndex(v=>Vi()(v,m))===-1)return oa(s,m,i,l,a,c,u,f.concat(m))}if(li in e&&!Le()(e,[li,jt]))return oa(s,Le()(e,li),i,l,a,c,u,f);const d={$id:a||i};if(ci(e)==="object"&&Dt in e)for(const m in e.properties){const p=Le()(e,[Dt,m]),v=d[oi]+l+m;d[m]=oa(s,kt(p)?p:{},i,l,v,c,Le()(u,[m]),f)}return d}function PO(s,e,i,l,a,c="root",u="_"){return oa(s,e,c,u,i,l,a)}function Zi(s,e,i,l,a,c=[]){if(jt in e||ta in e||So in e){const f=Tn(s,e,l,a);if(c.findIndex(d=>Vi()(d,f))===-1)return Zi(s,f,i,l,a,c.concat(f))}let u={[na]:i.replace(/^\./,"")};if(jn in e||ur in e){const f=jn in e?e.oneOf:e.anyOf,h=xs(e),d=Oo(s,l,a,f,0,h),m=f[d];u={...u,...Zi(s,m,i,l,a,c)}}if(Lu in e&&e[Lu]!==!1&&en()(u,Nu,!0),li in e&&Array.isArray(a)){const{items:f,additionalItems:h}=e;Array.isArray(f)?a.forEach((d,m)=>{f[m]?u[m]=Zi(s,f[m],`${i}.${m}`,l,d,c):h?u[m]=Zi(s,h,`${i}.${m}`,l,d,c):console.warn(`Unable to generate path schema for "${i}.${m}". No schema defined for it`)}):a.forEach((d,m)=>{u[m]=Zi(s,f,`${i}.${m}`,l,d,c)})}else if(Dt in e)for(const f in e.properties){const h=Le()(e,[Dt,f]);u[f]=Zi(s,h,`${i}.${f}`,l,Le()(a,[f]),c)}return u}function TO(s,e,i="",l,a){return Zi(s,e,i,l,a)}class IO{constructor(e,i,l){this.rootSchema=i,this.validator=e,this.experimental_defaultFormStateBehavior=l}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,i,l={}){return!e||!i?!1:this.validator!==e||!yn(this.rootSchema,i)||!yn(this.experimental_defaultFormStateBehavior,l)}getDefaultFormState(e,i,l=!1){return Wp(this.validator,e,i,this.rootSchema,l,this.experimental_defaultFormStateBehavior)}getDisplayLabel(e,i,l){return AO(this.validator,e,i,this.rootSchema,l)}getClosestMatchingOption(e,i,l,a){return Oo(this.validator,this.rootSchema,e,i,l,a)}getFirstMatchingOption(e,i,l){return Vu(this.validator,e,i,this.rootSchema,l)}getMatchingOption(e,i,l){return Rp(this.validator,e,i,this.rootSchema,l)}isFilesArray(e,i){return Zp(this.validator,e,i,this.rootSchema)}isMultiSelect(e){return Uu(this.validator,e,this.rootSchema)}isSelect(e){return Bp(this.validator,e,this.rootSchema)}mergeValidationData(e,i){return kO(this.validator,e,i)}retrieveSchema(e,i){return Tn(this.validator,e,this.rootSchema,i)}sanitizeDataForNewSchema(e,i,l){return Ku(this.validator,this.rootSchema,e,i,l)}toIdSchema(e,i,l,a="root",c="_"){return PO(this.validator,e,i,this.rootSchema,l,a,c)}toPathSchema(e,i,l){return TO(this.validator,e,i,this.rootSchema,l)}}function DO(s,e,i={}){return new IO(s,e,i)}function MO(s){var e;if(s.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const l=s.slice(5).split(";base64,");if(l.length!==2)throw new Error("File is invalid: dataURI must be base64");const[a,c]=l,[u,...f]=a.split(";"),h=u||"",d=decodeURI(((e=f.map(m=>m.split("=")).find(([m])=>m==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const m=atob(c),p=new Array(m.length);for(let y=0;y<m.length;y++)p[y]=m.charCodeAt(y);return{blob:new window.Blob([new Uint8Array(p)],{type:h}),name:d}}catch(m){throw new Error("File is invalid: "+m.message)}}function RO(s,e){let i=s;if(Array.isArray(e)){const l=i.split(/(%\d)/);e.forEach((a,c)=>{const u=l.findIndex(f=>f===`%${c+1}`);u>=0&&(l[u]=a)}),i=l.join("")}return i}function LO(s,e){return RO(s,e)}function Ht(s,e=[],i){if(Array.isArray(s))return s.map(c=>Ht(c,e)).filter(c=>c!==i);const l=s===""||s===null?-1:Number(s),a=e[l];return a?a.value:i}function zp(s,e,i=[]){const l=Ht(s,i);return Array.isArray(e)?e.filter(a=>!Vi()(a,l)):Vi()(l,e)?void 0:e}function la(s,e){return Array.isArray(e)?e.some(i=>Vi()(i,s)):Vi()(e,s)}function Gu(s,e=[],i=!1){const l=e.map((a,c)=>la(a.value,s)?String(c):void 0).filter(a=>typeof a!="undefined");return i?l:l[0]}var NO=x(1842),$O=x.n(NO);function Up(s,e,i=[]){const l=Ht(s,i);if(!$O()(l)){const a=i.findIndex(f=>l===f.value),c=i.map(({value:f})=>f);return e.slice(0,a).concat(l,e.slice(a)).sort((f,h)=>+(c.indexOf(f)>c.indexOf(h)))}return e}class FO{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let l=Array.isArray(e)&&e.length>0||typeof e=="string"?Le()(this.errorSchema,e):this.errorSchema;return!l&&e&&(l={},en()(this.errorSchema,e,l)),l}resetAllErrors(e){return this.errorSchema=e?Ru()(e):{},this}addErrors(e,i){const l=this.getOrCreateErrorBlock(i);let a=Le()(l,qn);return Array.isArray(a)||(a=[],l[qn]=a),Array.isArray(e)?a.push(...e):a.push(e),this}setErrors(e,i){const l=this.getOrCreateErrorBlock(i),a=Array.isArray(e)?[...e]:[e];return en()(l,qn,a),this}clearErrors(e){const i=this.getOrCreateErrorBlock(e);return en()(i,qn,[]),this}}function BO(s,e,i=[1900,new Date().getFullYear()+2],l="YMD"){const{day:a,month:c,year:u,hour:f,minute:h,second:d}=s,m={type:"day",range:[1,31],value:a},p={type:"month",range:[1,12],value:c},v={type:"year",range:i,value:u},y=[];switch(l){case"MDY":y.push(p,m,v);break;case"DMY":y.push(m,p,v);break;case"YMD":default:y.push(v,p,m)}return e&&y.push({type:"hour",range:[0,23],value:f},{type:"minute",range:[0,59],value:h},{type:"second",range:[0,59],value:d}),y}function Hp(s){const e={};return s.multipleOf&&(e.step=s.multipleOf),(s.minimum||s.minimum===0)&&(e.min=s.minimum),(s.maximum||s.maximum===0)&&(e.max=s.maximum),e}function Kp(s,e,i={},l=!0){const a={type:e||"text",...Hp(s)};return i.inputType?a.type=i.inputType:e||(s.type==="number"?(a.type="number",l&&a.step===void 0&&(a.step="any")):s.type==="integer"&&(a.type="number",a.step===void 0&&(a.step=1))),i.autocomplete&&(a.autoComplete=i.autocomplete),a}const Gp={props:{disabled:!1},submitText:"Submit",norender:!1};function Jp(s={}){const e=tt(s);if(e&&e[ra]){const i=e[ra];return{...Gp,...i}}return Gp}function Ke(s,e,i={}){const{templates:l}=e;return s==="ButtonTemplates"?l[s]:i[s]||l[s]}var T=x(52322),Yp=x(48570);const Ju={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function jO(s){let e=Le()(s,"MergedWidget");if(!e){const i=s.defaultProps&&s.defaultProps.options||{};e=({options:l,...a})=>(0,T.jsx)(s,{options:{...i,...l},...a}),en()(s,"MergedWidget",e)}return e}function Wr(s,e,i={}){const l=ci(s);if(typeof e=="function"||e&&Yp.isForwardRef((0,g.createElement)(e))||Yp.isMemo(e))return jO(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in i){const a=i[e];return Wr(s,a,i)}if(typeof l=="string"){if(!(l in Ju))throw new Error(`No widget for type '${l}'`);if(e in Ju[l]){const a=i[Ju[l][e]];return Wr(s,a,i)}}throw new Error(`No widget '${e}' for type '${l}'`)}function WO(s){let e=0;for(let i=0;i<s.length;i+=1){const l=s.charCodeAt(i);e=(e<<5)-e+l,e=e&e}return e.toString(16)}function VO(s){const e=new Set;return JSON.stringify(s,(i,l)=>(e.add(i),l)),WO(JSON.stringify(s,Array.from(e).sort()))}function ZO(s,e,i={}){try{return Wr(s,e,i),!0}catch(l){const a=l;if(a.message&&(a.message.startsWith("No widget")||a.message.startsWith("Unsupported widget")))return!1;throw l}}function Ao(s,e){return`${Wu()(s)?s:s[oi]}__${e}`}function zi(s){return Ao(s,"description")}function Yu(s){return Ao(s,"error")}function ko(s){return Ao(s,"examples")}function Xu(s){return Ao(s,"help")}function Qu(s){return Ao(s,"title")}function In(s,e=!1){const i=e?` ${ko(s)}`:"";return`${Yu(s)} ${zi(s)} ${Xu(s)}${i}`}function aa(s,e){return`${s}-${e}`}function Ui(s,e,i){return e?i:s}function zO(s){return s?new Date(s).toJSON():void 0}function UO(s){if(FC in s&&Array.isArray(s.enum)&&s.enum.length===1)return s.enum[0];if(Op in s)return s.const;throw new Error("schema cannot be inferred as a constant")}function ca(s){const e=s;if(e.enumNames,s.enum)return s.enum.map((l,a)=>({label:e.enumNames&&e.enumNames[a]||String(l),value:l}));const i=s.oneOf||s.anyOf;return i&&i.map(l=>{const a=l,c=UO(a),u=a.title||String(c);return{schema:a,label:u,value:c}})}function HO(s,e){if(!Array.isArray(e))return s;const i=m=>m.reduce((p,v)=>(p[v]=!0,p),{}),l=m=>m.length>1?`properties '${m.join("', '")}'`:`property '${m[0]}'`,a=i(s),c=e.filter(m=>m==="*"||a[m]),u=i(c),f=s.filter(m=>!u[m]),h=c.indexOf("*");if(h===-1){if(f.length)throw new Error(`uiSchema order list does not contain ${l(f)}`);return c}if(h!==c.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const d=[...c];return d.splice(h,1,...f),d}function fi(s,e){let i=String(s);for(;i.length<e;)i="0"+i;return i}function _u(s,e=!0){if(!s)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const i=new Date(s);if(Number.isNaN(i.getTime()))throw new Error("Unable to parse date "+s);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:e?i.getUTCHours():0,minute:e?i.getUTCMinutes():0,second:e?i.getUTCSeconds():0}}function Po(s){if(s.const||s.enum&&s.enum.length===1&&s.enum[0]===!0)return!0;if(s.anyOf&&s.anyOf.length===1)return Po(s.anyOf[0]);if(s.oneOf&&s.oneOf.length===1)return Po(s.oneOf[0]);if(s.allOf){const e=i=>Po(i);return s.allOf.some(e)}return!1}function KO(s,e,i){const{props:l,state:a}=s;return!yn(l,e)||!yn(a,i)}function Xp(s,e=!0){const{year:i,month:l,day:a,hour:c=0,minute:u=0,second:f=0}=s,h=Date.UTC(i,l-1,a,c,u,f),d=new Date(h).toJSON();return e?d:d.slice(0,10)}function To(s,e=[]){if(!s)return[];let i=[];return qn in s&&(i=i.concat(s[qn].map(l=>{const a=`.${e.join(".")}`;return{property:a,message:l,stack:`${a} ${l}`}}))),Object.keys(s).reduce((l,a)=>{if(a!==qn){const c=s[a];Fu()(c)&&(l=l.concat(To(c,[...e,a])))}return l},i)}var GO=x(25497),Qp=x.n(GO);function JO(s){const e=new FO;return s.length&&s.forEach(i=>{const{property:l,message:a}=i,c=l==="."?[]:Qp()(l);c.length>0&&c[0]===""&&c.splice(0,1),a&&e.addErrors(a,c)}),e.ErrorSchema}function _p(s){return Object.keys(s).reduce((e,i)=>{if(i==="addError")return e;{const l=s[i];return Fu()(l)?{...e,[i]:_p(l)}:{...e,[i]:l}}},{})}function YO(s){if(!s)return"";const e=new Date(s),i=fi(e.getFullYear(),4),l=fi(e.getMonth()+1,2),a=fi(e.getDate(),2),c=fi(e.getHours(),2),u=fi(e.getMinutes(),2),f=fi(e.getSeconds(),2),h=fi(e.getMilliseconds(),3);return`${i}-${l}-${a}T${c}:${u}:${f}.${h}`}function ua(s,e){if(!e)return s;const{errors:i,errorSchema:l}=s;let a=To(e),c=e;return ai()(l)||(c=Ss(l,e,!0),a=[...i].concat(a)),{errorSchema:c,errors:a}}function XO(s){for(const e in s){const i=s,l=i[e];e===jt&&typeof l=="string"&&l.startsWith("#")?i[e]=Ap+l:i[e]=qu(l)}return s}function QO(s){for(let e=0;e<s.length;e++)s[e]=qu(s[e]);return s}function qu(s){return Array.isArray(s)?QO([...s]):er()(s)?XO({...s}):s}var nt;(function(s){s.ArrayItemTitle="Item",s.MissingItems="Missing items definition",s.YesLabel="Yes",s.NoLabel="No",s.CloseLabel="Close",s.ErrorsLabel="Errors",s.NewStringDefault="New Value",s.AddButton="Add",s.AddItemButton="Add Item",s.CopyButton="Copy",s.MoveDownButton="Move down",s.MoveUpButton="Move up",s.RemoveButton="Remove",s.NowLabel="Now",s.ClearLabel="Clear",s.AriaDateLabel="Select a date",s.PreviewLabel="Preview",s.DecrementAriaLabel="Decrease value by 1",s.IncrementAriaLabel="Increase value by 1",s.UnknownFieldType="Unknown field type %1",s.OptionPrefix="Option %1",s.TitleOptionPrefix="%1 option %2",s.KeyLabel="%1 Key",s.InvalidObjectField='Invalid "%1" object field configuration: <em>%2</em>.',s.UnsupportedField="Unsupported field schema.",s.UnsupportedFieldWithId="Unsupported field schema for field <code>%1</code>.",s.UnsupportedFieldWithReason="Unsupported field schema: <em>%1</em>.",s.UnsupportedFieldWithIdAndReason="Unsupported field schema for field <code>%1</code>: <em>%2</em>.",s.FilesInfo="**%1** (%2, %3 bytes)"})(nt||(nt={}));var X4=x(59756);class Q4{constructor(e){this.schemaMap={},this.rootSchema=e,this.addSchema(e,hashForSchema(e))}addSchema(e,i){const l=get(e,ID_KEY,i),a={...e,[ID_KEY]:l},c=this.schemaMap[l];if(!c)this.schemaMap[l]=a;else if(!isEqual(c,a))throw console.error("existing schema:",JSON.stringify(c,null,2)),console.error("new schema:",JSON.stringify(a,null,2)),new Error(`Two different schemas exist with the same key ${l}! What a bad coincidence. If possible, try adding an $id to one of the schemas`)}getSchemaMap(){return this.schemaMap}isValid(e,i,l){if(!isEqual(l,this.rootSchema))throw new Error("Unexpectedly calling isValid() with a rootSchema that differs from the construction rootSchema");return this.addSchema(e,hashForSchema(e)),!1}rawValidation(e,i){throw new Error("Unexpectedly calling the `rawValidation()` method during schema parsing")}toErrorList(e,i){throw new Error("Unexpectedly calling the `toErrorList()` method during schema parsing")}validateFormData(e,i,l,a,c){throw new Error("Unexpectedly calling the `validateFormData()` method during schema parsing")}}function ef(s,e,i,l){retrieveSchemaInternal(s,l,i,void 0,!0).forEach(c=>{e.findIndex(f=>isEqual(f,c))===-1&&(e.push(c),resolveAnyOrOneOfSchemas(s,c,i,!0).forEach(h=>{PROPERTIES_KEY in h&&h[PROPERTIES_KEY]&&forEach(c[PROPERTIES_KEY],d=>{ef(s,e,i,d)})}),ITEMS_KEY in c&&!Array.isArray(c.items)&&typeof c.items!="boolean"&&ef(s,e,i,c.items))})}function _4(s){const e=new ParserValidator(s);return ef(e,[],s,s),e.getSchemaMap()}var _O=x(27991),qO=x.n(_O),eA=x(75289),qp=x.n(eA);const tA={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0},nA=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,rA=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function iA(s,e,i={},l,a=qO()){const c=new a({...tA,...i});return l?qp()(c,l):l!==!1&&qp()(c),c.addFormat("data-url",rA),c.addFormat("color",nA),c.addKeyword(bs),c.addKeyword(Nu),Array.isArray(s)&&c.addMetaSchema(s),er()(e)&&Object.keys(e).forEach(u=>{c.addFormat(u,e[u])}),c}function sA(s=[],e){return s.map(i=>{const{instancePath:l,keyword:a,params:c,schemaPath:u,parentSchema:f,...h}=i;let{message:d=""}=h,m=l.replace(/\//g,"."),p=`${m} ${d}`.trim();if("missingProperty"in c){m=m?`${m}.${c.missingProperty}`:c.missingProperty;const v=c.missingProperty,y=tt(Le()(e,`${m.replace(/^\./,"")}`)).title;if(y)d=d.replace(v,y);else{const S=Le()(f,[Dt,v,"title"]);S&&(d=d.replace(v,S))}p=d}else{const v=tt(Le()(e,`${m.replace(/^\./,"")}`)).title;if(v)p=`'${v}' ${d}`.trim();else{const y=f==null?void 0:f.title;y&&(p=`'${y}' ${d}`.trim())}}return{name:a,property:m,message:d,params:c,stack:p,schemaPath:u}})}function oA(s,e,i,l,a,c,u){const{validationError:f}=e;let h=sA(e.errors,u);f&&(h=[...h,{stack:f.message}]),typeof c=="function"&&(h=c(h,u));let d=JO(h);if(f&&(d={...d,$schema:{__errors:[f.message]}}),typeof a!="function")return{errors:h,errorSchema:d};const m=Wp(s,l,i,l,!0),p=a(m,Bu(m),u),v=_p(p);return ua({errors:h,errorSchema:d},v)}class lA{constructor(e,i){const{additionalMetaSchemas:l,customFormats:a,ajvOptionsOverrides:c,ajvFormatOptions:u,AjvClass:f}=e;this.ajv=iA(l,a,c,u,f),this.localizer=i}toErrorList(e,i=[]){return To(e,i)}rawValidation(e,i){let l,a;e[oi]&&(a=this.ajv.getSchema(e[oi]));try{a===void 0&&(a=this.ajv.compile(e)),a(i)}catch(u){l=u}let c;return a&&(typeof this.localizer=="function"&&this.localizer(a.errors),c=a.errors||void 0,a.errors=null),{errors:c,validationError:l}}validateFormData(e,i,l,a,c){const u=this.rawValidation(i,e);return oA(this,u,e,i,l,a,c)}isValid(e,i,l){var a,c;const u=(a=l[oi])!==null&&a!==void 0?a:Ap;try{this.ajv.addSchema(l,u);const f=qu(e),h=(c=f[oi])!==null&&c!==void 0?c:VO(f);let d;return d=this.ajv.getSchema(h),d===void 0&&(d=this.ajv.addSchema(f,h).getSchema(h)||this.ajv.compile(f)),d(i)}catch(f){return console.warn("Error encountered compiling schema:",f),!1}finally{this.ajv.removeSchema(u)}}}function aA(s={},e){return new lA(s,e)}class q4{constructor(e,i,l){this.rootSchema=i,this.validateFns=e,this.localizer=l,this.mainValidator=this.getValidator(i)}getValidator(e){const i=get(e,ID_KEY)||hashForSchema(e),l=this.validateFns[i];if(!l)throw new Error(`No precompiled validator function was found for the given schema for "${i}"`);return l}ensureSameRootSchema(e,i){if(!isEqual(e,this.rootSchema)){const l=retrieveSchema(this,this.rootSchema,this.rootSchema,i);if(!isEqual(e,l))throw new Error("The schema associated with the precompiled validator differs from the rootSchema provided for validation")}return!0}toErrorList(e,i=[]){return toErrorList(e,i)}rawValidation(e,i){this.ensureSameRootSchema(e,i),this.mainValidator(i),typeof this.localizer=="function"&&this.localizer(this.mainValidator.errors);const l=this.mainValidator.errors||void 0;return this.mainValidator.errors=null,{errors:l}}validateFormData(e,i,l,a,c){const u=this.rawValidation(i,e);return processRawValidationErrors(this,u,e,i,l,a,c)}isValid(e,i,l){return this.ensureSameRootSchema(l,i),get(e,ID_KEY)===JUNK_OPTION_ID?!1:this.getValidator(e)(i)}}function eB(s,e,i){return new AJV8PrecompiledValidator(s,e,i)}const eg=aA(),cA=(s,e={})=>{var c;const{layouts:i=[]}=e,l=s==null?void 0:s.uiSchema["ui:ObjectFieldTemplate"];if(typeof l!="string")return s;const a=(c=i.find(u=>u.name===l))==null?void 0:c.component;return a?{...s,uiSchema:{...s.uiSchema,"ui:ObjectFieldTemplate":a}}:s},uA=({description:s})=>s&&g.createElement(b.S,{content:s,linkTarget:"_blank"});var fA=x(13888),hA=x.n(fA);let dA=s=>crypto.getRandomValues(new Uint8Array(s)),mA=(s,e,i)=>{let l=(2<<Math.log(s.length-1)/Math.LN2)-1,a=-~(1.6*l*e/s.length);return(c=e)=>{let u="";for(;;){let f=i(a),h=a;for(;h--;)if(u+=s[f[h]&l]||"",u.length===c)return u}}},tB=(s,e=21)=>mA(s,e,dA),pA=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,i)=>(i&=63,i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i>62?e+="-":e+="_",e),"");function tf(){return pA()}function tg(s){return Array.isArray(s)?s.map(e=>({key:tf(),item:e})):[]}function Io(s){return Array.isArray(s)?s.map(e=>e.item):[]}class gA extends g.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:a,registry:c}=this.props,{schemaUtils:u}=c;let f=a.items;return zu(a)&&NC(a)&&(f=a.additionalItems),u.getDefaultFormState(f)},this.onAddClick=a=>{this._handleAddClick(a)},this.onAddIndexClick=a=>c=>{this._handleAddClick(c,a)},this.onCopyIndexClick=a=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:h}=this.state;let d;if(f){d={};for(const v in f){const y=parseInt(v);y<=a?en()(d,[y],f[v]):y>a&&en()(d,[y+1],f[v])}}const m={key:tf(),item:Ru()(h[a].item)},p=[...h];a!==void 0?p.splice(a+1,0,m):p.push(m),this.setState({keyedFormData:p,updatedKeyedFormData:!0},()=>u(Io(p),d))},this.onDropIndexClick=a=>c=>{c&&c.preventDefault();const{onChange:u,errorSchema:f}=this.props,{keyedFormData:h}=this.state;let d;if(f){d={};for(const p in f){const v=parseInt(p);v<a?en()(d,[v],f[p]):v>a&&en()(d,[v-1],f[p])}}const m=h.filter((p,v)=>v!==a);this.setState({keyedFormData:m,updatedKeyedFormData:!0},()=>u(Io(m),d))},this.onReorderClick=(a,c)=>u=>{u&&(u.preventDefault(),u.currentTarget.blur());const{onChange:f,errorSchema:h}=this.props;let d;if(h){d={};for(const y in h){const S=parseInt(y);S==a?en()(d,[c],h[a]):S==c?en()(d,[a],h[c]):en()(d,[y],h[S])}}const{keyedFormData:m}=this.state;function p(){const y=m.slice();return y.splice(a,1),y.splice(c,0,m[a]),y}const v=p();this.setState({keyedFormData:v},()=>f(Io(v),d))},this.onChangeForIndex=a=>(c,u,f)=>{const{formData:h,onChange:d,errorSchema:m}=this.props,v=(Array.isArray(h)?h:[]).map((y,S)=>a===S?typeof c=="undefined"?null:c:y);d(v,m&&m&&{...m,[a]:u},f)},this.onSelectChange=a=>{const{onChange:c,idSchema:u}=this.props;c(a,void 0,u&&u.$id)};const{formData:i=[]}=e,l=tg(i);this.state={keyedFormData:l,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,i){if(i.updatedKeyedFormData)return{updatedKeyedFormData:!1};const l=Array.isArray(e.formData)?e.formData:[],a=i.keyedFormData||[];return{keyedFormData:l.length===a.length?a.map((u,f)=>({key:u.key,item:l[f]})):tg(l)}}get itemTitle(){const{schema:e,registry:i}=this.props,{translateString:l}=i;return Le()(e,[li,"title"],Le()(e,[li,"description"],l(nt.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:i,uiSchema:l,registry:a}=this.props;let{addable:c}=tt(l,a.globalUiOptions);return c!==!1&&(i.maxItems!==void 0?c=e.length<i.maxItems:c=!0),c}_handleAddClick(e,i){e&&e.preventDefault();const{onChange:l,errorSchema:a}=this.props,{keyedFormData:c}=this.state;let u;if(a){u={};for(const d in a){const m=parseInt(d);i===void 0||m<i?en()(u,[m],a[d]):m>=i&&en()(u,[m+1],a[d])}}const f={key:tf(),item:this._getNewFormDataRow()},h=[...c];i!==void 0?h.splice(i,0,f):h.push(f),this.setState({keyedFormData:h,updatedKeyedFormData:!0},()=>l(Io(h),u))}render(){const{schema:e,uiSchema:i,idSchema:l,registry:a}=this.props,{schemaUtils:c,translateString:u}=a;if(!(li in e)){const f=tt(i),h=Ke("UnsupportedFieldTemplate",a,f);return(0,T.jsx)(h,{schema:e,idSchema:l,reason:u(nt.MissingItems),registry:a})}return c.isMultiSelect(e)?this.renderMultiSelect():Vp(i)?this.renderCustomWidget():zu(e)?this.renderFixedArray():c.isFilesArray(e,i)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:i={},errorSchema:l,idSchema:a,name:c,title:u,disabled:f=!1,readonly:h=!1,autofocus:d=!1,required:m=!1,registry:p,onBlur:v,onFocus:y,idPrefix:S,idSeparator:E="_",rawErrors:w}=this.props,{keyedFormData:C}=this.state,O=e.title||u||c,{schemaUtils:I,formContext:P}=p,M=tt(i),$=er()(e.items)?e.items:{},N=I.retrieveSchema($),ne=Io(this.state.keyedFormData),ie=this.canAddItem(ne),fe={canAdd:ie,items:C.map((ve,pe)=>{const{key:xe,item:me}=ve,Pe=me,Re=I.retrieveSchema($,Pe),Oe=l?l[pe]:void 0,be=a.$id+E+pe,Be=I.toIdSchema(Re,be,Pe,S,E);return this.renderArrayFieldItem({key:xe,index:pe,name:c&&`${c}-${pe}`,title:O?`${O}-${pe+1}`:void 0,canAdd:ie,canMoveUp:pe>0,canMoveDown:pe<ne.length-1,itemSchema:Re,itemIdSchema:Be,itemErrorSchema:Oe,itemData:Pe,itemUiSchema:i.items,autofocus:d&&pe===0,onBlur:v,onFocus:y,rawErrors:w,totalItems:C.length})}),className:`field field-array field-array-of-${N.type}`,disabled:f,idSchema:a,uiSchema:i,onAddClick:this.onAddClick,readonly:h,required:m,schema:e,title:O,formContext:P,formData:ne,rawErrors:w,registry:p},ye=Ke("ArrayFieldTemplate",p,M);return(0,T.jsx)(ye,{...fe})}renderCustomWidget(){var e;const{schema:i,idSchema:l,uiSchema:a,disabled:c=!1,readonly:u=!1,autofocus:f=!1,required:h=!1,hideError:d,placeholder:m,onBlur:p,onFocus:v,formData:y=[],registry:S,rawErrors:E,name:w}=this.props,{widgets:C,formContext:O,globalUiOptions:I,schemaUtils:P}=S,{widget:M,title:$,...N}=tt(a,I),ne=Wr(i,M,C),ie=(e=$!=null?$:i.title)!==null&&e!==void 0?e:w,fe=P.getDisplayLabel(i,a,I);return(0,T.jsx)(ne,{id:l.$id,name:w,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:v,options:N,schema:i,uiSchema:a,registry:S,value:y,disabled:c,readonly:u,hideError:d,required:h,label:ie,hideLabel:!fe,placeholder:m,formContext:O,autofocus:f,rawErrors:E})}renderMultiSelect(){var e;const{schema:i,idSchema:l,uiSchema:a,formData:c=[],disabled:u=!1,readonly:f=!1,autofocus:h=!1,required:d=!1,placeholder:m,onBlur:p,onFocus:v,registry:y,rawErrors:S,name:E}=this.props,{widgets:w,schemaUtils:C,formContext:O,globalUiOptions:I}=y,P=C.retrieveSchema(i.items,c),M=ca(P),{widget:$="select",title:N,...ne}=tt(a,I),ie=Wr(i,$,w),fe=(e=N!=null?N:i.title)!==null&&e!==void 0?e:E,ye=C.getDisplayLabel(i,a,I);return(0,T.jsx)(ie,{id:l.$id,name:E,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:v,options:{...ne,enumOptions:M},schema:i,uiSchema:a,registry:y,value:c,disabled:u,readonly:f,required:d,label:fe,hideLabel:!ye,placeholder:m,formContext:O,autofocus:h,rawErrors:S})}renderFiles(){var e;const{schema:i,uiSchema:l,idSchema:a,name:c,disabled:u=!1,readonly:f=!1,autofocus:h=!1,required:d=!1,onBlur:m,onFocus:p,registry:v,formData:y=[],rawErrors:S}=this.props,{widgets:E,formContext:w,globalUiOptions:C,schemaUtils:O}=v,{widget:I="files",title:P,...M}=tt(l,C),$=Wr(i,I,E),N=(e=P!=null?P:i.title)!==null&&e!==void 0?e:c,ne=O.getDisplayLabel(i,l,C);return(0,T.jsx)($,{options:M,id:a.$id,name:c,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:p,schema:i,uiSchema:l,value:y,disabled:u,readonly:f,required:d,registry:v,formContext:w,autofocus:h,rawErrors:S,label:N,hideLabel:!ne})}renderFixedArray(){const{schema:e,uiSchema:i={},formData:l=[],errorSchema:a,idPrefix:c,idSeparator:u="_",idSchema:f,name:h,title:d,disabled:m=!1,readonly:p=!1,autofocus:v=!1,required:y=!1,registry:S,onBlur:E,onFocus:w,rawErrors:C}=this.props,{keyedFormData:O}=this.state;let{formData:I=[]}=this.props;const P=e.title||d||h,M=tt(i),{schemaUtils:$,formContext:N}=S,ie=(er()(e.items)?e.items:[]).map((xe,me)=>$.retrieveSchema(xe,l[me])),fe=er()(e.additionalItems)?$.retrieveSchema(e.additionalItems,l):null;(!I||I.length<ie.length)&&(I=I||[],I=I.concat(new Array(ie.length-I.length)));const ye=this.canAddItem(I)&&!!fe,ve={canAdd:ye,className:"field field-array field-array-fixed-items",disabled:m,idSchema:f,formData:l,items:O.map((xe,me)=>{const{key:Pe,item:Re}=xe,Oe=Re,be=me>=ie.length,Be=(be&&er()(e.additionalItems)?$.retrieveSchema(e.additionalItems,Oe):ie[me])||{},lt=f.$id+u+me,Je=$.toIdSchema(Be,lt,Oe,c,u),ut=be?i.additionalItems||{}:Array.isArray(i.items)?i.items[me]:i.items||{},ht=a?a[me]:void 0;return this.renderArrayFieldItem({key:Pe,index:me,name:h&&`${h}-${me}`,title:P?`${P}-${me+1}`:void 0,canAdd:ye,canRemove:be,canMoveUp:me>=ie.length+1,canMoveDown:be&&me<I.length-1,itemSchema:Be,itemData:Oe,itemUiSchema:ut,itemIdSchema:Je,itemErrorSchema:ht,autofocus:v&&me===0,onBlur:E,onFocus:w,rawErrors:C,totalItems:O.length})}),onAddClick:this.onAddClick,readonly:p,required:y,registry:S,schema:e,uiSchema:i,title:P,formContext:N,errorSchema:a,rawErrors:C},pe=Ke("ArrayFieldTemplate",S,M);return(0,T.jsx)(pe,{...ve})}renderArrayFieldItem(e){const{key:i,index:l,name:a,canAdd:c,canRemove:u=!0,canMoveUp:f,canMoveDown:h,itemSchema:d,itemData:m,itemUiSchema:p,itemIdSchema:v,itemErrorSchema:y,autofocus:S,onBlur:E,onFocus:w,rawErrors:C,totalItems:O,title:I}=e,{disabled:P,hideError:M,idPrefix:$,idSeparator:N,readonly:ne,uiSchema:ie,registry:fe,formContext:ye}=this.props,{fields:{ArraySchemaField:ve,SchemaField:pe},globalUiOptions:xe}=fe,me=ve||pe,{orderable:Pe=!0,removable:Re=!0,copyable:Oe=!1}=tt(ie,xe),be={moveUp:Pe&&f,moveDown:Pe&&h,copy:Oe&&c,remove:Re&&u,toolbar:!1};return be.toolbar=Object.keys(be).some(Be=>be[Be]),{children:(0,T.jsx)(me,{name:a,title:I,index:l,schema:d,uiSchema:p,formData:m,formContext:ye,errorSchema:y,idPrefix:$,idSeparator:N,idSchema:v,required:this.isItemRequired(d),onChange:this.onChangeForIndex(l),onBlur:E,onFocus:w,registry:fe,disabled:P,readonly:ne,hideError:M,autofocus:S,rawErrors:C}),className:"array-item",disabled:P,canAdd:c,hasCopy:be.copy,hasToolbar:be.toolbar,hasMoveUp:be.moveUp,hasMoveDown:be.moveDown,hasRemove:be.remove,index:l,totalItems:O,key:i,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:ne,registry:fe,schema:d,uiSchema:p}}}const yA=gA;function vA(s){var e,i,l;const{schema:a,name:c,uiSchema:u,idSchema:f,formData:h,registry:d,required:m,disabled:p,readonly:v,hideError:y,autofocus:S,title:E,onChange:w,onFocus:C,onBlur:O,rawErrors:I}=s,{title:P}=a,{widgets:M,formContext:$,translateString:N,globalUiOptions:ne}=d,{widget:ie="checkbox",title:fe,label:ye=!0,...ve}=tt(u,ne),pe=Wr(a,ie,M),xe=N(nt.YesLabel),me=N(nt.NoLabel);let Pe;const Re=(i=(e=fe!=null?fe:P)!==null&&e!==void 0?e:E)!==null&&i!==void 0?i:c;if(Array.isArray(a.oneOf))Pe=ca({oneOf:a.oneOf.map(Oe=>{if(er()(Oe))return{...Oe,title:Oe.title||(Oe.const===!0?xe:me)}}).filter(Oe=>Oe)});else{const Oe=a,be=(l=a.enum)!==null&&l!==void 0?l:[!0,!1];!Oe.enumNames&&be.length===2&&be.every(Be=>typeof Be=="boolean")?Pe=[{value:be[0],label:be[0]?xe:me},{value:be[1],label:be[1]?xe:me}]:Pe=ca({enum:be,enumNames:Oe.enumNames})}return(0,T.jsx)(pe,{options:{...ve,enumOptions:Pe},schema:a,uiSchema:u,id:f.$id,name:c,onChange:w,onFocus:C,onBlur:O,label:Re,hideLabel:!ye,value:h,required:m,disabled:p,readonly:v,hideError:y,registry:d,formContext:$,autofocus:S,rawErrors:I})}const bA=vA;class xA extends g.Component{constructor(e){super(e),this.onOptionChange=u=>{const{selectedOption:f,retrievedOptions:h}=this.state,{formData:d,onChange:m,registry:p}=this.props,{schemaUtils:v}=p,y=u!==void 0?parseInt(u,10):-1;if(y===f)return;const S=y>=0?h[y]:void 0,E=f>=0?h[f]:void 0;let w=v.sanitizeDataForNewSchema(S,E,d);w&&S&&(w=v.getDefaultFormState(S,w,"excludeObjectChildren")),m(w,void 0,this.getFieldId()),this.setState({selectedOption:y})};const{formData:i,options:l,registry:{schemaUtils:a}}=this.props,c=l.map(u=>a.retrieveSchema(u,i));this.state={retrievedOptions:c,selectedOption:this.getMatchingOption(0,i,c)}}componentDidUpdate(e,i){const{formData:l,options:a,idSchema:c}=this.props,{selectedOption:u}=this.state;let f=this.state;if(!yn(e.options,a)){const{registry:{schemaUtils:h}}=this.props,d=a.map(m=>h.retrieveSchema(m,l));f={selectedOption:u,retrievedOptions:d}}if(!yn(l,e.formData)&&c.$id===e.idSchema.$id){const{retrievedOptions:h}=f,d=this.getMatchingOption(u,l,h);i&&d!==u&&(f={selectedOption:d,retrievedOptions:h})}f!==this.state&&this.setState(f)}getMatchingOption(e,i,l){const{schema:a,registry:{schemaUtils:c}}=this.props,u=xs(a);return c.getClosestMatchingOption(i,l,e,u)}getFieldId(){const{idSchema:e,schema:i}=this.props;return`${e.$id}${i.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:i=!1,errorSchema:l={},formContext:a,onBlur:c,onFocus:u,registry:f,schema:h,uiSchema:d}=this.props,{widgets:m,fields:p,translateString:v,globalUiOptions:y,schemaUtils:S}=f,{SchemaField:E}=p,{selectedOption:w,retrievedOptions:C}=this.state,{widget:O="select",placeholder:I,autofocus:P,autocomplete:M,title:$=h.title,...N}=tt(d,y),ne=Wr({type:"number"},O,m),ie=Le()(l,qn,[]),fe=ia()(l,[qn]),ye=S.getDisplayLabel(h,d,y),ve=w>=0&&C[w]||null;let pe;if(ve){const{required:be}=h;pe=be?jr({required:be},ve):ve}let xe=[];jn in h&&d&&jn in d?Array.isArray(d[jn])?xe=d[jn]:console.warn(`uiSchema.oneOf is not an array for "${$||e}"`):ur in h&&d&&ur in d&&(Array.isArray(d[ur])?xe=d[ur]:console.warn(`uiSchema.anyOf is not an array for "${$||e}"`));let me=d;w>=0&&xe.length>w&&(me=xe[w]);const Pe=$?nt.TitleOptionPrefix:nt.OptionPrefix,Re=$?[$]:[],Oe=C.map((be,Be)=>{const{title:lt=be.title}=tt(xe[Be]);return{label:lt||v(Pe,Re.concat(String(Be+1))),value:Be}});return(0,T.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,T.jsx)("div",{className:"form-group",children:(0,T.jsx)(ne,{id:this.getFieldId(),name:`${e}${h.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:c,onFocus:u,disabled:i||ai()(Oe),multiple:!1,rawErrors:ie,errorSchema:fe,value:w>=0?w:void 0,options:{enumOptions:Oe,...N},registry:f,formContext:a,placeholder:I,autocomplete:M,autofocus:P,label:$!=null?$:e,hideLabel:!ye})}),pe&&(0,T.jsx)(E,{...this.props,schema:pe,uiSchema:me})]})}}const ng=xA,SA=/\.([0-9]*0)*$/,EA=/[0.]0*$/;function wA(s){const{registry:e,onChange:i,formData:l,value:a}=s,[c,u]=(0,g.useState)(a),{StringField:f}=e.fields;let h=l;const d=(0,g.useCallback)(m=>{u(m),`${m}`.charAt(0)==="."&&(m=`0${m}`);const p=typeof m=="string"&&m.match(SA)?Cp(m.replace(EA,"")):Cp(m);i(p)},[i]);if(typeof c=="string"&&typeof h=="number"){const m=new RegExp(`${h}`.replace(".","\\.")+"\\.?0*$");c.match(m)&&(h=c)}return(0,T.jsx)(f,{...s,formData:h,onChange:d})}const CA=wA;function Hi(){return Hi=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])}return s},Hi.apply(this,arguments)}const OA=["children","options"];var rg,ig;(function(s){s.blockQuote="0",s.breakLine="1",s.breakThematic="2",s.codeBlock="3",s.codeFenced="4",s.codeInline="5",s.footnote="6",s.footnoteReference="7",s.gfmTask="8",s.heading="9",s.headingSetext="10",s.htmlBlock="11",s.htmlComment="12",s.htmlSelfClosing="13",s.image="14",s.link="15",s.linkAngleBraceStyleDetector="16",s.linkBareUrlDetector="17",s.linkMailtoDetector="18",s.newlineCoalescer="19",s.orderedList="20",s.paragraph="21",s.ref="22",s.refImage="23",s.refLink="24",s.table="25",s.tableSeparator="26",s.text="27",s.textBolded="28",s.textEmphasized="29",s.textEscaped="30",s.textMarked="31",s.textStrikethroughed="32",s.unorderedList="33"})(rg||(rg={})),function(s){s[s.MAX=0]="MAX",s[s.HIGH=1]="HIGH",s[s.MED=2]="MED",s[s.LOW=3]="LOW",s[s.MIN=4]="MIN"}(ig||(ig={}));const sg=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((s,e)=>(s[e.toLowerCase()]=e,s),{for:"htmlFor"}),og={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xA0",quot:"\u201C"},AA=["style","script"],kA=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,PA=/mailto:/i,TA=/\n{2,}$/,lg=/^(\s*>[\s\S]*?)(?=\n{2,})/,IA=/^ *> ?/gm,DA=/^ {2,}\n/,MA=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,ag=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,cg=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,RA=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,LA=/^(?:\n *)*\n/,NA=/\r\n?/g,$A=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,FA=/^\[\^([^\]]+)]/,BA=/\f/g,jA=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,WA=/^\s*?\[(x|\s)\]/,ug=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,fg=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,hg=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,nf=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,VA=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,dg=/^<!--[\s\S]*?(?:-->)/,ZA=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,rf=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,zA=/^\{.*\}$/,UA=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,HA=/^<([^ >]+@[^ >]+)>/,KA=/^<([^ >]+:\/[^ >]+)>/,GA=/-([a-z])?/gi,mg=/^(.*\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,JA=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,YA=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,XA=/^\[([^\]]*)\] ?\[([^\]]*)\]/,QA=/(\[|\])/g,_A=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,qA=/\t/g,ek=/(^ *\||\| *$)/g,tk=/^ *:-+: *$/,nk=/^ *:-+ *$/,rk=/^ *-+: *$/,fa="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",ik=new RegExp(`^([*_])\\1${fa}\\1\\1(?!\\1)`),sk=new RegExp(`^([*_])${fa}\\1(?!\\1|\\w)`),ok=new RegExp(`^==${fa}==`),lk=new RegExp(`^~~${fa}~~`),ak=/^\\([^0-9A-Za-z\s])/,ck=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,uk=/^\n+/,fk=/^([ \t]*)/,hk=/\\([^\\])/g,pg=/ *\n+$/,dk=/(?:^|\n)( *)$/,sf="(?:\\d+\\.)",of="(?:[*+-])";function gg(s){return"( *)("+(s===1?sf:of)+") +"}const yg=gg(1),vg=gg(2);function bg(s){return new RegExp("^"+(s===1?yg:vg))}const mk=bg(1),pk=bg(2);function xg(s){return new RegExp("^"+(s===1?yg:vg)+"[^\\n]*(?:\\n(?!\\1"+(s===1?sf:of)+" )[^\\n]*)*(\\n|$)","gm")}const Sg=xg(1),Eg=xg(2);function wg(s){const e=s===1?sf:of;return new RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const Cg=wg(1),Og=wg(2);function Ag(s,e){const i=e===1,l=i?Cg:Og,a=i?Sg:Eg,c=i?mk:pk;return{match(u,f,h){const d=dk.exec(h);return d&&(f.list||!f.inline&&!f.simple)?l.exec(u=d[1]+u):null},order:1,parse(u,f,h){const d=i?+u[2]:void 0,m=u[0].replace(TA,`
`).match(a);let p=!1;return{items:m.map(function(v,y){const S=c.exec(v)[0].length,E=new RegExp("^ {1,"+S+"}","gm"),w=v.replace(E,"").replace(c,""),C=y===m.length-1,O=w.indexOf(`

`)!==-1||C&&p;p=O;const I=h.inline,P=h.list;let M;h.list=!0,O?(h.inline=!1,M=w.replace(pg,`

`)):(h.inline=!0,M=w.replace(pg,""));const $=f(M,h);return h.inline=I,h.list=P,$}),ordered:i,start:d}},render:(u,f,h)=>s(u.ordered?"ol":"ul",{key:h.key,start:u.type==="20"?u.start:void 0},u.items.map(function(d,m){return s("li",{key:m},f(d,h))}))}}const gk=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),yk=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,kg=[lg,ag,cg,ug,hg,fg,dg,mg,Sg,Cg,Eg,Og],vk=[...kg,/^[^\n]+(?:  \n|\n{2,})/,nf,rf];function bk(s){return s.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function xk(s){return rk.test(s)?"right":tk.test(s)?"center":nk.test(s)?"left":null}function Pg(s,e,i,l){const a=i.inTable;i.inTable=!0;let c=s.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\/.*?>(?!<\/.*?>)|\\\||\|) *)/).reduce((f,h)=>(h.trim()==="|"?f.push(l?{type:"26"}:{type:"27",text:h}):h!==""&&f.push.apply(f,e(h,i)),f),[]);i.inTable=a;let u=[[]];return c.forEach(function(f,h){f.type==="26"?h!==0&&h!==c.length-1&&u.push([]):(f.type!=="27"||c[h+1]!=null&&c[h+1].type!=="26"||(f.text=f.text.trimEnd()),u[u.length-1].push(f))}),u}function Sk(s,e,i){i.inline=!0;const l=s[2]?s[2].replace(ek,"").split("|").map(xk):[],a=s[3]?function(u,f,h){return u.trim().split(`
`).map(function(d){return Pg(d,f,h,!0)})}(s[3],e,i):[],c=Pg(s[1],e,i,!!a.length);return i.inline=!1,a.length?{align:l,cells:a,header:c,type:"25"}:{children:c,type:"21"}}function Tg(s,e){return s.align[e]==null?{}:{textAlign:s.align[e]}}function hi(s){return function(e,i){return i.inline?s.exec(e):null}}function di(s){return function(e,i){return i.inline||i.simple?s.exec(e):null}}function Vr(s){return function(e,i){return i.inline||i.simple?null:s.exec(e)}}function Do(s){return function(e){return s.exec(e)}}function Ek(s,e,i){if(e.inline||e.simple||i&&!i.endsWith(`
`))return null;let l="";s.split(`
`).every(c=>!kg.some(u=>u.test(c))&&(l+=c+`
`,c.trim()));const a=l.trimEnd();return a==""?null:[l,a]}function Cs(s){try{if(decodeURIComponent(s).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return}catch{return null}return s}function Ig(s){return s.replace(hk,"$1")}function ha(s,e,i){const l=i.inline||!1,a=i.simple||!1;i.inline=!0,i.simple=!0;const c=s(e,i);return i.inline=l,i.simple=a,c}function wk(s,e,i){const l=i.inline||!1,a=i.simple||!1;i.inline=!1,i.simple=!0;const c=s(e,i);return i.inline=l,i.simple=a,c}function Ck(s,e,i){const l=i.inline||!1;i.inline=!1;const a=s(e,i);return i.inline=l,a}const lf=(s,e,i)=>({children:ha(e,s[1],i)});function af(){return{}}function cf(){return null}function Ok(...s){return s.filter(Boolean).join(" ")}function uf(s,e,i){let l=s;const a=e.split(".");for(;a.length&&(l=l[a[0]],l!==void 0);)a.shift();return l||i}function Ak(s="",e={}){e.overrides=e.overrides||{},e.slugify=e.slugify||bk,e.namedCodesToUnicode=e.namedCodesToUnicode?Hi({},og,e.namedCodesToUnicode):og;const i=e.createElement||g.createElement;function l(y,S,...E){const w=uf(e.overrides,`${y}.props`,{});return i(function(C,O){const I=uf(O,C);return I?typeof I=="function"||typeof I=="object"&&"render"in I?I:uf(O,`${C}.component`,C):C}(y,e.overrides),Hi({},S,w,{className:Ok(S==null?void 0:S.className,w.className)||void 0}),...E)}function a(y){y=y.replace(jA,"");let S=!1;e.forceInline?S=!0:e.forceBlock||(S=_A.test(y)===!1);const E=m(d(S?y:`${y.trimEnd().replace(uk,"")}

`,{inline:S}));for(;typeof E[E.length-1]=="string"&&!E[E.length-1].trim();)E.pop();if(e.wrapper===null)return E;const w=e.wrapper||(S?"span":"div");let C;if(E.length>1||e.forceWrapper)C=E;else{if(E.length===1)return C=E[0],typeof C=="string"?l("span",{key:"outer"},C):C;C=null}return g.createElement(w,{key:"outer"},C)}function c(y){const S=y.match(kA);return S?S.reduce(function(E,w,C){const O=w.indexOf("=");if(O!==-1){const I=function(N){return N.indexOf("-")!==-1&&N.match(ZA)===null&&(N=N.replace(GA,function(ne,ie){return ie.toUpperCase()})),N}(w.slice(0,O)).trim(),P=function(N){const ne=N[0];return(ne==='"'||ne==="'")&&N.length>=2&&N[N.length-1]===ne?N.slice(1,-1):N}(w.slice(O+1).trim()),M=sg[I]||I,$=E[M]=function(N,ne){return N==="style"?ne.split(/;\s?/).reduce(function(ie,fe){const ye=fe.slice(0,fe.indexOf(":"));return ie[ye.trim().replace(/(-[a-z])/g,ve=>ve[1].toUpperCase())]=fe.slice(ye.length+1).trim(),ie},{}):N==="href"||N==="src"?Cs(ne):(ne.match(zA)&&(ne=ne.slice(1,ne.length-1)),ne==="true"||ne!=="false"&&ne)}(I,P);typeof $=="string"&&(nf.test($)||rf.test($))&&(E[M]=g.cloneElement(a($.trim()),{key:C}))}else w!=="style"&&(E[sg[w]||w]=!0);return E},{}):null}const u=[],f={},h={0:{match:Vr(lg),order:1,parse:(y,S,E)=>({children:S(y[0].replace(IA,""),E)}),render:(y,S,E)=>l("blockquote",{key:E.key},S(y.children,E))},1:{match:Do(DA),order:1,parse:af,render:(y,S,E)=>l("br",{key:E.key})},2:{match:Vr(MA),order:1,parse:af,render:(y,S,E)=>l("hr",{key:E.key})},3:{match:Vr(cg),order:0,parse:y=>({lang:void 0,text:y[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(y,S,E)=>l("pre",{key:E.key},l("code",Hi({},y.attrs,{className:y.lang?`lang-${y.lang}`:""}),y.text))},4:{match:Vr(ag),order:0,parse:y=>({attrs:c(y[3]||""),lang:y[2]||void 0,text:y[4],type:"3"})},5:{match:di(RA),order:3,parse:y=>({text:y[2]}),render:(y,S,E)=>l("code",{key:E.key},y.text)},6:{match:Vr($A),order:0,parse:y=>(u.push({footnote:y[2],identifier:y[1]}),{}),render:cf},7:{match:hi(FA),order:1,parse:y=>({target:`#${e.slugify(y[1])}`,text:y[1]}),render:(y,S,E)=>l("a",{key:E.key,href:Cs(y.target)},l("sup",{key:E.key},y.text))},8:{match:hi(WA),order:1,parse:y=>({completed:y[1].toLowerCase()==="x"}),render:(y,S,E)=>l("input",{checked:y.completed,key:E.key,readOnly:!0,type:"checkbox"})},9:{match:Vr(e.enforceAtxHeadings?fg:ug),order:1,parse:(y,S,E)=>({children:ha(S,y[2],E),id:e.slugify(y[2]),level:y[1].length}),render:(y,S,E)=>l(`h${y.level}`,{id:y.id,key:E.key},S(y.children,E))},10:{match:Vr(hg),order:0,parse:(y,S,E)=>({children:ha(S,y[1],E),level:y[2]==="="?1:2,type:"9"})},11:{match:Do(nf),order:1,parse(y,S,E){const[,w]=y[3].match(fk),C=new RegExp(`^${w}`,"gm"),O=y[3].replace(C,""),I=(P=O,vk.some(ne=>ne.test(P))?Ck:ha);var P;const M=y[1].toLowerCase(),$=AA.indexOf(M)!==-1,N={attrs:c(y[2]),noInnerParse:$,tag:($?M:y[1]).trim()};return E.inAnchor=E.inAnchor||M==="a",$?N.text=y[3]:N.children=I(S,O,E),E.inAnchor=!1,N},render:(y,S,E)=>l(y.tag,Hi({key:E.key},y.attrs),y.text||S(y.children,E))},13:{match:Do(rf),order:1,parse:y=>({attrs:c(y[2]||""),tag:y[1].trim()}),render:(y,S,E)=>l(y.tag,Hi({},y.attrs,{key:E.key}))},12:{match:Do(dg),order:1,parse:()=>({}),render:cf},14:{match:di(yk),order:1,parse:y=>({alt:y[1],target:Ig(y[2]),title:y[3]}),render:(y,S,E)=>l("img",{key:E.key,alt:y.alt||void 0,title:y.title||void 0,src:Cs(y.target)})},15:{match:hi(gk),order:3,parse:(y,S,E)=>({children:wk(S,y[1],E),target:Ig(y[2]),title:y[3]}),render:(y,S,E)=>l("a",{key:E.key,href:Cs(y.target),title:y.title},S(y.children,E))},16:{match:hi(KA),order:0,parse:y=>({children:[{text:y[1],type:"27"}],target:y[1],type:"15"})},17:{match:(y,S)=>S.inAnchor?null:hi(UA)(y,S),order:0,parse:y=>({children:[{text:y[1],type:"27"}],target:y[1],title:void 0,type:"15"})},18:{match:hi(HA),order:0,parse(y){let S=y[1],E=y[1];return PA.test(E)||(E="mailto:"+E),{children:[{text:S.replace("mailto:",""),type:"27"}],target:E,type:"15"}}},20:Ag(l,1),33:Ag(l,2),19:{match:Vr(LA),order:3,parse:af,render:()=>`
`},21:{match:Ek,order:3,parse:lf,render:(y,S,E)=>l("p",{key:E.key},S(y.children,E))},22:{match:hi(JA),order:0,parse:y=>(f[y[1]]={target:y[2],title:y[4]},{}),render:cf},23:{match:di(YA),order:0,parse:y=>({alt:y[1]||void 0,ref:y[2]}),render:(y,S,E)=>f[y.ref]?l("img",{key:E.key,alt:y.alt,src:Cs(f[y.ref].target),title:f[y.ref].title}):null},24:{match:hi(XA),order:0,parse:(y,S,E)=>({children:S(y[1],E),fallbackChildren:S(y[0].replace(QA,"\\$1"),E),ref:y[2]}),render:(y,S,E)=>f[y.ref]?l("a",{key:E.key,href:Cs(f[y.ref].target),title:f[y.ref].title},S(y.children,E)):l("span",{key:E.key},S(y.fallbackChildren,E))},25:{match:Vr(mg),order:1,parse:Sk,render(y,S,E){const w=y;return l("table",{key:E.key},l("thead",null,l("tr",null,w.header.map(function(C,O){return l("th",{key:O,style:Tg(w,O)},S(C,E))}))),l("tbody",null,w.cells.map(function(C,O){return l("tr",{key:O},C.map(function(I,P){return l("td",{key:P,style:Tg(w,P)},S(I,E))}))})))}},27:{match:Do(ck),order:4,parse:y=>({text:y[0].replace(VA,(S,E)=>e.namedCodesToUnicode[E]?e.namedCodesToUnicode[E]:S)}),render:y=>y.text},28:{match:di(ik),order:2,parse:(y,S,E)=>({children:S(y[2],E)}),render:(y,S,E)=>l("strong",{key:E.key},S(y.children,E))},29:{match:di(sk),order:3,parse:(y,S,E)=>({children:S(y[2],E)}),render:(y,S,E)=>l("em",{key:E.key},S(y.children,E))},30:{match:di(ak),order:1,parse:y=>({text:y[1],type:"27"})},31:{match:di(ok),order:3,parse:lf,render:(y,S,E)=>l("mark",{key:E.key},S(y.children,E))},32:{match:di(lk),order:3,parse:lf,render:(y,S,E)=>l("del",{key:E.key},S(y.children,E))}};e.disableParsingRawHTML===!0&&(delete h[11],delete h[13]);const d=function(y){let S=Object.keys(y);function E(w,C){let O=[],I="";for(;w;){let P=0;for(;P<S.length;){const M=S[P],$=y[M],N=$.match(w,C,I);if(N){const ne=N[0];w=w.substring(ne.length);const ie=$.parse(N,E,C);ie.type==null&&(ie.type=M),O.push(ie),I=ne;break}P++}}return O}return S.sort(function(w,C){let O=y[w].order,I=y[C].order;return O!==I?O-I:w<C?-1:1}),function(w,C){return E(function(O){return O.replace(NA,`
`).replace(BA,"").replace(qA,"    ")}(w),C)}}(h),m=(p=function(y,S){return function(E,w,C){const O=y[E.type].render;return S?S(()=>O(E,w,C),E,w,C):O(E,w,C)}}(h,e.renderRule),function y(S,E={}){if(Array.isArray(S)){const w=E.key,C=[];let O=!1;for(let I=0;I<S.length;I++){E.key=I;const P=y(S[I],E),M=typeof P=="string";M&&O?C[C.length-1]+=P:P!==null&&C.push(P),O=M}return E.key=w,C}return p(S,y,E)});var p;const v=a(s);return u.length?l("div",null,v,l("footer",{key:"footer"},u.map(function(y){return l("div",{id:e.slugify(y.identifier),key:y.identifier},y.identifier,m(d(y.footnote,{inline:!0})))}))):v}const da=s=>{let{children:e="",options:i}=s,l=function(a,c){if(a==null)return{};var u,f,h={},d=Object.keys(a);for(f=0;f<d.length;f++)c.indexOf(u=d[f])>=0||(h[u]=a[u]);return h}(s,OA);return g.cloneElement(Ak(e,i),l)};var kk=x(17195),Pk=x.n(kk);class Tk extends g.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,i=!1)=>(l,a,c)=>{const{formData:u,onChange:f,errorSchema:h}=this.props;l===void 0&&i&&(l="");const d={...u,[e]:l};f(d,h&&h&&{...h,[e]:a},c)},this.onDropPropertyClick=e=>i=>{i.preventDefault();const{onChange:l,formData:a}=this.props,c={...a};Pk()(c,e),l(c)},this.getAvailableKey=(e,i)=>{const{uiSchema:l,registry:a}=this.props,{duplicateKeySuffixSeparator:c="-"}=tt(l,a.globalUiOptions);let u=0,f=e;for(;un()(i,f);)f=`${e}${c}${++u}`;return f},this.onKeyChange=e=>(i,l)=>{if(e===i)return;const{formData:a,onChange:c,errorSchema:u}=this.props;i=this.getAvailableKey(i,a);const f={...a},h={[e]:i},d=Object.keys(f).map(p=>({[h[p]||p]:f[p]})),m=Object.assign({},...d);this.setState({wasPropertyKeyModified:!0}),c(m,u&&u&&{...u,[i]:l})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:i,onChange:l,registry:a}=this.props,c={...i};let u;if(er()(e.additionalProperties)){u=e.additionalProperties.type;let h=e.additionalProperties;if(jt in h){const{schemaUtils:d}=a;h=d.retrieveSchema({$ref:h[jt]},i),u=h.type}!u&&(ur in h||jn in h)&&(u="object")}const f=this.getAvailableKey("newKey",c);en()(c,f,this.getDefaultValue(u)),l(c)}}isRequired(e){const{schema:i}=this.props;return Array.isArray(i.required)&&i.required.indexOf(e)!==-1}getDefaultValue(e){const{registry:{translateString:i}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return i(nt.NewStringDefault)}}render(){var e,i,l,a;const{schema:c,uiSchema:u={},formData:f,errorSchema:h,idSchema:d,name:m,required:p=!1,disabled:v=!1,readonly:y=!1,hideError:S,idPrefix:E,idSeparator:w,onBlur:C,onFocus:O,registry:I,title:P}=this.props,{fields:M,formContext:$,schemaUtils:N,translateString:ne,globalUiOptions:ie}=I,{SchemaField:fe}=M,ye=N.retrieveSchema(c,f),ve=tt(u,ie),{properties:pe={}}=ye,xe=(l=(i=(e=ve.title)!==null&&e!==void 0?e:ye.title)!==null&&i!==void 0?i:P)!==null&&l!==void 0?l:m,me=(a=ve.description)!==null&&a!==void 0?a:ye.description;let Pe;try{const be=Object.keys(pe);Pe=HO(be,ve.order)}catch(be){return(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,T.jsx)(da,{children:ne(nt.InvalidObjectField,[m||"root",be.message])})}),(0,T.jsx)("pre",{children:JSON.stringify(ye)})]})}const Re=Ke("ObjectFieldTemplate",I,ve),Oe={title:ve.label===!1?"":xe,description:ve.label===!1?void 0:me,properties:Pe.map(be=>{const Be=un()(ye,[Dt,be,bs]),lt=Be?u.additionalProperties:u[be],Je=tt(lt).widget==="hidden",ut=Le()(d,[be],{});return{content:(0,T.jsx)(fe,{name:be,required:this.isRequired(be),schema:Le()(ye,[Dt,be],{}),uiSchema:lt,errorSchema:Le()(h,be),idSchema:ut,idPrefix:E,idSeparator:w,formData:Le()(f,be),formContext:$,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(be),onChange:this.onPropertyChange(be,Be),onBlur:C,onFocus:O,registry:I,disabled:v,readonly:y,hideError:S,onDropPropertyClick:this.onDropPropertyClick},be),name:be,readonly:y,disabled:v,required:p,hidden:Je}}),readonly:y,disabled:v,required:p,idSchema:d,uiSchema:u,errorSchema:h,schema:ye,formData:f,formContext:$,registry:I};return(0,T.jsx)(Re,{...Oe,onAddClick:this.handleAddClick})}}const Ik=Tk,Dk={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function Mk(s,e,i,l){const a=e.field,{fields:c,translateString:u}=l;if(typeof a=="function")return a;if(typeof a=="string"&&a in c)return c[a];const f=ci(s),h=Array.isArray(f)?f[0]:f||"",d=s.$id;let m=Dk[h];return d&&d in c&&(m=d),!m&&(s.anyOf||s.oneOf)?()=>null:m in c?c[m]:()=>{const p=Ke("UnsupportedFieldTemplate",l,e);return(0,T.jsx)(p,{schema:s,idSchema:i,reason:u(nt.UnknownFieldType,[String(s.type)]),registry:l})}}function Rk(s){const{schema:e,idSchema:i,uiSchema:l,formData:a,errorSchema:c,idPrefix:u,idSeparator:f,name:h,onChange:d,onKeyChange:m,onDropPropertyClick:p,required:v,registry:y,wasPropertyKeyModified:S=!1}=s,{formContext:E,schemaUtils:w,globalUiOptions:C}=y,O=tt(l,C),I=Ke("FieldTemplate",y,O),P=Ke("DescriptionFieldTemplate",y,O),M=Ke("FieldHelpTemplate",y,O),$=Ke("FieldErrorTemplate",y,O),N=w.retrieveSchema(e,a),ne=i[oi],ie=Ss(w.toIdSchema(N,ne,a,u,f),i),fe=(0,g.useCallback)((qt,qr,Ir)=>d(qt,qr,Ir||ne),[ne,d]),ye=Mk(N,O,ie,y),ve=!!(s.disabled||O.disabled),pe=!!(s.readonly||O.readonly||s.schema.readOnly||N.readOnly),xe=O.hideError,me=xe===void 0?s.hideError:!!xe,Pe=!!(s.autofocus||O.autofocus);if(Object.keys(N).length===0)return null;const Re=w.getDisplayLabel(N,l,C),{__errors:Oe,...be}=c||{},Be=ia()(l,["ui:classNames","classNames","ui:style"]);Eo in Be&&(Be[Eo]=ia()(Be[Eo],["classNames","style"]));const lt=(0,T.jsx)(ye,{...s,onChange:fe,idSchema:ie,schema:N,uiSchema:Be,disabled:ve,readonly:pe,hideError:me,autofocus:Pe,errorSchema:be,formContext:E,rawErrors:Oe}),Je=ie[oi];let ut;S?ut=h:ut=bs in N?h:O.title||s.schema.title||N.title||s.title||h;const ht=O.description||s.schema.description||N.description||"",pt=O.enableMarkdownInDescription?(0,T.jsx)(da,{children:ht}):ht,St=O.help,$t=O.widget==="hidden",Hn=["form-group","field",`field-${ci(N)}`];!me&&Oe&&Oe.length>0&&Hn.push("field-error has-error has-danger"),l!=null&&l.classNames&&Hn.push(l.classNames),O.classNames&&Hn.push(O.classNames);const Ri=(0,T.jsx)(M,{help:St,idSchema:ie,schema:N,uiSchema:l,hasErrors:!me&&Oe&&Oe.length>0,registry:y}),Qr=me||(N.anyOf||N.oneOf)&&!w.isSelect(N)?void 0:(0,T.jsx)($,{errors:Oe,errorSchema:c,idSchema:ie,schema:N,uiSchema:l,registry:y}),_r={description:(0,T.jsx)(P,{id:zi(Je),description:pt,schema:N,uiSchema:l,registry:y}),rawDescription:ht,help:Ri,rawHelp:typeof St=="string"?St:void 0,errors:Qr,rawErrors:me?void 0:Oe,id:Je,label:ut,hidden:$t,onChange:d,onKeyChange:m,onDropPropertyClick:p,required:v,disabled:ve,readonly:pe,hideError:me,displayLabel:Re,classNames:Hn.join(" ").trim(),style:O.style,formContext:E,formData:a,schema:N,uiSchema:l,registry:y},Li=y.fields.AnyOfField,no=y.fields.OneOfField,ir=(l==null?void 0:l["ui:field"])&&(l==null?void 0:l["ui:fieldReplacesAnyOrOneOf"])===!0;return(0,T.jsx)(I,{..._r,children:(0,T.jsxs)(T.Fragment,{children:[lt,N.anyOf&&!ir&&!w.isSelect(N)&&(0,T.jsx)(Li,{name:h,disabled:ve,readonly:pe,hideError:me,errorSchema:c,formData:a,formContext:E,idPrefix:u,idSchema:ie,idSeparator:f,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:N.anyOf.map(qt=>w.retrieveSchema(er()(qt)?qt:{},a)),registry:y,schema:N,uiSchema:l}),N.oneOf&&!ir&&!w.isSelect(N)&&(0,T.jsx)(no,{name:h,disabled:ve,readonly:pe,hideError:me,errorSchema:c,formData:a,formContext:E,idPrefix:u,idSchema:ie,idSeparator:f,onBlur:s.onBlur,onChange:s.onChange,onFocus:s.onFocus,options:N.oneOf.map(qt=>w.retrieveSchema(er()(qt)?qt:{},a)),registry:y,schema:N,uiSchema:l})]})})}class Lk extends g.Component{shouldComponentUpdate(e){return!yn(this.props,e)}render(){return(0,T.jsx)(Rk,{...this.props})}}const Nk=Lk;function $k(s){var e;const{schema:i,name:l,uiSchema:a,idSchema:c,formData:u,required:f,disabled:h=!1,readonly:d=!1,autofocus:m=!1,onChange:p,onBlur:v,onFocus:y,registry:S,rawErrors:E,hideError:w}=s,{title:C,format:O}=i,{widgets:I,formContext:P,schemaUtils:M,globalUiOptions:$}=S,N=M.isSelect(i)?ca(i):void 0;let ne=N?"select":"text";O&&ZO(i,O,I)&&(ne=O);const{widget:ie=ne,placeholder:fe="",title:ye,...ve}=tt(a),pe=M.getDisplayLabel(i,a,$),xe=(e=ye!=null?ye:C)!==null&&e!==void 0?e:l,me=Wr(i,ie,I);return(0,T.jsx)(me,{options:{...ve,enumOptions:N},schema:i,uiSchema:a,id:c.$id,name:l,label:xe,hideLabel:!pe,hideError:w,value:u,onChange:p,onBlur:v,onFocus:y,required:f,disabled:h,readonly:d,formContext:P,autofocus:m,registry:S,placeholder:fe,rawErrors:E})}const Fk=$k;function Bk(s){const{formData:e,onChange:i}=s;return(0,g.useEffect)(()=>{e===void 0&&i(null)},[e,i]),null}const jk=Bk;function Wk(){return{AnyOfField:ng,ArrayField:yA,BooleanField:bA,NumberField:CA,ObjectField:Ik,OneOfField:ng,SchemaField:Nk,StringField:Fk,NullField:jk}}const Vk=Wk;function Zk(s){const{idSchema:e,description:i,registry:l,schema:a,uiSchema:c}=s,u=tt(c,l.globalUiOptions),{label:f=!0}=u;if(!i||!f)return null;const h=Ke("DescriptionFieldTemplate",l,u);return(0,T.jsx)(h,{id:zi(e),description:i,schema:a,uiSchema:c,registry:l})}function zk(s){const{children:e,className:i,disabled:l,hasToolbar:a,hasMoveDown:c,hasMoveUp:u,hasRemove:f,hasCopy:h,index:d,onCopyIndexClick:m,onDropIndexClick:p,onReorderClick:v,readonly:y,registry:S,uiSchema:E}=s,{CopyButton:w,MoveDownButton:C,MoveUpButton:O,RemoveButton:I}=S.templates.ButtonTemplates,P={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,T.jsxs)("div",{className:i,children:[(0,T.jsx)("div",{className:a?"col-xs-9":"col-xs-12",children:e}),a&&(0,T.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,T.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(u||c)&&(0,T.jsx)(O,{style:P,disabled:l||y||!u,onClick:v(d,d-1),uiSchema:E,registry:S}),(u||c)&&(0,T.jsx)(C,{style:P,disabled:l||y||!c,onClick:v(d,d+1),uiSchema:E,registry:S}),h&&(0,T.jsx)(w,{style:P,disabled:l||y,onClick:m(d),uiSchema:E,registry:S}),f&&(0,T.jsx)(I,{style:P,disabled:l||y,onClick:p(d),uiSchema:E,registry:S})]})})]})}function Uk(s){const{canAdd:e,className:i,disabled:l,idSchema:a,uiSchema:c,items:u,onAddClick:f,readonly:h,registry:d,required:m,schema:p,title:v}=s,y=tt(c),S=Ke("ArrayFieldDescriptionTemplate",d,y),E=Ke("ArrayFieldItemTemplate",d,y),w=Ke("ArrayFieldTitleTemplate",d,y),{ButtonTemplates:{AddButton:C}}=d.templates;return(0,T.jsxs)("fieldset",{className:i,id:a.$id,children:[(0,T.jsx)(w,{idSchema:a,title:y.title||v,required:m,schema:p,uiSchema:c,registry:d}),(0,T.jsx)(S,{idSchema:a,description:y.description||p.description,schema:p,uiSchema:c,registry:d}),(0,T.jsx)("div",{className:"row array-item-list",children:u&&u.map(({key:O,...I})=>(0,T.jsx)(E,{...I},O))}),e&&(0,T.jsx)(C,{className:"array-item-add",onClick:f,disabled:l||h,uiSchema:c,registry:d})]})}function Hk(s){const{idSchema:e,title:i,schema:l,uiSchema:a,required:c,registry:u}=s,f=tt(a,u.globalUiOptions),{label:h=!0}=f;if(!i||!h)return null;const d=Ke("TitleFieldTemplate",u,f);return(0,T.jsx)(d,{id:Qu(e),title:i,required:c,schema:l,uiSchema:a,registry:u})}function Kk(s){const{id:e,name:i,value:l,readonly:a,disabled:c,autofocus:u,onBlur:f,onFocus:h,onChange:d,onChangeOverride:m,options:p,schema:v,uiSchema:y,formContext:S,registry:E,rawErrors:w,type:C,hideLabel:O,hideError:I,...P}=s;if(!e)throw console.log("No id for",s),new Error(`no id for props ${JSON.stringify(s)}`);const M={...P,...Kp(v,C,p)};let $;M.type==="number"||M.type==="integer"?$=l||l===0?l:"":$=l==null?"":l;const N=(0,g.useCallback)(({target:{value:fe}})=>d(fe===""?p.emptyValue:fe),[d,p]),ne=(0,g.useCallback)(({target:{value:fe}})=>f(e,fe),[f,e]),ie=(0,g.useCallback)(({target:{value:fe}})=>h(e,fe),[h,e]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("input",{id:e,name:e,className:"form-control",readOnly:a,disabled:c,autoFocus:u,value:$,...M,list:v.examples?ko(e):void 0,onChange:m||N,onBlur:ne,onFocus:ie,"aria-describedby":In(e,!!v.examples)}),Array.isArray(v.examples)&&(0,T.jsx)("datalist",{id:ko(e),children:v.examples.concat(v.default&&!v.examples.includes(v.default)?[v.default]:[]).map(fe=>(0,T.jsx)("option",{value:fe},fe))},`datalist_${e}`)]})}function Gk({uiSchema:s}){const{submitText:e,norender:i,props:l={}}=Jp(s);return i?null:(0,T.jsx)("div",{children:(0,T.jsx)("button",{type:"submit",...l,className:`btn btn-info ${l.className||""}`,children:e})})}function Mo(s){const{iconType:e="default",icon:i,className:l,uiSchema:a,registry:c,...u}=s;return(0,T.jsx)("button",{type:"button",className:`btn btn-${e} ${l}`,...u,children:(0,T.jsx)("i",{className:`glyphicon glyphicon-${i}`})})}function Jk(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(Mo,{title:e(nt.CopyButton),className:"array-item-copy",...s,icon:"copy"})}function Yk(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(Mo,{title:e(nt.MoveDownButton),className:"array-item-move-down",...s,icon:"arrow-down"})}function Xk(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(Mo,{title:e(nt.MoveUpButton),className:"array-item-move-up",...s,icon:"arrow-up"})}function Qk(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(Mo,{title:e(nt.RemoveButton),className:"array-item-remove",...s,iconType:"danger",icon:"remove"})}function _k({className:s,onClick:e,disabled:i,registry:l}){const{translateString:a}=l;return(0,T.jsx)("div",{className:"row",children:(0,T.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${s}`,children:(0,T.jsx)(Mo,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:a(nt.AddButton),onClick:e,disabled:i,registry:l})})})}function qk(){return{SubmitButton:Gk,AddButton:_k,CopyButton:Jk,MoveDownButton:Yk,MoveUpButton:Xk,RemoveButton:Qk}}const e2=qk;function t2(s){const{id:e,description:i}=s;return i?typeof i=="string"?(0,T.jsx)("p",{id:e,className:"field-description",children:i}):(0,T.jsx)("div",{id:e,className:"field-description",children:i}):null}function n2({errors:s,registry:e}){const{translateString:i}=e;return(0,T.jsxs)("div",{className:"panel panel-danger errors",children:[(0,T.jsx)("div",{className:"panel-heading",children:(0,T.jsx)("h3",{className:"panel-title",children:i(nt.ErrorsLabel)})}),(0,T.jsx)("ul",{className:"list-group",children:s.map((l,a)=>(0,T.jsx)("li",{className:"list-group-item text-danger",children:l.stack},a))})]})}const r2="*";function Dg(s){const{label:e,required:i,id:l}=s;return e?(0,T.jsxs)("label",{className:"control-label",htmlFor:l,children:[e,i&&(0,T.jsx)("span",{className:"required",children:r2})]}):null}function i2(s){const{id:e,label:i,children:l,errors:a,help:c,description:u,hidden:f,required:h,displayLabel:d,registry:m,uiSchema:p}=s,v=tt(p),y=Ke("WrapIfAdditionalTemplate",m,v);return f?(0,T.jsx)("div",{className:"hidden",children:l}):(0,T.jsxs)(y,{...s,children:[d&&(0,T.jsx)(Dg,{label:i,required:h,id:e}),d&&u?u:null,l,a,c]})}const s2=i2;function o2(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const l=Yu(i);return(0,T.jsx)("div",{children:(0,T.jsx)("ul",{id:l,className:"error-detail bs-callout bs-callout-info",children:e.filter(a=>!!a).map((a,c)=>(0,T.jsx)("li",{className:"text-danger",children:a},c))})})}function l2(s){const{idSchema:e,help:i}=s;if(!i)return null;const l=Xu(e);return typeof i=="string"?(0,T.jsx)("p",{id:l,className:"help-block",children:i}):(0,T.jsx)("div",{id:l,className:"help-block",children:i})}function a2(s){const{description:e,disabled:i,formData:l,idSchema:a,onAddClick:c,properties:u,readonly:f,registry:h,required:d,schema:m,title:p,uiSchema:v}=s,y=tt(v),S=Ke("TitleFieldTemplate",h,y),E=Ke("DescriptionFieldTemplate",h,y),{ButtonTemplates:{AddButton:w}}=h.templates;return(0,T.jsxs)("fieldset",{id:a.$id,children:[p&&(0,T.jsx)(S,{id:Qu(a),title:p,required:d,schema:m,uiSchema:v,registry:h}),e&&(0,T.jsx)(E,{id:zi(a),description:e,schema:m,uiSchema:v,registry:h}),u.map(C=>C.content),kp(m,v,l)&&(0,T.jsx)(w,{className:"object-property-expand",onClick:c(m),disabled:i||f,uiSchema:v,registry:h})]})}const c2="*";function u2(s){const{id:e,title:i,required:l}=s;return(0,T.jsxs)("legend",{id:e,children:[i,l&&(0,T.jsx)("span",{className:"required",children:c2})]})}function f2(s){const{schema:e,idSchema:i,reason:l,registry:a}=s,{translateString:c}=a;let u=nt.UnsupportedField;const f=[];return i&&i.$id&&(u=nt.UnsupportedFieldWithId,f.push(i.$id)),l&&(u=u===nt.UnsupportedField?nt.UnsupportedFieldWithReason:nt.UnsupportedFieldWithIdAndReason,f.push(l)),(0,T.jsxs)("div",{className:"unsupported-field",children:[(0,T.jsx)("p",{children:(0,T.jsx)(da,{children:c(u,f)})}),e&&(0,T.jsx)("pre",{children:JSON.stringify(e,null,2)})]})}const h2=f2;function d2(s){const{id:e,classNames:i,style:l,disabled:a,label:c,onKeyChange:u,onDropPropertyClick:f,readonly:h,required:d,schema:m,children:p,uiSchema:v,registry:y}=s,{templates:S,translateString:E}=y,{RemoveButton:w}=S.ButtonTemplates,C=E(nt.KeyLabel,[c]);return bs in m?(0,T.jsx)("div",{className:i,style:l,children:(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-xs-5 form-additional",children:(0,T.jsxs)("div",{className:"form-group",children:[(0,T.jsx)(Dg,{label:C,required:d,id:`${e}-key`}),(0,T.jsx)("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:I=>u(I.target.value),defaultValue:c})]})}),(0,T.jsx)("div",{className:"form-additional form-group col-xs-5",children:p}),(0,T.jsx)("div",{className:"col-xs-2",children:(0,T.jsx)(w,{className:"array-item-remove btn-block",style:{border:"0"},disabled:a||h,onClick:f(c),uiSchema:v,registry:y})})]})}):(0,T.jsx)("div",{className:i,style:l,children:p})}function m2(){return{ArrayFieldDescriptionTemplate:Zk,ArrayFieldItemTemplate:zk,ArrayFieldTemplate:Uk,ArrayFieldTitleTemplate:Hk,ButtonTemplates:e2(),BaseInputTemplate:Kk,DescriptionFieldTemplate:t2,ErrorListTemplate:n2,FieldTemplate:s2,FieldErrorTemplate:o2,FieldHelpTemplate:l2,ObjectFieldTemplate:a2,TitleFieldTemplate:u2,UnsupportedFieldTemplate:h2,WrapIfAdditionalTemplate:d2}}const p2=m2;function g2(s,e){const i=[];for(let l=s;l<=e;l++)i.push({value:l,label:fi(l,2)});return i}function y2(s){return Object.values(s).every(e=>e!==-1)}function v2({type:s,range:e,value:i,select:l,rootId:a,name:c,disabled:u,readonly:f,autofocus:h,registry:d,onBlur:m,onFocus:p}){const v=a+"_"+s,{SelectWidget:y}=d.widgets;return(0,T.jsx)(y,{schema:{type:"integer"},id:v,name:c,className:"form-control",options:{enumOptions:g2(e[0],e[1])},placeholder:s,value:i,disabled:u,readonly:f,autofocus:h,onChange:S=>l(s,S),onBlur:m,onFocus:p,registry:d,label:"","aria-describedby":In(a)})}function b2({time:s=!1,disabled:e=!1,readonly:i=!1,autofocus:l=!1,options:a,id:c,name:u,registry:f,onBlur:h,onFocus:d,onChange:m,value:p}){const{translateString:v}=f,[y,S]=(0,g.useState)(p),[E,w]=(0,g.useReducer)((P,M)=>({...P,...M}),_u(p,s));(0,g.useEffect)(()=>{const P=Xp(E,s);y2(E)&&P!==p?m(P):y!==p&&(S(p),w(_u(p,s)))},[s,p,m,E,y]);const C=(0,g.useCallback)((P,M)=>{w({[P]:M})},[]),O=(0,g.useCallback)(P=>{if(P.preventDefault(),e||i)return;const M=_u(new Date().toJSON(),s);m(Xp(M,s))},[e,i,s]),I=(0,g.useCallback)(P=>{P.preventDefault(),!(e||i)&&m(void 0)},[e,i,m]);return(0,T.jsxs)("ul",{className:"list-inline",children:[BO(E,s,a.yearsRange,a.format).map((P,M)=>(0,T.jsx)("li",{className:"list-inline-item",children:(0,T.jsx)(v2,{rootId:c,name:u,select:C,...P,disabled:e,readonly:i,registry:f,onBlur:h,onFocus:d,autofocus:l&&M===0})},M)),(a.hideNowButton!=="undefined"?!a.hideNowButton:!0)&&(0,T.jsx)("li",{className:"list-inline-item",children:(0,T.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:O,children:v(nt.NowLabel)})}),(a.hideClearButton!=="undefined"?!a.hideClearButton:!0)&&(0,T.jsx)("li",{className:"list-inline-item",children:(0,T.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:I,children:v(nt.ClearLabel)})})]})}const x2=b2;function S2({time:s=!0,...e}){const{AltDateWidget:i}=e.registry.widgets;return(0,T.jsx)(i,{time:s,...e})}const E2=S2;function w2({schema:s,uiSchema:e,options:i,id:l,value:a,disabled:c,readonly:u,label:f,hideLabel:h,autofocus:d=!1,onBlur:m,onFocus:p,onChange:v,registry:y}){var S;const E=Ke("DescriptionFieldTemplate",y,i),w=Po(s),C=(0,g.useCallback)(M=>v(M.target.checked),[v]),O=(0,g.useCallback)(M=>m(l,M.target.checked),[m,l]),I=(0,g.useCallback)(M=>p(l,M.target.checked),[p,l]),P=(S=i.description)!==null&&S!==void 0?S:s.description;return(0,T.jsxs)("div",{className:`checkbox ${c||u?"disabled":""}`,children:[!h&&!!P&&(0,T.jsx)(E,{id:zi(l),description:P,schema:s,uiSchema:e,registry:y}),(0,T.jsxs)("label",{children:[(0,T.jsx)("input",{type:"checkbox",id:l,name:l,checked:typeof a=="undefined"?!1:a,required:w,disabled:c||u,autoFocus:d,onChange:C,onBlur:O,onFocus:I,"aria-describedby":In(l)}),Ui((0,T.jsx)("span",{children:f}),h)]})]})}const C2=w2;function O2({id:s,disabled:e,options:{inline:i=!1,enumOptions:l,enumDisabled:a,emptyValue:c},value:u,autofocus:f=!1,readonly:h,onChange:d,onBlur:m,onFocus:p}){const v=Array.isArray(u)?u:[u],y=(0,g.useCallback)(({target:{value:E}})=>m(s,Ht(E,l,c)),[m,s]),S=(0,g.useCallback)(({target:{value:E}})=>p(s,Ht(E,l,c)),[p,s]);return(0,T.jsx)("div",{className:"checkboxes",id:s,children:Array.isArray(l)&&l.map((E,w)=>{const C=la(E.value,v),O=Array.isArray(a)&&a.indexOf(E.value)!==-1,I=e||O||h?"disabled":"",P=$=>{$.target.checked?d(Up(w,v,l)):d(zp(w,v,l))},M=(0,T.jsxs)("span",{children:[(0,T.jsx)("input",{type:"checkbox",id:aa(s,w),name:s,checked:C,value:String(w),disabled:e||O||h,autoFocus:f&&w===0,onChange:P,onBlur:y,onFocus:S,"aria-describedby":In(s)}),(0,T.jsx)("span",{children:E.label})]});return i?(0,T.jsx)("label",{className:`checkbox-inline ${I}`,children:M},w):(0,T.jsx)("div",{className:`checkbox ${I}`,children:(0,T.jsx)("label",{children:M})},w)})})}const A2=O2;function k2(s){const{disabled:e,readonly:i,options:l,registry:a}=s,c=Ke("BaseInputTemplate",a,l);return(0,T.jsx)(c,{type:"color",...s,disabled:e||i})}function P2(s){const{onChange:e,options:i,registry:l}=s,a=Ke("BaseInputTemplate",l,i),c=(0,g.useCallback)(u=>e(u||void 0),[e]);return(0,T.jsx)(a,{type:"date",...s,onChange:c})}function T2(s){const{onChange:e,value:i,options:l,registry:a}=s,c=Ke("BaseInputTemplate",a,l);return(0,T.jsx)(c,{type:"datetime-local",...s,value:YO(i),onChange:u=>e(zO(u))})}function I2(s){const{options:e,registry:i}=s,l=Ke("BaseInputTemplate",i,e);return(0,T.jsx)(l,{type:"email",...s})}function D2(s,e){return s===null?null:s.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function M2(s){const{name:e,size:i,type:l}=s;return new Promise((a,c)=>{const u=new window.FileReader;u.onerror=c,u.onload=f=>{var h;typeof((h=f.target)===null||h===void 0?void 0:h.result)=="string"?a({dataURL:D2(f.target.result,e),name:e,size:i,type:l}):a({dataURL:null,name:e,size:i,type:l})},u.readAsDataURL(s)})}function R2(s){return Promise.all(Array.from(s).map(M2))}function L2({fileInfo:s,registry:e}){const{translateString:i}=e,{dataURL:l,type:a,name:c}=s;return l?["image/jpeg","image/png"].includes(a)?(0,T.jsx)("img",{src:l,style:{maxWidth:"100%"},className:"file-preview"}):(0,T.jsxs)(T.Fragment,{children:[" ",(0,T.jsx)("a",{download:`preview-${c}`,href:l,className:"file-download",children:i(nt.PreviewLabel)})]}):null}function N2({filesInfo:s,registry:e,preview:i,onRemove:l,options:a}){if(s.length===0)return null;const{translateString:c}=e,{RemoveButton:u}=Ke("ButtonTemplates",e,a);return(0,T.jsx)("ul",{className:"file-info",children:s.map((f,h)=>{const{name:d,size:m,type:p}=f,v=()=>l(h);return(0,T.jsxs)("li",{children:[(0,T.jsx)(da,{children:c(nt.FilesInfo,[d,p,String(m)])}),i&&(0,T.jsx)(L2,{fileInfo:f,registry:e}),(0,T.jsx)(u,{onClick:v,registry:e})]},h)})})}function $2(s){return s.reduce((e,i)=>{if(!i)return e;try{const{blob:l,name:a}=MO(i);return[...e,{dataURL:i,name:a,size:l.size,type:l.type}]}catch{return e}},[])}function F2(s){const{disabled:e,readonly:i,required:l,multiple:a,onChange:c,value:u,options:f,registry:h}=s,d=Ke("BaseInputTemplate",h,f),m=(0,g.useCallback)(y=>{y.target.files&&R2(y.target.files).then(S=>{const E=S.map(w=>w.dataURL);c(a?u.concat(E[0]):E[0])})},[a,u,c]),p=(0,g.useMemo)(()=>$2(Array.isArray(u)?u:[u]),[u]),v=(0,g.useCallback)(y=>{if(a){const S=u.filter((E,w)=>w!==y);c(S)}else c(void 0)},[a,u,c]);return(0,T.jsxs)("div",{children:[(0,T.jsx)(d,{...s,disabled:e||i,type:"file",required:u?!1:l,onChangeOverride:m,value:"",accept:f.accept?String(f.accept):void 0}),(0,T.jsx)(N2,{filesInfo:p,onRemove:v,registry:h,preview:f.filePreview,options:f})]})}const B2=F2;function j2({id:s,value:e}){return(0,T.jsx)("input",{type:"hidden",id:s,name:s,value:typeof e=="undefined"?"":e})}const W2=j2;function V2(s){const{options:e,registry:i}=s,l=Ke("BaseInputTemplate",i,e);return(0,T.jsx)(l,{type:"password",...s})}function Z2({options:s,value:e,required:i,disabled:l,readonly:a,autofocus:c=!1,onBlur:u,onFocus:f,onChange:h,id:d}){const{enumOptions:m,enumDisabled:p,inline:v,emptyValue:y}=s,S=(0,g.useCallback)(({target:{value:w}})=>u(d,Ht(w,m,y)),[u,d]),E=(0,g.useCallback)(({target:{value:w}})=>f(d,Ht(w,m,y)),[f,d]);return(0,T.jsx)("div",{className:"field-radio-group",id:d,children:Array.isArray(m)&&m.map((w,C)=>{const O=la(w.value,e),I=Array.isArray(p)&&p.indexOf(w.value)!==-1,P=l||I||a?"disabled":"",M=()=>h(w.value),$=(0,T.jsxs)("span",{children:[(0,T.jsx)("input",{type:"radio",id:aa(d,C),checked:O,name:d,required:i,value:String(C),disabled:l||I||a,autoFocus:c&&C===0,onChange:M,onBlur:S,onFocus:E,"aria-describedby":In(d)}),(0,T.jsx)("span",{children:w.label})]});return v?(0,T.jsx)("label",{className:`radio-inline ${P}`,children:$},C):(0,T.jsx)("div",{className:`radio ${P}`,children:(0,T.jsx)("label",{children:$})},C)})})}const z2=Z2;function U2(s){const{value:e,registry:{templates:{BaseInputTemplate:i}}}=s;return(0,T.jsxs)("div",{className:"field-range-wrapper",children:[(0,T.jsx)(i,{type:"range",...s}),(0,T.jsx)("span",{className:"range-view",children:e})]})}function ff(s,e){return e?Array.from(s.target.options).slice().filter(i=>i.selected).map(i=>i.value):s.target.value}function H2({schema:s,id:e,options:i,value:l,required:a,disabled:c,readonly:u,multiple:f=!1,autofocus:h=!1,onChange:d,onBlur:m,onFocus:p,placeholder:v}){const{enumOptions:y,enumDisabled:S,emptyValue:E}=i,w=f?[]:"",C=(0,g.useCallback)(M=>{const $=ff(M,f);return p(e,Ht($,y,E))},[p,e,s,f,i]),O=(0,g.useCallback)(M=>{const $=ff(M,f);return m(e,Ht($,y,E))},[m,e,s,f,i]),I=(0,g.useCallback)(M=>{const $=ff(M,f);return d(Ht($,y,E))},[d,s,f,i]),P=Gu(l,y,f);return(0,T.jsxs)("select",{id:e,name:e,multiple:f,className:"form-control",value:typeof P=="undefined"?w:P,required:a,disabled:c||u,autoFocus:h,onBlur:O,onFocus:C,onChange:I,"aria-describedby":In(e),children:[!f&&s.default===void 0&&(0,T.jsx)("option",{value:"",children:v}),Array.isArray(y)&&y.map(({value:M,label:$},N)=>{const ne=S&&S.indexOf(M)!==-1;return(0,T.jsx)("option",{value:String(N),disabled:ne,children:$},N)})]})}const K2=H2;function Mg({id:s,options:e={},placeholder:i,value:l,required:a,disabled:c,readonly:u,autofocus:f=!1,onChange:h,onBlur:d,onFocus:m}){const p=(0,g.useCallback)(({target:{value:S}})=>h(S===""?e.emptyValue:S),[h,e.emptyValue]),v=(0,g.useCallback)(({target:{value:S}})=>d(s,S),[d,s]),y=(0,g.useCallback)(({target:{value:S}})=>m(s,S),[s,m]);return(0,T.jsx)("textarea",{id:s,name:s,className:"form-control",value:l||"",placeholder:i,required:a,disabled:c,readOnly:u,autoFocus:f,rows:e.rows,onBlur:v,onFocus:y,onChange:p,"aria-describedby":In(s)})}Mg.defaultProps={autofocus:!1,options:{}};const G2=Mg;function J2(s){const{options:e,registry:i}=s,l=Ke("BaseInputTemplate",i,e);return(0,T.jsx)(l,{...s})}function Y2(s){const{onChange:e,options:i,registry:l}=s,a=Ke("BaseInputTemplate",l,i),c=(0,g.useCallback)(u=>e(u?`${u}:00`:void 0),[e]);return(0,T.jsx)(a,{type:"time",...s,onChange:c})}function X2(s){const{options:e,registry:i}=s,l=Ke("BaseInputTemplate",i,e);return(0,T.jsx)(l,{type:"url",...s})}function Q2(s){const{options:e,registry:i}=s,l=Ke("BaseInputTemplate",i,e);return(0,T.jsx)(l,{type:"number",...s})}function _2(){return{AltDateWidget:x2,AltDateTimeWidget:E2,CheckboxWidget:C2,CheckboxesWidget:A2,ColorWidget:k2,DateWidget:P2,DateTimeWidget:T2,EmailWidget:I2,FileWidget:B2,HiddenWidget:W2,PasswordWidget:V2,RadioWidget:z2,RangeWidget:U2,SelectWidget:K2,TextWidget:J2,TextareaWidget:G2,TimeWidget:Y2,UpDownWidget:Q2,URLWidget:X2}}const q2=_2;function eP(){return{fields:Vk(),templates:p2(),widgets:q2(),rootSchema:{},formContext:{},translateString:LO}}class tP extends g.Component{constructor(e){if(super(e),this.getUsedFormData=(i,l)=>{if(l.length===0&&typeof i!="object")return i;const a=hA()(i,l);return Array.isArray(i)?Object.keys(a).map(c=>a[c]):a},this.getFieldNames=(i,l)=>{const a=(c,u=[],f=[[]])=>(Object.keys(c).forEach(h=>{if(typeof c[h]=="object"){const d=f.map(m=>[...m,h]);c[h][Nu]&&c[h][na]!==""?u.push(c[h][na]):a(c[h],u,d)}else h===na&&c[h]!==""&&f.forEach(d=>{const m=Le()(l,d);(typeof m!="object"||ai()(m)||Array.isArray(m)&&m.every(p=>typeof p!="object"))&&u.push(d)})}),u);return a(i)},this.onChange=(i,l,a)=>{const{extraErrors:c,omitExtraData:u,liveOmit:f,noValidate:h,liveValidate:d,onChange:m}=this.props,{schemaUtils:p,schema:v,retrievedSchema:y}=this.state;(kt(i)||Array.isArray(i))&&(i=this.getStateFromProps(this.props,i,y).formData);const S=!h&&d;let E={formData:i,schema:v},w=i,C;if(u===!0&&f===!0){C=p.retrieveSchema(v,i);const O=p.toPathSchema(C,"",i),I=this.getFieldNames(O,i);w=this.getUsedFormData(i,I),E={formData:w}}if(S){const O=this.validate(w,v,p,y);let I=O.errors,P=O.errorSchema;const M=I,$=P;if(c){const N=ua(O,c);P=N.errorSchema,I=N.errors}E={formData:w,errors:I,errorSchema:P,schemaValidationErrors:M,schemaValidationErrorSchema:$}}else if(!h&&l){const O=c?Ss(l,c,"preventDuplicates"):l;E={formData:w,errorSchema:O,errors:To(O)}}C&&(E.retrievedSchema=C),this.setState(E,()=>m&&m({...this.state,...E},a))},this.reset=()=>{const{onChange:i}=this.props,c={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(c,()=>i&&i({...this.state,...c}))},this.onBlur=(i,l)=>{const{onBlur:a}=this.props;a&&a(i,l)},this.onFocus=(i,l)=>{const{onFocus:a}=this.props;a&&a(i,l)},this.onSubmit=i=>{if(i.preventDefault(),i.target!==i.currentTarget)return;i.persist();const{omitExtraData:l,extraErrors:a,noValidate:c,onSubmit:u}=this.props;let{formData:f}=this.state;const{schema:h,schemaUtils:d}=this.state;if(l===!0){const m=d.retrieveSchema(h,f),p=d.toPathSchema(m,"",f),v=this.getFieldNames(p,f);f=this.getUsedFormData(f,v)}if(c||this.validateForm()){const m=a||{},p=a?To(a):[];this.setState({formData:f,errors:p,errorSchema:m,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{u&&u({...this.state,formData:f,status:"submitted"},i)})}},this.submit=()=>{if(this.formElement.current){const i=new CustomEvent("submit",{cancelable:!0});i.preventDefault(),this.formElement.current.dispatchEvent(i),this.formElement.current.requestSubmit()}},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!yn(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,g.createRef)()}getSnapshotBeforeUpdate(e,i){if(!yn(this.props,e)){const l=!yn(e.schema,this.props.schema),a=!yn(e.formData,this.props.formData),c=this.getStateFromProps(this.props,this.props.formData,l||a?void 0:this.state.retrievedSchema,l),u=!yn(c,i);return{nextState:c,shouldUpdate:u}}return{shouldUpdate:!1}}componentDidUpdate(e,i,l){if(l.shouldUpdate){const{nextState:a}=l;!yn(a.formData,this.props.formData)&&!yn(a.formData,i.formData)&&this.props.onChange&&this.props.onChange(a),this.setState(a)}}getStateFromProps(e,i,l,a=!1){const c=this.state||{},u="schema"in e?e.schema:this.props.schema,f=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},h=typeof i!="undefined",d="liveValidate"in e?e.liveValidate:this.props.liveValidate,m=h&&!e.noValidate&&d,p=u,v="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior;let y=c.schemaUtils;(!y||y.doesSchemaUtilsDiffer(e.validator,p,v))&&(y=DO(e.validator,p,v));const S=y.getDefaultFormState(u,i),E=l!=null?l:y.retrieveSchema(u,S),w=()=>e.noValidate||a?{errors:[],errorSchema:{}}:e.liveValidate?{errors:c.errors||[],errorSchema:c.errorSchema||{}}:{errors:c.schemaValidationErrors||[],errorSchema:c.schemaValidationErrorSchema||{}};let C,O,I=c.schemaValidationErrors,P=c.schemaValidationErrorSchema;if(m){const N=this.validate(S,u,y,E);C=N.errors,O=N.errorSchema,I=C,P=O}else{const N=w();C=N.errors,O=N.errorSchema}if(e.extraErrors){const N=ua({errorSchema:O,errors:C},e.extraErrors);O=N.errorSchema,C=N.errors}const M=y.toIdSchema(E,f["ui:rootFieldId"],S,e.idPrefix,e.idSeparator);return{schemaUtils:y,schema:u,uiSchema:f,idSchema:M,formData:S,edit:h,errors:C,errorSchema:O,schemaValidationErrors:I,schemaValidationErrorSchema:P,retrievedSchema:E}}shouldComponentUpdate(e,i){return KO(this,e,i)}validate(e,i=this.props.schema,l,a){const c=l||this.state.schemaUtils,{customValidate:u,transformErrors:f,uiSchema:h}=this.props,d=a!=null?a:c.retrieveSchema(i,e);return c.getValidator().validateFormData(e,d,u,f,h)}renderErrors(e){const{errors:i,errorSchema:l,schema:a,uiSchema:c}=this.state,{formContext:u}=this.props,f=tt(c),h=Ke("ErrorListTemplate",e,f);return i&&i.length?(0,T.jsx)(h,{errors:i,errorSchema:l||{},schema:a,uiSchema:c,formContext:u,registry:e}):null}getRegistry(){var e;const{translateString:i,uiSchema:l={}}=this.props,{schemaUtils:a}=this.state,{fields:c,templates:u,widgets:f,formContext:h,translateString:d}=eP();return{fields:{...c,...this.props.fields},templates:{...u,...this.props.templates,ButtonTemplates:{...u.ButtonTemplates,...(e=this.props.templates)===null||e===void 0?void 0:e.ButtonTemplates}},widgets:{...f,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||h,schemaUtils:a,translateString:i||d,globalUiOptions:l[ZC]}}focusOnError(e){const{idPrefix:i="root",idSeparator:l="_"}=this.props,{property:a}=e,c=Qp()(a);c[0]===""?c[0]=i:c.unshift(i);const u=c.join(l);let f=this.formElement.current.elements[u];f||(f=this.formElement.current.querySelector(`input[id^=${u}`)),f&&f.length&&(f=f[0]),f&&f.focus()}validateForm(){const{extraErrors:e,extraErrorsBlockSubmit:i,focusOnFirstError:l,onError:a}=this.props,{formData:c,errors:u}=this.state,f=this.validate(c);let h=f.errors,d=f.errorSchema;const m=h,p=d,v=h.length>0||e&&i;if(v){if(e){const y=ua(f,e);d=y.errorSchema,h=y.errors}l&&(typeof l=="function"?l(h[0]):this.focusOnError(h[0])),this.setState({errors:h,errorSchema:d,schemaValidationErrors:m,schemaValidationErrorSchema:p},()=>{a?a(h):console.error("Form validation failed",h)})}else u.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!v}render(){const{children:e,id:i,idPrefix:l,idSeparator:a,className:c="",tagName:u,name:f,method:h,target:d,action:m,autoComplete:p,enctype:v,acceptcharset:y,acceptCharset:S,noHtml5Validate:E=!1,disabled:w=!1,readonly:C=!1,formContext:O,showErrorList:I="top",_internalFormWrapper:P}=this.props,{schema:M,uiSchema:$,formData:N,errorSchema:ne,idSchema:ie}=this.state,fe=this.getRegistry(),{SchemaField:ye}=fe.fields,{SubmitButton:ve}=fe.templates.ButtonTemplates,pe=P?u:void 0,xe=P||u||"form";let{[ra]:me={}}=tt($);w&&(me={...me,props:{...me.props,disabled:!0}});const Pe={[Eo]:{[ra]:me}};return(0,T.jsxs)(xe,{className:c||"rjsf",id:i,name:f,method:h,target:d,action:m,autoComplete:p,encType:v,acceptCharset:S||y,noValidate:E,onSubmit:this.onSubmit,as:pe,ref:this.formElement,children:[I==="top"&&this.renderErrors(fe),(0,T.jsx)(ye,{name:"",schema:M,uiSchema:$,errorSchema:ne,idSchema:ie,idPrefix:l,idSeparator:a,formContext:O,formData:N,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:fe,disabled:w,readonly:C}),e||(0,T.jsx)(ve,{uiSchema:Pe,registry:fe}),I==="bottom"&&this.renderErrors(fe)]})}}function Rg(s){return(0,g.forwardRef)(({fields:e,widgets:i,templates:l,...a},c)=>{var u;return e={...s==null?void 0:s.fields,...e},i={...s==null?void 0:s.widgets,...i},l={...s==null?void 0:s.templates,...l,ButtonTemplates:{...(u=s==null?void 0:s.templates)===null||u===void 0?void 0:u.ButtonTemplates,...l==null?void 0:l.ButtonTemplates}},(0,T.jsx)(tP,{...s,...a,fields:e,widgets:i,templates:l,ref:c})})}const nB=null,nP=s=>{const{id:e,children:i,classNames:l,style:a,disabled:c,displayLabel:u,hidden:f,label:h,onDropPropertyClick:d,onKeyChange:m,readonly:p,required:v,rawErrors:y=[],errors:S,help:E,rawDescription:w,schema:C,uiSchema:O,registry:I}=s,P=tt(O),M=Ke("WrapIfAdditionalTemplate",I,P);return f?g.createElement("div",{style:{display:"none"}},i):g.createElement(M,{classNames:l,style:a,disabled:c,id:e,label:h,onDropPropertyClick:d,onKeyChange:m,readonly:p,required:v,schema:C,uiSchema:O,registry:I},g.createElement(le,{displayLabel:u,rawErrors:y,help:E,disabled:c,rawDescription:w,errors:S,required:v},i))},rP=(0,Y.Z)(s=>({markdownDescription:{fontSize:s.typography.caption.fontSize,margin:0,color:s.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),iP=s=>{const{id:e,description:i}=s,l=rP();return i?typeof i=="string"?g.createElement(b.S,{content:i,className:l.markdownDescription}):g.createElement(Ve.Z,{id:e,variant:"subtitle2",style:{marginTop:"5px"}},i):null};var sP=x(65549);function oP({uiSchema:s,registry:e,...i}){const{translateString:l}=e;return(0,T.jsx)(an.Z,{title:l(nt.AddItemButton),...i,color:"primary",children:(0,T.jsx)(sP.Z,{})})}function lP(s){const{children:e,disabled:i,hasToolbar:l,hasCopy:a,hasMoveDown:c,hasMoveUp:u,hasRemove:f,index:h,onCopyIndexClick:d,onDropIndexClick:m,onReorderClick:p,readonly:v,uiSchema:y,registry:S}=s,{CopyButton:E,MoveDownButton:w,MoveUpButton:C,RemoveButton:O}=S.templates.ButtonTemplates,I={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold",minWidth:0};return(0,T.jsxs)(Ae.Z,{container:!0,alignItems:"center",children:[(0,T.jsx)(Ae.Z,{item:!0,xs:!0,style:{overflow:"auto"},children:(0,T.jsx)(he.Z,{mb:2,children:(0,T.jsx)(et.Z,{elevation:2,children:(0,T.jsx)(he.Z,{p:2,children:e})})})}),l&&(0,T.jsxs)(Ae.Z,{item:!0,children:[(u||c)&&(0,T.jsx)(C,{style:I,disabled:i||v||!u,onClick:p(h,h-1),uiSchema:y,registry:S}),(u||c)&&(0,T.jsx)(w,{style:I,disabled:i||v||!c,onClick:p(h,h+1),uiSchema:y,registry:S}),a&&(0,T.jsx)(E,{style:I,disabled:i||v,onClick:d(h),uiSchema:y,registry:S}),f&&(0,T.jsx)(O,{style:I,disabled:i||v,onClick:m(h),uiSchema:y,registry:S})]})]})}function aP(s){const{canAdd:e,disabled:i,idSchema:l,uiSchema:a,items:c,onAddClick:u,readonly:f,registry:h,required:d,schema:m,title:p}=s,v=tt(a),y=Ke("ArrayFieldDescriptionTemplate",h,v),S=Ke("ArrayFieldItemTemplate",h,v),E=Ke("ArrayFieldTitleTemplate",h,v),{ButtonTemplates:{AddButton:w}}=h.templates;return(0,T.jsx)(et.Z,{elevation:2,children:(0,T.jsxs)(he.Z,{p:2,children:[(0,T.jsx)(E,{idSchema:l,title:v.title||p,schema:m,uiSchema:a,required:d,registry:h}),(0,T.jsx)(y,{idSchema:l,description:v.description||m.description,schema:m,uiSchema:a,registry:h}),c&&c.map(({key:C,...O})=>(0,T.jsx)(S,{...O},C)),e&&(0,T.jsx)(Ae.Z,{container:!0,justifyContent:"flex-end",children:(0,T.jsx)(Ae.Z,{item:!0,children:(0,T.jsx)(he.Z,{mt:2,children:(0,T.jsx)(w,{className:"array-item-add",onClick:u,disabled:i||f,uiSchema:a,registry:h})})})})]})})}const cP=["date","datetime-local","file","time"];function uP(s){const{id:e,name:i,placeholder:l,required:a,readonly:c,disabled:u,type:f,label:h,hideLabel:d,hideError:m,value:p,onChange:v,onChangeOverride:y,onBlur:S,onFocus:E,autofocus:w,options:C,schema:O,uiSchema:I,rawErrors:P=[],formContext:M,registry:$,InputLabelProps:N,...ne}=s,ie=Kp(O,f,C),{step:fe,min:ye,max:ve,...pe}=ie,xe={inputProps:{step:fe,min:ye,max:ve,...O.examples?{list:ko(e)}:void 0},...pe},me=({target:{value:be}})=>v(be===""?C.emptyValue:be),Pe=({target:{value:be}})=>S(e,be),Re=({target:{value:be}})=>E(e,be),Oe=cP.includes(f)?{...N,shrink:!0}:N;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Fl.Z,{id:e,name:e,placeholder:l,label:Ui(h||void 0,d,!1),autoFocus:w,required:a,disabled:u||c,...xe,value:p||p===0?p:"",error:P.length>0,onChange:y||me,onBlur:Pe,onFocus:Re,InputLabelProps:Oe,...ne,"aria-describedby":In(e,!!O.examples)}),Array.isArray(O.examples)&&(0,T.jsx)("datalist",{id:ko(e),children:O.examples.concat(O.default&&!O.examples.includes(O.default)?[O.default]:[]).map(be=>(0,T.jsx)("option",{value:be},be))})]})}function fP(s){const{id:e,description:i}=s;return i?(0,T.jsx)(Ve.Z,{id:e,variant:"subtitle2",style:{marginTop:"5px"},children:i}):null}var Lg=x(16715),ma=x(38402);function hP({errors:s,registry:e}){const{translateString:i}=e;return(0,T.jsx)(et.Z,{elevation:2,children:(0,T.jsxs)(he.Z,{mb:2,p:2,children:[(0,T.jsx)(Ve.Z,{variant:"h6",children:i(nt.ErrorsLabel)}),(0,T.jsx)(oo.Z,{dense:!0,children:s.map((l,a)=>(0,T.jsxs)(ma.Z,{children:[(0,T.jsx)(Cn.Z,{children:(0,T.jsx)(Lg.Z,{color:"error"})}),(0,T.jsx)(On.Z,{primary:l.stack})]},a))})]})})}var dP=x(90324),mP=x(70595),pP=x(19353),gP=x(17373);function pa(s){const{icon:e,color:i,uiSchema:l,registry:a,...c}=s;return(0,T.jsx)(an.Z,{...c,size:"small",color:i,children:e})}function yP(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(pa,{title:e(nt.CopyButton),...s,icon:(0,T.jsx)(pP.Z,{fontSize:"small"})})}function vP(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(pa,{title:e(nt.MoveDownButton),...s,icon:(0,T.jsx)(mP.Z,{fontSize:"small"})})}function bP(s){const{registry:{translateString:e}}=s;return(0,T.jsx)(pa,{title:e(nt.MoveUpButton),...s,icon:(0,T.jsx)(dP.Z,{fontSize:"small"})})}function xP(s){const{iconType:e,...i}=s,{registry:{translateString:l}}=i;return(0,T.jsx)(pa,{title:l(nt.RemoveButton),...i,color:"secondary",icon:(0,T.jsx)(gP.Z,{fontSize:e==="default"?"medium":"small"})})}var hf=x(74828);function SP(s){const{errors:e=[],idSchema:i}=s;if(e.length===0)return null;const l=Yu(i);return(0,T.jsx)(oo.Z,{dense:!0,disablePadding:!0,children:e.map((a,c)=>(0,T.jsx)(ma.Z,{disableGutters:!0,children:(0,T.jsx)(hf.Z,{id:l,children:a})},c))})}function EP(s){const{idSchema:e,help:i}=s;if(!i)return null;const l=Xu(e);return(0,T.jsx)(hf.Z,{id:l,children:i})}function wP(s){const{id:e,children:i,classNames:l,style:a,disabled:c,displayLabel:u,hidden:f,label:h,onDropPropertyClick:d,onKeyChange:m,readonly:p,required:v,rawErrors:y=[],errors:S,help:E,description:w,rawDescription:C,schema:O,uiSchema:I,registry:P}=s,M=tt(I),$=Ke("WrapIfAdditionalTemplate",P,M);return f?(0,T.jsx)("div",{style:{display:"none"},children:i}):(0,T.jsx)($,{classNames:l,style:a,disabled:c,id:e,label:h,onDropPropertyClick:d,onKeyChange:m,readonly:p,required:v,schema:O,uiSchema:I,registry:P,children:(0,T.jsxs)(Z.Z,{fullWidth:!0,error:!!y.length,required:v,children:[i,u&&C?(0,T.jsx)(Ve.Z,{variant:"caption",color:"textSecondary",children:w}):null,S,E]})})}function CP(s){const{description:e,title:i,properties:l,required:a,disabled:c,readonly:u,uiSchema:f,idSchema:h,schema:d,formData:m,onAddClick:p,registry:v}=s,y=tt(f),S=Ke("TitleFieldTemplate",v,y),E=Ke("DescriptionFieldTemplate",v,y),{ButtonTemplates:{AddButton:w}}=v.templates;return(0,T.jsxs)(T.Fragment,{children:[i&&(0,T.jsx)(S,{id:Qu(h),title:i,required:a,schema:d,uiSchema:f,registry:v}),e&&(0,T.jsx)(E,{id:zi(h),description:e,schema:d,uiSchema:f,registry:v}),(0,T.jsxs)(Ae.Z,{container:!0,spacing:2,style:{marginTop:"10px"},children:[l.map((C,O)=>C.hidden?C.content:(0,T.jsx)(Ae.Z,{item:!0,xs:12,style:{marginBottom:"10px"},children:C.content},O)),kp(d,f,m)&&(0,T.jsx)(Ae.Z,{container:!0,justifyContent:"flex-end",children:(0,T.jsx)(Ae.Z,{item:!0,children:(0,T.jsx)(w,{className:"object-property-expand",onClick:p(d),disabled:c||u,uiSchema:f,registry:v})})})]})]})}function OP({uiSchema:s}){const{submitText:e,norender:i,props:l={}}=Jp(s);return i?null:(0,T.jsx)(he.Z,{marginTop:3,children:(0,T.jsx)(kn.Z,{type:"submit",variant:"contained",color:"primary",...l,children:e})})}function AP({id:s,title:e}){return(0,T.jsxs)(he.Z,{id:s,mb:1,mt:1,children:[(0,T.jsx)(Ve.Z,{variant:"h5",children:e}),(0,T.jsx)(Rr.Z,{})]})}function kP(s){const{children:e,classNames:i,style:l,disabled:a,id:c,label:u,onDropPropertyClick:f,onKeyChange:h,readonly:d,required:m,schema:p,uiSchema:v,registry:y}=s,{templates:S,translateString:E}=y,{RemoveButton:w}=S.ButtonTemplates,C=E(nt.KeyLabel,[u]),O=bs in p,I={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};if(!O)return(0,T.jsx)("div",{className:i,style:l,children:e});const P=({target:M})=>h(M.value);return(0,T.jsxs)(Ae.Z,{container:!0,alignItems:"center",spacing:2,className:i,style:l,children:[(0,T.jsx)(Ae.Z,{item:!0,xs:!0,children:(0,T.jsx)(Fl.Z,{fullWidth:!0,required:m,label:C,defaultValue:u,disabled:a||d,id:`${c}-key`,name:`${c}-key`,onBlur:d?void 0:P,type:"text"})}),(0,T.jsx)(Ae.Z,{item:!0,xs:!0,children:e}),(0,T.jsx)(Ae.Z,{item:!0,children:(0,T.jsx)(w,{iconType:"default",style:I,disabled:a||d,onClick:f(u),uiSchema:v,registry:y})})]},`${c}-key`)}function Ng(){return{ArrayFieldItemTemplate:lP,ArrayFieldTemplate:aP,BaseInputTemplate:uP,ButtonTemplates:{AddButton:oP,CopyButton:yP,MoveDownButton:vP,MoveUpButton:bP,RemoveButton:xP,SubmitButton:OP},DescriptionFieldTemplate:fP,ErrorListTemplate:hP,FieldErrorTemplate:SP,FieldHelpTemplate:EP,FieldTemplate:wP,ObjectFieldTemplate:CP,TitleFieldTemplate:AP,WrapIfAdditionalTemplate:kP}}const rB=Ng();function PP(s){var e;const{schema:i,id:l,value:a,disabled:c,readonly:u,label:f="",hideLabel:h,autofocus:d,onChange:m,onBlur:p,onFocus:v,registry:y,options:S,uiSchema:E}=s,w=Ke("DescriptionFieldTemplate",y,S),C=Po(i),O=($,N)=>m(N),I=({target:{value:$}})=>p(l,$),P=({target:{value:$}})=>v(l,$),M=(e=S.description)!==null&&e!==void 0?e:i.description;return(0,T.jsxs)(T.Fragment,{children:[!h&&!!M&&(0,T.jsx)(w,{id:zi(l),description:M,schema:i,uiSchema:E,registry:y}),(0,T.jsx)($l.Z,{control:(0,T.jsx)(iu.Z,{id:l,name:l,checked:typeof a=="undefined"?!1:!!a,required:C,disabled:c||u,autoFocus:d,onChange:O,onBlur:I,onFocus:P,"aria-describedby":In(l)}),label:Ui(f,h,!1)})]})}var TP=x(64326),df=x(84899);function IP({label:s,hideLabel:e,id:i,disabled:l,options:a,value:c,autofocus:u,readonly:f,required:h,onChange:d,onBlur:m,onFocus:p}){const{enumOptions:v,enumDisabled:y,inline:S,emptyValue:E}=a,w=Array.isArray(c)?c:[c],C=P=>({target:{checked:M}})=>{d(M?Up(P,w,v):zp(P,w,v))},O=({target:{value:P}})=>m(i,Ht(P,v,E)),I=({target:{value:P}})=>p(i,Ht(P,v,E));return(0,T.jsxs)(T.Fragment,{children:[Ui((0,T.jsx)(df.Z,{required:h,htmlFor:i,children:s||void 0}),e),(0,T.jsx)(TP.Z,{id:i,row:!!S,children:Array.isArray(v)&&v.map((P,M)=>{const $=la(P.value,w),N=Array.isArray(y)&&y.indexOf(P.value)!==-1,ne=(0,T.jsx)(iu.Z,{id:aa(i,M),name:i,checked:$,disabled:l||N||f,autoFocus:u&&M===0,onChange:C(M),onBlur:O,onFocus:I,"aria-describedby":In(i)});return(0,T.jsx)($l.Z,{control:ne,label:P.label},M)})})]})}var DP=x(44962),MP=x(2682);function RP({id:s,options:e,value:i,required:l,disabled:a,readonly:c,label:u,hideLabel:f,onChange:h,onBlur:d,onFocus:m}){var p;const{enumOptions:v,enumDisabled:y,emptyValue:S}=e,E=(P,M)=>h(Ht(M,v,S)),w=({target:{value:P}})=>d(s,Ht(P,v,S)),C=({target:{value:P}})=>m(s,Ht(P,v,S)),O=e?e.inline:!1,I=(p=Gu(i,v))!==null&&p!==void 0?p:null;return(0,T.jsxs)(T.Fragment,{children:[Ui((0,T.jsx)(df.Z,{required:l,htmlFor:s,children:u||void 0}),f),(0,T.jsx)(MP.Z,{id:s,name:s,value:I,row:O,onChange:E,onBlur:w,onFocus:C,"aria-describedby":In(s),children:Array.isArray(v)&&v.map((P,M)=>{const $=Array.isArray(y)&&y.indexOf(P.value)!==-1;return(0,T.jsx)($l.Z,{control:(0,T.jsx)(DP.Z,{name:s,id:aa(s,M),color:"primary"}),label:P.label,value:String(M),disabled:a||$||c},M)})})]})}var LP=x(11433);function NP(s){const{value:e,readonly:i,disabled:l,onBlur:a,onFocus:c,options:u,schema:f,onChange:h,required:d,label:m,hideLabel:p,id:v}=s,y={value:e,label:m,id:v,name:v,...Hp(f)},S=(C,O)=>{h(O!=null?O:u.emptyValue)},E=({target:{value:C}})=>a(v,C),w=({target:{value:C}})=>c(v,C);return(0,T.jsxs)(T.Fragment,{children:[Ui((0,T.jsx)(df.Z,{required:d,htmlFor:v,children:m||void 0}),p),(0,T.jsx)(LP.Z,{disabled:l||i,onChange:S,onBlur:E,onFocus:w,valueLabelDisplay:"auto",...y,"aria-describedby":In(v)})]})}function $P({schema:s,id:e,name:i,options:l,label:a,hideLabel:c,required:u,disabled:f,readonly:h,placeholder:d,value:m,multiple:p,autofocus:v,onChange:y,onBlur:S,onFocus:E,rawErrors:w=[],registry:C,uiSchema:O,hideError:I,formContext:P,...M}){const{enumOptions:$,enumDisabled:N,emptyValue:ne}=l;p=typeof p=="undefined"?!1:!!p;const ie=p?[]:"",fe=typeof m=="undefined"||p&&m.length<1||!p&&m===ie,ye=({target:{value:me}})=>y(Ht(me,$,ne)),ve=({target:{value:me}})=>S(e,Ht(me,$,ne)),pe=({target:{value:me}})=>E(e,Ht(me,$,ne)),xe=Gu(m,$,p);return(0,T.jsx)(Fl.Z,{id:e,name:e,label:Ui(a,c||!a,!1),value:!fe&&typeof xe!="undefined"?xe:ie,required:u,disabled:f||h,autoFocus:v,placeholder:d,error:w.length>0,onChange:ye,onBlur:ve,onFocus:pe,...M,select:!0,InputLabelProps:{...M.InputLabelProps,shrink:!fe},SelectProps:{...M.SelectProps,multiple:p},"aria-describedby":In(e),children:Array.isArray($)&&$.map(({value:me,label:Pe},Re)=>{const Oe=Array.isArray(N)&&N.indexOf(me)!==-1;return(0,T.jsx)(An.Z,{value:String(Re),disabled:Oe,children:Pe},Re)})})}function FP(s){const{options:e,registry:i}=s,l=Ke("BaseInputTemplate",i,e);let a=5;return(typeof e.rows=="string"||typeof e.rows=="number")&&(a=e.rows),(0,T.jsx)(l,{...s,multiline:!0,rows:a})}function $g(){return{CheckboxWidget:PP,CheckboxesWidget:IP,RadioWidget:RP,RangeWidget:NP,SelectWidget:$P,TextareaWidget:FP}}const iB=$g();function Fg(){return{templates:Ng(),widgets:$g()}}const BP=Fg();function jP(){return Rg(Fg())}const sB=jP(),oB=null,WP=Rg(BP),Bg=s=>{const e=g.useMemo(()=>{var l;return Object.fromEntries(Object.entries((l=s.fields)!=null?l:{}).map(([a,c])=>[a,u=>{var f,h;return g.createElement(c,{...u,uiSchema:(f=u.uiSchema)!=null?f:{},formData:u.formData,rawErrors:(h=u.rawErrors)!=null?h:[]})}]))},[s.fields]),i=g.useMemo(()=>({FieldTemplate:nP,DescriptionFieldTemplate:iP,...s.templates}),[s.templates]);return g.createElement(WP,{...s,templates:i,fields:e})};var mf=x(12420);const VP=(0,Y.Z)(s=>(0,mf.Z)({list:{width:"100%"},text:{textWrap:"wrap"}})),ZP=({errors:s})=>{const e=VP();return g.createElement(et.Z,null,g.createElement(oo.Z,{dense:!0,className:e.list},s.map((i,l)=>g.createElement(ma.Z,{key:l},g.createElement(Cn.Z,null,g.createElement(Lg.Z,{color:"error"})),g.createElement(On.Z,{classes:{primary:e.text},primary:i.stack})))))},zP=s=>{const{value:e,onChange:i,schema:{title:l}}=s;return g.createElement(g.Fragment,null,g.createElement(ce.Z,{htmlFor:l},l),g.createElement(U.Z,{id:l,"aria-describedby":l,onChange:a=>{i(a.target.value)},value:e,autoComplete:"off"}),g.createElement(hf.Z,{error:!0},g.createElement(b.S,{content:"This widget is insecure. Please use [`ui:field: Secret`](https://backstage.io/docs/features/software-templates/writing-templates/#using-secrets) instead of\n          `ui:widget: password`"})))},UP=(0,Y.Z)(s=>({backButton:{marginRight:s.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:s.spacing(2)},formWrapper:{padding:s.spacing(2)}})),jg=s=>{var Oe,be,Be,lt,Je,ut,ht;const{layouts:e=[],components:i={},...l}=s,{ReviewStateComponent:a=IC,ReviewStepComponent:c,backButtonText:u="Back",createButtonText:f="Create",reviewButtonText:h="Review"}=i,d=(0,ao.z)(),{presentation:m,steps:p}=RC(l.manifest),v=(0,at.I_)(),[y,S]=(0,g.useState)(0),[E,w]=(0,g.useState)(!1),[C,O]=MC(l.initialState),[I,P]=(0,g.useState)(),M=UP(),$=(be=(Oe=m==null?void 0:m.buttonLabels)==null?void 0:Oe.backButtonText)!=null?be:u,N=(lt=(Be=m==null?void 0:m.buttonLabels)==null?void 0:Be.createButtonText)!=null?lt:f,ne=(ut=(Je=m==null?void 0:m.buttonLabels)==null?void 0:Je.reviewButtonText)!=null?ut:h,ie=(0,g.useMemo)(()=>Object.fromEntries(l.extensions.map(({name:pt,component:St})=>[pt,St])),[l.extensions]),fe=(0,g.useMemo)(()=>({...j,...ie}),[ie]),ye=(0,g.useMemo)(()=>Object.fromEntries(l.extensions.map(({name:pt,validation:St})=>[pt,St])),[l.extensions]),ve=(0,g.useMemo)(()=>{var pt;return Sp((pt=p[y])==null?void 0:pt.mergedSchema,ye,{apiHolder:v})},[p,y,ye,v]),pe=()=>{S(pt=>pt-1)},xe=(0,g.useCallback)(pt=>O(St=>({...St,...pt.formData})),[O]),me=(0,g.useCallback)(()=>{l.onCreate(C),d.captureEvent("click",`${N}`)},[l,C,d,N]),Pe=cA(p[y],{layouts:e}),Re=async({formData:pt={}})=>{P(void 0),w(!0);const St=await ve(pt);w(!1),xp(St)?P(St):(P(void 0),S($t=>{const Hn=$t+1;return d.captureEvent("click",`Next Step (${Hn})`),Hn})),O($t=>({...$t,...pt}))};return g.createElement(g.Fragment,null,E&&g.createElement(Wl.Z,{variant:"indeterminate"}),g.createElement(ou.Z,{activeStep:y,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},p.map((pt,St)=>{const $t=y>St;return g.createElement(Bl.Z,{key:St},g.createElement(jl.Z,{"aria-label":`Step ${St+1}`,style:{cursor:$t?"pointer":"default"},onClick:()=>{$t&&S(St)}},pt.title))}),g.createElement(Bl.Z,null,g.createElement(jl.Z,null,ne))),g.createElement("div",{className:M.formWrapper},y<p.length?g.createElement(Bg,{validator:eg,extraErrors:I,formData:C,formContext:{formData:C},schema:Pe.schema,uiSchema:Pe.uiSchema,onSubmit:Re,fields:fe,showErrorList:"top",templates:{ErrorListTemplate:ZP},onChange:xe,widgets:{password:zP},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(ht=l.formProps)!=null?ht:{}},g.createElement("div",{className:M.footer},g.createElement(kn.Z,{onClick:pe,className:M.backButton,disabled:y<1||E},$),g.createElement(kn.Z,{variant:"contained",color:"primary",type:"submit",disabled:E},y===p.length-1?ne:"Next"))):c?g.createElement(c,{disableButtons:E,formData:C,handleBack:pe,handleReset:()=>{},steps:p,handleCreate:me}):g.createElement(g.Fragment,null,g.createElement(a,{formState:C,schemas:p}),g.createElement("div",{className:M.footer},g.createElement(kn.Z,{onClick:pe,className:M.backButton,disabled:y<1},$),g.createElement(kn.Z,{variant:"contained",color:"primary",onClick:me},N)))))},HP=s=>{const e="backstage:featureFlag",i=(0,at.h_)(wp.W);if(!s)return;const l=s==null?void 0:s.steps.filter(a=>{const c=a.schema[e];return typeof c!="string"||i.isActive(c)}).map(a=>{var f;const c=Ru()(a),u=[];return c.schema.properties&&(c.schema.properties=Object.fromEntries(Object.entries(c.schema.properties).filter(([h,d])=>d[e]?i.isActive(d[e])?!0:(u.push(h),!1):!0)),c.schema.required=Array.isArray(c.schema.required)?(f=c.schema.required)==null?void 0:f.filter(h=>!u.includes(h)):c.schema.required),c});return{...s,steps:l}};var KP=x(64279);const GP=s=>{const e=(0,at.h_)(Nl.A),{value:i}=(0,KP.Z)(async()=>{var u;const l=await e.getEntityByRef(s),a=(u=l==null?void 0:l.metadata.annotations)==null?void 0:u["backstage.io/time-saved"];if(!l||!a)return;const c=Fn.nL.fromISO(a).as("minutes");if(!Number.isNaN(c))return c},[e,s]);return i},JP=(0,Y.Z)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),Wg=s=>{var C;const{title:e,description:i,namespace:l,templateName:a,onCreate:c,...u}=s,f=(0,ao.z)(),h=JP(),d=(0,Xn.eE)({kind:"Template",namespace:l,name:a}),m=(0,at.h_)(im.V),{loading:p,manifest:v,error:y}=nE(d),S=HP(v),E=GP(d),w=(0,g.useCallback)(async O=>{var P;c(O);const I=typeof O.name=="string"?O.name:void 0;f.captureEvent("create",(P=I!=null?I:a)!=null?P:"unknown",{value:E})},[c,f,a,E]);return(0,g.useEffect)(()=>{y&&m.post(new Error(`Failed to load template, ${y}`))},[y,m]),y?u.onError(y):g.createElement(Fi.V,null,p&&g.createElement(ei.E,null),S&&g.createElement(lm.r,{title:e!=null?e:S.title,subheader:g.createElement(b.S,{className:h.markdown,content:(C=i!=null?i:S.description)!=null?C:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(jg,{manifest:S,onCreate:w,...u})))},lB=s=>React.createElement(SecretsContextProvider,null,React.createElement(Wg,{...s})),YP=(0,Y.Z)(s=>({button:{color:s.page.fontColor}}));function XP(s){const{editUrl:e}=s,i=YP(),[l,a]=(0,g.useState)();if(!e)return null;const c=f=>{a(f.currentTarget)},u=()=>{a(void 0)};return g.createElement(g.Fragment,null,g.createElement(an.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!l,"aria-haspopup":"true",role:"button",onClick:c,"data-testid":"menu-button",color:"inherit",className:i.button},g.createElement(tu.Z,null)),g.createElement(eu.ZP,{"aria-labelledby":"long-menu",open:!!l,onClose:u,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(qc.Z,null,g.createElement(An.Z,{onClick:()=>window.open(e,"_blank")},g.createElement(Cn.Z,null,g.createElement(_d.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Edit Configuration"})))))}const QP=s=>{const e=(0,ft.t)(rt._Z),i=(0,ft.t)(rt.gV),{secrets:l}=(0,L.T)(),a=(0,at.h_)(Gn.l),c=(0,at.h_)(Nl.A),u=(0,F.s0)(),{templateName:f,namespace:h}=(0,eE.O)(rt.QQ),d=(0,Xn.eE)({kind:"Template",namespace:h,name:f}),{value:m}=(0,Mr.Z)(async()=>{var S;const y=await c.getEntityByRef(d);return(S=y==null?void 0:y.metadata.annotations)==null?void 0:S[qS.Tf]},[d,c]),p=async y=>{const{taskId:S}=await a.scaffold({templateRef:d,values:y,secrets:l});u(i({taskId:S}))},v=()=>g.createElement(F.Fg,{to:e()});return g.createElement(tE.f,{attributes:{entityRef:d}},g.createElement(ds.T,{themeId:"website"},g.createElement(ms.h,{pageTitleOverride:"Create a new component",title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",...s.headerOptions},g.createElement(XP,{editUrl:m})),g.createElement(Wg,{namespace:h,templateName:f,onCreate:p,components:s.components,onError:v,extensions:s.customFieldExtensions,formProps:s.formProps,layouts:s.layouts})))};function Wt(s){for(var e=arguments.length,i=Array(e>1?e-1:0),l=1;l<e;l++)i[l-1]=arguments[l];if(0)var a,c;throw Error("[Immer] minified error nr: "+s+(i.length?" "+i.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Zr(s){return!!s&&!!s[Ue]}function hr(s){var e;return!!s&&(function(i){if(!i||typeof i!="object")return!1;var l=Object.getPrototypeOf(i);if(l===null)return!0;var a=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===oT}(s)||Array.isArray(s)||!!s[$o]||!!(!((e=s.constructor)===null||e===void 0)&&e[$o])||ya(s)||va(s))}function aB(s){return Zr(s)||Wt(23,s),s[Ue].t}function zr(s,e,i){i===void 0&&(i=!1),mi(s)===0?(i?Object.keys:Os)(s).forEach(function(l){i&&typeof l=="symbol"||e(l,s[l],s)}):s.forEach(function(l,a){return e(a,l,s)})}function mi(s){var e=s[Ue];return e?e.i>3?e.i-4:e.i:Array.isArray(s)?1:ya(s)?2:va(s)?3:0}function pi(s,e){return mi(s)===2?s.has(e):Object.prototype.hasOwnProperty.call(s,e)}function ga(s,e){return mi(s)===2?s.get(e):s[e]}function Vg(s,e,i){var l=mi(s);l===2?s.set(e,i):l===3?s.add(i):s[e]=i}function Zg(s,e){return s===e?s!==0||1/s==1/e:s!=s&&e!=e}function ya(s){return iT&&s instanceof Map}function va(s){return sT&&s instanceof Set}function Vt(s){return s.o||s.t}function pf(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var e=Yg(s);delete e[Ue];for(var i=Os(e),l=0;l<i.length;l++){var a=i[l],c=e[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(e[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:s[a]})}return Object.create(Object.getPrototypeOf(s),e)}function gf(s,e){return e===void 0&&(e=!1),yf(s)||Zr(s)||!hr(s)||(mi(s)>1&&(s.set=s.add=s.clear=s.delete=_P),Object.freeze(s),e&&zr(s,function(i,l){return gf(l,!0)},!0)),s}function _P(){Wt(2)}function yf(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function dr(s){var e=Af[s];return e||Wt(18,s),e}function vf(s,e){Af[s]||(Af[s]=e)}function Ro(){return No}function bf(s,e){e&&(dr("Patches"),s.u=[],s.s=[],s.v=e)}function ba(s){xf(s),s.p.forEach(qP),s.p=null}function xf(s){s===No&&(No=s.l)}function zg(s){return No={p:[],l:No,h:s,m:!0,_:0}}function qP(s){var e=s[Ue];e.i===0||e.i===1?e.j():e.g=!0}function Sf(s,e){e._=e.p.length;var i=e.p[0],l=s!==void 0&&s!==i;return e.h.O||dr("ES5").S(e,s,l),l?(i[Ue].P&&(ba(e),Wt(4)),hr(s)&&(s=xa(e,s),e.l||Sa(e,s)),e.u&&dr("Patches").M(i[Ue].t,s,e.u,e.s)):s=xa(e,i,[]),ba(e),e.u&&e.v(e.u,e.s),s!==Of?s:void 0}function xa(s,e,i){if(yf(e))return e;var l=e[Ue];if(!l)return zr(e,function(f,h){return Ug(s,l,e,f,h,i)},!0),e;if(l.A!==s)return e;if(!l.P)return Sa(s,l.t,!0),l.t;if(!l.I){l.I=!0,l.A._--;var a=l.i===4||l.i===5?l.o=pf(l.k):l.o,c=a,u=!1;l.i===3&&(c=new Set(a),a.clear(),u=!0),zr(c,function(f,h){return Ug(s,l,a,f,h,i,u)}),Sa(s,a,!1),i&&s.u&&dr("Patches").N(l,i,s.u,s.s)}return l.o}function Ug(s,e,i,l,a,c,u){if(Zr(a)){var f=xa(s,a,c&&e&&e.i!==3&&!pi(e.R,l)?c.concat(l):void 0);if(Vg(i,l,f),!Zr(f))return;s.m=!1}else u&&i.add(a);if(hr(a)&&!yf(a)){if(!s.h.D&&s._<1)return;xa(s,a),e&&e.A.l||Sa(s,a)}}function Sa(s,e,i){i===void 0&&(i=!1),!s.l&&s.h.D&&s.m&&gf(e,i)}function Ef(s,e){var i=s[Ue];return(i?Vt(i):s)[e]}function Hg(s,e){if(e in s)for(var i=Object.getPrototypeOf(s);i;){var l=Object.getOwnPropertyDescriptor(i,e);if(l)return l;i=Object.getPrototypeOf(i)}}function vn(s){s.P||(s.P=!0,s.l&&vn(s.l))}function wf(s){s.o||(s.o=pf(s.t))}function Lo(s,e,i){var l=ya(e)?dr("MapSet").F(e,i):va(e)?dr("MapSet").T(e,i):s.O?function(a,c){var u=Array.isArray(a),f={i:u?1:0,A:c?c.A:Ro(),P:!1,I:!1,R:{},l:c,t:a,k:null,o:null,j:null,C:!1},h=f,d=Fo;u&&(h=[f],d=Bo);var m=Proxy.revocable(h,d),p=m.revoke,v=m.proxy;return f.k=v,f.j=p,v}(e,i):dr("ES5").J(e,i);return(i?i.A:Ro()).p.push(l),l}function eT(s){return Zr(s)||Wt(22,s),function e(i){if(!hr(i))return i;var l,a=i[Ue],c=mi(i);if(a){if(!a.P&&(a.i<4||!dr("ES5").K(a)))return a.t;a.I=!0,l=Kg(i,c),a.I=!1}else l=Kg(i,c);return zr(l,function(u,f){a&&ga(a.t,u)===f||Vg(l,u,e(f))}),c===3?new Set(l):l}(s)}function Kg(s,e){switch(e){case 2:return new Map(s);case 3:return Array.from(s)}return pf(s)}function tT(){function s(u,f){var h=c[u];return h?h.enumerable=f:c[u]=h={configurable:!0,enumerable:f,get:function(){var d=this[Ue];return Fo.get(d,u)},set:function(d){var m=this[Ue];Fo.set(m,u,d)}},h}function e(u){for(var f=u.length-1;f>=0;f--){var h=u[f][Ue];if(!h.P)switch(h.i){case 5:l(h)&&vn(h);break;case 4:i(h)&&vn(h)}}}function i(u){for(var f=u.t,h=u.k,d=Os(h),m=d.length-1;m>=0;m--){var p=d[m];if(p!==Ue){var v=f[p];if(v===void 0&&!pi(f,p))return!0;var y=h[p],S=y&&y[Ue];if(S?S.t!==v:!Zg(y,v))return!0}}var E=!!f[Ue];return d.length!==Os(f).length+(E?0:1)}function l(u){var f=u.k;if(f.length!==u.t.length)return!0;var h=Object.getOwnPropertyDescriptor(f,f.length-1);if(h&&!h.get)return!0;for(var d=0;d<f.length;d++)if(!f.hasOwnProperty(d))return!0;return!1}function a(u){u.g&&Wt(3,JSON.stringify(Vt(u)))}var c={};vf("ES5",{J:function(u,f){var h=Array.isArray(u),d=function(p,v){if(p){for(var y=Array(v.length),S=0;S<v.length;S++)Object.defineProperty(y,""+S,s(S,!0));return y}var E=Yg(v);delete E[Ue];for(var w=Os(E),C=0;C<w.length;C++){var O=w[C];E[O]=s(O,p||!!E[O].enumerable)}return Object.create(Object.getPrototypeOf(v),E)}(h,u),m={i:h?5:4,A:f?f.A:Ro(),P:!1,I:!1,R:{},l:f,t:u,k:d,o:null,g:!1,C:!1};return Object.defineProperty(d,Ue,{value:m,writable:!0}),d},S:function(u,f,h){h?Zr(f)&&f[Ue].A===u&&e(u.p):(u.u&&function d(m){if(m&&typeof m=="object"){var p=m[Ue];if(p){var v=p.t,y=p.k,S=p.R,E=p.i;if(E===4)zr(y,function(P){P!==Ue&&(v[P]!==void 0||pi(v,P)?S[P]||d(y[P]):(S[P]=!0,vn(p)))}),zr(v,function(P){y[P]!==void 0||pi(y,P)||(S[P]=!1,vn(p))});else if(E===5){if(l(p)&&(vn(p),S.length=!0),y.length<v.length)for(var w=y.length;w<v.length;w++)S[w]=!1;else for(var C=v.length;C<y.length;C++)S[C]=!0;for(var O=Math.min(y.length,v.length),I=0;I<O;I++)y.hasOwnProperty(I)||(S[I]=!0),S[I]===void 0&&d(y[I])}}}}(u.p[0]),e(u.p))},K:function(u){return u.i===4?i(u):l(u)}})}function nT(){function s(l){if(!hr(l))return l;if(Array.isArray(l))return l.map(s);if(ya(l))return new Map(Array.from(l.entries()).map(function(u){return[u[0],s(u[1])]}));if(va(l))return new Set(Array.from(l).map(s));var a=Object.create(Object.getPrototypeOf(l));for(var c in l)a[c]=s(l[c]);return pi(l,$o)&&(a[$o]=l[$o]),a}function e(l){return Zr(l)?s(l):l}var i="add";vf("Patches",{$:function(l,a){return a.forEach(function(c){for(var u=c.path,f=c.op,h=l,d=0;d<u.length-1;d++){var m=mi(h),p=u[d];typeof p!="string"&&typeof p!="number"&&(p=""+p),m!==0&&m!==1||p!=="__proto__"&&p!=="constructor"||Wt(24),typeof h=="function"&&p==="prototype"&&Wt(24),typeof(h=ga(h,p))!="object"&&Wt(15,u.join("/"))}var v=mi(h),y=s(c.value),S=u[u.length-1];switch(f){case"replace":switch(v){case 2:return h.set(S,y);case 3:Wt(16);default:return h[S]=y}case i:switch(v){case 1:return S==="-"?h.push(y):h.splice(S,0,y);case 2:return h.set(S,y);case 3:return h.add(y);default:return h[S]=y}case"remove":switch(v){case 1:return h.splice(S,1);case 2:return h.delete(S);case 3:return h.delete(c.value);default:return delete h[S]}default:Wt(17,f)}}),l},N:function(l,a,c,u){switch(l.i){case 0:case 4:case 2:return function(f,h,d,m){var p=f.t,v=f.o;zr(f.R,function(y,S){var E=ga(p,y),w=ga(v,y),C=S?pi(p,y)?"replace":i:"remove";if(E!==w||C!=="replace"){var O=h.concat(y);d.push(C==="remove"?{op:C,path:O}:{op:C,path:O,value:w}),m.push(C===i?{op:"remove",path:O}:C==="remove"?{op:i,path:O,value:e(E)}:{op:"replace",path:O,value:e(E)})}})}(l,a,c,u);case 5:case 1:return function(f,h,d,m){var p=f.t,v=f.R,y=f.o;if(y.length<p.length){var S=[y,p];p=S[0],y=S[1];var E=[m,d];d=E[0],m=E[1]}for(var w=0;w<p.length;w++)if(v[w]&&y[w]!==p[w]){var C=h.concat([w]);d.push({op:"replace",path:C,value:e(y[w])}),m.push({op:"replace",path:C,value:e(p[w])})}for(var O=p.length;O<y.length;O++){var I=h.concat([O]);d.push({op:i,path:I,value:e(y[O])})}p.length<y.length&&m.push({op:"replace",path:h.concat(["length"]),value:p.length})}(l,a,c,u);case 3:return function(f,h,d,m){var p=f.t,v=f.o,y=0;p.forEach(function(S){if(!v.has(S)){var E=h.concat([y]);d.push({op:"remove",path:E,value:S}),m.unshift({op:i,path:E,value:S})}y++}),y=0,v.forEach(function(S){if(!p.has(S)){var E=h.concat([y]);d.push({op:i,path:E,value:S}),m.unshift({op:"remove",path:E,value:S})}y++})}(l,a,c,u)}},M:function(l,a,c,u){c.push({op:"replace",path:[],value:a===Of?void 0:a}),u.push({op:"replace",path:[],value:l})}})}function rT(){function s(f,h){function d(){this.constructor=f}a(f,h),f.prototype=(d.prototype=h.prototype,new d)}function e(f){f.o||(f.R=new Map,f.o=new Map(f.t))}function i(f){f.o||(f.o=new Set,f.t.forEach(function(h){if(hr(h)){var d=Lo(f.A.h,h,f);f.p.set(h,d),f.o.add(d)}else f.o.add(h)}))}function l(f){f.g&&Wt(3,JSON.stringify(Vt(f)))}var a=function(f,h){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])})(f,h)},c=function(){function f(d,m){return this[Ue]={i:2,l:m,A:m?m.A:Ro(),P:!1,I:!1,o:void 0,R:void 0,t:d,k:this,C:!1,g:!1},this}s(f,Map);var h=f.prototype;return Object.defineProperty(h,"size",{get:function(){return Vt(this[Ue]).size}}),h.has=function(d){return Vt(this[Ue]).has(d)},h.set=function(d,m){var p=this[Ue];return l(p),Vt(p).has(d)&&Vt(p).get(d)===m||(e(p),vn(p),p.R.set(d,!0),p.o.set(d,m),p.R.set(d,!0)),this},h.delete=function(d){if(!this.has(d))return!1;var m=this[Ue];return l(m),e(m),vn(m),m.t.has(d)?m.R.set(d,!1):m.R.delete(d),m.o.delete(d),!0},h.clear=function(){var d=this[Ue];l(d),Vt(d).size&&(e(d),vn(d),d.R=new Map,zr(d.t,function(m){d.R.set(m,!1)}),d.o.clear())},h.forEach=function(d,m){var p=this;Vt(this[Ue]).forEach(function(v,y){d.call(m,p.get(y),y,p)})},h.get=function(d){var m=this[Ue];l(m);var p=Vt(m).get(d);if(m.I||!hr(p)||p!==m.t.get(d))return p;var v=Lo(m.A.h,p,m);return e(m),m.o.set(d,v),v},h.keys=function(){return Vt(this[Ue]).keys()},h.values=function(){var d,m=this,p=this.keys();return(d={})[Ea]=function(){return m.values()},d.next=function(){var v=p.next();return v.done?v:{done:!1,value:m.get(v.value)}},d},h.entries=function(){var d,m=this,p=this.keys();return(d={})[Ea]=function(){return m.entries()},d.next=function(){var v=p.next();if(v.done)return v;var y=m.get(v.value);return{done:!1,value:[v.value,y]}},d},h[Ea]=function(){return this.entries()},f}(),u=function(){function f(d,m){return this[Ue]={i:3,l:m,A:m?m.A:Ro(),P:!1,I:!1,o:void 0,t:d,k:this,p:new Map,g:!1,C:!1},this}s(f,Set);var h=f.prototype;return Object.defineProperty(h,"size",{get:function(){return Vt(this[Ue]).size}}),h.has=function(d){var m=this[Ue];return l(m),m.o?!!m.o.has(d)||!(!m.p.has(d)||!m.o.has(m.p.get(d))):m.t.has(d)},h.add=function(d){var m=this[Ue];return l(m),this.has(d)||(i(m),vn(m),m.o.add(d)),this},h.delete=function(d){if(!this.has(d))return!1;var m=this[Ue];return l(m),i(m),vn(m),m.o.delete(d)||!!m.p.has(d)&&m.o.delete(m.p.get(d))},h.clear=function(){var d=this[Ue];l(d),Vt(d).size&&(i(d),vn(d),d.o.clear())},h.values=function(){var d=this[Ue];return l(d),i(d),d.o.values()},h.entries=function(){var d=this[Ue];return l(d),i(d),d.o.entries()},h.keys=function(){return this.values()},h[Ea]=function(){return this.values()},h.forEach=function(d,m){for(var p=this.values(),v=p.next();!v.done;)d.call(m,v.value,v.value,this),v=p.next()},f}();vf("MapSet",{F:function(f,h){return new c(f,h)},T:function(f,h){return new u(f,h)}})}function cB(){tT(),rT(),nT()}function uB(s){return s}function fB(s){return s}var Gg,No,Cf=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",iT=typeof Map!="undefined",sT=typeof Set!="undefined",Jg=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Of=Cf?Symbol.for("immer-nothing"):((Gg={})["immer-nothing"]=!0,Gg),$o=Cf?Symbol.for("immer-draftable"):"__$immer_draftable",Ue=Cf?Symbol.for("immer-state"):"__$immer_state",Ea=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",hB={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(s){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+s},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(s){return"Cannot apply patch, path doesn't resolve: "+s},16:'Sets cannot have "replace" patches.',17:function(s){return"Unsupported patch operation: "+s},18:function(s){return"The plugin for '"+s+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+s+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(s){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+s+"'"},22:function(s){return"'current' expects a draft, got: "+s},23:function(s){return"'original' expects a draft, got: "+s},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},oT=""+Object.prototype.constructor,Os=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,Yg=Object.getOwnPropertyDescriptors||function(s){var e={};return Os(s).forEach(function(i){e[i]=Object.getOwnPropertyDescriptor(s,i)}),e},Af={},Fo={get:function(s,e){if(e===Ue)return s;var i=Vt(s);if(!pi(i,e))return function(a,c,u){var f,h=Hg(c,u);return h?"value"in h?h.value:(f=h.get)===null||f===void 0?void 0:f.call(a.k):void 0}(s,i,e);var l=i[e];return s.I||!hr(l)?l:l===Ef(s.t,e)?(wf(s),s.o[e]=Lo(s.A.h,l,s)):l},has:function(s,e){return e in Vt(s)},ownKeys:function(s){return Reflect.ownKeys(Vt(s))},set:function(s,e,i){var l=Hg(Vt(s),e);if(l!=null&&l.set)return l.set.call(s.k,i),!0;if(!s.P){var a=Ef(Vt(s),e),c=a==null?void 0:a[Ue];if(c&&c.t===i)return s.o[e]=i,s.R[e]=!1,!0;if(Zg(i,a)&&(i!==void 0||pi(s.t,e)))return!0;wf(s),vn(s)}return s.o[e]===i&&(i!==void 0||e in s.o)||Number.isNaN(i)&&Number.isNaN(s.o[e])||(s.o[e]=i,s.R[e]=!0),!0},deleteProperty:function(s,e){return Ef(s.t,e)!==void 0||e in s.t?(s.R[e]=!1,wf(s),vn(s)):delete s.R[e],s.o&&delete s.o[e],!0},getOwnPropertyDescriptor:function(s,e){var i=Vt(s),l=Reflect.getOwnPropertyDescriptor(i,e);return l&&{writable:!0,configurable:s.i!==1||e!=="length",enumerable:l.enumerable,value:i[e]}},defineProperty:function(){Wt(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Wt(12)}},Bo={};zr(Fo,function(s,e){Bo[s]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Bo.deleteProperty=function(s,e){return Bo.set.call(this,s,e,void 0)},Bo.set=function(s,e,i){return Fo.set.call(this,s[0],e,i,s[0])};var lT=function(){function s(i){var l=this;this.O=Jg,this.D=!0,this.produce=function(a,c,u){if(typeof a=="function"&&typeof c!="function"){var f=c;c=a;var h=l;return function(E){var w=this;E===void 0&&(E=f);for(var C=arguments.length,O=Array(C>1?C-1:0),I=1;I<C;I++)O[I-1]=arguments[I];return h.produce(E,function(P){var M;return(M=c).call.apply(M,[w,P].concat(O))})}}var d;if(typeof c!="function"&&Wt(6),u!==void 0&&typeof u!="function"&&Wt(7),hr(a)){var m=zg(l),p=Lo(l,a,void 0),v=!0;try{d=c(p),v=!1}finally{v?ba(m):xf(m)}return typeof Promise!="undefined"&&d instanceof Promise?d.then(function(E){return bf(m,u),Sf(E,m)},function(E){throw ba(m),E}):(bf(m,u),Sf(d,m))}if(!a||typeof a!="object"){if((d=c(a))===void 0&&(d=a),d===Of&&(d=void 0),l.D&&gf(d,!0),u){var y=[],S=[];dr("Patches").M(a,d,y,S),u(y,S)}return d}Wt(21,a)},this.produceWithPatches=function(a,c){if(typeof a=="function")return function(d){for(var m=arguments.length,p=Array(m>1?m-1:0),v=1;v<m;v++)p[v-1]=arguments[v];return l.produceWithPatches(d,function(y){return a.apply(void 0,[y].concat(p))})};var u,f,h=l.produce(a,c,function(d,m){u=d,f=m});return typeof Promise!="undefined"&&h instanceof Promise?h.then(function(d){return[d,u,f]}):[h,u,f]},typeof(i==null?void 0:i.useProxies)=="boolean"&&this.setUseProxies(i.useProxies),typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var e=s.prototype;return e.createDraft=function(i){hr(i)||Wt(8),Zr(i)&&(i=eT(i));var l=zg(this),a=Lo(this,i,void 0);return a[Ue].C=!0,xf(l),a},e.finishDraft=function(i,l){var a=i&&i[Ue],c=a.A;return bf(c,l),Sf(void 0,c)},e.setAutoFreeze=function(i){this.D=i},e.setUseProxies=function(i){i&&!Jg&&Wt(20),this.O=i},e.applyPatches=function(i,l){var a;for(a=l.length-1;a>=0;a--){var c=l[a];if(c.path.length===0&&c.op==="replace"){i=c.value;break}}a>-1&&(l=l.slice(a+1));var u=dr("Patches").$;return Zr(i)?u(i,l):this.produce(i,function(f){return u(f,l)})},s}(),Dn=new lT,aT=Dn.produce,dB=Dn.produceWithPatches.bind(Dn),mB=Dn.setAutoFreeze.bind(Dn),pB=Dn.setUseProxies.bind(Dn),gB=Dn.applyPatches.bind(Dn),yB=Dn.createDraft.bind(Dn),vB=Dn.finishDraft.bind(Dn);const bB=null;function xB(s){var e=t(function(){return n(typeof s=="function"?s():s,!0)}),i=e[1];return[e[0],o(function(l){i(typeof l=="function"?r(l):n(l))},[])]}function cT(s,e,i){var l=(0,g.useMemo)(function(){return aT(s)},[s]);return(0,g.useReducer)(l,e,i)}function uT(s,e){var i,l,a;switch(e.type){case"INIT":{s.steps=e.data.spec.steps.reduce((c,u)=>(c[u.id]={status:"open",id:u.id},c),{}),s.stepLogs=e.data.spec.steps.reduce((c,u)=>(c[u.id]=[],c),{}),s.loading=!1,s.error=void 0,s.completed=!1,s.task=e.data;return}case"LOGS":{const c=e.data;for(const u of c){const f=`${u.createdAt} ${u.body.message}`;if(!u.body.stepId||!((i=s.steps)!=null&&i[u.body.stepId]))continue;const h=(l=s.stepLogs)==null?void 0:l[u.body.stepId],d=(a=s.steps)==null?void 0:a[u.body.stepId];d&&u.body.status&&u.body.status!==d.status&&(d.status=u.body.status,d.status==="processing"&&(d.startedAt=u.createdAt),["cancelled","completed","failed"].includes(d.status)&&(d.endedAt=u.createdAt)),h==null||h.push(f)}return}case"COMPLETED":{s.completed=!0,s.output=e.data.body.output,s.error=e.data.body.error;return}case"CANCELLED":{s.cancelled=!0;return}case"RECOVERED":{for(const c in s.steps)s.steps.hasOwnProperty(c)&&(s.steps[c].startedAt=void 0,s.steps[c].endedAt=void 0,s.steps[c].status="open");return}case"ERROR":{s.error=e.data,s.loading=!1,s.completed=!0;return}default:return}}const fT=s=>{const e=(0,at.h_)(Gn.l),[i,l]=cT(uT,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,g.useEffect)(()=>{let a=!1,c,u,f=1;const h=()=>e.getTask(s).then(d=>{if(a)return;l({type:"INIT",data:d});const m=e.streamLogs({taskId:s}),p=new Array;function v(){if(p.length){const y=p.splice(0,p.length);l({type:"LOGS",data:y})}}u=setInterval(v,500),c=m.subscribe({next:y=>{switch(f=1,y.type){case"log":return p.push(y);case"cancelled":l({type:"CANCELLED"});return;case"completion":v(),l({type:"COMPLETED",data:y});return;case"recovered":l({type:"RECOVERED",data:y});return;default:throw new Error(`Unhandled event type ${y.type} in observer`)}},error:y=>{v();const S=3;y.message||(y.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${f>S?S:f}/${S} retries)`),setTimeout(()=>{f+=1,h()},15e3),l({type:"ERROR",data:y})}})},d=>{a||l({type:"ERROR",data:d})});return h(),()=>{a=!0,c&&c.unsubscribe(),u&&clearInterval(u)}},[e,l,s]),i};var kf=x(28235),Pf=x(49166),hT=x(93269),dT=x(8198),mT=x(15026);const pT=(0,Y.Z)(()=>({button:{color:({fontColor:s})=>s}})),gT=s=>{const{cancelEnabled:e,logsVisible:i,buttonBarVisible:l,onStartOver:a,onToggleLogs:c,onToggleButtonBar:u,taskId:f}=s,{getPageTheme:h}=(0,su.Z)(),d=h({themeId:"website"}),m=pT({fontColor:d.fontColor}),p=(0,at.h_)(Gn.l),v=(0,ao.z)(),[y,S]=(0,g.useState)(),[{status:E},{execute:w}]=(0,kf.r)(async()=>{f&&(v.captureEvent("cancelled","Template has been cancelled"),await p.cancelTask(f))}),{allowed:C}=(0,ni.g)({permission:Bi.LS}),{allowed:O}=(0,ni.g)({permission:Bi.Dy}),{allowed:I}=(0,ni.g)({permission:Bi.Wq}),P=O&&I;return g.createElement(g.Fragment,null,g.createElement(an.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:M=>{S(M.currentTarget)},"data-testid":"menu-button",className:m.button},g.createElement(tu.Z,null)),g.createElement(eu.ZP,{open:!!y,onClose:()=>S(void 0),anchorEl:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(qc.Z,null,g.createElement(An.Z,{onClick:()=>c==null?void 0:c(!i)},g.createElement(Cn.Z,null,g.createElement(dT.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:i?"Hide Logs":"Show Logs"})),g.createElement(An.Z,{onClick:()=>u==null?void 0:u(!l)},g.createElement(Cn.Z,null,g.createElement(mT.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:l?"Hide Button Bar":"Show Button Bar"})),g.createElement(An.Z,{onClick:a,disabled:e||!P,"data-testid":"start-over-task"},g.createElement(Cn.Z,null,g.createElement(hT.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Start Over"})),g.createElement(An.Z,{onClick:w,disabled:!e||E!=="not-executed"||!C,"data-testid":"cancel-task"},g.createElement(Cn.Z,null,g.createElement(Pf.Z,{fontSize:"small"})),g.createElement(On.Z,{primary:"Cancel"})))))};var Xg=x(96671),yT=x(35292);const vT=(0,Y.Z)({root:{"&:hover":{textDecoration:"none"}}}),bT=s=>{const{links:e=[]}=s.output,i=vT(),l=(0,lo.q)(),a=(0,ft.t)(Xg.w),c=u=>{var f;return(f=l.getSystemIcon(u))!=null?f:yT.Z};return g.createElement(g.Fragment,null,e.filter(({url:u,entityRef:f})=>u||f).map(({url:u,entityRef:f,title:h,icon:d})=>{if(f){const m=(0,Xn.of)(f),p=a(m);return{title:h,icon:d,url:p}}return{title:h,icon:d,url:u}}).map(({url:u,title:f,icon:h},d)=>{const m=c(h);return g.createElement(so.rU,{to:u,key:d,classes:{root:i.root}},g.createElement(kn.Z,{startIcon:g.createElement(m,null),component:"div",color:"primary"},f))}))},xT=s=>{const{output:{text:e=[]},index:i,setIndex:l}=s,a=(0,lo.q)(),c=u=>{var f;return(f=a.getSystemIcon(u))!=null?f:Qd.Z};return g.createElement(g.Fragment,null,e.filter(({content:u})=>u!==void 0).map(({title:u,icon:f},h)=>{const d=c(f);return g.createElement(kn.Z,{key:h,startIcon:g.createElement(d,null),component:"div",color:"primary",onClick:()=>{i!==h&&(l==null||l(h))},variant:i===h?"outlined":void 0},u)}))},ST=s=>{var c,u;const{output:e}=s,[i,l]=(0,g.useState)(void 0);(0,g.useEffect)(()=>{if(i===void 0&&(e!=null&&e.text)){const f=e.text.findIndex(h=>h.default);l(f>=0?f:0)}},[i,e]);const a=(0,g.useMemo)(()=>{var f;return i!==void 0?(f=e==null?void 0:e.text)==null?void 0:f[i]:null},[e,i]);return e?g.createElement(g.Fragment,null,g.createElement(he.Z,{paddingBottom:2},g.createElement(et.Z,null,g.createElement(he.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},g.createElement(xT,{output:e,index:i,setIndex:l}),g.createElement(bT,{output:e})))),a?g.createElement(he.Z,{paddingBottom:2},g.createElement(lm.r,{title:(c=a.title)!=null?c:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(he.Z,{padding:2,height:"100%"},g.createElement(b.S,{content:(u=a.content)!=null?u:""})))):null):null};var Qg=x(97136),_g=x(4614),ET=x(71140),wT=x(34063),CT=x(34812),OT=x(91750);const AT=(0,Y.Z)(s=>({root:{color:s.palette.text.disabled},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),kT=s=>{const e=AT(),{active:i,completed:l,error:a,skipped:c}=s,u=()=>i?g.createElement(_g.Z,{size:"20px"}):l?g.createElement(CT.Z,null):a?g.createElement(OT.Z,null):c?g.createElement(ET.Z,null):g.createElement(wT.Z,null);return g.createElement("div",{className:wn()(e.root,{[e.completed]:l,[e.error]:a})},u())};var PT=function(s,e){var i=(0,g.useRef)(function(){});(0,g.useEffect)(function(){i.current=s}),(0,g.useEffect)(function(){if(e!==null){var l=setInterval(function(){return i.current()},e||0);return function(){return clearInterval(l)}}},[e])};const qg=PT;var TT=x(49257);const IT=s=>{const[e,i]=(0,g.useState)(""),{step:l}=s,a=()=>l.startedAt&&l.endedAt&&e?null:l.startedAt&&l.endedAt?1:1e3,c=(0,g.useCallback)(()=>{if(!l.startedAt){i("");return}const u=l.endedAt?Fn.ou.fromISO(l.endedAt):Fn.ou.local(),f=Fn.ou.fromISO(l.startedAt),h=Fn.Xp.fromDateTimes(f,u).toDuration().valueOf();i(nu()(h,{round:!0}))},[l.endedAt,l.startedAt]);return(0,TT.n)(c),qg(c,a()),g.createElement(Ve.Z,{variant:"caption"},e)},DT=(0,Y.Z)(s=>({failed:{backgroundColor:s.palette.error.main},success:{backgroundColor:s.palette.success.main}})),MT=s=>{const e=DT();return s.isComplete?g.createElement(Wl.Z,{variant:"determinate",classes:{bar:s.isError?e.failed:e.success},value:100}):g.createElement(Wl.Z,{variant:"indeterminate"})},RT=s=>{var e,i;return g.createElement(et.Z,{style:{position:"relative",overflow:"hidden"}},g.createElement(MT,{isComplete:(e=s.isComplete)!=null?e:!1,isError:(i=s.isError)!=null?i:!1}),g.createElement(he.Z,{padding:2},g.createElement(ou.Z,{activeStep:s.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},s.steps.map(l=>{const a=l.status==="completed",c=l.status==="failed",u=l.status==="processing",f=l.status==="skipped",h={completed:a,error:c,active:u,skipped:f};return g.createElement(Bl.Z,{key:l.id},g.createElement(Qg.Z,null,g.createElement(jl.Z,{StepIconProps:h,StepIconComponent:kT,"data-testid":"step-label"},g.createElement(he.Z,null,l.name),!f&&g.createElement(IT,{step:l}))))}))))};var e0=x(78718);const LT=(0,Y.Z)({root:{width:"100%",height:"100%",position:"relative"}}),NT=s=>{const e=LT();return g.createElement("div",{className:e.root},g.createElement(e0.n,{text:Object.values(s.logs).map(i=>i.join(`
`)).filter(Boolean).join(`
`)}))},$T=(0,Y.Z)(s=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:s.spacing(1)},logsVisibilityButton:{marginRight:s.spacing(1)}})),FT=s=>{var ne,ie,fe,ye,ve,pe,xe,me;const{taskId:e}=(0,F.UO)(),i=(0,ft.t)(rt.QQ),l=(0,F.s0)(),a=(0,ao.z)(),c=(0,at.h_)(Gn.l),u=fT(e),f=$T(),h=(0,g.useMemo)(()=>{var Pe,Re;return(Re=(Pe=u.task)==null?void 0:Pe.spec.steps.map(Oe=>{var be;return{...Oe,...(be=u==null?void 0:u.steps)==null?void 0:be[Oe.id]}}))!=null?Re:[]},[u]),[d,m]=(0,g.useState)(!1),[p,v]=(0,g.useState)(!0),{allowed:y}=(0,ni.g)({permission:Bi.LS}),{allowed:S}=(0,ni.g)({permission:Bi.Dy}),{allowed:E}=(0,ni.g)({permission:Bi.Wq}),w=S&&E;(0,g.useEffect)(()=>{u.error&&m(!0)},[u.error]),(0,g.useEffect)(()=>{u.completed&&!u.error&&v(!1)},[u.error,u.completed]);const C=(0,g.useMemo)(()=>{for(let Pe=h.length-1;Pe>=0;Pe--)if(h[Pe].status!=="open")return Pe;return 0},[h]),O=(0,g.useCallback)(()=>{var be,Be,lt,Je,ut,ht;const{namespace:Pe,name:Re}=(Je=(lt=(Be=(be=u.task)==null?void 0:be.spec.templateInfo)==null?void 0:Be.entity)==null?void 0:lt.metadata)!=null?Je:{},Oe=(ht=(ut=u.task)==null?void 0:ut.spec.parameters)!=null?ht:{};!Pe||!Re||(a.captureEvent("click","Task has been started over"),l({pathname:i({namespace:Pe,templateName:Re}),search:`?${Ep().stringify({formData:JSON.stringify(Oe)})}`}))},[a,l,(ne=u.task)==null?void 0:ne.spec.parameters,(ye=(fe=(ie=u.task)==null?void 0:ie.spec.templateInfo)==null?void 0:fe.entity)==null?void 0:ye.metadata,i]),[{status:I},{execute:P}]=(0,kf.r)(async()=>{e&&(a.captureEvent("cancelled","Template has been cancelled"),await c.cancelTask(e))}),M=(ve=s.TemplateOutputsComponent)!=null?ve:ST,$=(me=(xe=(pe=u.task)==null?void 0:pe.spec.templateInfo)==null?void 0:xe.entity)==null?void 0:me.metadata.name,N=!(u.cancelled||u.completed);return g.createElement(ds.T,{themeId:"website"},g.createElement(ms.h,{pageTitleOverride:`Run of ${$}`,title:g.createElement("div",null,"Run of ",g.createElement("code",null,$)),subtitle:`Task ${e}`},g.createElement(gT,{cancelEnabled:N,logsVisible:d,buttonBarVisible:p,onStartOver:O,onToggleLogs:m,onToggleButtonBar:v,taskId:e})),g.createElement(Fi.V,{className:f.contentWrapper},u.error?g.createElement(he.Z,{paddingBottom:2},g.createElement(hs.y,{error:u.error,titleFormat:"markdown",title:u.error.message})):null,g.createElement(he.Z,{paddingBottom:2},g.createElement(RT,{steps:h,activeStep:C,isComplete:u.completed,isError:!!u.error})),g.createElement(M,{output:u.output}),p?g.createElement(he.Z,{paddingBottom:2},g.createElement(et.Z,null,g.createElement(he.Z,{padding:2},g.createElement("div",{className:f.buttonBar},g.createElement(kn.Z,{className:f.cancelButton,disabled:!N||I!=="not-executed"||!y,onClick:P,"data-testid":"cancel-button"},"Cancel"),g.createElement(kn.Z,{className:f.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>m(!d)},d?"Hide Logs":"Show Logs"),g.createElement(kn.Z,{variant:"contained",color:"primary",disabled:N||!w,onClick:O,"data-testid":"start-over-button"},"Start Over"))))):null,d?g.createElement(he.Z,{paddingBottom:2,height:"100%"},g.createElement(et.Z,{style:{height:"100%"}},g.createElement(he.Z,{padding:2,height:"100%"},g.createElement(NT,{logs:u.stepLogs})))):null))},Tf=window.showDirectoryPicker;class BT{constructor(e,i){this.path=e,this.handle=i}file(){return this.handle.getFile()}async save(e){const i=await this.handle.createWritable();await i.write(e),await i.close()}}class jT{constructor(e){this.handle=e}async listFiles(){const e=[];for await(const i of this.listDirectoryContents(this.handle))e.push(i);return e}async*listDirectoryContents(e,i=[]){for await(const l of e.values())if(l.kind==="file")yield new BT([...i,l.name].join("/"),l);else if(l.kind==="directory"){if(l.name===".git")continue;yield*this.listDirectoryContents(l,[...i,l.name])}}}class t0{static isSupported(){return!!Tf}static async requestDirectoryAccess(){if(!Tf)throw new Error("File system access is not supported");const e=await Tf();return new jT(e)}constructor(){}}const WT=1024;let VT=0;class Wn{constructor(e,i){this.from=e,this.to=i}}class Ge{constructor(e={}){this.id=VT++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=fn.match(e)),i=>{let l=e(i);return l===void 0?null:[this,l]}}}Ge.closedBy=new Ge({deserialize:s=>s.split(" ")}),Ge.openedBy=new Ge({deserialize:s=>s.split(" ")}),Ge.group=new Ge({deserialize:s=>s.split(" ")}),Ge.isolate=new Ge({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}}),Ge.contextHash=new Ge({perNode:!0}),Ge.lookAhead=new Ge({perNode:!0}),Ge.mounted=new Ge({perNode:!0});class jo{constructor(e,i,l){this.tree=e,this.overlay=i,this.parser=l}static get(e){return e&&e.props&&e.props[Ge.mounted.id]}}const ZT=Object.create(null);class fn{constructor(e,i,l,a=0){this.name=e,this.props=i,this.id=l,this.flags=a}static define(e){let i=e.props&&e.props.length?Object.create(null):ZT,l=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),a=new fn(e.name||"",i,e.id,l);if(e.props){for(let c of e.props)if(Array.isArray(c)||(c=c(a)),c){if(c[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[c[0].id]=c[1]}}return a}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(Ge.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let l in e)for(let a of l.split(" "))i[a]=e[l];return l=>{for(let a=l.prop(Ge.group),c=-1;c<(a?a.length:0);c++){let u=i[c<0?l.name:a[c]];if(u)return u}}}}fn.none=new fn("",Object.create(null),0,8);class If{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let l of this.types){let a=null;for(let c of e){let u=c(l);u&&(a||(a=Object.assign({},l.props)),a[u[0].id]=u[1])}i.push(a?new fn(l.name,a,l.id,l.flags):l)}return new If(i)}}const wa=new WeakMap,n0=new WeakMap;var Pt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Pt||(Pt={}));class yt{constructor(e,i,l,a,c){if(this.type=e,this.children=i,this.positions=l,this.length=a,this.props=null,c&&c.length){this.props=Object.create(null);for(let[u,f]of c)this.props[typeof u=="number"?u:u.id]=f}}toString(){let e=jo.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let l of this.children){let a=l.toString();a&&(i&&(i+=","),i+=a)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new Ca(this.topNode,e)}cursorAt(e,i=0,l=0){let a=wa.get(this)||this.topNode,c=new Ca(a);return c.moveTo(e,i),wa.set(this,c._tree),c}get topNode(){return new tn(this,0,0,null)}resolve(e,i=0){let l=Wo(wa.get(this)||this.topNode,e,i,!1);return wa.set(this,l),l}resolveInner(e,i=0){let l=Wo(n0.get(this)||this.topNode,e,i,!0);return n0.set(this,l),l}resolveStack(e,i=0){return HT(this,e,i)}iterate(e){let{enter:i,leave:l,from:a=0,to:c=this.length}=e,u=e.mode||0,f=(u&Pt.IncludeAnonymous)>0;for(let h=this.cursor(u|Pt.IncludeAnonymous);;){let d=!1;if(h.from<=c&&h.to>=a&&(!f&&h.type.isAnonymous||i(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&l&&(f||!h.type.isAnonymous)&&l(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:Lf(fn.none,this.children,this.positions,0,this.children.length,0,this.length,(i,l,a)=>new yt(this.type,i,l,a,this.propValues),e.makeTree||((i,l,a)=>new yt(fn.none,i,l,a)))}static build(e){return KT(e)}}yt.empty=new yt(fn.none,[],[],0);class Df{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Df(this.buffer,this.index)}}class gi{constructor(e,i,l){this.buffer=e,this.length=i,this.set=l}get type(){return fn.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],l=this.buffer[e+3],a=this.set.types[i],c=a.name;if(/\W/.test(c)&&!a.isError&&(c=JSON.stringify(c)),e+=4,l==e)return c;let u=[];for(;e<l;)u.push(this.childString(e)),e=this.buffer[e+3];return c+"("+u.join(",")+")"}findChild(e,i,l,a,c){let{buffer:u}=this,f=-1;for(let h=e;h!=i&&!(r0(c,a,u[h+1],u[h+2])&&(f=h,l>0));h=u[h+3]);return f}slice(e,i,l){let a=this.buffer,c=new Uint16Array(i-e),u=0;for(let f=e,h=0;f<i;){c[h++]=a[f++],c[h++]=a[f++]-l;let d=c[h++]=a[f++]-l;c[h++]=a[f++]-e,u=Math.max(u,d)}return new gi(c,u,this.set)}}function r0(s,e,i,l){switch(s){case-2:return i<e;case-1:return l>=e&&i<e;case 0:return i<e&&l>e;case 1:return i<=e&&l>e;case 2:return l>e;case 4:return!0}}function Wo(s,e,i,l){for(var a;s.from==s.to||(i<1?s.from>=e:s.from>e)||(i>-1?s.to<=e:s.to<e);){let u=!l&&s instanceof tn&&s.index<0?null:s.parent;if(!u)return s;s=u}let c=l?0:Pt.IgnoreOverlays;if(l)for(let u=s,f=u.parent;f;u=f,f=u.parent)u instanceof tn&&u.index<0&&((a=f.enter(e,i,c))===null||a===void 0?void 0:a.from)!=u.from&&(s=f);for(;;){let u=s.enter(e,i,c);if(!u)return s;s=u}}class i0{cursor(e=0){return new Ca(this,e)}getChild(e,i=null,l=null){let a=s0(this,e,i,l);return a.length?a[0]:null}getChildren(e,i=null,l=null){return s0(this,e,i,l)}resolve(e,i=0){return Wo(this,e,i,!1)}resolveInner(e,i=0){return Wo(this,e,i,!0)}matchContext(e){return Mf(this,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),l=this;for(;i;){let a=i.lastChild;if(!a||a.to!=i.to)break;a.type.isError&&a.from==a.to?(l=i,i=a.prevSibling):i=a}return l}get node(){return this}get next(){return this.parent}}class tn extends i0{constructor(e,i,l,a){super(),this._tree=e,this.from=i,this.index=l,this._parent=a}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,l,a,c=0){for(let u=this;;){for(let{children:f,positions:h}=u._tree,d=i>0?f.length:-1;e!=d;e+=i){let m=f[e],p=h[e]+u.from;if(r0(a,l,p,p+m.length)){if(m instanceof gi){if(c&Pt.ExcludeBuffers)continue;let v=m.findChild(0,m.buffer.length,i,l-p,a);if(v>-1)return new mr(new zT(u,m,e,p),null,v)}else if(c&Pt.IncludeAnonymous||!m.type.isAnonymous||Rf(m)){let v;if(!(c&Pt.IgnoreMounts)&&(v=jo.get(m))&&!v.overlay)return new tn(v.tree,p,e,u);let y=new tn(m,p,e,u);return c&Pt.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(i<0?m.children.length-1:0,i,l,a)}}}if(c&Pt.IncludeAnonymous||!u.type.isAnonymous||(u.index>=0?e=u.index+i:e=i<0?-1:u._parent._tree.children.length,u=u._parent,!u))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,l=0){let a;if(!(l&Pt.IgnoreOverlays)&&(a=jo.get(this._tree))&&a.overlay){let c=e-this.from;for(let{from:u,to:f}of a.overlay)if((i>0?u<=c:u<c)&&(i<0?f>=c:f>c))return new tn(a.tree,a.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,l)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function s0(s,e,i,l){let a=s.cursor(),c=[];if(!a.firstChild())return c;if(i!=null){for(let u=!1;!u;)if(u=a.type.is(i),!a.nextSibling())return c}for(;;){if(l!=null&&a.type.is(l))return c;if(a.type.is(e)&&c.push(a.node),!a.nextSibling())return l==null?c:[]}}function Mf(s,e,i=e.length-1){for(let l=s.parent;i>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}class zT{constructor(e,i,l,a){this.parent=e,this.buffer=i,this.index=l,this.start=a}}class mr extends i0{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,l){super(),this.context=e,this._parent=i,this.index=l,this.type=e.buffer.set.types[e.buffer.buffer[l]]}child(e,i,l){let{buffer:a}=this.context,c=a.findChild(this.index+4,a.buffer[this.index+3],e,i-this.context.start,l);return c<0?null:new mr(this.context,this,c)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,l=0){if(l&Pt.ExcludeBuffers)return null;let{buffer:a}=this.context,c=a.findChild(this.index+4,a.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return c<0?null:new mr(this.context,this,c)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mr(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new mr(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:l}=this.context,a=this.index+4,c=l.buffer[this.index+3];if(c>a){let u=l.buffer[this.index+1];e.push(l.slice(a,c,u)),i.push(0)}return new yt(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function o0(s){if(!s.length)return null;let e=0,i=s[0];for(let c=1;c<s.length;c++){let u=s[c];(u.from>i.from||u.to<i.to)&&(i=u,e=c)}let l=i instanceof tn&&i.index<0?null:i.parent,a=s.slice();return l?a[e]=l:a.splice(e,1),new UT(a,i)}class UT{constructor(e,i){this.heads=e,this.node=i}get next(){return o0(this.heads)}}function HT(s,e,i){let l=s.resolveInner(e,i),a=null;for(let c=l instanceof tn?l:l.context.parent;c;c=c.parent)if(c.index<0){let u=c.parent;(a||(a=[l])).push(u.resolve(e,i)),c=u}else{let u=jo.get(c.tree);if(u&&u.overlay&&u.overlay[0].from<=e&&u.overlay[u.overlay.length-1].to>=e){let f=new tn(u.tree,u.overlay[0].from+c.from,-1,c);(a||(a=[l])).push(Wo(f,e,i,!1))}}return a?o0(a):l}class Ca{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof tn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let l=e._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:l,buffer:a}=this.buffer;return this.type=i||a.set.types[a.buffer[e]],this.from=l+a.buffer[e+1],this.to=l+a.buffer[e+2],!0}yield(e){return e?e instanceof tn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,l){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,l,this.mode));let{buffer:a}=this.buffer,c=a.findChild(this.index+4,a.buffer[this.index+3],e,i-this.buffer.start,l);return c<0?!1:(this.stack.push(this.index),this.yieldBuf(c))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,l=this.mode){return this.buffer?l&Pt.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,l=this.stack.length-1;if(e<0){let a=l<0?0:this.stack[l]+4;if(this.index!=a)return this.yieldBuf(i.findChild(a,this.index,-1,0,4))}else{let a=i.buffer[this.index+3];if(a<(l<0?i.buffer.length:i.buffer[this.stack[l]+3]))return this.yieldBuf(a)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,l,{buffer:a}=this;if(a){if(e>0){if(this.index<a.buffer.buffer.length)return!1}else for(let c=0;c<this.index;c++)if(a.buffer.buffer[c+3]<this.index)return!1;({index:i,parent:l}=a)}else({index:i,_parent:l}=this._tree);for(;l;{index:i,_parent:l}=l)if(i>-1)for(let c=i+e,u=e<0?-1:l._tree.children.length;c!=u;c+=e){let f=l._tree.children[c];if(this.mode&Pt.IncludeAnonymous||f instanceof gi||!f.type.isAnonymous||Rf(f))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,l=0;if(e&&e.context==this.buffer)e:for(let a=this.index,c=this.stack.length;c>=0;){for(let u=e;u;u=u._parent)if(u.index==a){if(a==this.index)return u;i=u,l=c+1;break e}a=this.stack[--c]}for(let a=l;a<this.stack.length;a++)i=new mr(this.buffer,i,this.stack[a]);return this.bufferNode=new mr(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let l=0;;){let a=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(a=!0)}for(;a&&i&&i(this),a=this.type.isAnonymous,!this.nextSibling();){if(!l)return;this.parent(),l--,a=!0}}}matchContext(e){if(!this.buffer)return Mf(this.node,e);let{buffer:i}=this.buffer,{types:l}=i.set;for(let a=e.length-1,c=this.stack.length-1;a>=0;c--){if(c<0)return Mf(this.node,e,a);let u=l[i.buffer[this.stack[c]]];if(!u.isAnonymous){if(e[a]&&e[a]!=u.name)return!1;a--}}return!0}}function Rf(s){return s.children.some(e=>e instanceof gi||!e.type.isAnonymous||Rf(e))}function KT(s){var e;let{buffer:i,nodeSet:l,maxBufferLength:a=WT,reused:c=[],minRepeatType:u=l.types.length}=s,f=Array.isArray(i)?new Df(i,i.length):i,h=l.types,d=0,m=0;function p(M,$,N,ne,ie,fe){let{id:ye,start:ve,end:pe,size:xe}=f,me=m;for(;xe<0;)if(f.next(),xe==-1){let Be=c[ye];N.push(Be),ne.push(ve-M);return}else if(xe==-3){d=ye;return}else if(xe==-4){m=ye;return}else throw new RangeError(`Unrecognized record size: ${xe}`);let Pe=h[ye],Re,Oe,be=ve-M;if(pe-ve<=a&&(Oe=w(f.pos-$,ie))){let Be=new Uint16Array(Oe.size-Oe.skip),lt=f.pos-Oe.size,Je=Be.length;for(;f.pos>lt;)Je=C(Oe.start,Be,Je);Re=new gi(Be,pe-Oe.start,l),be=Oe.start-M}else{let Be=f.pos-xe;f.next();let lt=[],Je=[],ut=ye>=u?ye:-1,ht=0,pt=pe;for(;f.pos>Be;)ut>=0&&f.id==ut&&f.size>=0?(f.end<=pt-a&&(S(lt,Je,ve,ht,f.end,pt,ut,me),ht=lt.length,pt=f.end),f.next()):fe>2500?v(ve,Be,lt,Je):p(ve,Be,lt,Je,ut,fe+1);if(ut>=0&&ht>0&&ht<lt.length&&S(lt,Je,ve,ht,ve,pt,ut,me),lt.reverse(),Je.reverse(),ut>-1&&ht>0){let St=y(Pe);Re=Lf(Pe,lt,Je,0,lt.length,0,pe-ve,St,St)}else Re=E(Pe,lt,Je,pe-ve,me-pe)}N.push(Re),ne.push(be)}function v(M,$,N,ne){let ie=[],fe=0,ye=-1;for(;f.pos>$;){let{id:ve,start:pe,end:xe,size:me}=f;if(me>4)f.next();else{if(ye>-1&&pe<ye)break;ye<0&&(ye=xe-a),ie.push(ve,pe,xe),fe++,f.next()}}if(fe){let ve=new Uint16Array(fe*4),pe=ie[ie.length-2];for(let xe=ie.length-3,me=0;xe>=0;xe-=3)ve[me++]=ie[xe],ve[me++]=ie[xe+1]-pe,ve[me++]=ie[xe+2]-pe,ve[me++]=me;N.push(new gi(ve,ie[2]-pe,l)),ne.push(pe-M)}}function y(M){return($,N,ne)=>{let ie=0,fe=$.length-1,ye,ve;if(fe>=0&&(ye=$[fe])instanceof yt){if(!fe&&ye.type==M&&ye.length==ne)return ye;(ve=ye.prop(Ge.lookAhead))&&(ie=N[fe]+ye.length+ve)}return E(M,$,N,ne,ie)}}function S(M,$,N,ne,ie,fe,ye,ve){let pe=[],xe=[];for(;M.length>ne;)pe.push(M.pop()),xe.push($.pop()+N-ie);M.push(E(l.types[ye],pe,xe,fe-ie,ve-fe)),$.push(ie-N)}function E(M,$,N,ne,ie=0,fe){if(d){let ye=[Ge.contextHash,d];fe=fe?[ye].concat(fe):[ye]}if(ie>25){let ye=[Ge.lookAhead,ie];fe=fe?[ye].concat(fe):[ye]}return new yt(M,$,N,ne,fe)}function w(M,$){let N=f.fork(),ne=0,ie=0,fe=0,ye=N.end-a,ve={size:0,start:0,skip:0};e:for(let pe=N.pos-M;N.pos>pe;){let xe=N.size;if(N.id==$&&xe>=0){ve.size=ne,ve.start=ie,ve.skip=fe,fe+=4,ne+=4,N.next();continue}let me=N.pos-xe;if(xe<0||me<pe||N.start<ye)break;let Pe=N.id>=u?4:0,Re=N.start;for(N.next();N.pos>me;){if(N.size<0)if(N.size==-3)Pe+=4;else break e;else N.id>=u&&(Pe+=4);N.next()}ie=Re,ne+=xe,fe+=Pe}return($<0||ne==M)&&(ve.size=ne,ve.start=ie,ve.skip=fe),ve.size>4?ve:void 0}function C(M,$,N){let{id:ne,start:ie,end:fe,size:ye}=f;if(f.next(),ye>=0&&ne<u){let ve=N;if(ye>4){let pe=f.pos-(ye-4);for(;f.pos>pe;)N=C(M,$,N)}$[--N]=ve,$[--N]=fe-M,$[--N]=ie-M,$[--N]=ne}else ye==-3?d=ne:ye==-4&&(m=ne);return N}let O=[],I=[];for(;f.pos>0;)p(s.start||0,s.bufferStart||0,O,I,-1,0);let P=(e=s.length)!==null&&e!==void 0?e:O.length?I[0]+O[0].length:0;return new yt(h[s.topID],O.reverse(),I.reverse(),P)}const l0=new WeakMap;function Oa(s,e){if(!s.isAnonymous||e instanceof gi||e.type!=s)return 1;let i=l0.get(e);if(i==null){i=1;for(let l of e.children){if(l.type!=s||!(l instanceof yt)){i=1;break}i+=Oa(s,l)}l0.set(e,i)}return i}function Lf(s,e,i,l,a,c,u,f,h){let d=0;for(let S=l;S<a;S++)d+=Oa(s,e[S]);let m=Math.ceil(d*1.5/8),p=[],v=[];function y(S,E,w,C,O){for(let I=w;I<C;){let P=I,M=E[I],$=Oa(s,S[I]);for(I++;I<C;I++){let N=Oa(s,S[I]);if($+N>=m)break;$+=N}if(I==P+1){if($>m){let N=S[P];y(N.children,N.positions,0,N.children.length,E[P]+O);continue}p.push(S[P])}else{let N=E[I-1]+S[I-1].length-M;p.push(Lf(s,S,E,P,I,M,N,null,h))}v.push(M+O-c)}}return y(e,i,l,a,0),(f||h)(p,v,u)}class SB{constructor(){this.map=new WeakMap}setBuffer(e,i,l){let a=this.map.get(e);a||this.map.set(e,a=new Map),a.set(i,l)}getBuffer(e,i){let l=this.map.get(e);return l&&l.get(i)}set(e,i){e instanceof mr?this.setBuffer(e.context.buffer,e.index,i):e instanceof tn&&this.map.set(e.tree,i)}get(e){return e instanceof mr?this.getBuffer(e.context.buffer,e.index):e instanceof tn?this.map.get(e.tree):void 0}cursorSet(e,i){e.buffer?this.setBuffer(e.buffer.buffer,e.index,i):this.map.set(e.tree,i)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Ur{constructor(e,i,l,a,c=!1,u=!1){this.from=e,this.to=i,this.tree=l,this.offset=a,this.open=(c?1:0)|(u?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],l=!1){let a=[new Ur(0,e.length,e,0,!1,l)];for(let c of i)c.to>e.length&&a.push(c);return a}static applyChanges(e,i,l=128){if(!i.length)return e;let a=[],c=1,u=e.length?e[0]:null;for(let f=0,h=0,d=0;;f++){let m=f<i.length?i[f]:null,p=m?m.fromA:1e9;if(p-h>=l)for(;u&&u.from<p;){let v=u;if(h>=v.from||p<=v.to||d){let y=Math.max(v.from,h)-d,S=Math.min(v.to,p)-d;v=y>=S?null:new Ur(y,S,v.tree,v.offset+d,f>0,!!m)}if(v&&a.push(v),u.to>p)break;u=c<e.length?e[c++]:null}if(!m)break;h=m.toA,d=m.toA-m.toB}return a}}class a0{startParse(e,i,l){return typeof e=="string"&&(e=new GT(e)),l=l?l.length?l.map(a=>new Wn(a.from,a.to)):[new Wn(0,0)]:[new Wn(0,e.length)],this.createParse(e,i||[],l)}parse(e,i,l){let a=this.startParse(e,i,l);for(;;){let c=a.advance();if(c)return c}}}class GT{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}function EB(s){return(e,i,l,a)=>new YT(e,s,i,l,a)}class c0{constructor(e,i,l,a,c){this.parser=e,this.parse=i,this.overlay=l,this.target=a,this.from=c}}function u0(s){if(!s.length||s.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(s))}class JT{constructor(e,i,l,a,c,u,f){this.parser=e,this.predicate=i,this.mounts=l,this.index=a,this.start=c,this.target=u,this.prev=f,this.depth=0,this.ranges=[]}}const Nf=new Ge({perNode:!0});class YT{constructor(e,i,l,a,c){this.nest=i,this.input=l,this.fragments=a,this.ranges=c,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let l=this.baseParse.advance();if(!l)return null;if(this.baseParse=null,this.baseTree=l,this.startInner(),this.stoppedAt!=null)for(let a of this.inner)a.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let l=this.baseTree;return this.stoppedAt!=null&&(l=new yt(l.type,l.children,l.positions,l.length,l.propValues.concat([[Nf,this.stoppedAt]]))),l}let e=this.inner[this.innerDone],i=e.parse.advance();if(i){this.innerDone++;let l=Object.assign(Object.create(null),e.target.props);l[Ge.mounted.id]=new jo(i,e.overlay,e.parser),e.target.props=l}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].from<e&&(e=Math.min(e,this.inner[i].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(e)}startInner(){let e=new _T(this.fragments),i=null,l=null,a=new Ca(new tn(this.baseTree,this.ranges[0].from,0,null),Pt.IncludeAnonymous|Pt.IgnoreMounts);e:for(let c,u;;){let f=!0,h;if(this.stoppedAt!=null&&a.from>=this.stoppedAt)f=!1;else if(e.hasNode(a)){if(i){let d=i.mounts.find(m=>m.frag.from<=a.from&&m.frag.to>=a.to&&m.mount.overlay);if(d)for(let m of d.mount.overlay){let p=m.from+d.pos,v=m.to+d.pos;p>=a.from&&v<=a.to&&!i.ranges.some(y=>y.from<v&&y.to>p)&&i.ranges.push({from:p,to:v})}}f=!1}else if(l&&(u=XT(l.ranges,a.from,a.to)))f=u!=2;else if(!a.type.isAnonymous&&(c=this.nest(a,this.input))&&(a.from<a.to||!c.overlay)){a.tree||QT(a);let d=e.findMounts(a.from,c.parser);if(typeof c.overlay=="function")i=new JT(c.parser,c.overlay,d,this.inner.length,a.from,a.tree,i);else{let m=d0(this.ranges,c.overlay||(a.from<a.to?[new Wn(a.from,a.to)]:[]));m.length&&u0(m),(m.length||!c.overlay)&&this.inner.push(new c0(c.parser,m.length?c.parser.startParse(this.input,m0(d,m),m):c.parser.startParse(""),c.overlay?c.overlay.map(p=>new Wn(p.from-a.from,p.to-a.from)):null,a.tree,m.length?m[0].from:a.from)),c.overlay?m.length&&(l={ranges:m,depth:0,prev:l}):f=!1}}else i&&(h=i.predicate(a))&&(h===!0&&(h=new Wn(a.from,a.to)),h.from<h.to&&i.ranges.push(h));if(f&&a.firstChild())i&&i.depth++,l&&l.depth++;else for(;!a.nextSibling();){if(!a.parent())break e;if(i&&!--i.depth){let d=d0(this.ranges,i.ranges);d.length&&(u0(d),this.inner.splice(i.index,0,new c0(i.parser,i.parser.startParse(this.input,m0(i.mounts,d),d),i.ranges.map(m=>new Wn(m.from-i.start,m.to-i.start)),i.target,d[0].from))),i=i.prev}l&&!--l.depth&&(l=l.prev)}}}}function XT(s,e,i){for(let l of s){if(l.from>=i)break;if(l.to>e)return l.from<=e&&l.to>=i?2:1}return 0}function f0(s,e,i,l,a,c){if(e<i){let u=s.buffer[e+1];l.push(s.slice(e,i,u)),a.push(u-c)}}function QT(s){let{node:e}=s,i=[],l=e.context.buffer;do i.push(s.index),s.parent();while(!s.tree);let a=s.tree,c=a.children.indexOf(l),u=a.children[c],f=u.buffer,h=[c];function d(m,p,v,y,S,E){let w=i[E],C=[],O=[];f0(u,m,w,C,O,y);let I=f[w+1],P=f[w+2];h.push(C.length);let M=E?d(w+4,f[w+3],u.set.types[f[w]],I,P-I,E-1):e.toTree();return C.push(M),O.push(I-y),f0(u,f[w+3],p,C,O,y),new yt(v,C,O,S)}a.children[c]=d(0,f.length,fn.none,0,u.length,i.length-1);for(let m of h){let p=s.tree.children[m],v=s.tree.positions[m];s.yield(new tn(p,v+s.from,m,s._tree))}}class h0{constructor(e,i){this.offset=i,this.done=!1,this.cursor=e.cursor(Pt.IncludeAnonymous|Pt.IgnoreMounts)}moveTo(e){let{cursor:i}=this,l=e-this.offset;for(;!this.done&&i.from<l;)i.to>=e&&i.enter(l,1,Pt.IgnoreOverlays|Pt.ExcludeBuffers)||i.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let i=this.cursor.tree;;){if(i==e.tree)return!0;if(i.children.length&&i.positions[0]==0&&i.children[0]instanceof yt)i=i.children[0];else break}return!1}}class _T{constructor(e){var i;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let l=this.curFrag=e[0];this.curTo=(i=l.tree.prop(Nf))!==null&&i!==void 0?i:l.to,this.inner=new h0(l.tree,-l.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let i=this.curFrag=this.fragments[this.fragI];this.curTo=(e=i.tree.prop(Nf))!==null&&e!==void 0?e:i.to,this.inner=new h0(i.tree,-i.offset)}}findMounts(e,i){var l;let a=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let c=this.inner.cursor.node;c;c=c.parent){let u=(l=c.tree)===null||l===void 0?void 0:l.prop(Ge.mounted);if(u&&u.parser==i)for(let f=this.fragI;f<this.fragments.length;f++){let h=this.fragments[f];if(h.from>=c.to)break;h.tree==this.curFrag.tree&&a.push({frag:h,pos:c.from-h.offset,mount:u})}}}return a}}function d0(s,e){let i=null,l=e;for(let a=1,c=0;a<s.length;a++){let u=s[a-1].to,f=s[a].from;for(;c<l.length;c++){let h=l[c];if(h.from>=f)break;h.to<=u||(i||(l=i=e.slice()),h.from<u?(i[c]=new Wn(h.from,u),h.to>f&&i.splice(c+1,0,new Wn(f,h.to))):h.to>f?i[c--]=new Wn(f,h.to):i.splice(c--,1))}}return l}function qT(s,e,i,l){let a=0,c=0,u=!1,f=!1,h=-1e9,d=[];for(;;){let m=a==s.length?1e9:u?s[a].to:s[a].from,p=c==e.length?1e9:f?e[c].to:e[c].from;if(u!=f){let v=Math.max(h,i),y=Math.min(m,p,l);v<y&&d.push(new Wn(v,y))}if(h=Math.min(m,p),h==1e9)break;m==h&&(u?(u=!1,a++):u=!0),p==h&&(f?(f=!1,c++):f=!0)}return d}function m0(s,e){let i=[];for(let{pos:l,mount:a,frag:c}of s){let u=l+(a.overlay?a.overlay[0].from:0),f=u+a.tree.length,h=Math.max(c.from,u),d=Math.min(c.to,f);if(a.overlay){let m=a.overlay.map(v=>new Wn(v.from+l,v.to+l)),p=qT(e,m,h,d);for(let v=0,y=h;;v++){let S=v==p.length,E=S?d:p[v].from;if(E>y&&i.push(new Ur(y,E,a.tree,-u,c.from>=y||c.openStart,c.to<=E||c.openEnd)),S)break;y=p[v].to}}else i.push(new Ur(h,d,a.tree,-u,c.from>=u||c.openStart,c.to<=f||c.openEnd))}return i}class ct{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,l){[e,i]=As(this,e,i);let a=[];return this.decompose(0,e,a,2),l.length&&l.decompose(0,l.length,a,3),this.decompose(i,this.length,a,1),pr.from(a,this.length-(i-e)+l.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){[e,i]=As(this,e,i);let l=[];return this.decompose(e,i,l,0),pr.from(l,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),l=this.length-this.scanIdentical(e,-1),a=new Vo(this),c=new Vo(e);for(let u=i,f=i;;){if(a.next(u),c.next(u),u=0,a.lineBreak!=c.lineBreak||a.done!=c.done||a.value!=c.value)return!1;if(f+=a.value.length,a.done||f>=l)return!0}}iter(e=1){return new Vo(this,e)}iterRange(e,i=this.length){return new g0(this,e,i)}iterLines(e,i){let l;if(e==null)l=this.iter();else{i==null&&(i=this.lines+1);let a=this.line(e).from;l=this.iterRange(a,Math.max(a,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new y0(l)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ct.empty:e.length<=32?new Rt(e):pr.from(Rt.split(e,[]))}}class Rt extends ct{constructor(e,i=eI(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,l,a){for(let c=0;;c++){let u=this.text[c],f=a+u.length;if((i?l:f)>=e)return new tI(a,f,l,u);a=f+1,l++}}decompose(e,i,l,a){let c=e<=0&&i>=this.length?this:new Rt(p0(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(a&1){let u=l.pop(),f=Aa(c.text,u.text.slice(),0,c.length);if(f.length<=32)l.push(new Rt(f,u.length+c.length));else{let h=f.length>>1;l.push(new Rt(f.slice(0,h)),new Rt(f.slice(h)))}}else l.push(c)}replace(e,i,l){if(!(l instanceof Rt))return super.replace(e,i,l);[e,i]=As(this,e,i);let a=Aa(this.text,Aa(l.text,p0(this.text,0,e)),i),c=this.length+l.length-(i-e);return a.length<=32?new Rt(a,c):pr.from(Rt.split(a,[]),c)}sliceString(e,i=this.length,l=`
`){[e,i]=As(this,e,i);let a="";for(let c=0,u=0;c<=i&&u<this.text.length;u++){let f=this.text[u],h=c+f.length;c>e&&u&&(a+=l),e<h&&i>c&&(a+=f.slice(Math.max(0,e-c),i-c)),c=h+1}return a}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let l=[],a=-1;for(let c of e)l.push(c),a+=c.length+1,l.length==32&&(i.push(new Rt(l,a)),l=[],a=-1);return a>-1&&i.push(new Rt(l,a)),i}}class pr extends ct{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let l of e)this.lines+=l.lines}lineInner(e,i,l,a){for(let c=0;;c++){let u=this.children[c],f=a+u.length,h=l+u.lines-1;if((i?h:f)>=e)return u.lineInner(e,i,l,a);a=f+1,l=h+1}}decompose(e,i,l,a){for(let c=0,u=0;u<=i&&c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(e<=h&&i>=u){let d=a&((u<=e?1:0)|(h>=i?2:0));u>=e&&h<=i&&!d?l.push(f):f.decompose(e-u,i-u,l,d)}u=h+1}}replace(e,i,l){if([e,i]=As(this,e,i),l.lines<this.lines)for(let a=0,c=0;a<this.children.length;a++){let u=this.children[a],f=c+u.length;if(e>=c&&i<=f){let h=u.replace(e-c,i-c,l),d=this.lines-u.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let m=this.children.slice();return m[a]=h,new pr(m,this.length-(i-e)+l.length)}return super.replace(c,f,h)}c=f+1}return super.replace(e,i,l)}sliceString(e,i=this.length,l=`
`){[e,i]=As(this,e,i);let a="";for(let c=0,u=0;c<this.children.length&&u<=i;c++){let f=this.children[c],h=u+f.length;u>e&&c&&(a+=l),e<h&&i>u&&(a+=f.sliceString(e-u,i-u,l)),u=h+1}return a}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof pr))return 0;let l=0,[a,c,u,f]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;a+=i,c+=i){if(a==u||c==f)return l;let h=this.children[a],d=e.children[c];if(h!=d)return l+h.scanIdentical(d,i);l+=h.length+1}}static from(e,i=e.reduce((l,a)=>l+a.length+1,-1)){let l=0;for(let y of e)l+=y.lines;if(l<32){let y=[];for(let S of e)S.flatten(y);return new Rt(y,i)}let a=Math.max(32,l>>5),c=a<<1,u=a>>1,f=[],h=0,d=-1,m=[];function p(y){let S;if(y.lines>c&&y instanceof pr)for(let E of y.children)p(E);else y.lines>u&&(h>u||!h)?(v(),f.push(y)):y instanceof Rt&&h&&(S=m[m.length-1])instanceof Rt&&y.lines+S.lines<=32?(h+=y.lines,d+=y.length+1,m[m.length-1]=new Rt(S.text.concat(y.text),S.length+1+y.length)):(h+y.lines>a&&v(),h+=y.lines,d+=y.length+1,m.push(y))}function v(){h!=0&&(f.push(m.length==1?m[0]:pr.from(m,d)),d=-1,h=m.length=0)}for(let y of e)p(y);return v(),f.length==1?f[0]:new pr(f,i)}}ct.empty=new Rt([""],0);function eI(s){let e=-1;for(let i of s)e+=i.length+1;return e}function Aa(s,e,i=0,l=1e9){for(let a=0,c=0,u=!0;c<s.length&&a<=l;c++){let f=s[c],h=a+f.length;h>=i&&(h>l&&(f=f.slice(0,l-a)),a<i&&(f=f.slice(i-a)),u?(e[e.length-1]+=f,u=!1):e.push(f)),a=h+1}return e}function p0(s,e,i){return Aa(s,[""],e,i)}class Vo{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Rt?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let l=this.nodes.length-1,a=this.nodes[l],c=this.offsets[l],u=c>>1,f=a instanceof Rt?a.text.length:a.children.length;if(u==(i>0?f:0)){if(l==0)return this.done=!0,this.value="",this;i>0&&this.offsets[l-1]++,this.nodes.pop(),this.offsets.pop()}else if((c&1)==(i>0?0:1)){if(this.offsets[l]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(a instanceof Rt){let h=a.text[u+(i<0?-1:0)];if(this.offsets[l]+=i,h.length>Math.max(0,e))return this.value=e==0?h:i>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=a.children[u+(i<0?-1:0)];e>h.length?(e-=h.length,this.offsets[l]+=i):(i<0&&this.offsets[l]--,this.nodes.push(h),this.offsets.push(i>0?1:(h instanceof Rt?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class g0{constructor(e,i,l){this.value="",this.done=!1,this.cursor=new Vo(e,i>l?-1:1),this.pos=i>l?e.length:0,this.from=Math.min(i,l),this.to=Math.max(i,l)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let l=i<0?this.pos-this.from:this.to-this.pos;e>l&&(e=l),l-=e;let{value:a}=this.cursor.next(e);return this.pos+=(a.length+e)*i,this.value=a.length<=l?a:i<0?a.slice(a.length-l):a.slice(0,l),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class y0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:l,value:a}=this.inner.next(e);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):l?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=a,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(ct.prototype[Symbol.iterator]=function(){return this.iter()},Vo.prototype[Symbol.iterator]=g0.prototype[Symbol.iterator]=y0.prototype[Symbol.iterator]=function(){return this});class tI{constructor(e,i,l,a){this.from=e,this.to=i,this.number=l,this.text=a}get length(){return this.to-this.from}}function As(s,e,i){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,i))]}let ks="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<ks.length;s++)ks[s]+=ks[s-1];function nI(s){for(let e=1;e<ks.length;e+=2)if(ks[e]>s)return ks[e-1]<=s;return!1}function v0(s){return s>=127462&&s<=127487}const b0=8205;function Gt(s,e,i=!0,l=!0){return(i?x0:rI)(s,e,l)}function x0(s,e,i){if(e==s.length)return e;e&&S0(s.charCodeAt(e))&&E0(s.charCodeAt(e-1))&&e--;let l=Jt(s,e);for(e+=Vn(l);e<s.length;){let a=Jt(s,e);if(l==b0||a==b0||i&&nI(a))e+=Vn(a),l=a;else if(v0(a)){let c=0,u=e-2;for(;u>=0&&v0(Jt(s,u));)c++,u-=2;if(c%2==0)break;e+=2}else break}return e}function rI(s,e,i){for(;e>0;){let l=x0(s,e-2,i);if(l<e)return l;e--}return 0}function S0(s){return s>=56320&&s<57344}function E0(s){return s>=55296&&s<56320}function Jt(s,e){let i=s.charCodeAt(e);if(!E0(i)||e+1==s.length)return i;let l=s.charCodeAt(e+1);return S0(l)?(i-55296<<10)+(l-56320)+65536:i}function $f(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function Vn(s){return s<65536?1:2}const Ff=/\r\n?|\n/;var hn=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(hn||(hn={}));class gr{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i+1];e+=l<0?this.sections[i]:l}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,l=0,a=0;i<this.sections.length;){let c=this.sections[i++],u=this.sections[i++];u<0?(e(l,a,c),a+=c):a+=u,l+=c}}iterChangedRanges(e,i=!1){Bf(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let l=this.sections[i++],a=this.sections[i++];a<0?e.push(l,a):e.push(a,l)}return new gr(e)}composeDesc(e){return this.empty?e:e.empty?this:w0(this,e)}mapDesc(e,i=!1){return e.empty?this:jf(this,e,i)}mapPos(e,i=-1,l=hn.Simple){let a=0,c=0;for(let u=0;u<this.sections.length;){let f=this.sections[u++],h=this.sections[u++],d=a+f;if(h<0){if(d>e)return c+(e-a);c+=f}else{if(l!=hn.Simple&&d>=e&&(l==hn.TrackDel&&a<e&&d>e||l==hn.TrackBefore&&a<e||l==hn.TrackAfter&&d>e))return null;if(d>e||d==e&&i<0&&!f)return e==a||i<0?c:c+h;c+=h}a=d}if(e>a)throw new RangeError(`Position ${e} is out of range for changeset of length ${a}`);return c}touchesRange(e,i=e){for(let l=0,a=0;l<this.sections.length&&a<=i;){let c=this.sections[l++],u=this.sections[l++],f=a+c;if(u>=0&&a<=i&&f>=e)return a<e&&f>i?"cover":!0;a=f}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let l=this.sections[i++],a=this.sections[i++];e+=(e?" ":"")+l+(a>=0?":"+a:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new gr(e)}static create(e){return new gr(e)}}class Zt extends gr{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Bf(this,(i,l,a,c,u)=>e=e.replace(a,a+(l-i),u),!1),e}mapDesc(e,i=!1){return jf(this,e,i,!0)}invert(e){let i=this.sections.slice(),l=[];for(let a=0,c=0;a<i.length;a+=2){let u=i[a],f=i[a+1];if(f>=0){i[a]=f,i[a+1]=u;let h=a>>1;for(;l.length<h;)l.push(ct.empty);l.push(u?e.slice(c,c+u):ct.empty)}c+=u}return new Zt(i,l)}compose(e){return this.empty?e:e.empty?this:w0(this,e,!0)}map(e,i=!1){return e.empty?this:jf(this,e,i,!0)}iterChanges(e,i=!1){Bf(this,e,i)}get desc(){return gr.create(this.sections)}filter(e){let i=[],l=[],a=[],c=new Zo(this);e:for(let u=0,f=0;;){let h=u==e.length?1e9:e[u++];for(;f<h||f==h&&c.len==0;){if(c.done)break e;let m=Math.min(c.len,h-f);nn(a,m,-1);let p=c.ins==-1?-1:c.off==0?c.ins:0;nn(i,m,p),p>0&&yi(l,i,c.text),c.forward(m),f+=m}let d=e[u++];for(;f<d;){if(c.done)break e;let m=Math.min(c.len,d-f);nn(i,m,-1),nn(a,m,c.ins==-1?-1:c.off==0?c.ins:0),c.forward(m),f+=m}}return{changes:new Zt(i,l),filtered:gr.create(a)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i],a=this.sections[i+1];a<0?e.push(l):a==0?e.push([l]):e.push([l].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,l){let a=[],c=[],u=0,f=null;function h(m=!1){if(!m&&!a.length)return;u<i&&nn(a,i-u,-1);let p=new Zt(a,c);f=f?f.compose(p.map(f)):p,a=[],c=[],u=0}function d(m){if(Array.isArray(m))for(let p of m)d(p);else if(m instanceof Zt){if(m.length!=i)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${i})`);h(),f=f?f.compose(m.map(f)):m}else{let{from:p,to:v=p,insert:y}=m;if(p>v||p<0||v>i)throw new RangeError(`Invalid change range ${p} to ${v} (in doc of length ${i})`);let S=y?typeof y=="string"?ct.of(y.split(l||Ff)):y:ct.empty,E=S.length;if(p==v&&E==0)return;p<u&&h(),p>u&&nn(a,p-u,-1),nn(a,v-p,E),yi(c,a,S),u=v}}return d(e),h(!f),f}static empty(e){return new Zt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],l=[];for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")i.push(c,-1);else{if(!Array.isArray(c)||typeof c[0]!="number"||c.some((u,f)=>f&&typeof u!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(c.length==1)i.push(c[0],0);else{for(;l.length<a;)l.push(ct.empty);l[a]=ct.of(c.slice(1)),i.push(c[0],l[a].length)}}}return new Zt(i,l)}static createSet(e,i){return new Zt(e,i)}}function nn(s,e,i,l=!1){if(e==0&&i<=0)return;let a=s.length-2;a>=0&&i<=0&&i==s[a+1]?s[a]+=e:e==0&&s[a]==0?s[a+1]+=i:l?(s[a]+=e,s[a+1]+=i):s.push(e,i)}function yi(s,e,i){if(i.length==0)return;let l=e.length-2>>1;if(l<s.length)s[s.length-1]=s[s.length-1].append(i);else{for(;s.length<l;)s.push(ct.empty);s.push(i)}}function Bf(s,e,i){let l=s.inserted;for(let a=0,c=0,u=0;u<s.sections.length;){let f=s.sections[u++],h=s.sections[u++];if(h<0)a+=f,c+=f;else{let d=a,m=c,p=ct.empty;for(;d+=f,m+=h,h&&l&&(p=p.append(l[u-2>>1])),!(i||u==s.sections.length||s.sections[u+1]<0);)f=s.sections[u++],h=s.sections[u++];e(a,d,c,m,p),a=d,c=m}}}function jf(s,e,i,l=!1){let a=[],c=l?[]:null,u=new Zo(s),f=new Zo(e);for(let h=-1;;)if(u.ins==-1&&f.ins==-1){let d=Math.min(u.len,f.len);nn(a,d,-1),u.forward(d),f.forward(d)}else if(f.ins>=0&&(u.ins<0||h==u.i||u.off==0&&(f.len<u.len||f.len==u.len&&!i))){let d=f.len;for(nn(a,f.ins,-1);d;){let m=Math.min(u.len,d);u.ins>=0&&h<u.i&&u.len<=m&&(nn(a,0,u.ins),c&&yi(c,a,u.text),h=u.i),u.forward(m),d-=m}f.next()}else if(u.ins>=0){let d=0,m=u.len;for(;m;)if(f.ins==-1){let p=Math.min(m,f.len);d+=p,m-=p,f.forward(p)}else if(f.ins==0&&f.len<m)m-=f.len,f.next();else break;nn(a,d,h<u.i?u.ins:0),c&&h<u.i&&yi(c,a,u.text),h=u.i,u.forward(u.len-m)}else{if(u.done&&f.done)return c?Zt.createSet(a,c):gr.create(a);throw new Error("Mismatched change set lengths")}}function w0(s,e,i=!1){let l=[],a=i?[]:null,c=new Zo(s),u=new Zo(e);for(let f=!1;;){if(c.done&&u.done)return a?Zt.createSet(l,a):gr.create(l);if(c.ins==0)nn(l,c.len,0,f),c.next();else if(u.len==0&&!u.done)nn(l,0,u.ins,f),a&&yi(a,l,u.text),u.next();else{if(c.done||u.done)throw new Error("Mismatched change set lengths");{let h=Math.min(c.len2,u.len),d=l.length;if(c.ins==-1){let m=u.ins==-1?-1:u.off?0:u.ins;nn(l,h,m,f),a&&m&&yi(a,l,u.text)}else u.ins==-1?(nn(l,c.off?0:c.len,h,f),a&&yi(a,l,c.textBit(h))):(nn(l,c.off?0:c.len,u.off?0:u.ins,f),a&&!u.off&&yi(a,l,u.text));f=(c.ins>h||u.ins>=0&&u.len>h)&&(f||l.length>d),c.forward2(h),u.forward(h)}}}}class Zo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?ct.empty:e[i]}textBit(e){let{inserted:i}=this.set,l=this.i-2>>1;return l>=i.length&&!e?ct.empty:i[l].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ki{constructor(e,i,l){this.from=e,this.to=i,this.flags=l}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let l,a;return this.empty?l=a=e.mapPos(this.from,i):(l=e.mapPos(this.from,1),a=e.mapPos(this.to,-1)),l==this.from&&a==this.to?this:new Ki(l,a,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return ae.range(e,i);let l=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return ae.range(this.anchor,l)}eq(e,i=!1){return this.anchor==e.anchor&&this.head==e.head&&(!i||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ae.range(e.anchor,e.head)}static create(e,i,l){return new Ki(e,i,l)}}class ae{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:ae.create(this.ranges.map(l=>l.map(e,i)),this.mainIndex)}eq(e,i=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let l=0;l<this.ranges.length;l++)if(!this.ranges[l].eq(e.ranges[l],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ae([this.main],0)}addRange(e,i=!0){return ae.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let l=this.ranges.slice();return l[i]=e,ae.create(l,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ae(e.ranges.map(i=>Ki.fromJSON(i)),e.main)}static single(e,i=e){return new ae([ae.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let l=0,a=0;a<e.length;a++){let c=e[a];if(c.empty?c.from<=l:c.from<l)return ae.normalized(e.slice(),i);l=c.to}return new ae(e,i)}static cursor(e,i=0,l,a){return Ki.create(e,e,(i==0?0:i<0?8:16)|(l==null?7:Math.min(6,l))|(a!=null?a:16777215)<<6)}static range(e,i,l,a){let c=(l!=null?l:16777215)<<6|(a==null?7:Math.min(6,a));return i<e?Ki.create(i,e,48|c):Ki.create(e,i,(i>e?8:0)|c)}static normalized(e,i=0){let l=e[i];e.sort((a,c)=>a.from-c.from),i=e.indexOf(l);for(let a=1;a<e.length;a++){let c=e[a],u=e[a-1];if(c.empty?c.from<=u.to:c.from<u.to){let f=u.from,h=Math.max(c.to,u.to);a<=i&&i--,e.splice(--a,2,c.anchor>c.head?ae.range(h,f):ae.range(f,h))}}return new ae(e,i)}}function C0(s,e){for(let i of s.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let Wf=0;class ke{constructor(e,i,l,a,c){this.combine=e,this.compareInput=i,this.compare=l,this.isStatic=a,this.id=Wf++,this.default=e([]),this.extensions=typeof c=="function"?c(this):c}get reader(){return this}static define(e={}){return new ke(e.combine||(i=>i),e.compareInput||((i,l)=>i===l),e.compare||(e.combine?(i,l)=>i===l:Vf),!!e.static,e.enables)}of(e){return new ka([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new ka(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new ka(e,this,2,i)}from(e,i){return i||(i=l=>l),this.compute([e],l=>i(l.field(e)))}}function Vf(s,e){return s==e||s.length==e.length&&s.every((i,l)=>i===e[l])}class ka{constructor(e,i,l,a){this.dependencies=e,this.facet=i,this.type=l,this.value=a,this.id=Wf++}dynamicSlot(e){var i;let l=this.value,a=this.facet.compareInput,c=this.id,u=e[c]>>1,f=this.type==2,h=!1,d=!1,m=[];for(let p of this.dependencies)p=="doc"?h=!0:p=="selection"?d=!0:((i=e[p.id])!==null&&i!==void 0?i:1)&1||m.push(e[p.id]);return{create(p){return p.values[u]=l(p),1},update(p,v){if(h&&v.docChanged||d&&(v.docChanged||v.selection)||Zf(p,m)){let y=l(p);if(f?!O0(y,p.values[u],a):!a(y,p.values[u]))return p.values[u]=y,1}return 0},reconfigure:(p,v)=>{let y,S=v.config.address[c];if(S!=null){let E=Ia(v,S);if(this.dependencies.every(w=>w instanceof ke?v.facet(w)===p.facet(w):w instanceof Lt?v.field(w,!1)==p.field(w,!1):!0)||(f?O0(y=l(p),E,a):a(y=l(p),E)))return p.values[u]=E,0}else y=l(p);return p.values[u]=y,1}}}}function O0(s,e,i){if(s.length!=e.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],e[l]))return!1;return!0}function Zf(s,e){let i=!1;for(let l of e)Uo(s,l)&1&&(i=!0);return i}function iI(s,e,i){let l=i.map(h=>s[h.id]),a=i.map(h=>h.type),c=l.filter(h=>!(h&1)),u=s[e.id]>>1;function f(h){let d=[];for(let m=0;m<l.length;m++){let p=Ia(h,l[m]);if(a[m]==2)for(let v of p)d.push(v);else d.push(p)}return e.combine(d)}return{create(h){for(let d of l)Uo(h,d);return h.values[u]=f(h),1},update(h,d){if(!Zf(h,c))return 0;let m=f(h);return e.compare(m,h.values[u])?0:(h.values[u]=m,1)},reconfigure(h,d){let m=Zf(h,l),p=d.config.facets[e.id],v=d.facet(e);if(p&&!m&&Vf(i,p))return h.values[u]=v,0;let y=f(h);return e.compare(y,v)?(h.values[u]=v,0):(h.values[u]=y,1)}}}const A0=ke.define({static:!0});class Lt{constructor(e,i,l,a,c){this.id=e,this.createF=i,this.updateF=l,this.compareF=a,this.spec=c,this.provides=void 0}static define(e){let i=new Lt(Wf++,e.create,e.update,e.compare||((l,a)=>l===a),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(A0).find(l=>l.field==this);return((i==null?void 0:i.create)||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:l=>(l.values[i]=this.create(l),1),update:(l,a)=>{let c=l.values[i],u=this.updateF(c,a);return this.compareF(c,u)?0:(l.values[i]=u,1)},reconfigure:(l,a)=>a.config.address[this.id]!=null?(l.values[i]=a.field(this),0):(l.values[i]=this.create(l),1)}}init(e){return[this,A0.of({field:this,create:e})]}get extension(){return this}}const Gi={lowest:4,low:3,default:2,high:1,highest:0};function zo(s){return e=>new k0(e,s)}const vi={highest:zo(Gi.highest),high:zo(Gi.high),default:zo(Gi.default),low:zo(Gi.low),lowest:zo(Gi.lowest)};class k0{constructor(e,i){this.inner=e,this.prec=i}}class Pa{of(e){return new zf(this,e)}reconfigure(e){return Pa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class zf{constructor(e,i){this.compartment=e,this.inner=i}}class Ta{constructor(e,i,l,a,c,u){for(this.base=e,this.compartments=i,this.dynamicSlots=l,this.address=a,this.staticValues=c,this.facets=u,this.statusTemplate=[];this.statusTemplate.length<l.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,l){let a=[],c=Object.create(null),u=new Map;for(let v of sI(e,i,u))v instanceof Lt?a.push(v):(c[v.facet.id]||(c[v.facet.id]=[])).push(v);let f=Object.create(null),h=[],d=[];for(let v of a)f[v.id]=d.length<<1,d.push(y=>v.slot(y));let m=l==null?void 0:l.config.facets;for(let v in c){let y=c[v],S=y[0].facet,E=m&&m[v]||[];if(y.every(w=>w.type==0))if(f[S.id]=h.length<<1|1,Vf(E,y))h.push(l.facet(S));else{let w=S.combine(y.map(C=>C.value));h.push(l&&S.compare(w,l.facet(S))?l.facet(S):w)}else{for(let w of y)w.type==0?(f[w.id]=h.length<<1|1,h.push(w.value)):(f[w.id]=d.length<<1,d.push(C=>w.dynamicSlot(C)));f[S.id]=d.length<<1,d.push(w=>iI(w,S,y))}}let p=d.map(v=>v(f));return new Ta(e,u,p,f,h,c)}}function sI(s,e,i){let l=[[],[],[],[],[]],a=new Map;function c(u,f){let h=a.get(u);if(h!=null){if(h<=f)return;let d=l[h].indexOf(u);d>-1&&l[h].splice(d,1),u instanceof zf&&i.delete(u.compartment)}if(a.set(u,f),Array.isArray(u))for(let d of u)c(d,f);else if(u instanceof zf){if(i.has(u.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(u.compartment)||u.inner;i.set(u.compartment,d),c(d,f)}else if(u instanceof k0)c(u.inner,u.prec);else if(u instanceof Lt)l[f].push(u),u.provides&&c(u.provides,f);else if(u instanceof ka)l[f].push(u),u.facet.extensions&&c(u.facet.extensions,Gi.default);else{let d=u.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${u}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);c(d,f)}}return c(s,Gi.default),l.reduce((u,f)=>u.concat(f))}function Uo(s,e){if(e&1)return 2;let i=e>>1,l=s.status[i];if(l==4)throw new Error("Cyclic dependency between fields and/or facets");if(l&2)return l;s.status[i]=4;let a=s.computeSlot(s,s.config.dynamicSlots[i]);return s.status[i]=2|a}function Ia(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const P0=ke.define(),Uf=ke.define({combine:s=>s.some(e=>e),static:!0}),T0=ke.define({combine:s=>s.length?s[0]:void 0,static:!0}),I0=ke.define(),D0=ke.define(),M0=ke.define(),R0=ke.define({combine:s=>s.length?s[0]:!1});class yr{constructor(e,i){this.type=e,this.value=i}static define(){return new oI}}class oI{of(e){return new yr(this,e)}}class lI{constructor(e){this.map=e}of(e){return new ze(this,e)}}class ze{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new ze(this.type,i)}is(e){return this.type==e}static define(e={}){return new lI(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let l=[];for(let a of e){let c=a.map(i);c&&l.push(c)}return l}}ze.reconfigure=ze.define(),ze.appendConfig=ze.define();class zt{constructor(e,i,l,a,c,u){this.startState=e,this.changes=i,this.selection=l,this.effects=a,this.annotations=c,this.scrollIntoView=u,this._doc=null,this._state=null,l&&C0(l,i.newLength),c.some(f=>f.type==zt.time)||(this.annotations=c.concat(zt.time.of(Date.now())))}static create(e,i,l,a,c,u){return new zt(e,i,l,a,c,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(zt.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}zt.time=yr.define(),zt.userEvent=yr.define(),zt.addToHistory=yr.define(),zt.remote=yr.define();function aI(s,e){let i=[];for(let l=0,a=0;;){let c,u;if(l<s.length&&(a==e.length||e[a]>=s[l]))c=s[l++],u=s[l++];else if(a<e.length)c=e[a++],u=e[a++];else return i;!i.length||i[i.length-1]<c?i.push(c,u):i[i.length-1]<u&&(i[i.length-1]=u)}}function L0(s,e,i){var l;let a,c,u;return i?(a=e.changes,c=Zt.empty(e.changes.length),u=s.changes.compose(e.changes)):(a=e.changes.map(s.changes),c=s.changes.mapDesc(e.changes,!0),u=s.changes.compose(a)),{changes:u,selection:e.selection?e.selection.map(c):(l=s.selection)===null||l===void 0?void 0:l.map(a),effects:ze.mapEffects(s.effects,a).concat(ze.mapEffects(e.effects,c)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function Hf(s,e,i){let l=e.selection,a=Ps(e.annotations);return e.userEvent&&(a=a.concat(zt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Zt?e.changes:Zt.of(e.changes||[],i,s.facet(T0)),selection:l&&(l instanceof ae?l:ae.single(l.anchor,l.head)),effects:Ps(e.effects),annotations:a,scrollIntoView:!!e.scrollIntoView}}function N0(s,e,i){let l=Hf(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let c=1;c<e.length;c++){e[c].filter===!1&&(i=!1);let u=!!e[c].sequential;l=L0(l,Hf(s,e[c],u?l.changes.newLength:s.doc.length),u)}let a=zt.create(s,l.changes,l.selection,l.effects,l.annotations,l.scrollIntoView);return uI(i?cI(a):a)}function cI(s){let e=s.startState,i=!0;for(let a of e.facet(I0)){let c=a(s);if(c===!1){i=!1;break}Array.isArray(c)&&(i=i===!0?c:aI(i,c))}if(i!==!0){let a,c;if(i===!1)c=s.changes.invertedDesc,a=Zt.empty(e.doc.length);else{let u=s.changes.filter(i);a=u.changes,c=u.filtered.mapDesc(u.changes).invertedDesc}s=zt.create(e,a,s.selection&&s.selection.map(c),ze.mapEffects(s.effects,c),s.annotations,s.scrollIntoView)}let l=e.facet(D0);for(let a=l.length-1;a>=0;a--){let c=l[a](s);c instanceof zt?s=c:Array.isArray(c)&&c.length==1&&c[0]instanceof zt?s=c[0]:s=N0(e,Ps(c),!1)}return s}function uI(s){let e=s.startState,i=e.facet(M0),l=s;for(let a=i.length-1;a>=0;a--){let c=i[a](s);c&&Object.keys(c).length&&(l=L0(l,Hf(e,c,s.changes.newLength),!0))}return l==s?s:zt.create(e,s.changes,s.selection,l.effects,l.annotations,l.scrollIntoView)}const fI=[];function Ps(s){return s==null?fI:Array.isArray(s)?s:[s]}var wt=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(wt||(wt={}));const hI=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Kf;try{Kf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function dI(s){if(Kf)return Kf.test(s);for(let e=0;e<s.length;e++){let i=s[e];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||hI.test(i)))return!0}return!1}function mI(s){return e=>{if(!/\S/.test(e))return wt.Space;if(dI(e))return wt.Word;for(let i=0;i<s.length;i++)if(e.indexOf(s[i])>-1)return wt.Word;return wt.Other}}class Qe{constructor(e,i,l,a,c,u){this.config=e,this.doc=i,this.selection=l,this.values=a,this.status=e.statusTemplate.slice(),this.computeSlot=c,u&&(u._state=this);for(let f=0;f<this.config.dynamicSlots.length;f++)Uo(this,f<<1);this.computeSlot=null}field(e,i=!0){let l=this.config.address[e.id];if(l==null){if(i)throw new RangeError("Field is not present in this state");return}return Uo(this,l),Ia(this,l)}update(...e){return N0(this,e,!0)}applyTransaction(e){let i=this.config,{base:l,compartments:a}=i;for(let f of e.effects)f.is(Pa.reconfigure)?(i&&(a=new Map,i.compartments.forEach((h,d)=>a.set(d,h)),i=null),a.set(f.value.compartment,f.value.extension)):f.is(ze.reconfigure)?(i=null,l=f.value):f.is(ze.appendConfig)&&(i=null,l=Ps(l).concat(f.value));let c;i?c=e.startState.values.slice():(i=Ta.resolve(l,a,this),c=new Qe(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let u=e.startState.facet(Uf)?e.newSelection:e.newSelection.asSingle();new Qe(i,e.newDoc,u,c,(f,h)=>h.update(f,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:ae.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,l=e(i.ranges[0]),a=this.changes(l.changes),c=[l.range],u=Ps(l.effects);for(let f=1;f<i.ranges.length;f++){let h=e(i.ranges[f]),d=this.changes(h.changes),m=d.map(a);for(let v=0;v<f;v++)c[v]=c[v].map(m);let p=a.mapDesc(d,!0);c.push(h.range.map(p)),a=a.compose(m),u=ze.mapEffects(u,m).concat(ze.mapEffects(Ps(h.effects),p))}return{changes:a,selection:ae.create(c,i.mainIndex),effects:u}}changes(e=[]){return e instanceof Zt?e:Zt.of(e,this.doc.length,this.facet(Qe.lineSeparator))}toText(e){return ct.of(e.split(this.facet(Qe.lineSeparator)||Ff))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(Uo(this,i),Ia(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let l in e){let a=e[l];a instanceof Lt&&this.config.address[a.id]!=null&&(i[l]=a.spec.toJSON(this.field(e[l]),this))}return i}static fromJSON(e,i={},l){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let a=[];if(l){for(let c in l)if(Object.prototype.hasOwnProperty.call(e,c)){let u=l[c],f=e[c];a.push(u.init(h=>u.spec.fromJSON(f,h)))}}return Qe.create({doc:e.doc,selection:ae.fromJSON(e.selection),extensions:i.extensions?a.concat([i.extensions]):a})}static create(e={}){let i=Ta.resolve(e.extensions||[],new Map),l=e.doc instanceof ct?e.doc:ct.of((e.doc||"").split(i.staticFacet(Qe.lineSeparator)||Ff)),a=e.selection?e.selection instanceof ae?e.selection:ae.single(e.selection.anchor,e.selection.head):ae.single(0);return C0(a,l.length),i.staticFacet(Uf)||(a=a.asSingle()),new Qe(i,l,a,i.dynamicSlots.map(()=>null),(c,u)=>u.create(c),null)}get tabSize(){return this.facet(Qe.tabSize)}get lineBreak(){return this.facet(Qe.lineSeparator)||`
`}get readOnly(){return this.facet(R0)}phrase(e,...i){for(let l of this.facet(Qe.phrases))if(Object.prototype.hasOwnProperty.call(l,e)){e=l[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(l,a)=>{if(a=="$")return"$";let c=+(a||1);return!c||c>i.length?l:i[c-1]})),e}languageDataAt(e,i,l=-1){let a=[];for(let c of this.facet(P0))for(let u of c(this,i,l))Object.prototype.hasOwnProperty.call(u,e)&&a.push(u[e]);return a}charCategorizer(e){return mI(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:l,length:a}=this.doc.lineAt(e),c=this.charCategorizer(e),u=e-l,f=e-l;for(;u>0;){let h=Gt(i,u,!1);if(c(i.slice(h,u))!=wt.Word)break;u=h}for(;f<a;){let h=Gt(i,f);if(c(i.slice(f,h))!=wt.Word)break;f=h}return u==f?null:ae.range(u+l,f+l)}}Qe.allowMultipleSelections=Uf,Qe.tabSize=ke.define({combine:s=>s.length?s[0]:4}),Qe.lineSeparator=T0,Qe.readOnly=R0,Qe.phrases=ke.define({compare(s,e){let i=Object.keys(s),l=Object.keys(e);return i.length==l.length&&i.every(a=>s[a]==e[a])}}),Qe.languageData=P0,Qe.changeFilter=I0,Qe.transactionFilter=D0,Qe.transactionExtender=M0,Pa.reconfigure=ze.define();function tr(s,e,i={}){let l={};for(let a of s)for(let c of Object.keys(a)){let u=a[c],f=l[c];if(f===void 0)l[c]=u;else if(!(f===u||u===void 0))if(Object.hasOwnProperty.call(i,c))l[c]=i[c](f,u);else throw new Error("Config merge conflict for field "+c)}for(let a in e)l[a]===void 0&&(l[a]=e[a]);return l}class Ji{eq(e){return this==e}range(e,i=e){return Ho.create(e,i,this)}}Ji.prototype.startSide=Ji.prototype.endSide=0,Ji.prototype.point=!1,Ji.prototype.mapMode=hn.TrackDel;class Ho{constructor(e,i,l){this.from=e,this.to=i,this.value=l}static create(e,i,l){return new Ho(e,i,l)}}function Gf(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Jf{constructor(e,i,l,a){this.from=e,this.to=i,this.value=l,this.maxPoint=a}get length(){return this.to[this.to.length-1]}findIndex(e,i,l,a=0){let c=l?this.to:this.from;for(let u=a,f=c.length;;){if(u==f)return u;let h=u+f>>1,d=c[h]-e||(l?this.value[h].endSide:this.value[h].startSide)-i;if(h==u)return d>=0?u:f;d>=0?f=h:u=h+1}}between(e,i,l,a){for(let c=this.findIndex(i,-1e9,!0),u=this.findIndex(l,1e9,!1,c);c<u;c++)if(a(this.from[c]+e,this.to[c]+e,this.value[c])===!1)return!1}map(e,i){let l=[],a=[],c=[],u=-1,f=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],m=this.from[h]+e,p=this.to[h]+e,v,y;if(m==p){let S=i.mapPos(m,d.startSide,d.mapMode);if(S==null||(v=y=S,d.startSide!=d.endSide&&(y=i.mapPos(m,d.endSide),y<v)))continue}else if(v=i.mapPos(m,d.startSide),y=i.mapPos(p,d.endSide),v>y||v==y&&d.startSide>0&&d.endSide<=0)continue;(y-v||d.endSide-d.startSide)<0||(u<0&&(u=v),d.point&&(f=Math.max(f,y-v)),l.push(d),a.push(v-u),c.push(y-u))}return{mapped:l.length?new Jf(a,c,l,f):null,pos:u}}}class _e{constructor(e,i,l,a){this.chunkPos=e,this.chunk=i,this.nextLayer=l,this.maxPoint=a}static create(e,i,l,a){return new _e(e,i,l,a)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:l=!1,filterFrom:a=0,filterTo:c=this.length}=e,u=e.filter;if(i.length==0&&!u)return this;if(l&&(i=i.slice().sort(Gf)),this.isEmpty)return i.length?_e.of(i):this;let f=new F0(this,null,-1).goto(0),h=0,d=[],m=new Hr;for(;f.value||h<i.length;)if(h<i.length&&(f.from-i[h].from||f.startSide-i[h].value.startSide)>=0){let p=i[h++];m.addInner(p.from,p.to,p.value)||d.push(p)}else f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(h==i.length||this.chunkEnd(f.chunkIndex)<i[h].from)&&(!u||a>this.chunkEnd(f.chunkIndex)||c<this.chunkPos[f.chunkIndex])&&m.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!u||a>f.to||c<f.from||u(f.from,f.to,f.value))&&(m.addInner(f.from,f.to,f.value)||d.push(Ho.create(f.from,f.to,f.value))),f.next());return m.finishInner(this.nextLayer.isEmpty&&!d.length?_e.empty:this.nextLayer.update({add:d,filter:u,filterFrom:a,filterTo:c}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],l=[],a=-1;for(let u=0;u<this.chunk.length;u++){let f=this.chunkPos[u],h=this.chunk[u],d=e.touchesRange(f,f+h.length);if(d===!1)a=Math.max(a,h.maxPoint),i.push(h),l.push(e.mapPos(f));else if(d===!0){let{mapped:m,pos:p}=h.map(f,e);m&&(a=Math.max(a,m.maxPoint),i.push(m),l.push(p))}}let c=this.nextLayer.map(e);return i.length==0?c:new _e(l,i,c||_e.empty,a)}between(e,i,l){if(!this.isEmpty){for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],u=this.chunk[a];if(i>=c&&e<=c+u.length&&u.between(c,e-c,i-c,l)===!1)return}this.nextLayer.between(e,i,l)}}iter(e=0){return Ko.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return Ko.from(e).goto(i)}static compare(e,i,l,a,c=-1){let u=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=c),f=i.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=c),h=$0(u,f,l),d=new Go(u,h,c),m=new Go(f,h,c);l.iterGaps((p,v,y)=>B0(d,p,m,v,y,a)),l.empty&&l.length==0&&B0(d,0,m,0,0,a)}static eq(e,i,l=0,a){a==null&&(a=999999999);let c=e.filter(m=>!m.isEmpty&&i.indexOf(m)<0),u=i.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(c.length!=u.length)return!1;if(!c.length)return!0;let f=$0(c,u),h=new Go(c,f,0).goto(l),d=new Go(u,f,0).goto(l);for(;;){if(h.to!=d.to||!Xf(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>a)return!0;h.next(),d.next()}}static spans(e,i,l,a,c=-1){let u=new Go(e,null,c).goto(i),f=i,h=u.openStart;for(;;){let d=Math.min(u.to,l);if(u.point){let m=u.activeForPoint(u.to),p=u.pointFrom<i?m.length+1:Math.min(m.length,h);a.point(f,d,u.point,m,p,u.pointRank),h=Math.min(u.openEnd(d),m.length)}else d>f&&(a.span(f,d,u.active,h),h=u.openEnd(d));if(u.to>l)return h+(u.point&&u.to>l?1:0);f=u.to,u.next()}}static of(e,i=!1){let l=new Hr;for(let a of e instanceof Ho?[e]:i?pI(e):e)l.add(a.from,a.to,a.value);return l.finish()}static join(e){if(!e.length)return _e.empty;let i=e[e.length-1];for(let l=e.length-2;l>=0;l--)for(let a=e[l];a!=_e.empty;a=a.nextLayer)i=new _e(a.chunkPos,a.chunk,i,Math.max(a.maxPoint,i.maxPoint));return i}}_e.empty=new _e([],[],null,-1);function pI(s){if(s.length>1)for(let e=s[0],i=1;i<s.length;i++){let l=s[i];if(Gf(e,l)>0)return s.slice().sort(Gf);e=l}return s}_e.empty.nextLayer=_e.empty;class Hr{finishChunk(e){this.chunks.push(new Jf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,l){this.addInner(e,i,l)||(this.nextLayer||(this.nextLayer=new Hr)).add(e,i,l)}addInner(e,i,l){let a=e-this.lastTo||l.startSide-this.last.endSide;if(a<=0&&(e-this.lastFrom||l.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return a<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=l,this.lastFrom=e,this.lastTo=i,this.value.push(l),l.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let l=i.value.length-1;return this.last=i.value[l],this.lastFrom=i.from[l]+e,this.lastTo=i.to[l]+e,!0}finish(){return this.finishInner(_e.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=_e.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function $0(s,e,i){let l=new Map;for(let c of s)for(let u=0;u<c.chunk.length;u++)c.chunk[u].maxPoint<=0&&l.set(c.chunk[u],c.chunkPos[u]);let a=new Set;for(let c of e)for(let u=0;u<c.chunk.length;u++){let f=l.get(c.chunk[u]);f!=null&&(i?i.mapPos(f):f)==c.chunkPos[u]&&!(i!=null&&i.touchesRange(f,f+c.chunk[u].length))&&a.add(c.chunk[u])}return a}class F0{constructor(e,i,l,a=0){this.layer=e,this.skip=i,this.minPoint=l,this.rank=a}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,l){for(;this.chunkIndex<this.layer.chunk.length;){let a=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(a)||this.layer.chunkEnd(this.chunkIndex)<e||a.maxPoint<this.minPoint))break;this.chunkIndex++,l=!1}if(this.chunkIndex<this.layer.chunk.length){let a=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!l||this.rangeIndex<a)&&this.setRangeIndex(a)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],l=e+i.from[this.rangeIndex];if(this.from=l,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ko{constructor(e){this.heap=e}static from(e,i=null,l=-1){let a=[];for(let c=0;c<e.length;c++)for(let u=e[c];!u.isEmpty;u=u.nextLayer)u.maxPoint>=l&&a.push(new F0(u,i,l,c));return a.length==1?a[0]:new Ko(a)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let l of this.heap)l.goto(e,i);for(let l=this.heap.length>>1;l>=0;l--)Yf(this.heap,l);return this.next(),this}forward(e,i){for(let l of this.heap)l.forward(e,i);for(let l=this.heap.length>>1;l>=0;l--)Yf(this.heap,l);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Yf(this.heap,0)}}}function Yf(s,e){for(let i=s[e];;){let l=(e<<1)+1;if(l>=s.length)break;let a=s[l];if(l+1<s.length&&a.compare(s[l+1])>=0&&(a=s[l+1],l++),i.compare(a)<0)break;s[l]=i,s[e]=a,e=l}}class Go{constructor(e,i,l){this.minPoint=l,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ko.from(e,i,l)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){Da(this.active,e),Da(this.activeTo,e),Da(this.activeRank,e),this.minActive=j0(this.active,this.activeTo)}addActive(e){let i=0,{value:l,to:a,rank:c}=this.cursor;for(;i<this.activeRank.length&&(c-this.activeRank[i]||a-this.activeTo[i])>0;)i++;Ma(this.active,i,l),Ma(this.activeTo,i,a),Ma(this.activeRank,i,c),e&&Ma(e,i,this.cursor.from),this.minActive=j0(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let l=this.openStart<0?[]:null;for(;;){let a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>e){this.to=this.activeTo[a],this.endSide=this.active[a].endSide;break}this.removeActive(a),l&&Da(l,a)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let c=this.cursor.value;if(!c.point)this.addActive(l),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=c,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=c.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(l){this.openStart=0;for(let a=l.length-1;a>=0&&l[a]<e;a--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let l=this.active.length-1;l>=0&&!(this.activeRank[l]<this.pointRank);l--)(this.activeTo[l]>e||this.activeTo[l]==e&&this.active[l].endSide>=this.point.endSide)&&i.push(this.active[l]);return i.reverse()}openEnd(e){let i=0;for(let l=this.activeTo.length-1;l>=0&&this.activeTo[l]>e;l--)i++;return i}}function B0(s,e,i,l,a,c){s.goto(e),i.goto(l);let u=l+a,f=l,h=l-e;for(;;){let d=s.to+h-i.to||s.endSide-i.endSide,m=d<0?s.to+h:i.to,p=Math.min(m,u);if(s.point||i.point?s.point&&i.point&&(s.point==i.point||s.point.eq(i.point))&&Xf(s.activeForPoint(s.to),i.activeForPoint(i.to))||c.comparePoint(f,p,s.point,i.point):p>f&&!Xf(s.active,i.active)&&c.compareRange(f,p,s.active,i.active),m>u)break;f=m,d<=0&&s.next(),d>=0&&i.next()}}function Xf(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(s[i]!=e[i]&&!s[i].eq(e[i]))return!1;return!0}function Da(s,e){for(let i=e,l=s.length-1;i<l;i++)s[i]=s[i+1];s.pop()}function Ma(s,e,i){for(let l=s.length-1;l>=e;l--)s[l+1]=s[l];s[e]=i}function j0(s,e){let i=-1,l=1e9;for(let a=0;a<e.length;a++)(e[a]-l||s[a].endSide-s[i].endSide)<0&&(i=a,l=e[a]);return i}function Ts(s,e,i=s.length){let l=0;for(let a=0;a<i;)s.charCodeAt(a)==9?(l+=e-l%e,a++):(l++,a=Gt(s,a));return l}function Qf(s,e,i,l){for(let a=0,c=0;;){if(c>=e)return a;if(a==s.length)break;c+=s.charCodeAt(a)==9?i-c%i:1,a=Gt(s,a)}return l===!0?-1:s.length}const _f="\u037C",W0=typeof Symbol=="undefined"?"__"+_f:Symbol.for(_f),qf=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),V0=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class bi{constructor(e,i){this.rules=[];let{finish:l}=i||{};function a(u){return/^@/.test(u)?[u]:u.split(/,\s*/)}function c(u,f,h,d){let m=[],p=/^@(\w+)\b/.exec(u[0]),v=p&&p[1]=="keyframes";if(p&&f==null)return h.push(u[0]+";");for(let y in f){let S=f[y];if(/&/.test(y))c(y.split(/,\s*/).map(E=>u.map(w=>E.replace(/&/,w))).reduce((E,w)=>E.concat(w)),S,h);else if(S&&typeof S=="object"){if(!p)throw new RangeError("The value of a property ("+y+") should be a primitive value.");c(a(y),S,m,v)}else S!=null&&m.push(y.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+S+";")}(m.length||v)&&h.push((l&&!p&&!d?u.map(l):u).join(", ")+" {"+m.join(" ")+"}")}for(let u in e)c(a(u),e[u],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=V0[W0]||1;return V0[W0]=e+1,_f+e.toString(36)}static mount(e,i,l){let a=e[qf],c=l&&l.nonce;a?c&&a.setNonce(c):a=new gI(e,c),a.mount(Array.isArray(i)?i:[i])}}let Z0=new Map;class gI{constructor(e,i){let l=e.ownerDocument||e,a=l.defaultView;if(!e.head&&e.adoptedStyleSheets&&a.CSSStyleSheet){let c=Z0.get(l);if(c)return e.adoptedStyleSheets=[c.sheet,...e.adoptedStyleSheets],e[qf]=c;this.sheet=new a.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Z0.set(l,this)}else{this.styleTag=l.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);let c=e.head||e;c.insertBefore(this.styleTag,c.firstChild)}this.modules=[],e[qf]=this}mount(e){let i=this.sheet,l=0,a=0;for(let c=0;c<e.length;c++){let u=e[c],f=this.modules.indexOf(u);if(f<a&&f>-1&&(this.modules.splice(f,1),a--,f=-1),f==-1){if(this.modules.splice(a++,0,u),i)for(let h=0;h<u.rules.length;h++)i.insertRule(u.rules[h],l++)}else{for(;a<f;)l+=this.modules[a++].rules.length;l+=u.rules.length,a++}}if(!i){let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var xi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Jo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yI=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),vI=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Yt=0;Yt<10;Yt++)xi[48+Yt]=xi[96+Yt]=String(Yt);for(var Yt=1;Yt<=24;Yt++)xi[Yt+111]="F"+Yt;for(var Yt=65;Yt<=90;Yt++)xi[Yt]=String.fromCharCode(Yt+32),Jo[Yt]=String.fromCharCode(Yt);for(var eh in xi)Jo.hasOwnProperty(eh)||(Jo[eh]=xi[eh]);function bI(s){var e=yI&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||vI&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",i=!e&&s.key||(s.shiftKey?Jo:xi)[s.keyCode]||s.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function Ra(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function th(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function xI(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function La(s,e){if(!e.anchorNode)return!1;try{return th(s,e.anchorNode)}catch{return!1}}function Is(s){return s.nodeType==3?Yi(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function Yo(s,e,i,l){return i?z0(s,e,i,l,-1)||z0(s,e,i,l,1):!1}function Xo(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function z0(s,e,i,l,a){for(;;){if(s==i&&e==l)return!0;if(e==(a<0?0:Kr(s))){if(s.nodeName=="DIV")return!1;let c=s.parentNode;if(!c||c.nodeType!=1)return!1;e=Xo(s)+(a<0?0:1),s=c}else if(s.nodeType==1){if(s=s.childNodes[e+(a<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=a<0?Kr(s):0}else return!1}}function Kr(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function Na(s,e){let i=e?s.left:s.right;return{left:i,right:i,top:s.top,bottom:s.bottom}}function SI(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function U0(s,e){let i=e.width/s.offsetWidth,l=e.height/s.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.width-s.offsetWidth)<1)&&(i=1),(l>.995&&l<1.005||!isFinite(l)||Math.abs(e.height-s.offsetHeight)<1)&&(l=1),{scaleX:i,scaleY:l}}function EI(s,e,i,l,a,c,u,f){let h=s.ownerDocument,d=h.defaultView||window;for(let m=s,p=!1;m&&!p;)if(m.nodeType==1){let v,y=m==h.body,S=1,E=1;if(y)v=SI(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(p=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let O=m.getBoundingClientRect();({scaleX:S,scaleY:E}=U0(m,O)),v={left:O.left,right:O.left+m.clientWidth*S,top:O.top,bottom:O.top+m.clientHeight*E}}let w=0,C=0;if(a=="nearest")e.top<v.top?(C=-(v.top-e.top+u),i>0&&e.bottom>v.bottom+C&&(C=e.bottom-v.bottom+C+u)):e.bottom>v.bottom&&(C=e.bottom-v.bottom+u,i<0&&e.top-C<v.top&&(C=-(v.top+C-e.top+u)));else{let O=e.bottom-e.top,I=v.bottom-v.top;C=(a=="center"&&O<=I?e.top+O/2-I/2:a=="start"||a=="center"&&i<0?e.top-u:e.bottom-I+u)-v.top}if(l=="nearest"?e.left<v.left?(w=-(v.left-e.left+c),i>0&&e.right>v.right+w&&(w=e.right-v.right+w+c)):e.right>v.right&&(w=e.right-v.right+c,i<0&&e.left<v.left+w&&(w=-(v.left+w-e.left+c))):w=(l=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:l=="start"==f?e.left-c:e.right-(v.right-v.left)+c)-v.left,w||C)if(y)d.scrollBy(w,C);else{let O=0,I=0;if(C){let P=m.scrollTop;m.scrollTop+=C/E,I=(m.scrollTop-P)*E}if(w){let P=m.scrollLeft;m.scrollLeft+=w/S,O=(m.scrollLeft-P)*S}e={left:e.left-O,top:e.top-I,right:e.right-O,bottom:e.bottom-I},O&&Math.abs(O-w)<1&&(l="nearest"),I&&Math.abs(I-C)<1&&(a="nearest")}if(y)break;m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function wI(s){let e=s.ownerDocument;for(let i=s.parentNode;i&&i!=e.body;)if(i.nodeType==1){if(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)return i;i=i.assignedSlot||i.parentNode}else if(i.nodeType==11)i=i.host;else break;return null}class CI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:l}=e;this.set(i,Math.min(e.anchorOffset,i?Kr(i):0),l,Math.min(e.focusOffset,l?Kr(l):0))}set(e,i,l,a){this.anchorNode=e,this.anchorOffset=i,this.focusNode=l,this.focusOffset=a}}let Ds=null;function H0(s){if(s.setActive)return s.setActive();if(Ds)return s.focus(Ds);let e=[];for(let i=s;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(s.focus(Ds==null?{get preventScroll(){return Ds={preventScroll:!0},!0}}:void 0),!Ds){Ds=!1;for(let i=0;i<e.length;){let l=e[i++],a=e[i++],c=e[i++];l.scrollTop!=a&&(l.scrollTop=a),l.scrollLeft!=c&&(l.scrollLeft=c)}}}let K0;function Yi(s,e,i=e){let l=K0||(K0=document.createRange());return l.setEnd(s,i),l.setStart(s,e),l}function Ms(s,e,i){let l={key:e,code:e,keyCode:i,which:i,cancelable:!0},a=new KeyboardEvent("keydown",l);a.synthetic=!0,s.dispatchEvent(a);let c=new KeyboardEvent("keyup",l);return c.synthetic=!0,s.dispatchEvent(c),a.defaultPrevented||c.defaultPrevented}function OI(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function G0(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function AI(s,e){let i=e.focusNode,l=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=l)return!1;for(l=Math.min(l,Kr(i));;)if(l){if(i.nodeType!=1)return!1;let a=i.childNodes[l-1];a.contentEditable=="false"?l--:(i=a,l=Kr(i))}else{if(i==s)return!0;l=Xo(i),i=i.parentNode}}function J0(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}class rn{constructor(e,i,l=!0){this.node=e,this.offset=i,this.precise=l}static before(e,i){return new rn(e.parentNode,Xo(e),i)}static after(e,i){return new rn(e.parentNode,Xo(e)+1,i)}}const nh=[];class xt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let l of this.children){if(l==e)return i;i+=l.length+l.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let l=this.dom,a=null,c;for(let u of this.children){if(u.flags&7){if(!u.dom&&(c=a?a.nextSibling:l.firstChild)){let f=xt.get(c);(!f||!f.parent&&f.canReuseDOM(u))&&u.reuseDOM(c)}u.sync(e,i),u.flags&=-8}if(c=a?a.nextSibling:l.firstChild,i&&!i.written&&i.node==l&&c!=u.dom&&(i.written=!0),u.dom.parentNode==l)for(;c&&c!=u.dom;)c=Y0(c);else l.insertBefore(u.dom,c);a=u.dom}for(c=a?a.nextSibling:l.firstChild,c&&i&&i.node==l&&(i.written=!0);c;)c=Y0(c)}else if(this.flags&1)for(let l of this.children)l.flags&7&&(l.sync(e,i),l.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let l;if(e==this.dom)l=this.dom.childNodes[i];else{let a=Kr(e)==0?0:i==0?-1:1;for(;;){let c=e.parentNode;if(c==this.dom)break;a==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?a=-1:a=1),e=c}a<0?l=e:l=e.nextSibling}if(l==this.dom.firstChild)return 0;for(;l&&!xt.get(l);)l=l.nextSibling;if(!l)return this.length;for(let a=0,c=0;;a++){let u=this.children[a];if(u.dom==l)return c;c+=u.length+u.breakAfter}}domBoundsAround(e,i,l=0){let a=-1,c=-1,u=-1,f=-1;for(let h=0,d=l,m=l;h<this.children.length;h++){let p=this.children[h],v=d+p.length;if(d<e&&v>i)return p.domBoundsAround(e,i,d);if(v>=e&&a==-1&&(a=h,c=d),d>i&&p.dom.parentNode==this.dom){u=h,f=m;break}m=v,d=v+p.breakAfter}return{from:c,to:f<0?l+this.length:f,startDOM:(a?this.children[a-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,l=nh){this.markDirty();for(let a=e;a<i;a++){let c=this.children[a];c.parent==this&&l.indexOf(c)<0&&c.destroy()}this.children.splice(e,i-e,...l);for(let a=0;a<l.length;a++)l[a].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new X0(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,l,a,c,u){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}xt.prototype.breakAfter=0;function Y0(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class X0{constructor(e,i,l){this.children=e,this.pos=i,this.i=l,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let l=this.children[--this.i];this.pos-=l.length+l.breakAfter}}}function Q0(s,e,i,l,a,c,u,f,h){let{children:d}=s,m=d.length?d[e]:null,p=c.length?c[c.length-1]:null,v=p?p.breakAfter:u;if(!(e==l&&m&&!u&&!v&&c.length<2&&m.merge(i,a,c.length?p:null,i==0,f,h))){if(l<d.length){let y=d[l];y&&(a<y.length||y.breakAfter&&(p!=null&&p.breakAfter))?(e==l&&(y=y.split(a),a=0),!v&&p&&y.merge(0,a,p,!0,0,h)?c[c.length-1]=y:((a||y.children.length&&!y.children[0].length)&&y.merge(0,a,null,!1,0,h),c.push(y))):y!=null&&y.breakAfter&&(p?p.breakAfter=1:u=1),l++}for(m&&(m.breakAfter=u,i>0&&(!u&&c.length&&m.merge(i,m.length,c[0],!1,f,0)?m.breakAfter=c.shift().breakAfter:(i<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(i,m.length,null,!1,f,0),e++));e<l&&c.length;)if(d[l-1].become(c[c.length-1]))l--,c.pop(),h=c.length?0:f;else if(d[e].become(c[0]))e++,c.shift(),f=c.length?0:h;else break;!c.length&&e&&l<d.length&&!d[e-1].breakAfter&&d[l].merge(0,0,d[e-1],!1,f,h)&&e--,(e<l||c.length)&&s.replaceChildren(e,l,c)}}function _0(s,e,i,l,a,c){let u=s.childCursor(),{i:f,off:h}=u.findPos(i,1),{i:d,off:m}=u.findPos(e,-1),p=e-i;for(let v of l)p+=v.length;s.length+=p,Q0(s,d,m,f,h,l,0,a,c)}let Mn=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},rh=typeof document!="undefined"?document:{documentElement:{style:{}}};const ih=/Edge\/(\d+)/.exec(Mn.userAgent),q0=/MSIE \d/.test(Mn.userAgent),sh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mn.userAgent),$a=!!(q0||sh||ih),ey=!$a&&/gecko\/(\d+)/i.test(Mn.userAgent),oh=!$a&&/Chrome\/(\d+)/.exec(Mn.userAgent),ty="webkitFontSmoothing"in rh.documentElement.style,ny=!$a&&/Apple Computer/.test(Mn.vendor),ry=ny&&(/Mobile\/\w+/.test(Mn.userAgent)||Mn.maxTouchPoints>2);var Ie={mac:ry||/Mac/.test(Mn.platform),windows:/Win/.test(Mn.platform),linux:/Linux|X11/.test(Mn.platform),ie:$a,ie_version:q0?rh.documentMode||6:sh?+sh[1]:ih?+ih[1]:0,gecko:ey,gecko_version:ey?+(/Firefox\/(\d+)/.exec(Mn.userAgent)||[0,0])[1]:0,chrome:!!oh,chrome_version:oh?+oh[1]:0,ios:ry,android:/Android\b/.test(Mn.userAgent),webkit:ty,safari:ny,webkit_version:ty?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:rh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const kI=256;class Gr extends xt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,l){return this.flags&8||l&&(!(l instanceof Gr)||this.length-(i-e)+l.length>kI||l.flags&8)?!1:(this.text=this.text.slice(0,e)+(l?l.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new Gr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new rn(this.dom,e)}domBoundsAround(e,i,l){return{from:l,to:l+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return PI(this.dom,e,i)}}class Jr extends xt{constructor(e,i=[],l=0){super(),this.mark=e,this.children=i,this.length=l;for(let a of i)a.setParent(this)}setAttrs(e){if(G0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,l,a,c,u){return l&&(!(l instanceof Jr&&l.mark.eq(this.mark))||e&&c<=0||i<this.length&&u<=0)?!1:(_0(this,e,i,l?l.children.slice():[],c-1,u-1),this.markDirty(),!0)}split(e){let i=[],l=0,a=-1,c=0;for(let f of this.children){let h=l+f.length;h>e&&i.push(l<e?f.split(e-l):f),a<0&&l>=e&&(a=c),l=h,c++}let u=this.length-e;return this.length=e,a>-1&&(this.children.length=a,this.markDirty()),new Jr(this.mark,i,u)}domAtPos(e){return iy(this,e)}coordsAt(e,i){return oy(this,e,i)}}function PI(s,e,i){let l=s.nodeValue.length;e>l&&(e=l);let a=e,c=e,u=0;e==0&&i<0||e==l&&i>=0?Ie.chrome||Ie.gecko||(e?(a--,u=1):c<l&&(c++,u=-1)):i<0?a--:c<l&&c++;let f=Yi(s,a,c).getClientRects();if(!f.length)return null;let h=f[(u?u<0:i>=0)?0:f.length-1];return Ie.safari&&!u&&h.width==0&&(h=Array.prototype.find.call(f,d=>d.width)||h),u?Na(h,u<0):h||null}class Si extends xt{static create(e,i,l){return new Si(e,i,l)}constructor(e,i,l){super(),this.widget=e,this.length=i,this.side=l,this.prevWidget=null}split(e){let i=Si.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,i,l,a,c,u){return l&&(!(l instanceof Si)||!this.widget.compare(l.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(l?l.length:0)+(this.length-i),!0)}become(e){return e instanceof Si&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ct.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,l=i&&i.state.doc,a=this.posAtStart;return l?l.slice(a,a+this.length):ct.empty}domAtPos(e){return(this.length?e==0:this.side>0)?rn.before(this.dom):rn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let l=this.widget.coordsAt(this.dom,e,i);if(l)return l;let a=this.dom.getClientRects(),c=null;if(!a.length)return null;let u=this.side?this.side<0:e>0;for(let f=u?a.length-1:0;c=a[f],!(e>0?f==0:f==a.length-1||c.top<c.bottom);f+=u?-1:1);return Na(c,!u)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Rs extends xt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Rs&&e.side==this.side}split(){return new Rs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?rn.before(this.dom):rn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ct.empty}get isHidden(){return!0}}Gr.prototype.children=Si.prototype.children=Rs.prototype.children=nh;function iy(s,e){let i=s.dom,{children:l}=s,a=0;for(let c=0;a<l.length;a++){let u=l[a],f=c+u.length;if(!(f==c&&u.getSide()<=0)){if(e>c&&e<f&&u.dom.parentNode==i)return u.domAtPos(e-c);if(e<=c)break;c=f}}for(let c=a;c>0;c--){let u=l[c-1];if(u.dom.parentNode==i)return u.domAtPos(u.length)}for(let c=a;c<l.length;c++){let u=l[c];if(u.dom.parentNode==i)return u.domAtPos(0)}return new rn(i,0)}function sy(s,e,i){let l,{children:a}=s;i>0&&e instanceof Jr&&a.length&&(l=a[a.length-1])instanceof Jr&&l.mark.eq(e.mark)?sy(l,e.children[0],i-1):(a.push(e),e.setParent(s)),s.length+=e.length}function oy(s,e,i){let l=null,a=-1,c=null,u=-1;function f(d,m){for(let p=0,v=0;p<d.children.length&&v<=m;p++){let y=d.children[p],S=v+y.length;S>=m&&(y.children.length?f(y,m-v):(!c||c.isHidden&&i>0)&&(S>m||v==S&&y.getSide()>0)?(c=y,u=m-v):(v<m||v==S&&y.getSide()<0&&!y.isHidden)&&(l=y,a=m-v)),v=S}}f(s,e);let h=(i<0?l:c)||l||c;return h?h.coordsAt(Math.max(0,h==l?a:u),i):TI(s)}function TI(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let i=Is(e);return i[i.length-1]||null}function lh(s,e){for(let i in s)i=="class"&&e.class?e.class+=" "+s.class:i=="style"&&e.style?e.style+=";"+s.style:e[i]=s[i];return e}const ly=Object.create(null);function ah(s,e,i){if(s==e)return!0;s||(s=ly),e||(e=ly);let l=Object.keys(s),a=Object.keys(e);if(l.length-(i&&l.indexOf(i)>-1?1:0)!=a.length-(i&&a.indexOf(i)>-1?1:0))return!1;for(let c of l)if(c!=i&&(a.indexOf(c)==-1||s[c]!==e[c]))return!1;return!0}function ch(s,e,i){let l=!1;if(e)for(let a in e)i&&a in i||(l=!0,a=="style"?s.style.cssText="":s.removeAttribute(a));if(i)for(let a in i)e&&e[a]==i[a]||(l=!0,a=="style"?s.style.cssText=i[a]:s.setAttribute(a,i[a]));return l}function II(s){let e=Object.create(null);for(let i=0;i<s.attributes.length;i++){let l=s.attributes[i];e[l.name]=l.value}return e}class Ut extends xt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,l,a,c,u){if(l){if(!(l instanceof Ut))return!1;this.dom||l.transferDOM(this)}return a&&this.setDeco(l?l.attrs:null),_0(this,e,i,l?l.children.slice():[],c,u),!0}split(e){let i=new Ut;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:l,off:a}=this.childPos(e);a&&(i.append(this.children[l].split(a),0),this.children[l].merge(a,this.children[l].length,null,!1,0,0),l++);for(let c=l;c<this.children.length;c++)i.append(this.children[c],0);for(;l>0&&this.children[l-1].length==0;)this.children[--l].destroy();return this.children.length=l,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ah(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){sy(this,e,i)}addLineDeco(e){let i=e.spec.attributes,l=e.spec.class;i&&(this.attrs=lh(i,this.attrs||{})),l&&(this.attrs=lh({class:l},this.attrs||{}))}domAtPos(e){return iy(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var l;this.dom?this.flags&4&&(G0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ch(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let a=this.dom.lastChild;for(;a&&xt.get(a)instanceof Jr;)a=a.lastChild;if(!a||!this.length||a.nodeName!="BR"&&((l=xt.get(a))===null||l===void 0?void 0:l.isEditable)==!1&&(!Ie.ios||!this.children.some(c=>c instanceof Gr))){let c=document.createElement("BR");c.cmIgnore=!0,this.dom.appendChild(c)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let l of this.children){if(!(l instanceof Gr)||/[^ -~]/.test(l.text))return null;let a=Is(l.dom);if(a.length!=1)return null;e+=a[0].width,i=a[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let l=oy(this,e,i);if(!this.children.length&&l&&this.parent){let{heightOracle:a}=this.parent.view.viewState,c=l.bottom-l.top;if(Math.abs(c-a.lineHeight)<2&&a.textHeight<c){let u=(c-a.textHeight)/2;return{top:l.top+u,bottom:l.bottom-u,left:l.left,right:l.left}}}return l}become(e){return!1}covers(){return!0}static find(e,i){for(let l=0,a=0;l<e.children.length;l++){let c=e.children[l],u=a+c.length;if(u>=i){if(c instanceof Ut)return c;if(u>i)break}a=u+c.breakAfter}return null}}class Ei extends xt{constructor(e,i,l){super(),this.widget=e,this.length=i,this.deco=l,this.breakAfter=0,this.prevWidget=null}merge(e,i,l,a,c,u){return l&&(!(l instanceof Ei)||!this.widget.compare(l.widget)||e>0&&c<=0||i<this.length&&u<=0)?!1:(this.length=e+(l?l.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?rn.before(this.dom):rn.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let l=new Ei(this.widget,i,this.deco);return l.breakAfter=this.breakAfter,l}get children(){return nh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ct.empty}domBoundsAround(){return null}become(e){return e instanceof Ei&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){return this.widget.coordsAt(this.dom,e,i)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:l}=this.deco;return i==l?!1:e<0?i<0:l>0}}class vr{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,l){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var dn=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(dn||(dn={}));class Me extends Ji{constructor(e,i,l,a){super(),this.startSide=e,this.endSide=i,this.widget=l,this.spec=a}get heightRelevant(){return!1}static mark(e){return new Qo(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),l=!!e.block;return i+=l&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new wi(e,i,i,l,e.widget||null,!1)}static replace(e){let i=!!e.block,l,a;if(e.isBlockGap)l=-5e8,a=4e8;else{let{start:c,end:u}=ay(e,i);l=(c?i?-3e8:-1:5e8)-1,a=(u?i?2e8:1:-6e8)+1}return new wi(e,l,a,i,e.widget||null,!0)}static line(e){return new _o(e)}static set(e,i=!1){return _e.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Me.none=_e.empty;class Qo extends Me{constructor(e){let{start:i,end:l}=ay(e);super(i?-1:5e8,l?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,l;return this==e||e instanceof Qo&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((l=e.attrs)===null||l===void 0?void 0:l.class))&&ah(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}Qo.prototype.point=!1;class _o extends Me{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof _o&&this.spec.class==e.spec.class&&ah(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}_o.prototype.mapMode=hn.TrackBefore,_o.prototype.point=!0;class wi extends Me{constructor(e,i,l,a,c,u){super(i,l,c,e),this.block=a,this.isReplace=u,this.mapMode=a?i<=0?hn.TrackBefore:hn.TrackAfter:hn.TrackDel}get type(){return this.startSide!=this.endSide?dn.WidgetRange:this.startSide<=0?dn.WidgetBefore:dn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof wi&&DI(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}wi.prototype.point=!0;function ay(s,e=!1){let{inclusiveStart:i,inclusiveEnd:l}=s;return i==null&&(i=s.inclusive),l==null&&(l=s.inclusive),{start:i!=null?i:e,end:l!=null?l:e}}function DI(s,e){return s==e||!!(s&&e&&s.compare(e))}function uh(s,e,i,l=0){let a=i.length-1;a>=0&&i[a]+l>=s?i[a]=Math.max(i[a],e):i.push(s,e)}class qo{constructor(e,i,l,a){this.doc=e,this.pos=i,this.end=l,this.disallowBlockEffectsFor=a,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ei&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ut),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Fa(new Rs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ei)&&this.getLine()}buildText(e,i,l){for(;e>0;){if(this.textOff==this.text.length){let{value:c,lineBreak:u,done:f}=this.cursor.next(this.skip);if(this.skip=0,f)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=c,this.textOff=0}let a=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-l)),this.getLine().append(Fa(new Gr(this.text.slice(this.textOff,this.textOff+a)),i),l),this.atCursorPos=!0,this.textOff+=a,e-=a,l=0}}span(e,i,l,a){this.buildText(i-e,l,a),this.pos=i,this.openStart<0&&(this.openStart=a)}point(e,i,l,a,c,u){if(this.disallowBlockEffectsFor[u]&&l instanceof wi){if(l.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=i-e;if(l instanceof wi)if(l.block)l.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ei(l.widget||new cy("div"),f,l));else{let h=Si.create(l.widget||new cy("span"),f,f?0:l.startSide),d=this.atCursorPos&&!h.isEditable&&c<=a.length&&(e<i||l.startSide>0),m=!h.isEditable&&(e<i||c>a.length||l.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(a),d&&(p.append(Fa(new Rs(1),a),c),c=a.length+Math.max(0,c-a.length)),p.append(Fa(h,a),c),this.atCursorPos=m,this.pendingBuffer=m?e<i||c>a.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=a.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(l);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=c)}static build(e,i,l,a,c){let u=new qo(e,i,l,c);return u.openEnd=_e.spans(a,i,l,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function Fa(s,e){for(let i of e)s=new Jr(i,[s],s.length);return s}class cy extends vr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var dt=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(dt||(dt={}));const Xi=dt.LTR,fh=dt.RTL;function uy(s){let e=[];for(let i=0;i<s.length;i++)e.push(1<<+s[i]);return e}const MI=uy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),RI=uy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),hh=Object.create(null),br=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),i=s.charCodeAt(1);hh[e]=i,hh[i]=-e}function fy(s){return s<=247?MI[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?RI[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const LI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ci{get dir(){return this.level%2?fh:Xi}constructor(e,i,l){this.from=e,this.to=i,this.level=l}side(e,i){return this.dir==i==e?this.to:this.from}forward(e,i){return e==(this.dir==i)}static find(e,i,l,a){let c=-1;for(let u=0;u<e.length;u++){let f=e[u];if(f.from<=i&&f.to>=i){if(f.level==l)return u;(c<0||(a!=0?a<0?f.from<i:f.to>i:e[c].level>f.level))&&(c=u)}}if(c<0)throw new RangeError("Index out of range");return c}}function hy(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++){let l=s[i],a=e[i];if(l.from!=a.from||l.to!=a.to||l.direction!=a.direction||!hy(l.inner,a.inner))return!1}return!0}const mt=[];function NI(s,e,i,l,a){for(let c=0;c<=l.length;c++){let u=c?l[c-1].to:e,f=c<l.length?l[c].from:i,h=c?256:a;for(let d=u,m=h,p=h;d<f;d++){let v=fy(s.charCodeAt(d));v==512?v=m:v==8&&p==4&&(v=16),mt[d]=v==4?2:v,v&7&&(p=v),m=v}for(let d=u,m=h,p=h;d<f;d++){let v=mt[d];if(v==128)d<f-1&&m==mt[d+1]&&m&24?v=mt[d]=m:mt[d]=256;else if(v==64){let y=d+1;for(;y<f&&mt[y]==64;)y++;let S=d&&m==8||y<i&&mt[y]==8?p==1?1:8:256;for(let E=d;E<y;E++)mt[E]=S;d=y-1}else v==8&&p==1&&(mt[d]=1);m=v,v&7&&(p=v)}}}function $I(s,e,i,l,a){let c=a==1?2:1;for(let u=0,f=0,h=0;u<=l.length;u++){let d=u?l[u-1].to:e,m=u<l.length?l[u].from:i;for(let p=d,v,y,S;p<m;p++)if(y=hh[v=s.charCodeAt(p)])if(y<0){for(let E=f-3;E>=0;E-=3)if(br[E+1]==-y){let w=br[E+2],C=w&2?a:w&4?w&1?c:a:0;C&&(mt[p]=mt[br[E]]=C),f=E;break}}else{if(br.length==189)break;br[f++]=p,br[f++]=v,br[f++]=h}else if((S=mt[p])==2||S==1){let E=S==a;h=E?0:1;for(let w=f-3;w>=0;w-=3){let C=br[w+2];if(C&2)break;if(E)br[w+2]|=2;else{if(C&4)break;br[w+2]|=4}}}}}function FI(s,e,i,l){for(let a=0,c=l;a<=i.length;a++){let u=a?i[a-1].to:s,f=a<i.length?i[a].from:e;for(let h=u;h<f;){let d=mt[h];if(d==256){let m=h+1;for(;;)if(m==f){if(a==i.length)break;m=i[a++].to,f=a<i.length?i[a].from:e}else if(mt[m]==256)m++;else break;let p=c==1,v=(m<e?mt[m]:l)==1,y=p==v?p?1:2:l;for(let S=m,E=a,w=E?i[E-1].to:s;S>h;)S==w&&(S=i[--E].from,w=E?i[E-1].to:s),mt[--S]=y;h=m}else c=d,h++}}}function dh(s,e,i,l,a,c,u){let f=l%2?2:1;if(l%2==a%2)for(let h=e,d=0;h<i;){let m=!0,p=!1;if(d==c.length||h<c[d].from){let E=mt[h];E!=f&&(m=!1,p=E==16)}let v=!m&&f==1?[]:null,y=m?l:l+1,S=h;e:for(;;)if(d<c.length&&S==c[d].from){if(p)break e;let E=c[d];if(!m)for(let w=E.to,C=d+1;;){if(w==i)break e;if(C<c.length&&c[C].from==w)w=c[C++].to;else{if(mt[w]==f)break e;break}}if(d++,v)v.push(E);else{E.from>h&&u.push(new Ci(h,E.from,y));let w=E.direction==Xi!=!(y%2);mh(s,w?l+1:l,a,E.inner,E.from,E.to,u),h=E.to}S=E.to}else{if(S==i||(m?mt[S]!=f:mt[S]==f))break;S++}v?dh(s,h,S,l+1,a,v,u):h<S&&u.push(new Ci(h,S,y)),h=S}else for(let h=i,d=c.length;h>e;){let m=!0,p=!1;if(!d||h>c[d-1].to){let E=mt[h-1];E!=f&&(m=!1,p=E==16)}let v=!m&&f==1?[]:null,y=m?l:l+1,S=h;e:for(;;)if(d&&S==c[d-1].to){if(p)break e;let E=c[--d];if(!m)for(let w=E.from,C=d;;){if(w==e)break e;if(C&&c[C-1].to==w)w=c[--C].from;else{if(mt[w-1]==f)break e;break}}if(v)v.push(E);else{E.to<h&&u.push(new Ci(E.to,h,y));let w=E.direction==Xi!=!(y%2);mh(s,w?l+1:l,a,E.inner,E.from,E.to,u),h=E.from}S=E.from}else{if(S==e||(m?mt[S-1]!=f:mt[S-1]==f))break;S--}v?dh(s,S,h,l+1,a,v,u):S<h&&u.push(new Ci(S,h,y)),h=S}}function mh(s,e,i,l,a,c,u){let f=e%2?2:1;NI(s,a,c,l,f),$I(s,a,c,l,f),FI(a,c,l,f),dh(s,a,c,e,i,l,u)}function dy(s,e,i){if(!s)return[new Ci(0,0,e==fh?1:0)];if(e==Xi&&!i.length&&!LI.test(s))return my(s.length);if(i.length)for(;s.length>mt.length;)mt[mt.length]=256;let l=[],a=e==Xi?0:1;return mh(s,a,a,i,0,s.length,l),l}function my(s){return[new Ci(0,s,0)]}let py="";function gy(s,e,i,l,a){var c;let u=l.head-s.from,f=Ci.find(e,u,(c=l.bidiLevel)!==null&&c!==void 0?c:-1,l.assoc),h=e[f],d=h.side(a,i);if(u==d){let v=f+=a?1:-1;if(v<0||v>=e.length)return null;h=e[f=v],u=h.side(!a,i),d=h.side(a,i)}let m=Gt(s.text,u,h.forward(a,i));(m<h.from||m>h.to)&&(m=d),py=s.text.slice(Math.min(u,m),Math.max(u,m));let p=f==(a?e.length-1:0)?null:e[f+(a?1:-1)];return p&&m==d&&p.level+(a?0:1)<h.level?ae.cursor(p.side(!a,i)+s.from,p.forward(a,i)?1:-1,p.level):ae.cursor(m+s.from,h.forward(a,i)?-1:1,h.level)}function BI(s,e,i){for(let l=e;l<i;l++){let a=fy(s.charCodeAt(l));if(a==1)return Xi;if(a==2||a==4)return fh}return Xi}const yy=ke.define(),vy=ke.define(),by=ke.define(),xy=ke.define(),ph=ke.define(),Sy=ke.define(),Ey=ke.define(),wy=ke.define({combine:s=>s.some(e=>e)}),Cy=ke.define({combine:s=>s.some(e=>e)});class Ls{constructor(e,i="nearest",l="nearest",a=5,c=5,u=!1){this.range=e,this.y=i,this.x=l,this.yMargin=a,this.xMargin=c,this.isSnapshot=u}map(e){return e.empty?this:new Ls(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ls(ae.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ba=ze.define({map:(s,e)=>s.map(e)});function Zn(s,e,i){let l=s.facet(xy);l.length?l[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const ja=ke.define({combine:s=>s.length?s[0]:!0});let jI=0;const el=ke.define();class Tt{constructor(e,i,l,a,c){this.id=e,this.create=i,this.domEventHandlers=l,this.domEventObservers=a,this.extension=c(this)}static define(e,i){const{eventHandlers:l,eventObservers:a,provide:c,decorations:u}=i||{};return new Tt(jI++,e,l,a,f=>{let h=[el.of(f)];return u&&h.push(tl.of(d=>{let m=d.plugin(f);return m?u(m):Me.none})),c&&h.push(c(f)),h})}static fromClass(e,i){return Tt.define(l=>new e(l),i)}}class gh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(l){if(Zn(i.state,l,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){Zn(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(l){Zn(e.state,l,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Oy=ke.define(),Wa=ke.define(),tl=ke.define(),Ay=ke.define(),yh=ke.define(),ky=ke.define();function Py(s,e){let i=s.state.facet(ky);if(!i.length)return i;let l=i.map(c=>c instanceof Function?c(s):c),a=[];return _e.spans(l,e.from,e.to,{point(){},span(c,u,f,h){let d=c-e.from,m=u-e.from,p=a;for(let v=f.length-1;v>=0;v--,h--){let y=f[v].spec.bidiIsolate,S;if(y==null&&(y=BI(e.text,d,m)),h>0&&p.length&&(S=p[p.length-1]).to==d&&S.direction==y)S.to=m,p=S.inner;else{let E={from:d,to:m,direction:y,inner:[]};p.push(E),p=E.inner}}}}),a}const Ty=ke.define();function Iy(s){let e=0,i=0,l=0,a=0;for(let c of s.state.facet(Ty)){let u=c(s);u&&(u.left!=null&&(e=Math.max(e,u.left)),u.right!=null&&(i=Math.max(i,u.right)),u.top!=null&&(l=Math.max(l,u.top)),u.bottom!=null&&(a=Math.max(a,u.bottom)))}return{left:e,right:i,top:l,bottom:a}}const nl=ke.define();class Rn{constructor(e,i,l,a){this.fromA=e,this.toA=i,this.fromB=l,this.toB=a}join(e){return new Rn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,l=this;for(;i>0;i--){let a=e[i-1];if(!(a.fromA>l.toA)){if(a.toA<l.fromA)break;l=l.join(a),e.splice(i-1,1)}}return e.splice(i,0,l),e}static extendWithRanges(e,i){if(i.length==0)return e;let l=[];for(let a=0,c=0,u=0,f=0;;a++){let h=a==e.length?null:e[a],d=u-f,m=h?h.fromB:1e9;for(;c<i.length&&i[c]<m;){let p=i[c],v=i[c+1],y=Math.max(f,p),S=Math.min(m,v);if(y<=S&&new Rn(y+d,S+d,y,S).addToSet(l),v>m)break;c+=2}if(!h)return l;new Rn(h.fromA,h.toA,h.fromB,h.toB).addToSet(l),u=h.toA,f=h.toB}}}class Va{constructor(e,i,l){this.view=e,this.state=i,this.transactions=l,this.flags=0,this.startState=e.state,this.changes=Zt.empty(this.startState.doc.length);for(let c of l)this.changes=this.changes.compose(c.changes);let a=[];this.changes.iterChangedRanges((c,u,f,h)=>a.push(new Rn(c,u,f,h))),this.changedRanges=a}static create(e,i,l){return new Va(e,i,l)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Dy extends xt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ut],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Rn(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let l=e.changedRanges;this.minWidth>0&&l.length&&(l.every(({fromA:d,toA:m})=>m<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let a=-1;this.view.inputState.composing>=0&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?a=this.domChanged.newSel.head:!KI(e.changes,this.hasComposition)&&!e.selectionSet&&(a=e.state.selection.main.head));let c=a>-1?VI(this.view,e.changes,a):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:m}=this.hasComposition;l=new Rn(d,m,e.changes.mapPos(d,-1),e.changes.mapPos(m,1)).addToSet(l.slice())}this.hasComposition=c?{from:c.range.fromB,to:c.range.toB}:null,(Ie.ie||Ie.chrome)&&!c&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let u=this.decorations,f=this.updateDeco(),h=UI(u,f,e.changes);return l=Rn.extendWithRanges(l,h),!(this.flags&7)&&l.length==0?!1:(this.updateInner(l,e.startState.doc.length,c),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,l){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,l);let{observer:a}=this.view;a.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=Ie.chrome||Ie.ios?{node:a.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,u),this.flags&=-8,u&&(u.written||a.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(u=>u.flags&=-9);let c=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof Ei&&u.widget instanceof My&&c.push(u.dom);a.updateGaps(c)}updateChildren(e,i,l){let a=l?l.range.addToSet(e.slice()):e,c=this.childCursor(i);for(let u=a.length-1;;u--){let f=u>=0?a[u]:null;if(!f)break;let{fromA:h,toA:d,fromB:m,toB:p}=f,v,y,S,E;if(l&&l.range.fromB<p&&l.range.toB>m){let P=qo.build(this.view.state.doc,m,l.range.fromB,this.decorations,this.dynamicDecorationMap),M=qo.build(this.view.state.doc,l.range.toB,p,this.decorations,this.dynamicDecorationMap);y=P.breakAtStart,S=P.openStart,E=M.openEnd;let $=this.compositionView(l);M.breakAtStart?$.breakAfter=1:M.content.length&&$.merge($.length,$.length,M.content[0],!1,M.openStart,0)&&($.breakAfter=M.content[0].breakAfter,M.content.shift()),P.content.length&&$.merge(0,0,P.content[P.content.length-1],!0,0,P.openEnd)&&P.content.pop(),v=P.content.concat($).concat(M.content)}else({content:v,breakAtStart:y,openStart:S,openEnd:E}=qo.build(this.view.state.doc,m,p,this.decorations,this.dynamicDecorationMap));let{i:w,off:C}=c.findPos(d,1),{i:O,off:I}=c.findPos(h,-1);Q0(this,O,I,w,C,v,y,S,E)}l&&this.fixCompositionDOM(l)}compositionView(e){let i=new Gr(e.text.nodeValue);i.flags|=8;for(let{deco:a}of e.marks)i=new Jr(a,[i],i.length);let l=new Ut;return l.append(i,0),l}fixCompositionDOM(e){let i=(c,u)=>{u.flags|=8|(u.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(u);let f=xt.get(c);f&&f!=u&&(f.dom=null),u.setDOM(c)},l=this.childPos(e.range.fromB,1),a=this.children[l.i];i(e.line,a);for(let c=e.marks.length-1;c>=-1;c--)l=a.childPos(l.off,1),a=a.children[l.i],i(c>=0?e.marks[c].node:e.text,a)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let l=this.view.root.activeElement,a=l==this.dom,c=!a&&La(this.dom,this.view.observer.selectionRange)&&!(l&&this.dom.contains(l));if(!(a||i||c))return;let u=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(f.anchor)),d=f.empty?h:this.moveToLine(this.domAtPos(f.head));if(Ie.gecko&&f.empty&&!this.hasComposition&&WI(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=d=new rn(p,0),u=!0}let m=this.view.observer.selectionRange;(u||!m.focusNode||(!Yo(h.node,h.offset,m.anchorNode,m.anchorOffset)||!Yo(d.node,d.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,f))&&(this.view.observer.ignore(()=>{Ie.android&&Ie.chrome&&this.dom.contains(m.focusNode)&&HI(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=Ra(this.view.root);if(p)if(f.empty){if(Ie.gecko){let v=ZI(h.node,h.offset);if(v&&v!=3){let y=Ly(h.node,h.offset,v==1?1:-1);y&&(h=new rn(y.node,y.offset))}}p.collapse(h.node,h.offset),f.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=f.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(d.node,d.offset)}catch{}}else{let v=document.createRange();f.anchor>f.head&&([h,d]=[d,h]),v.setEnd(d.node,d.offset),v.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(v)}c&&this.view.root.activeElement==this.dom&&(this.dom.blur(),l&&l.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new rn(m.anchorNode,m.anchorOffset),this.impreciseHead=d.precise?null:new rn(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,i){return this.hasComposition&&i.empty&&Yo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,l=Ra(e.root),{anchorNode:a,anchorOffset:c}=e.observer.selectionRange;if(!l||!i.empty||!i.assoc||!l.modify)return;let u=Ut.find(this,i.head);if(!u)return;let f=u.posAtStart;if(i.head==f||i.head==f+u.length)return;let h=this.coordsAt(i.head,-1),d=this.coordsAt(i.head,1);if(!h||!d||h.bottom>d.top)return;let m=this.domAtPos(i.head+i.assoc);l.collapse(m.node,m.offset),l.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=i.from&&l.collapse(a,c)}moveToLine(e){let i=this.dom,l;if(e.node!=i)return e;for(let a=e.offset;!l&&a<i.childNodes.length;a++){let c=xt.get(i.childNodes[a]);c instanceof Ut&&(l=c.domAtPos(0))}for(let a=e.offset-1;!l&&a>=0;a--){let c=xt.get(i.childNodes[a]);c instanceof Ut&&(l=c.domAtPos(c.length))}return l?new rn(l.node,l.offset,!0):e}nearest(e){for(let i=e;i;){let l=xt.get(i);if(l&&l.rootView==this)return l;i=i.parentNode}return null}posFromDOM(e,i){let l=this.nearest(e);if(!l)throw new RangeError("Trying to find position for a DOM position outside of the document");return l.localPosFromDOM(e,i)+l.posAtStart}domAtPos(e){let{i,off:l}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let a=this.children[i];if(l<a.length||a instanceof Ut)break;i++,l=0}return this.children[i].domAtPos(l)}coordsAt(e,i){let l=null,a=0;for(let c=this.length,u=this.children.length-1;u>=0;u--){let f=this.children[u],h=c-f.breakAfter,d=h-f.length;if(h<e)break;d<=e&&(d<e||f.covers(-1))&&(h>e||f.covers(1))&&(!l||f instanceof Ut&&!(l instanceof Ut&&i>=0))&&(l=f,a=d),c=d}return l?l.coordsAt(e-a,i):null}coordsForChar(e){let{i,off:l}=this.childPos(e,1),a=this.children[i];if(!(a instanceof Ut))return null;for(;a.children.length;){let{i:f,off:h}=a.childPos(l,1);for(;;f++){if(f==a.children.length)return null;if((a=a.children[f]).length)break}l=h}if(!(a instanceof Gr))return null;let c=Gt(a.text,l);if(c==l)return null;let u=Yi(a.dom,l,c).getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(f==u.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let i=[],{from:l,to:a}=e,c=this.view.contentDOM.clientWidth,u=c>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,h=this.view.textDirection==dt.LTR;for(let d=0,m=0;m<this.children.length;m++){let p=this.children[m],v=d+p.length;if(v>a)break;if(d>=l){let y=p.dom.getBoundingClientRect();if(i.push(y.height),u){let S=p.dom.lastChild,E=S?Is(S):[];if(E.length){let w=E[E.length-1],C=h?w.right-y.left:y.right-w.left;C>f&&(f=C,this.minWidth=c,this.minWidthFrom=d,this.minWidthTo=v)}}}d=v+p.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?dt.RTL:dt.LTR}measureTextSize(){for(let c of this.children)if(c instanceof Ut){let u=c.measureTextSize();if(u)return u}let e=document.createElement("div"),i,l,a;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let c=Is(e.firstChild)[0];i=e.getBoundingClientRect().height,l=c?c.width/27:7,a=c?c.height:i,e.remove()}),{lineHeight:i,charWidth:l,textHeight:a}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new X0(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let l=0,a=0;;a++){let c=a==i.viewports.length?null:i.viewports[a],u=c?c.from-1:this.length;if(u>l){let f=(i.lineBlockAt(u).bottom-i.lineBlockAt(l).top)/this.view.scaleY;e.push(Me.replace({widget:new My(f),block:!0,inclusive:!0,isBlockGap:!0}).range(l,u))}if(!c)break;l=c.to+1}return Me.set(e)}updateDeco(){let e=this.view.state.facet(tl).map((a,c)=>(this.dynamicDecorationMap[c]=typeof a=="function")?a(this.view):a),i=!1,l=this.view.state.facet(Ay).map((a,c)=>{let u=typeof a=="function";return u&&(i=!0),u?a(this.view):a});l.length&&(this.dynamicDecorationMap[e.length]=i,e.push(_e.join(l)));for(let a=e.length;a<e.length+3;a++)this.dynamicDecorationMap[a]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:i}=e,l=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),a;if(!l)return;!i.empty&&(a=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(l={left:Math.min(l.left,a.left),top:Math.min(l.top,a.top),right:Math.max(l.right,a.right),bottom:Math.max(l.bottom,a.bottom)});let c=Iy(this.view),u={left:l.left-c.left,top:l.top-c.top,right:l.right+c.right,bottom:l.bottom+c.bottom},{offsetWidth:f,offsetHeight:h}=this.view.scrollDOM;EI(this.view.scrollDOM,u,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,f),-f),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==dt.LTR)}}function WI(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class My extends vr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function Ry(s,e){let i=s.observer.selectionRange,l=i.focusNode&&Ly(i.focusNode,i.focusOffset,0);if(!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function VI(s,e,i){let l=Ry(s,i);if(!l)return null;let{node:a,from:c,to:u}=l,f=a.nodeValue;if(/[\n\r]/.test(f)||s.state.doc.sliceString(l.from,l.to)!=f)return null;let h=e.invertedDesc,d=new Rn(h.mapPos(c),h.mapPos(u),c,u),m=[];for(let p=a.parentNode;;p=p.parentNode){let v=xt.get(p);if(v instanceof Jr)m.push({node:p,deco:v.mark});else{if(v instanceof Ut||p.nodeName=="DIV"&&p.parentNode==s.contentDOM)return{range:d,text:a,marks:m,line:p};if(p!=s.contentDOM)m.push({node:p,deco:new Qo({inclusive:!0,attributes:II(p),tagName:p.tagName.toLowerCase()})});else return null}}}function Ly(s,e,i){if(i<=0)for(let l=s,a=e;;){if(l.nodeType==3)return{node:l,offset:a};if(l.nodeType==1&&a>0)l=l.childNodes[a-1],a=Kr(l);else break}if(i>=0)for(let l=s,a=e;;){if(l.nodeType==3)return{node:l,offset:a};if(l.nodeType==1&&a<l.childNodes.length&&i>=0)l=l.childNodes[a],a=0;else break}return null}function ZI(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let zI=class{constructor(){this.changes=[]}compareRange(e,i){uh(e,i,this.changes)}comparePoint(e,i){uh(e,i,this.changes)}};function UI(s,e,i){let l=new zI;return _e.compare(s,e,i,l),l.changes}function HI(s,e){for(let i=s;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function KI(s,e){let i=!1;return e&&s.iterChangedRanges((l,a)=>{l<e.to&&a>e.from&&(i=!0)}),i}function GI(s,e,i=1){let l=s.charCategorizer(e),a=s.doc.lineAt(e),c=e-a.from;if(a.length==0)return ae.cursor(e);c==0?i=1:c==a.length&&(i=-1);let u=c,f=c;i<0?u=Gt(a.text,c,!1):f=Gt(a.text,c);let h=l(a.text.slice(u,f));for(;u>0;){let d=Gt(a.text,u,!1);if(l(a.text.slice(d,u))!=h)break;u=d}for(;f<a.length;){let d=Gt(a.text,f);if(l(a.text.slice(f,d))!=h)break;f=d}return ae.range(u+a.from,f+a.from)}function JI(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function YI(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function vh(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Ny(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function $y(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function bh(s,e,i){let l,a,c,u,f=!1,h,d,m,p;for(let S=s.firstChild;S;S=S.nextSibling){let E=Is(S);for(let w=0;w<E.length;w++){let C=E[w];a&&vh(a,C)&&(C=Ny($y(C,a.bottom),a.top));let O=JI(e,C),I=YI(i,C);if(O==0&&I==0)return S.nodeType==3?Fy(S,e,i):bh(S,e,i);if(!l||u>I||u==I&&c>O){l=S,a=C,c=O,u=I;let P=I?i<C.top?-1:1:O?e<C.left?-1:1:0;f=!P||(P>0?w<E.length-1:w>0)}O==0?i>C.bottom&&(!m||m.bottom<C.bottom)?(h=S,m=C):i<C.top&&(!p||p.top>C.top)&&(d=S,p=C):m&&vh(m,C)?m=$y(m,C.bottom):p&&vh(p,C)&&(p=Ny(p,C.top))}}if(m&&m.bottom>=i?(l=h,a=m):p&&p.top<=i&&(l=d,a=p),!l)return{node:s,offset:0};let v=Math.max(a.left,Math.min(a.right,e));if(l.nodeType==3)return Fy(l,v,i);if(f&&l.contentEditable!="false")return bh(l,v,i);let y=Array.prototype.indexOf.call(s.childNodes,l)+(e>=(a.left+a.right)/2?1:0);return{node:s,offset:y}}function Fy(s,e,i){let l=s.nodeValue.length,a=-1,c=1e9,u=0;for(let f=0;f<l;f++){let h=Yi(s,f,f+1).getClientRects();for(let d=0;d<h.length;d++){let m=h[d];if(m.top==m.bottom)continue;u||(u=e-m.left);let p=(m.top>i?m.top-i:i-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&p<c){let v=e>=(m.left+m.right)/2,y=v;if((Ie.chrome||Ie.gecko)&&Yi(s,f).getBoundingClientRect().left==m.right&&(y=!v),p<=0)return{node:s,offset:f+(y?1:0)};a=f+(y?1:0),c=p}}}return{node:s,offset:a>-1?a:u>0?s.nodeValue.length:0}}function By(s,e,i,l=-1){var a,c;let u=s.contentDOM.getBoundingClientRect(),f=u.top+s.viewState.paddingTop,h,{docHeight:d}=s.viewState,{x:m,y:p}=e,v=p-f;if(v<0)return 0;if(v>d)return s.state.doc.length;for(let P=s.viewState.heightOracle.textHeight/2,M=!1;h=s.elementAtHeight(v),h.type!=dn.Text;)for(;v=l>0?h.bottom+P:h.top-P,!(v>=0&&v<=d);){if(M)return i?null:0;M=!0,l=-l}p=f+v;let y=h.from;if(y<s.viewport.from)return s.viewport.from==0?0:i?null:jy(s,u,h,m,p);if(y>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:i?null:jy(s,u,h,m,p);let S=s.dom.ownerDocument,E=s.root.elementFromPoint?s.root:S,w=E.elementFromPoint(m,p);w&&!s.contentDOM.contains(w)&&(w=null),w||(m=Math.max(u.left+1,Math.min(u.right-1,m)),w=E.elementFromPoint(m,p),w&&!s.contentDOM.contains(w)&&(w=null));let C,O=-1;if(w&&((a=s.docView.nearest(w))===null||a===void 0?void 0:a.isEditable)!=!1){if(S.caretPositionFromPoint){let P=S.caretPositionFromPoint(m,p);P&&({offsetNode:C,offset:O}=P)}else if(S.caretRangeFromPoint){let P=S.caretRangeFromPoint(m,p);P&&({startContainer:C,startOffset:O}=P,(!s.contentDOM.contains(C)||Ie.safari&&XI(C,O,m)||Ie.chrome&&QI(C,O,m))&&(C=void 0))}}if(!C||!s.docView.dom.contains(C)){let P=Ut.find(s.docView,y);if(!P)return v>h.top+h.height/2?h.to:h.from;({node:C,offset:O}=bh(P.dom,m,p))}let I=s.docView.nearest(C);if(!I)return null;if(I.isWidget&&((c=I.dom)===null||c===void 0?void 0:c.nodeType)==1){let P=I.dom.getBoundingClientRect();return e.y<P.top||e.y<=P.bottom&&e.x<=(P.left+P.right)/2?I.posAtStart:I.posAtEnd}else return I.localPosFromDOM(C,O)+I.posAtStart}function jy(s,e,i,l,a){let c=Math.round((l-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&i.height>s.defaultLineHeight*1.5){let f=s.viewState.heightOracle.textHeight,h=Math.floor((a-i.top-(s.defaultLineHeight-f)*.5)/f);c+=h*s.viewState.heightOracle.lineLength}let u=s.state.sliceDoc(i.from,i.to);return i.from+Qf(u,c,s.state.tabSize)}function XI(s,e,i){let l;if(s.nodeType!=3||e!=(l=s.nodeValue.length))return!1;for(let a=s.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return!1;return Yi(s,l-1,l).getBoundingClientRect().left>i}function QI(s,e,i){if(e!=0)return!1;for(let a=s;;){let c=a.parentNode;if(!c||c.nodeType!=1||c.firstChild!=a)return!1;if(c.classList.contains("cm-line"))break;a=c}let l=s.nodeType==1?s.getBoundingClientRect():Yi(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return i-l.left>5}function xh(s,e){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){for(let l of i.type)if(l.to>e||l.to==e&&(l.to==i.to||l.type==dn.Text))return l}return i}function _I(s,e,i,l){let a=xh(s,e.head),c=!l||a.type!=dn.Text||!(s.lineWrapping||a.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>a.from?e.head-1:e.head);if(c){let u=s.dom.getBoundingClientRect(),f=s.textDirectionAt(a.from),h=s.posAtCoords({x:i==(f==dt.LTR)?u.right-1:u.left+1,y:(c.top+c.bottom)/2});if(h!=null)return ae.cursor(h,i?-1:1)}return ae.cursor(i?a.to:a.from,i?-1:1)}function Wy(s,e,i,l){let a=s.state.doc.lineAt(e.head),c=s.bidiSpans(a),u=s.textDirectionAt(a.from);for(let f=e,h=null;;){let d=gy(a,c,u,f,i),m=py;if(!d){if(a.number==(i?s.state.doc.lines:1))return f;m=`
`,a=s.state.doc.line(a.number+(i?1:-1)),c=s.bidiSpans(a),d=s.visualLineSide(a,!i)}if(h){if(!h(m))return f}else{if(!l)return d;h=l(m)}f=d}}function qI(s,e,i){let l=s.state.charCategorizer(e),a=l(i);return c=>{let u=l(c);return a==wt.Space&&(a=u),a==u}}function eD(s,e,i,l){let a=e.head,c=i?1:-1;if(a==(i?s.state.doc.length:0))return ae.cursor(a,e.assoc);let u=e.goalColumn,f,h=s.contentDOM.getBoundingClientRect(),d=s.coordsAtPos(a,e.assoc||-1),m=s.documentTop;if(d)u==null&&(u=d.left-h.left),f=c<0?d.top:d.bottom;else{let y=s.viewState.lineBlockAt(a);u==null&&(u=Math.min(h.right-h.left,s.defaultCharacterWidth*(a-y.from))),f=(c<0?y.top:y.bottom)+m}let p=h.left+u,v=l!=null?l:s.viewState.heightOracle.textHeight>>1;for(let y=0;;y+=10){let S=f+(v+y)*c,E=By(s,{x:p,y:S},!1,c);if(S<h.top||S>h.bottom||(c<0?E<a:E>a)){let w=s.docView.coordsForChar(E),C=!w||S<w.top?-1:1;return ae.cursor(E,C,void 0,u)}}}function Za(s,e,i){for(;;){let l=0;for(let a of s)a.between(e-1,e+1,(c,u,f)=>{if(e>c&&e<u){let h=l||i||(e-c<u-e?-1:1);e=h<0?c:u,l=h}});if(!l)return e}}function Sh(s,e,i){let l=Za(s.state.facet(yh).map(a=>a(s)),i.from,e.head>i.from?-1:1);return l==i.from?i:ae.cursor(l,l<i.from?1:-1)}class tD{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ie.safari&&e.contentDOM.addEventListener("input",()=>null),Ie.gecko&&yD(e.contentDOM.ownerDocument)}handleEvent(e){!cD(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,i){let l=this.handlers[e];if(l){for(let a of l.observers)a(this.view,i);for(let a of l.handlers){if(i.defaultPrevented)break;if(a(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=nD(e),l=this.handlers,a=this.view.contentDOM;for(let c in i)if(c!="scroll"){let u=!i[c].handlers.length,f=l[c];f&&u!=!f.handlers.length&&(a.removeEventListener(c,this.handleEvent),f=null),f||a.addEventListener(c,this.handleEvent,{passive:u})}for(let c in l)c!="scroll"&&!i[c]&&a.removeEventListener(c,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&zy.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Ie.android&&Ie.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return Ie.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=Zy.find(l=>l.keyCode==e.keyCode))&&!e.ctrlKey||rD.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Ms(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ie.safari&&!Ie.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Vy(s,e){return(i,l)=>{try{return e.call(s,l,i)}catch(a){Zn(i.state,a)}}}function nD(s){let e=Object.create(null);function i(l){return e[l]||(e[l]={observers:[],handlers:[]})}for(let l of s){let a=l.spec;if(a&&a.domEventHandlers)for(let c in a.domEventHandlers){let u=a.domEventHandlers[c];u&&i(c).handlers.push(Vy(l.value,u))}if(a&&a.domEventObservers)for(let c in a.domEventObservers){let u=a.domEventObservers[c];u&&i(c).observers.push(Vy(l.value,u))}}for(let l in nr)i(l).handlers.push(nr[l]);for(let l in rr)i(l).observers.push(rr[l]);return e}const Zy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rD="dthko",zy=[16,17,18,20,91,92,224,225],za=6;function Ua(s){return Math.max(0,s)*.7+8}function iD(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class sD{constructor(e,i,l,a){this.view=e,this.startEvent=i,this.style=l,this.mustSelect=a,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParent=wI(e.contentDOM),this.atoms=e.state.facet(yh).map(u=>u(e));let c=e.contentDOM.ownerDocument;c.addEventListener("mousemove",this.move=this.move.bind(this)),c.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(Qe.allowMultipleSelections)&&oD(e,i),this.dragging=aD(e,i)&&qy(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var i;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&iD(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let l=0,a=0,c=((i=this.scrollParent)===null||i===void 0?void 0:i.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},u=Iy(this.view);e.clientX-u.left<=c.left+za?l=-Ua(c.left-e.clientX):e.clientX+u.right>=c.right-za&&(l=Ua(e.clientX-c.right)),e.clientY-u.top<=c.top+za?a=-Ua(c.top-e.clientY):e.clientY+u.bottom>=c.bottom-za&&(a=Ua(e.clientY-c.bottom)),this.setScrollSpeed(l,a)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let l=0;l<e.ranges.length;l++){let a=e.ranges[l],c=null;if(a.empty){let u=Za(this.atoms,a.from,0);u!=a.from&&(c=ae.cursor(u,-1))}else{let u=Za(this.atoms,a.from,-1),f=Za(this.atoms,a.to,1);(u!=a.from||f!=a.to)&&(c=ae.range(a.from==a.anchor?u:f,a.from==a.head?u:f))}c&&(i||(i=e.ranges.slice()),i[l]=c)}return i?ae.create(i,e.mainIndex):e}select(e){let{view:i}=this,l=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!l.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:l,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function oD(s,e){let i=s.state.facet(yy);return i.length?i[0](e):Ie.mac?e.metaKey:e.ctrlKey}function lD(s,e){let i=s.state.facet(vy);return i.length?i[0](e):Ie.mac?!e.altKey:!e.ctrlKey}function aD(s,e){let{main:i}=s.state.selection;if(i.empty)return!1;let l=Ra(s.root);if(!l||l.rangeCount==0)return!0;let a=l.getRangeAt(0).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.left<=e.clientX&&u.right>=e.clientX&&u.top<=e.clientY&&u.bottom>=e.clientY)return!0}return!1}function cD(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,l;i!=s.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(l=xt.get(i))&&l.ignoreEvent(e))return!1;return!0}const nr=Object.create(null),rr=Object.create(null),Uy=Ie.ie&&Ie.ie_version<15||Ie.ios&&Ie.webkit_version<604;function uD(s){let e=s.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{s.focus(),i.remove(),Hy(s,i.value)},50)}function Hy(s,e){let{state:i}=s,l,a=1,c=i.toText(e),u=c.lines==i.selection.ranges.length;if(Eh!=null&&i.selection.ranges.every(h=>h.empty)&&Eh==c.toString()){let h=-1;l=i.changeByRange(d=>{let m=i.doc.lineAt(d.from);if(m.from==h)return{range:d};h=m.from;let p=i.toText((u?c.line(a++).text:e)+i.lineBreak);return{changes:{from:m.from,insert:p},range:ae.cursor(d.from+p.length)}})}else u?l=i.changeByRange(h=>{let d=c.line(a++);return{changes:{from:h.from,to:h.to,insert:d.text},range:ae.cursor(h.from+d.length)}}):l=i.replaceSelection(c);s.dispatch(l,{userEvent:"input.paste",scrollIntoView:!0})}rr.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft},nr.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&(s.inputState.lastEscPress=Date.now()),!1),rr.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")},rr.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")},nr.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let l of s.state.facet(by))if(i=l(s,e),i)break;if(!i&&e.button==0&&(i=dD(s,e)),i){let l=!s.hasFocus;s.inputState.startMouseSelection(new sD(s,e,i,l)),l&&s.observer.ignore(()=>H0(s.contentDOM));let a=s.inputState.mouseSelection;if(a)return a.start(e),a.dragging===!1}return!1};function Ky(s,e,i,l){if(l==1)return ae.cursor(e,i);if(l==2)return GI(s.state,e,i);{let a=Ut.find(s.docView,e),c=s.state.doc.lineAt(a?a.posAtEnd:e),u=a?a.posAtStart:c.from,f=a?a.posAtEnd:c.to;return f<s.state.doc.length&&f==c.to&&f++,ae.range(u,f)}}let Gy=(s,e)=>s>=e.top&&s<=e.bottom,Jy=(s,e,i)=>Gy(e,i)&&s>=i.left&&s<=i.right;function fD(s,e,i,l){let a=Ut.find(s.docView,e);if(!a)return 1;let c=e-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;let u=a.coordsAt(c,-1);if(u&&Jy(i,l,u))return-1;let f=a.coordsAt(c,1);return f&&Jy(i,l,f)?1:u&&Gy(l,u)?-1:1}function Yy(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:fD(s,i,e.clientX,e.clientY)}}const hD=Ie.ie&&Ie.ie_version<=11;let Xy=null,Qy=0,_y=0;function qy(s){if(!hD)return s.detail;let e=Xy,i=_y;return Xy=s,_y=Date.now(),Qy=!e||i>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Qy+1)%3:1}function dD(s,e){let i=Yy(s,e),l=qy(e),a=s.state.selection;return{update(c){c.docChanged&&(i.pos=c.changes.mapPos(i.pos),a=a.map(c.changes))},get(c,u,f){let h=Yy(s,c),d,m=Ky(s,h.pos,h.bias,l);if(i.pos!=h.pos&&!u){let p=Ky(s,i.pos,i.bias,l),v=Math.min(p.from,m.from),y=Math.max(p.to,m.to);m=v<m.from?ae.range(v,y):ae.range(y,v)}return u?a.replaceRange(a.main.extend(m.from,m.to)):f&&l==1&&a.ranges.length>1&&(d=mD(a,h.pos))?d:f?a.addRange(m):ae.create([m])}}}function mD(s,e){for(let i=0;i<s.ranges.length;i++){let{from:l,to:a}=s.ranges[i];if(l<=e&&a>=e)return ae.create(s.ranges.slice(0,i).concat(s.ranges.slice(i+1)),s.mainIndex==i?0:s.mainIndex-(s.mainIndex>i?1:0))}return null}nr.dragstart=(s,e)=>{let{selection:{main:i}}=s.state;if(e.target.draggable){let a=s.docView.nearest(e.target);if(a&&a.isWidget){let c=a.posAtStart,u=c+a.length;(c>=i.to||u<=i.from)&&(i=ae.range(c,u))}}let{inputState:l}=s;return l.mouseSelection&&(l.mouseSelection.dragging=!0),l.draggedContent=i,e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(i.from,i.to)),e.dataTransfer.effectAllowed="copyMove"),!1},nr.dragend=s=>(s.inputState.draggedContent=null,!1);function ev(s,e,i,l){if(!i)return;let a=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:c}=s.inputState,u=l&&c&&lD(s,e)?{from:c.from,to:c.to}:null,f={from:a,insert:i},h=s.state.changes(u?[u,f]:f);s.focus(),s.dispatch({changes:h,selection:{anchor:h.mapPos(a,-1),head:h.mapPos(a,1)},userEvent:u?"move.drop":"input.drop"}),s.inputState.draggedContent=null}nr.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let l=Array(i.length),a=0,c=()=>{++a==i.length&&ev(s,e,l.filter(u=>u!=null).join(s.state.lineBreak),!1)};for(let u=0;u<i.length;u++){let f=new FileReader;f.onerror=c,f.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(f.result)||(l[u]=f.result),c()},f.readAsText(i[u])}return!0}else{let l=e.dataTransfer.getData("Text");if(l)return ev(s,e,l,!0),!0}return!1},nr.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let i=Uy?null:e.clipboardData;return i?(Hy(s,i.getData("text/plain")||i.getData("text/uri-text")),!0):(uD(s),!1)};function pD(s,e){let i=s.dom.parentNode;if(!i)return;let l=i.appendChild(document.createElement("textarea"));l.style.cssText="position: fixed; left: -10000px; top: 10px",l.value=e,l.focus(),l.selectionEnd=e.length,l.selectionStart=0,setTimeout(()=>{l.remove(),s.focus()},50)}function gD(s){let e=[],i=[],l=!1;for(let a of s.selection.ranges)a.empty||(e.push(s.sliceDoc(a.from,a.to)),i.push(a));if(!e.length){let a=-1;for(let{from:c}of s.selection.ranges){let u=s.doc.lineAt(c);u.number>a&&(e.push(u.text),i.push({from:u.from,to:Math.min(s.doc.length,u.to+1)})),a=u.number}l=!0}return{text:e.join(s.lineBreak),ranges:i,linewise:l}}let Eh=null;nr.copy=nr.cut=(s,e)=>{let{text:i,ranges:l,linewise:a}=gD(s.state);if(!i&&!a)return!1;Eh=a?i:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:l,scrollIntoView:!0,userEvent:"delete.cut"});let c=Uy?null:e.clipboardData;return c?(c.clearData(),c.setData("text/plain",i),!0):(pD(s,i),!1)};const tv=yr.define();function nv(s,e){let i=[];for(let l of s.facet(Ey)){let a=l(s,e);a&&i.push(a)}return i?s.update({effects:i,annotations:tv.of(!0)}):null}function rv(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let i=nv(s.state,e);i?s.dispatch(i):s.update([])}},10)}rr.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),rv(s)},rr.blur=s=>{s.observer.clearSelectionRange(),rv(s)},rr.compositionstart=rr.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)},rr.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,Ie.chrome&&Ie.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50)},rr.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()},nr.beforeinput=(s,e)=>{var i;let l;if(Ie.chrome&&Ie.android&&(l=Zy.find(a=>a.inputType==e.inputType))&&(s.observer.delayAndroidKey(l.key,l.keyCode),l.key=="Backspace"||l.key=="Delete")){let a=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>a+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return!1};const iv=new Set;function yD(s){iv.has(s)||(iv.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const sv=["pre-wrap","normal","pre-line","break-spaces"];class ov{constructor(e){this.lineWrapping=e,this.doc=ct.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,i){let l=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(l+=Math.max(0,Math.ceil((i-e-l*this.lineLength*.5)/this.lineLength))),this.lineHeight*l}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sv.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let l=0;l<e.length;l++){let a=e[l];a<0?l++:this.heightSamples[Math.floor(a*10)]||(i=!0,this.heightSamples[Math.floor(a*10)]=!0)}return i}refresh(e,i,l,a,c,u){let f=sv.indexOf(e)>-1,h=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=f;if(this.lineWrapping=f,this.lineHeight=i,this.charWidth=l,this.textHeight=a,this.lineLength=c,h){this.heightSamples={};for(let d=0;d<u.length;d++){let m=u[d];m<0?d++:this.heightSamples[Math.floor(m*10)]=!0}}return h}}class lv{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class xr{constructor(e,i,l,a,c){this.from=e,this.length=i,this.top=l,this.height=a,this._content=c}get type(){return typeof this._content=="number"?dn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof wi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new xr(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var vt=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(vt||(vt={}));const Ha=.001;class sn{constructor(e,i,l=2){this.length=e,this.height=i,this.flags=l}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,i){this.height!=i&&(Math.abs(this.height-i)>Ha&&(e.heightChanged=!0),this.height=i)}replace(e,i,l){return sn.of(l)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,l,a){let c=this,u=l.doc;for(let f=a.length-1;f>=0;f--){let{fromA:h,toA:d,fromB:m,toB:p}=a[f],v=c.lineAt(h,vt.ByPosNoHeight,l.setDoc(i),0,0),y=v.to>=d?v:c.lineAt(d,vt.ByPosNoHeight,l,0,0);for(p+=y.to-d,d=y.to;f>0&&v.from<=a[f-1].toA;)h=a[f-1].fromA,m=a[f-1].fromB,f--,h<v.from&&(v=c.lineAt(h,vt.ByPosNoHeight,l,0,0));m+=v.from-h,h=v.from;let S=wh.build(l.setDoc(u),e,m,p);c=c.replace(h,d,S)}return c.updateHeight(l,0)}static empty(){return new Ln(0,0)}static of(e){if(e.length==1)return e[0];let i=0,l=e.length,a=0,c=0;for(;;)if(i==l)if(a>c*2){let f=e[i-1];f.break?e.splice(--i,1,f.left,null,f.right):e.splice(--i,1,f.left,f.right),l+=1+f.break,a-=f.size}else if(c>a*2){let f=e[l];f.break?e.splice(l,1,f.left,null,f.right):e.splice(l,1,f.left,f.right),l+=2+f.break,c-=f.size}else break;else if(a<c){let f=e[i++];f&&(a+=f.size)}else{let f=e[--l];f&&(c+=f.size)}let u=0;return e[i-1]==null?(u=1,i--):e[i]==null&&(u=1,l++),new vD(sn.of(e.slice(0,i)),u,sn.of(e.slice(l)))}}sn.prototype.size=1;class av extends sn{constructor(e,i,l){super(e,i),this.deco=l}blockAt(e,i,l,a){return new xr(a,this.length,l,this.height,this.deco||0)}lineAt(e,i,l,a,c){return this.blockAt(0,l,a,c)}forEachLine(e,i,l,a,c,u){e<=c+this.length&&i>=c&&u(this.blockAt(0,l,a,c))}updateHeight(e,i=0,l=!1,a){return a&&a.from<=i&&a.more&&this.setHeight(e,a.heights[a.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ln extends av{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,l,a){return new xr(a,this.length,l,this.height,this.breaks)}replace(e,i,l){let a=l[0];return l.length==1&&(a instanceof Ln||a instanceof Xt&&a.flags&4)&&Math.abs(this.length-a.length)<10?(a instanceof Xt?a=new Ln(a.length,this.height):a.height=this.height,this.outdated||(a.outdated=!1),a):sn.of(l)}updateHeight(e,i=0,l=!1,a){return a&&a.from<=i&&a.more?this.setHeight(e,a.heights[a.index++]):(l||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xt extends sn{constructor(e){super(e,0)}heightMetrics(e,i){let l=e.doc.lineAt(i).number,a=e.doc.lineAt(i+this.length).number,c=a-l+1,u,f=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*c);u=h/c,this.length>c+1&&(f=(this.height-h)/(this.length-c-1))}else u=this.height/c;return{firstLine:l,lastLine:a,perLine:u,perChar:f}}blockAt(e,i,l,a){let{firstLine:c,lastLine:u,perLine:f,perChar:h}=this.heightMetrics(i,a);if(i.lineWrapping){let d=a+Math.round(Math.max(0,Math.min(1,(e-l)/this.height))*this.length),m=i.doc.lineAt(d),p=f+m.length*h,v=Math.max(l,e-p/2);return new xr(m.from,m.length,v,p,0)}else{let d=Math.max(0,Math.min(u-c,Math.floor((e-l)/f))),{from:m,length:p}=i.doc.line(c+d);return new xr(m,p,l+f*d,f,0)}}lineAt(e,i,l,a,c){if(i==vt.ByHeight)return this.blockAt(e,l,a,c);if(i==vt.ByPosNoHeight){let{from:y,to:S}=l.doc.lineAt(e);return new xr(y,S-y,0,0,0)}let{firstLine:u,perLine:f,perChar:h}=this.heightMetrics(l,c),d=l.doc.lineAt(e),m=f+d.length*h,p=d.number-u,v=a+f*p+h*(d.from-c-p);return new xr(d.from,d.length,Math.max(a,Math.min(v,a+this.height-m)),m,0)}forEachLine(e,i,l,a,c,u){e=Math.max(e,c),i=Math.min(i,c+this.length);let{firstLine:f,perLine:h,perChar:d}=this.heightMetrics(l,c);for(let m=e,p=a;m<=i;){let v=l.doc.lineAt(m);if(m==e){let S=v.number-f;p+=h*S+d*(e-c-S)}let y=h+d*v.length;u(new xr(v.from,v.length,p,y,0)),p+=y,m=v.to+1}}replace(e,i,l){let a=this.length-i;if(a>0){let c=l[l.length-1];c instanceof Xt?l[l.length-1]=new Xt(c.length+a):l.push(null,new Xt(a-1))}if(e>0){let c=l[0];c instanceof Xt?l[0]=new Xt(e+c.length):l.unshift(new Xt(e-1),null)}return sn.of(l)}decomposeLeft(e,i){i.push(new Xt(e-1),null)}decomposeRight(e,i){i.push(null,new Xt(this.length-e-1))}updateHeight(e,i=0,l=!1,a){let c=i+this.length;if(a&&a.from<=i+this.length&&a.more){let u=[],f=Math.max(i,a.from),h=-1;for(a.from>i&&u.push(new Xt(a.from-i-1).updateHeight(e,i));f<=c&&a.more;){let m=e.doc.lineAt(f).length;u.length&&u.push(null);let p=a.heights[a.index++];h==-1?h=p:Math.abs(p-h)>=Ha&&(h=-2);let v=new Ln(m,p);v.outdated=!1,u.push(v),f+=m+1}f<=c&&u.push(null,new Xt(c-f).updateHeight(e,f));let d=sn.of(u);return(h<0||Math.abs(d.height-this.height)>=Ha||Math.abs(h-this.heightMetrics(e,i).perLine)>=Ha)&&(e.heightChanged=!0),d}else(l||this.outdated)&&(this.setHeight(e,e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class vD extends sn{constructor(e,i,l){super(e.length+i+l.length,e.height+l.height,i|(e.outdated||l.outdated?2:0)),this.left=e,this.right=l,this.size=e.size+l.size}get break(){return this.flags&1}blockAt(e,i,l,a){let c=l+this.left.height;return e<c?this.left.blockAt(e,i,l,a):this.right.blockAt(e,i,c,a+this.left.length+this.break)}lineAt(e,i,l,a,c){let u=a+this.left.height,f=c+this.left.length+this.break,h=i==vt.ByHeight?e<u:e<f,d=h?this.left.lineAt(e,i,l,a,c):this.right.lineAt(e,i,l,u,f);if(this.break||(h?d.to<f:d.from>f))return d;let m=i==vt.ByPosNoHeight?vt.ByPosNoHeight:vt.ByPos;return h?d.join(this.right.lineAt(f,m,l,u,f)):this.left.lineAt(f,m,l,a,c).join(d)}forEachLine(e,i,l,a,c,u){let f=a+this.left.height,h=c+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,i,l,a,c,u),i>=h&&this.right.forEachLine(e,i,l,f,h,u);else{let d=this.lineAt(h,vt.ByPos,l,a,c);e<d.from&&this.left.forEachLine(e,d.from-1,l,a,c,u),d.to>=e&&d.from<=i&&u(d),i>d.to&&this.right.forEachLine(d.to+1,i,l,f,h,u)}}replace(e,i,l){let a=this.left.length+this.break;if(i<a)return this.balanced(this.left.replace(e,i,l),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-a,i-a,l));let c=[];e>0&&this.decomposeLeft(e,c);let u=c.length;for(let f of l)c.push(f);if(e>0&&cv(c,u-1),i<this.length){let f=c.length;this.decomposeRight(i,c),cv(c,f)}return sn.of(c)}decomposeLeft(e,i){let l=this.left.length;if(e<=l)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(l++,e>=l&&i.push(null)),e>l&&this.right.decomposeLeft(e-l,i)}decomposeRight(e,i){let l=this.left.length,a=l+this.break;if(e>=a)return this.right.decomposeRight(e-a,i);e<l&&this.left.decomposeRight(e,i),this.break&&e<a&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?sn.of(this.break?[e,null,i]:[e,i]):(this.left=e,this.right=i,this.height=e.height+i.height,this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,l=!1,a){let{left:c,right:u}=this,f=i+c.length+this.break,h=null;return a&&a.from<=i+c.length&&a.more?h=c=c.updateHeight(e,i,l,a):c.updateHeight(e,i,l),a&&a.from<=f+u.length&&a.more?h=u=u.updateHeight(e,f,l,a):u.updateHeight(e,f,l),h?this.balanced(c,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function cv(s,e){let i,l;s[e]==null&&(i=s[e-1])instanceof Xt&&(l=s[e+1])instanceof Xt&&s.splice(e-1,3,new Xt(i.length+1+l.length))}const bD=5;class wh{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let l=Math.min(i,this.lineEnd),a=this.nodes[this.nodes.length-1];a instanceof Ln?a.length+=l-this.pos:(l>this.pos||!this.isCovered)&&this.nodes.push(new Ln(l-this.pos,-1)),this.writtenTo=l,i>l&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,l){if(e<i||l.heightRelevant){let a=l.widget?l.widget.estimatedHeight:0,c=l.widget?l.widget.lineBreaks:0;a<0&&(a=this.oracle.lineHeight);let u=i-e;l.block?this.addBlock(new av(u,a,l)):(u||c||a>=bD)&&this.addLineDeco(a,c,u)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ln(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let l=new Xt(i-e);return this.oracle.doc.lineAt(e).to==i&&(l.flags|=4),l}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ln)return e;let i=new Ln(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,l){let a=this.ensureLine();a.length+=l,a.collapsed+=l,a.widgetHeight=Math.max(a.widgetHeight,e),a.breaks+=i,this.writtenTo=this.pos=this.pos+l}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof Ln)&&!this.isCovered?this.nodes.push(new Ln(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let l=e;for(let a of this.nodes)a instanceof Ln&&a.updateHeight(this.oracle,l),l+=a?a.length:1;return this.nodes}static build(e,i,l,a){let c=new wh(l,e);return _e.spans(i,l,a,c,0),c.finish(l)}}function xD(s,e,i){let l=new SD;return _e.compare(s,e,i,l,0),l.changes}class SD{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,l,a){(e<i||l&&l.heightRelevant||a&&a.heightRelevant)&&uh(e,i,this.changes,5)}}function ED(s,e){let i=s.getBoundingClientRect(),l=s.ownerDocument,a=l.defaultView||window,c=Math.max(0,i.left),u=Math.min(a.innerWidth,i.right),f=Math.max(0,i.top),h=Math.min(a.innerHeight,i.bottom);for(let d=s.parentNode;d&&d!=l.body;)if(d.nodeType==1){let m=d,p=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&p.overflow!="visible"){let v=m.getBoundingClientRect();c=Math.max(c,v.left),u=Math.min(u,v.right),f=Math.max(f,v.top),h=d==s.parentNode?v.bottom:Math.min(h,v.bottom)}d=p.position=="absolute"||p.position=="fixed"?m.offsetParent:m.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:c-i.left,right:Math.max(c,u)-i.left,top:f-(i.top+e),bottom:Math.max(f,h)-(i.top+e)}}function wD(s,e){let i=s.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class Ch{constructor(e,i,l){this.from=e,this.to=i,this.size=l}static same(e,i){if(e.length!=i.length)return!1;for(let l=0;l<e.length;l++){let a=e[l],c=i[l];if(a.from!=c.from||a.to!=c.to||a.size!=c.size)return!1}return!0}draw(e,i){return Me.replace({widget:new CD(this.size*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class CD extends vr{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class uv{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=fv,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=dt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(Wa).some(l=>typeof l!="function"&&l.class=="cm-lineWrapping");this.heightOracle=new ov(i),this.stateDeco=e.facet(tl).filter(l=>typeof l!="function"),this.heightMap=sn.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle.setDoc(e.doc),[new Rn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Me.set(this.lineGaps.map(l=>l.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let l=0;l<=1;l++){let a=l?i.head:i.anchor;if(!e.some(({from:c,to:u})=>a>=c&&a<=u)){let{from:c,to:u}=this.lineBlockAt(a);e.push(new Ka(c,u))}}this.viewports=e.sort((l,a)=>l.from-a.from),this.scaler=this.heightMap.height<=7e6?fv:new kD(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:rl(e,this.scaler))})}update(e,i=null){this.state=e.state;let l=this.stateDeco;this.stateDeco=this.state.facet(tl).filter(m=>typeof m!="function");let a=e.changedRanges,c=Rn.extendWithRanges(a,xD(l,this.stateDeco,e?e.changes:Zt.empty(this.state.doc.length))),u=this.heightMap.height,f=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),c),this.heightMap.height!=u&&(e.flags|=2),f?(this.scrollAnchorPos=e.changes.mapPos(f.from,-1),this.scrollAnchorHeight=f.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=c.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<h.from||i.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,i));let d=!e.changes.empty||e.flags&2||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),d&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Cy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,l=window.getComputedStyle(i),a=this.heightOracle,c=l.whiteSpace;this.defaultTextDirection=l.direction=="rtl"?dt.RTL:dt.LTR;let u=this.heightOracle.mustRefreshForWrapping(c),f=i.getBoundingClientRect(),h=u||this.mustMeasureContent||this.contentDOMHeight!=f.height;this.contentDOMHeight=f.height,this.mustMeasureContent=!1;let d=0,m=0;if(f.width&&f.height){let{scaleX:P,scaleY:M}=U0(i,f);(this.scaleX!=P||this.scaleY!=M)&&(this.scaleX=P,this.scaleY=M,d|=8,u=h=!0)}let p=(parseInt(l.paddingTop)||0)*this.scaleY,v=(parseInt(l.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=v)&&(this.paddingTop=p,this.paddingBottom=v,d|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(a.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=8);let y=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=y&&(this.scrollAnchorHeight=-1,this.scrollTop=y),this.scrolledToBottom=J0(e.scrollDOM);let S=(this.printing?wD:ED)(i,this.paddingTop),E=S.top-this.pixelViewport.top,w=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let O=f.width;if((this.contentDOMWidth!=O||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=f.width,this.editorHeight=e.scrollDOM.clientHeight,d|=8),h){let P=e.docView.measureVisibleLineHeights(this.viewport);if(a.mustRefreshForHeights(P)&&(u=!0),u||a.lineWrapping&&Math.abs(O-this.contentDOMWidth)>a.charWidth){let{lineHeight:M,charWidth:$,textHeight:N}=e.docView.measureTextSize();u=M>0&&a.refresh(c,M,$,N,O/$,P),u&&(e.docView.minWidth=0,d|=8)}E>0&&w>0?m=Math.max(E,w):E<0&&w<0&&(m=Math.min(E,w)),a.heightChanged=!1;for(let M of this.viewports){let $=M.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(M);this.heightMap=(u?sn.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle,[new Rn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(a,0,u,new lv(M.from,$))}a.heightChanged&&(d|=2)}let I=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return I&&(this.viewport=this.getViewport(m,this.scrollTarget)),this.updateForViewport(),(d&2||I)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let l=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),a=this.heightMap,c=this.heightOracle,{visibleTop:u,visibleBottom:f}=this,h=new Ka(a.lineAt(u-l*1e3,vt.ByHeight,c,0,0).from,a.lineAt(f+(1-l)*1e3,vt.ByHeight,c,0,0).to);if(i){let{head:d}=i.range;if(d<h.from||d>h.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=a.lineAt(d,vt.ByPos,c,0,0),v;i.y=="center"?v=(p.top+p.bottom)/2-m/2:i.y=="start"||i.y=="nearest"&&d<h.from?v=p.top:v=p.bottom-m,h=new Ka(a.lineAt(v-1e3/2,vt.ByHeight,c,0,0).from,a.lineAt(v+m+1e3/2,vt.ByHeight,c,0,0).to)}}return h}mapViewport(e,i){let l=i.mapPos(e.from,-1),a=i.mapPos(e.to,1);return new Ka(this.heightMap.lineAt(l,vt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(a,vt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},l=0){if(!this.inView)return!0;let{top:a}=this.heightMap.lineAt(e,vt.ByPos,this.heightOracle,0,0),{bottom:c}=this.heightMap.lineAt(i,vt.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:f}=this;return(e==0||a<=u-Math.max(10,Math.min(-l,250)))&&(i==this.state.doc.length||c>=f+Math.max(10,Math.min(l,250)))&&a>u-2*1e3&&c<f+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let l=[];for(let a of e)i.touchesRange(a.from,a.to)||l.push(new Ch(i.mapPos(a.from),i.mapPos(a.to),a.size));return l}ensureLineGaps(e,i){let l=this.heightOracle.lineWrapping,a=l?1e4:2e3,c=a>>1,u=a<<1;if(this.defaultTextDirection!=dt.LTR&&!l)return[];let f=[],h=(d,m,p,v)=>{if(m-d<c)return;let y=this.state.selection.main,S=[y.from];y.empty||S.push(y.to);for(let w of S)if(w>d&&w<m){h(d,w-10,p,v),h(w+10,m,p,v);return}let E=AD(e,w=>w.from>=p.from&&w.to<=p.to&&Math.abs(w.from-d)<c&&Math.abs(w.to-m)<c&&!S.some(C=>w.from<C&&w.to>C));if(!E){if(m<p.to&&i&&l&&i.visibleRanges.some(w=>w.from<=m&&w.to>=m)){let w=i.moveToLineBoundary(ae.cursor(m),!1,!0).head;w>d&&(m=w)}E=new Ch(d,m,this.gapSize(p,d,m,v))}f.push(E)};for(let d of this.viewportLines){if(d.length<u)continue;let m=OD(d.from,d.to,this.stateDeco);if(m.total<u)continue;let p=this.scrollTarget?this.scrollTarget.range.head:null,v,y;if(l){let S=a/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,w;if(p!=null){let C=Ja(m,p),O=((this.visibleBottom-this.visibleTop)/2+S)/d.height;E=C-O,w=C+O}else E=(this.visibleTop-d.top-S)/d.height,w=(this.visibleBottom-d.top+S)/d.height;v=Ga(m,E),y=Ga(m,w)}else{let S=m.total*this.heightOracle.charWidth,E=a*this.heightOracle.charWidth,w,C;if(p!=null){let O=Ja(m,p),I=((this.pixelViewport.right-this.pixelViewport.left)/2+E)/S;w=O-I,C=O+I}else w=(this.pixelViewport.left-E)/S,C=(this.pixelViewport.right+E)/S;v=Ga(m,w),y=Ga(m,C)}v>d.from&&h(d.from,v,d,m),y<d.to&&h(y,d.to,d,m)}return f}gapSize(e,i,l,a){let c=Ja(a,l)-Ja(a,i);return this.heightOracle.lineWrapping?e.height*c:a.total*this.heightOracle.charWidth*c}updateLineGaps(e){Ch.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Me.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];_e.spans(e,this.viewport.from,this.viewport.to,{span(a,c){i.push({from:a,to:c})},point(){}},20);let l=i.length!=this.visibleRanges.length||this.visibleRanges.some((a,c)=>a.from!=i[c].from||a.to!=i[c].to);return this.visibleRanges=i,l?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||rl(this.heightMap.lineAt(e,vt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return rl(this.heightMap.lineAt(this.scaler.fromDOM(e),vt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return rl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ka{constructor(e,i){this.from=e,this.to=i}}function OD(s,e,i){let l=[],a=s,c=0;return _e.spans(i,s,e,{span(){},point(u,f){u>a&&(l.push({from:a,to:u}),c+=u-a),a=f}},20),a<e&&(l.push({from:a,to:e}),c+=e-a),{total:c,ranges:l}}function Ga({total:s,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let l=Math.floor(s*i);for(let a=0;;a++){let{from:c,to:u}=e[a],f=u-c;if(l<=f)return c+l;l-=f}}function Ja(s,e){let i=0;for(let{from:l,to:a}of s.ranges){if(e<=a){i+=e-l;break}i+=a-l}return i/s.total}function AD(s,e){for(let i of s)if(e(i))return i}const fv={toDOM(s){return s},fromDOM(s){return s},scale:1};class kD{constructor(e,i,l){let a=0,c=0,u=0;this.viewports=l.map(({from:f,to:h})=>{let d=i.lineAt(f,vt.ByPos,e,0,0).top,m=i.lineAt(h,vt.ByPos,e,0,0).bottom;return a+=m-d,{from:f,to:h,top:d,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-a)/(i.height-a);for(let f of this.viewports)f.domTop=u+(f.top-c)*this.scale,u=f.domBottom=f.domTop+(f.bottom-f.top),c=f.bottom}toDOM(e){for(let i=0,l=0,a=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.top)return a+(e-l)*this.scale;if(e<=c.bottom)return c.domTop+(e-c.top);l=c.bottom,a=c.domBottom}}fromDOM(e){for(let i=0,l=0,a=0;;i++){let c=i<this.viewports.length?this.viewports[i]:null;if(!c||e<c.domTop)return l+(e-a)/this.scale;if(e<=c.domBottom)return c.top+(e-c.domTop);l=c.bottom,a=c.domBottom}}}function rl(s,e){if(e.scale==1)return s;let i=e.toDOM(s.top),l=e.toDOM(s.bottom);return new xr(s.from,s.length,i,l-i,Array.isArray(s._content)?s._content.map(a=>rl(a,e)):s._content)}const Ya=ke.define({combine:s=>s.join(" ")}),Oh=ke.define({combine:s=>s.indexOf(!0)>-1}),Ah=bi.newName(),hv=bi.newName(),dv=bi.newName(),mv={"&light":"."+hv,"&dark":"."+dv};function kh(s,e,i){return new bi(e,{finish(l){return/&/.test(l)?l.replace(/&\w*/,a=>{if(a=="&")return s;if(!i||!i[a])throw new RangeError(`Unsupported selector: ${a}`);return i[a]}):s+" "+l}})}const PD=kh("."+Ah,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},mv),il="\uFFFF";class TD{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(Qe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=il}readRange(e,i){if(!e)return this;let l=e.parentNode;for(let a=e;;){this.findPointBefore(l,a);let c=this.text.length;this.readNode(a);let u=a.nextSibling;if(u==i)break;let f=xt.get(a),h=xt.get(u);(f&&h?f.breakAfter:(f?f.breakAfter:pv(a))||pv(u)&&(a.nodeName!="BR"||a.cmIgnore)&&this.text.length>c)&&this.lineBreak(),a=u}return this.findPointBefore(l,i),this}readTextNode(e){let i=e.nodeValue;for(let l of this.points)l.node==e&&(l.pos=this.text.length+Math.min(l.offset,i.length));for(let l=0,a=this.lineSeparator?null:/\r\n?|\n/g;;){let c=-1,u=1,f;if(this.lineSeparator?(c=i.indexOf(this.lineSeparator,l),u=this.lineSeparator.length):(f=a.exec(i))&&(c=f.index,u=f[0].length),this.append(i.slice(l,c<0?i.length:c)),c<0)break;if(this.lineBreak(),u>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=u-1);l=c+u}}readNode(e){if(e.cmIgnore)return;let i=xt.get(e),l=i&&i.overrideDOMText;if(l!=null){this.findPointInside(e,l.length);for(let a=l.iter();!a.next().done;)a.lineBreak?this.lineBreak():this.append(a.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let l of this.points)l.node==e&&e.childNodes[l.offset]==i&&(l.pos=this.text.length)}findPointInside(e,i){for(let l of this.points)(e.nodeType==3?l.node==e:e.contains(l.node))&&(l.pos=this.text.length+(ID(e,l.node,l.offset)?i:0))}}function ID(s,e,i){for(;;){if(!e||i<Kr(e))return!1;if(e==s)return!0;i=Xo(e)+1,e=e.parentNode}}function pv(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}class gv{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class DD{constructor(e,i,l,a){this.typeOver=a,this.bounds=null,this.text="";let{impreciseHead:c,impreciseAnchor:u}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,l,0))){let f=c||u?[]:LD(e),h=new TD(f,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=ND(f,this.bounds.from)}else{let f=e.observer.selectionRange,h=c&&c.node==f.focusNode&&c.offset==f.focusOffset||!th(e.contentDOM,f.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(f.focusNode,f.focusOffset),d=u&&u.node==f.anchorNode&&u.offset==f.anchorOffset||!th(e.contentDOM,f.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(f.anchorNode,f.anchorOffset),m=e.viewport;if(Ie.ios&&e.state.selection.main.empty&&h!=d&&(m.from>0||m.to<e.state.doc.length)){let p=m.from-Math.min(h,d),v=m.to-Math.max(h,d);(p==0||p==1)&&(v==0||v==-1)&&(h=0,d=e.state.doc.length)}this.newSel=ae.single(d,h)}}}function yv(s,e){let i,{newSel:l}=e,a=s.state.selection.main,c=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:u,to:f}=e.bounds,h=a.from,d=null;(c===8||Ie.android&&e.text.length<f-u)&&(h=a.to,d="end");let m=RD(s.state.doc.sliceString(u,f,il),e.text,h-u,d);m&&(Ie.chrome&&c==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==il+il&&m.toB--,i={from:u+m.from,to:u+m.toA,insert:ct.of(e.text.slice(m.from,m.toB).split(il))})}else l&&(!s.hasFocus&&s.state.facet(ja)||l.main.eq(a))&&(l=null);if(!i&&!l)return!1;if(!i&&e.typeOver&&!a.empty&&l&&l.main.empty?i={from:a.from,to:a.to,insert:s.state.doc.slice(a.from,a.to)}:i&&i.from>=a.from&&i.to<=a.to&&(i.from!=a.from||i.to!=a.to)&&a.to-a.from-(i.to-i.from)<=4?i={from:a.from,to:a.to,insert:s.state.doc.slice(a.from,i.from).append(i.insert).append(s.state.doc.slice(i.to,a.to))}:(Ie.mac||Ie.android)&&i&&i.from==i.to&&i.from==a.head-1&&/^\. ?$/.test(i.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(l&&i.insert.length==2&&(l=ae.single(l.main.anchor-1,l.main.head-1)),i={from:a.from,to:a.to,insert:ct.of([" "])}):Ie.chrome&&i&&i.from==i.to&&i.from==a.head&&i.insert.toString()==`
 `&&s.lineWrapping&&(l&&(l=ae.single(l.main.anchor-1,l.main.head-1)),i={from:a.from,to:a.to,insert:ct.of([" "])}),i){if(Ie.ios&&s.inputState.flushIOSKey()||Ie.android&&(i.from==a.from&&i.to==a.to&&i.insert.length==1&&i.insert.lines==2&&Ms(s.contentDOM,"Enter",13)||(i.from==a.from-1&&i.to==a.to&&i.insert.length==0||c==8&&i.insert.length<i.to-i.from&&i.to>a.head)&&Ms(s.contentDOM,"Backspace",8)||i.from==a.from&&i.to==a.to+1&&i.insert.length==0&&Ms(s.contentDOM,"Delete",46)))return!0;let u=i.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let f,h=()=>f||(f=MD(s,i,l));return s.state.facet(Sy).some(d=>d(s,i.from,i.to,u,h))||s.dispatch(h()),!0}else if(l&&!l.main.eq(a)){let u=!1,f="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(u=!0),f=s.inputState.lastSelectionOrigin),s.dispatch({selection:l,scrollIntoView:u,userEvent:f}),!0}else return!1}function MD(s,e,i){let l,a=s.state,c=a.selection.main;if(e.from>=c.from&&e.to<=c.to&&e.to-e.from>=(c.to-c.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let f=c.from<e.from?a.sliceDoc(c.from,e.from):"",h=c.to>e.to?a.sliceDoc(e.to,c.to):"";l=a.replaceSelection(s.state.toText(f+e.insert.sliceString(0,void 0,s.state.lineBreak)+h))}else{let f=a.changes(e),h=i&&i.main.to<=f.newLength?i.main:void 0;if(a.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=c.to&&e.to>=c.to-10){let d=s.state.sliceDoc(e.from,e.to),m,p=i&&Ry(s,i.main.head);if(p){let S=e.insert.length-(e.to-e.from);m={from:p.from,to:p.to-S}}else m=s.state.doc.lineAt(c.head);let v=c.to-e.to,y=c.to-c.from;l=a.changeByRange(S=>{if(S.from==c.from&&S.to==c.to)return{changes:f,range:h||S.map(f)};let E=S.to-v,w=E-d.length;if(S.to-S.from!=y||s.state.sliceDoc(w,E)!=d||S.to>=m.from&&S.from<=m.to)return{range:S};let C=a.changes({from:w,to:E,insert:e.insert}),O=S.to-c.to;return{changes:C,range:h?ae.range(Math.max(0,h.anchor+O),Math.max(0,h.head+O)):S.map(C)}})}else l={changes:f,selection:h&&a.selection.replaceRange(h)}}let u="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,u+=".compose",s.inputState.compositionFirstChange&&(u+=".start",s.inputState.compositionFirstChange=!1)),a.update(l,{userEvent:u,scrollIntoView:!0})}function RD(s,e,i,l){let a=Math.min(s.length,e.length),c=0;for(;c<a&&s.charCodeAt(c)==e.charCodeAt(c);)c++;if(c==a&&s.length==e.length)return null;let u=s.length,f=e.length;for(;u>0&&f>0&&s.charCodeAt(u-1)==e.charCodeAt(f-1);)u--,f--;if(l=="end"){let h=Math.max(0,c-Math.min(u,f));i-=u+h-c}if(u<c&&s.length<e.length){let h=i<=c&&i>=u?c-i:0;c-=h,f=c+(f-u),u=c}else if(f<c){let h=i<=c&&i>=f?c-i:0;c-=h,u=c+(u-f),f=c}return{from:c,toA:u,toB:f}}function LD(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:i,anchorOffset:l,focusNode:a,focusOffset:c}=s.observer.selectionRange;return i&&(e.push(new gv(i,l)),(a!=i||c!=l)&&e.push(new gv(a,c))),e}function ND(s,e){if(s.length==0)return null;let i=s[0].pos,l=s.length==2?s[1].pos:i;return i>-1&&l>-1?ae.single(i+e,l+e):null}const $D={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ph=Ie.ie&&Ie.ie_version<=11;class FD{constructor(e){this.view=e,this.active=!1,this.selectionRange=new CI,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let l of i)this.queue.push(l);(Ie.ie&&Ie.ie_version<=11||Ie.ios&&e.composing)&&i.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),Ph&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,l)=>i!=e[l]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:l}=this,a=this.selectionRange;if(l.state.facet(ja)?l.root.activeElement!=this.dom:!La(l.dom,a))return;let c=a.anchorNode&&l.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(Ie.ie&&Ie.ie_version<=11||Ie.android&&Ie.chrome)&&!l.state.selection.main.empty&&a.focusNode&&Yo(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=Ie.safari&&e.root.nodeType==11&&xI(this.dom.ownerDocument)==this.dom&&BD(this.view)||Ra(e.root);if(!i||this.selectionRange.eq(i))return!1;let l=La(this.dom,i);return l&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&AI(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),l&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let l=this.dom;l;)if(l.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==l?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);for(let l of this.scrollTargets=i)l.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,$D),Ph&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ph&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var l;if(!this.delayedAndroidKey){let a=()=>{let c=this.delayedAndroidKey;c&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=c.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&c.force&&Ms(this.dom,c.key,c.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(a)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((l=this.delayedAndroidKey)===null||l===void 0)&&l.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,l=-1,a=!1;for(let c of e){let u=this.readMutation(c);u&&(u.typeOver&&(a=!0),i==-1?{from:i,to:l}=u:(i=Math.min(u.from,i),l=Math.max(u.to,l)))}return{from:i,to:l,typeOver:a}}readChange(){let{from:e,to:i,typeOver:l}=this.processRecords(),a=this.selectionChanged&&La(this.dom,this.selectionRange);if(e<0&&!a)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let c=new DD(this.view,e,i,l);return this.view.docView.domChanged={newSel:c.newSel?c.newSel.main:null},c}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let l=this.view.state,a=yv(this.view,i);return this.view.state==l&&this.view.update([]),a}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let l=vv(i,e.previousSibling||e.target.previousSibling,-1),a=vv(i,e.nextSibling||e.target.nextSibling,1);return{from:l?i.posAfter(l):i.posAtStart,to:a?i.posBefore(a):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,i,l;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(l=this.resizeScroll)===null||l===void 0||l.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function vv(s,e,i){for(;e;){let l=xt.get(e);if(l&&l.parent==s)return l;let a=e.parentNode;e=a!=s.dom?a:i>0?e.nextSibling:e.previousSibling}return null}function BD(s){let e=null;function i(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),!e)return null;let l=e.startContainer,a=e.startOffset,c=e.endContainer,u=e.endOffset,f=s.docView.domAtPos(s.state.selection.main.anchor);return Yo(f.node,f.offset,c,u)&&([l,a,c,u]=[c,u,l,a]),{anchorNode:l,anchorOffset:a,focusNode:c,focusOffset:u}}class we{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(l=>l.forEach(a=>i(a,this)))||(l=>this.update(l)),this.dispatch=this.dispatch.bind(this),this._root=e.root||OI(e.parent)||document,this.viewState=new uv(e.state||Qe.create(e)),e.scrollTo&&e.scrollTo.is(Ba)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(el).map(l=>new gh(l));for(let l of this.plugins)l.update(this);this.observer=new FD(this),this.inputState=new tD(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Dy(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let i=e.length==1&&e[0]instanceof zt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,l=!1,a,c=this.state;for(let v of e){if(v.startState!=c)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");c=v.state}if(this.destroyed){this.viewState.state=c;return}let u=this.hasFocus,f=0,h=null;e.some(v=>v.annotation(tv))?(this.inputState.notifiedFocused=u,f=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,h=nv(c,u),h||(f=1));let d=this.observer.delayedAndroidKey,m=null;if(d?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(c.doc)||!this.state.selection.eq(c.selection))&&(m=null)):this.observer.clear(),c.facet(Qe.phrases)!=this.state.facet(Qe.phrases))return this.setState(c);a=Va.create(this,c,e),a.flags|=f;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(p&&(p=p.map(v.changes)),v.scrollIntoView){let{main:y}=v.state.selection;p=new Ls(y.empty?y:ae.cursor(y.head,y.head>y.anchor?-1:1))}for(let y of v.effects)y.is(Ba)&&(p=y.value.clip(this.state))}this.viewState.update(a,p),this.bidiCache=Xa.update(this.bidiCache,a.changes),a.empty||(this.updatePlugins(a),this.inputState.update(a)),i=this.docView.update(a),this.state.facet(nl)!=this.styleModules&&this.mountStyles(),l=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(a.startState.facet(Ya)!=a.state.facet(Ya)&&(this.viewState.mustMeasureContent=!0),(i||l||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!a.empty)for(let v of this.state.facet(ph))try{v(a)}catch(y){Zn(this.state,y,"update listener")}(h||m)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),m&&!yv(this,m)&&d.force&&Ms(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let l of this.plugins)l.destroy(this);this.viewState=new uv(e),this.plugins=e.facet(el).map(l=>new gh(l)),this.pluginMap.clear();for(let l of this.plugins)l.update(this);this.docView.destroy(),this.docView=new Dy(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(el),l=e.state.facet(el);if(i!=l){let a=[];for(let c of l){let u=i.indexOf(c);if(u<0)a.push(new gh(c));else{let f=this.plugins[u];f.mustUpdate=e,a.push(f)}}for(let c of this.plugins)c.mustUpdate!=e&&c.destroy(this);this.plugins=a,this.pluginMap.clear()}else for(let a of this.plugins)a.mustUpdate=e;for(let a=0;a<this.plugins.length;a++)this.plugins[a].update(this);i!=l&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,l=this.scrollDOM,a=l.scrollTop*this.scaleY,{scrollAnchorPos:c,scrollAnchorHeight:u}=this.viewState;Math.abs(a-this.viewState.scrollTop)>1&&(u=-1),this.viewState.scrollAnchorHeight=-1;try{for(let f=0;;f++){if(u<0)if(J0(l))c=-1,u=this.viewState.heightMap.height;else{let y=this.viewState.scrollAnchorAt(a);c=y.from,u=y.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(f>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let m=d.map(y=>{try{return y.read(this)}catch(S){return Zn(this.state,S),bv}}),p=Va.create(this,this.state,[]),v=!1;p.flags|=h,i?i.flags|=h:i=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),v=this.docView.update(p));for(let y=0;y<d.length;y++)if(m[y]!=bv)try{let S=d[y];S.write&&S.write(m[y],this)}catch(S){Zn(this.state,S)}if(v&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=-1;continue}else{let S=(c<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(c).top)-u;if(S>1||S<-1){a=a+S,l.scrollTop=a/this.scaleY,u=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let f of this.state.facet(ph))f(i)}get themeClasses(){return Ah+" "+(this.state.facet(Oh)?dv:hv)+" "+this.state.facet(Ya)}updateAttrs(){let e=xv(this,Oy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ja)?"true":"false",class:"cm-content",style:`${Ie.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),xv(this,Wa,i);let l=this.observer.ignore(()=>{let a=ch(this.contentDOM,this.contentAttrs,i),c=ch(this.dom,this.editorAttrs,e);return a||c});return this.editorAttrs=e,this.contentAttrs=i,l}showAnnouncements(e){let i=!0;for(let l of e)for(let a of l.effects)if(a.is(we.announce)){i&&(this.announceDOM.textContent=""),i=!1;let c=this.announceDOM.appendChild(document.createElement("div"));c.textContent=a.value}}mountStyles(){this.styleModules=this.state.facet(nl);let e=this.state.facet(we.cspNonce);bi.mount(this.root,this.styleModules.concat(PD).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(l=>l.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,l){return Sh(this,e,Wy(this,e,i,l))}moveByGroup(e,i){return Sh(this,e,Wy(this,e,i,l=>qI(this,e.head,l)))}visualLineSide(e,i){let l=this.bidiSpans(e),a=this.textDirectionAt(e.from),c=l[i?l.length-1:0];return ae.cursor(c.side(i,a)+e.from,c.forward(!i,a)?1:-1)}moveToLineBoundary(e,i,l=!0){return _I(this,e,i,l)}moveVertically(e,i,l){return Sh(this,e,eD(this,e,i,l))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),By(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let l=this.docView.coordsAt(e,i);if(!l||l.left==l.right)return l;let a=this.state.doc.lineAt(e),c=this.bidiSpans(a),u=c[Ci.find(c,e-a.from,-1,i)];return Na(l,u.dir==dt.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(wy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>jD)return my(e.length);let i=this.textDirectionAt(e.from),l;for(let c of this.bidiCache)if(c.from==e.from&&c.dir==i&&(c.fresh||hy(c.isolates,l=Py(this,e))))return c.order;l||(l=Py(this,e));let a=dy(e.text,i,l);return this.bidiCache.push(new Xa(e.from,e.to,i,l,!0,a)),a}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ie.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{H0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return Ba.of(new Ls(typeof e=="number"?ae.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,l=this.viewState.scrollAnchorAt(e);return Ba.of(new Ls(ae.cursor(l.from),"start","start",l.top-e,i,!0))}static domEventHandlers(e){return Tt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Tt.define(()=>({}),{eventObservers:e})}static theme(e,i){let l=bi.newName(),a=[Ya.of(l),nl.of(kh(`.${l}`,e))];return i&&i.dark&&a.push(Oh.of(!0)),a}static baseTheme(e){return vi.lowest(nl.of(kh("."+Ah,e,mv)))}static findFromDOM(e){var i;let l=e.querySelector(".cm-content"),a=l&&xt.get(l)||xt.get(e);return((i=a==null?void 0:a.rootView)===null||i===void 0?void 0:i.view)||null}}we.styleModule=nl,we.inputHandler=Sy,we.focusChangeEffect=Ey,we.perLineTextDirection=wy,we.exceptionSink=xy,we.updateListener=ph,we.editable=ja,we.mouseSelectionStyle=by,we.dragMovesSelection=vy,we.clickAddsSelectionRange=yy,we.decorations=tl,we.outerDecorations=Ay,we.atomicRanges=yh,we.bidiIsolatedRanges=ky,we.scrollMargins=Ty,we.darkTheme=Oh,we.cspNonce=ke.define({combine:s=>s.length?s[0]:""}),we.contentAttributes=Wa,we.editorAttributes=Oy,we.lineWrapping=we.contentAttributes.of({class:"cm-lineWrapping"}),we.announce=ze.define();const jD=4096,bv={};class Xa{constructor(e,i,l,a,c,u){this.from=e,this.to=i,this.dir=l,this.isolates=a,this.fresh=c,this.order=u}static update(e,i){if(i.empty&&!e.some(c=>c.fresh))return e;let l=[],a=e.length?e[e.length-1].dir:dt.LTR;for(let c=Math.max(0,e.length-10);c<e.length;c++){let u=e[c];u.dir==a&&!i.touchesRange(u.from,u.to)&&l.push(new Xa(i.mapPos(u.from,1),i.mapPos(u.to,-1),u.dir,u.isolates,!1,u.order))}return l}}function xv(s,e,i){for(let l=s.state.facet(e),a=l.length-1;a>=0;a--){let c=l[a],u=typeof c=="function"?c(s):c;u&&lh(u,i)}return i}const WD=Ie.mac?"mac":Ie.windows?"win":Ie.linux?"linux":"key";function VD(s,e){const i=s.split(/-(?!$)/);let l=i[i.length-1];l=="Space"&&(l=" ");let a,c,u,f;for(let h=0;h<i.length-1;++h){const d=i[h];if(/^(cmd|meta|m)$/i.test(d))f=!0;else if(/^a(lt)?$/i.test(d))a=!0;else if(/^(c|ctrl|control)$/i.test(d))c=!0;else if(/^s(hift)?$/i.test(d))u=!0;else if(/^mod$/i.test(d))e=="mac"?f=!0:c=!0;else throw new Error("Unrecognized modifier name: "+d)}return a&&(l="Alt-"+l),c&&(l="Ctrl-"+l),f&&(l="Meta-"+l),u&&(l="Shift-"+l),l}function Qa(s,e,i){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),i!==!1&&e.shiftKey&&(s="Shift-"+s),s}const ZD=vi.default(we.domEventHandlers({keydown(s,e){return wv(Ev(e.state),s,e,"editor")}})),sl=ke.define({enables:ZD}),Sv=new WeakMap;function Ev(s){let e=s.facet(sl),i=Sv.get(e);return i||Sv.set(e,i=HD(e.reduce((l,a)=>l.concat(a),[]))),i}function zD(s,e,i){return wv(Ev(s.state),e,s,i)}let Oi=null;const UD=4e3;function HD(s,e=WD){let i=Object.create(null),l=Object.create(null),a=(u,f)=>{let h=l[u];if(h==null)l[u]=f;else if(h!=f)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},c=(u,f,h,d,m)=>{var p,v;let y=i[u]||(i[u]=Object.create(null)),S=f.split(/ (?!$)/).map(C=>VD(C,e));for(let C=1;C<S.length;C++){let O=S.slice(0,C).join(" ");a(O,!0),y[O]||(y[O]={preventDefault:!0,stopPropagation:!1,run:[I=>{let P=Oi={view:I,prefix:O,scope:u};return setTimeout(()=>{Oi==P&&(Oi=null)},UD),!0}]})}let E=S.join(" ");a(E,!1);let w=y[E]||(y[E]={preventDefault:!1,stopPropagation:!1,run:((v=(p=y._any)===null||p===void 0?void 0:p.run)===null||v===void 0?void 0:v.slice())||[]});h&&w.run.push(h),d&&(w.preventDefault=!0),m&&(w.stopPropagation=!0)};for(let u of s){let f=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let d of f){let m=i[d]||(i[d]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let p in m)m[p].run.push(u.any)}let h=u[e]||u.key;if(h)for(let d of f)c(d,h,u.run,u.preventDefault,u.stopPropagation),u.shift&&c(d,"Shift-"+h,u.shift,u.preventDefault,u.stopPropagation)}return i}function wv(s,e,i,l){let a=bI(e),c=Jt(a,0),u=Vn(c)==a.length&&a!=" ",f="",h=!1,d=!1,m=!1;Oi&&Oi.view==i&&Oi.scope==l&&(f=Oi.prefix+" ",zy.indexOf(e.keyCode)<0&&(d=!0,Oi=null));let p=new Set,v=w=>{if(w){for(let C of w.run)if(!p.has(C)&&(p.add(C),C(i,e)))return w.stopPropagation&&(m=!0),!0;w.preventDefault&&(w.stopPropagation&&(m=!0),d=!0)}return!1},y=s[l],S,E;return y&&(v(y[f+Qa(a,e,!u)])?h=!0:u&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ie.windows&&e.ctrlKey&&e.altKey)&&(S=xi[e.keyCode])&&S!=a?(v(y[f+Qa(S,e,!0)])||e.shiftKey&&(E=Jo[e.keyCode])!=a&&E!=S&&v(y[f+Qa(E,e,!1)]))&&(h=!0):u&&e.shiftKey&&v(y[f+Qa(a,e,!0)])&&(h=!0),!h&&v(y._any)&&(h=!0)),d&&(h=!0),h&&m&&e.stopPropagation(),h}class ol{constructor(e,i,l,a,c){this.className=e,this.left=i,this.top=l,this.width=a,this.height=c}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,l){if(l.empty){let a=e.coordsAtPos(l.head,l.assoc||1);if(!a)return[];let c=Cv(e);return[new ol(i,a.left-c.left,a.top-c.top,null,a.bottom-a.top)]}else return KD(e,i,l)}}function Cv(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==dt.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function Ov(s,e,i){let l=ae.cursor(e);return{from:Math.max(i.from,s.moveToLineBoundary(l,!1,!0).from),to:Math.min(i.to,s.moveToLineBoundary(l,!0,!0).from),type:dn.Text}}function KD(s,e,i){if(i.to<=s.viewport.from||i.from>=s.viewport.to)return[];let l=Math.max(i.from,s.viewport.from),a=Math.min(i.to,s.viewport.to),c=s.textDirection==dt.LTR,u=s.contentDOM,f=u.getBoundingClientRect(),h=Cv(s),d=u.querySelector(".cm-line"),m=d&&window.getComputedStyle(d),p=f.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),v=f.right-(m?parseInt(m.paddingRight):0),y=xh(s,l),S=xh(s,a),E=y.type==dn.Text?y:null,w=S.type==dn.Text?S:null;if(E&&(s.lineWrapping||y.widgetLineBreaks)&&(E=Ov(s,l,E)),w&&(s.lineWrapping||S.widgetLineBreaks)&&(w=Ov(s,a,w)),E&&w&&E.from==w.from)return O(I(i.from,i.to,E));{let M=E?I(i.from,null,E):P(y,!1),$=w?I(null,i.to,w):P(S,!0),N=[];return(E||y).to<(w||S).from-(E&&w?1:0)||y.widgetLineBreaks>1&&M.bottom+s.defaultLineHeight/2<$.top?N.push(C(p,M.bottom,v,$.top)):M.bottom<$.top&&s.elementAtHeight((M.bottom+$.top)/2).type==dn.Text&&(M.bottom=$.top=(M.bottom+$.top)/2),O(M).concat(N).concat(O($))}function C(M,$,N,ne){return new ol(e,M-h.left,$-h.top-.01,N-M,ne-$+.01)}function O({top:M,bottom:$,horizontal:N}){let ne=[];for(let ie=0;ie<N.length;ie+=2)ne.push(C(N[ie],M,N[ie+1],$));return ne}function I(M,$,N){let ne=1e9,ie=-1e9,fe=[];function ye(xe,me,Pe,Re,Oe){let be=s.coordsAtPos(xe,xe==N.to?-2:2),Be=s.coordsAtPos(Pe,Pe==N.from?2:-2);!be||!Be||(ne=Math.min(be.top,Be.top,ne),ie=Math.max(be.bottom,Be.bottom,ie),Oe==dt.LTR?fe.push(c&&me?p:be.left,c&&Re?v:Be.right):fe.push(!c&&Re?p:Be.left,!c&&me?v:be.right))}let ve=M!=null?M:N.from,pe=$!=null?$:N.to;for(let xe of s.visibleRanges)if(xe.to>ve&&xe.from<pe)for(let me=Math.max(xe.from,ve),Pe=Math.min(xe.to,pe);;){let Re=s.state.doc.lineAt(me);for(let Oe of s.bidiSpans(Re)){let be=Oe.from+Re.from,Be=Oe.to+Re.from;if(be>=Pe)break;Be>me&&ye(Math.max(be,me),M==null&&be<=ve,Math.min(Be,Pe),$==null&&Be>=pe,Oe.dir)}if(me=Re.to+1,me>=Pe)break}return fe.length==0&&ye(ve,M==null,pe,$==null,s.textDirection),{top:ne,bottom:ie,horizontal:fe}}function P(M,$){let N=f.top+($?M.top:M.bottom);return{top:N,bottom:N,horizontal:[]}}}function GD(s,e){return s.constructor==e.constructor&&s.eq(e)}class JD{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(_a)!=e.state.facet(_a)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let i=0,l=e.facet(_a);for(;i<l.length&&l[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,l)=>!GD(i,this.drawn[l]))){let i=this.dom.firstChild,l=0;for(let a of e)a.update&&i&&a.constructor&&this.drawn[l].constructor&&a.update(i,this.drawn[l])?(i=i.nextSibling,l++):this.dom.insertBefore(a.draw(),i);for(;i;){let a=i.nextSibling;i.remove(),i=a}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const _a=ke.define();function Av(s){return[Tt.define(e=>new JD(e,s)),_a.of(s)]}const kv=!Ie.ios,Ns=ke.define({combine(s){return tr(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function YD(s={}){return[Ns.of(s),XD,QD,_D,Cy.of(!0)]}function wB(s){return s.facet(Ns)}function Pv(s){return s.startState.facet(Ns)!=s.state.facet(Ns)}const XD=Av({above:!0,markers(s){let{state:e}=s,i=e.facet(Ns),l=[];for(let a of e.selection.ranges){let c=a==e.selection.main;if(a.empty?!c||kv:i.drawRangeCursor){let u=c?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",f=a.empty?a:ae.cursor(a.head,a.head>a.anchor?-1:1);for(let h of ol.forRange(s,u,f))l.push(h)}}return l},update(s,e){s.transactions.some(l=>l.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=Pv(s);return i&&Tv(s.state,e),s.docChanged||s.selectionSet||i},mount(s,e){Tv(e.state,s)},class:"cm-cursorLayer"});function Tv(s,e){e.style.animationDuration=s.facet(Ns).cursorBlinkRate+"ms"}const QD=Av({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:ol.forRange(s,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Pv(s)},class:"cm-selectionLayer"}),Th={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};kv&&(Th[".cm-line"].caretColor="transparent !important",Th[".cm-content"]={caretColor:"transparent !important"});const _D=vi.highest(we.theme(Th)),Iv=ze.define({map(s,e){return s==null?null:e.mapPos(s)}}),ll=Lt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((i,l)=>l.is(Iv)?l.value:i,s)}}),qD=Tt.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let i=s.state.field(ll);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(ll)!=i||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(ll),i=e!=null&&s.coordsAtPos(e);if(!i)return null;let l=s.scrollDOM.getBoundingClientRect();return{left:i.left-l.left+s.scrollDOM.scrollLeft*s.scaleX,top:i.top-l.top+s.scrollDOM.scrollTop*s.scaleY,height:i.bottom-i.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/i+"px",this.cursor.style.height=s.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(ll)!=s&&this.view.dispatch({effects:Iv.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function eM(){return[ll,qD]}function Dv(s,e,i,l,a){e.lastIndex=0;for(let c=s.iterRange(i,l),u=i,f;!c.next().done;u+=c.value.length)if(!c.lineBreak)for(;f=e.exec(c.value);)a(u+f.index,f)}function tM(s,e){let i=s.visibleRanges;if(i.length==1&&i[0].from==s.viewport.from&&i[0].to==s.viewport.to)return i;let l=[];for(let{from:a,to:c}of i)a=Math.max(s.state.doc.lineAt(a).from,a-e),c=Math.min(s.state.doc.lineAt(c).to,c+e),l.length&&l[l.length-1].to>=a?l[l.length-1].to=c:l.push({from:a,to:c});return l}class Ih{constructor(e){const{regexp:i,decoration:l,decorate:a,boundary:c,maxLength:u=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,a)this.addMatch=(f,h,d,m)=>a(m,d,d+f[0].length,f,h);else if(typeof l=="function")this.addMatch=(f,h,d,m)=>{let p=l(f,h,d);p&&m(d,d+f[0].length,p)};else if(l)this.addMatch=(f,h,d,m)=>m(d,d+f[0].length,l);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=c,this.maxLength=u}createDeco(e){let i=new Hr,l=i.add.bind(i);for(let{from:a,to:c}of tM(e,this.maxLength))Dv(e.state.doc,this.regexp,a,c,(u,f)=>this.addMatch(f,e,u,l));return i.finish()}updateDeco(e,i){let l=1e9,a=-1;return e.docChanged&&e.changes.iterChanges((c,u,f,h)=>{h>e.view.viewport.from&&f<e.view.viewport.to&&(l=Math.min(f,l),a=Math.max(h,a))}),e.viewportChanged||a-l>1e3?this.createDeco(e.view):a>-1?this.updateRange(e.view,i.map(e.changes),l,a):i}updateRange(e,i,l,a){for(let c of e.visibleRanges){let u=Math.max(c.from,l),f=Math.min(c.to,a);if(f>u){let h=e.state.doc.lineAt(u),d=h.to<f?e.state.doc.lineAt(f):h,m=Math.max(c.from,h.from),p=Math.min(c.to,d.to);if(this.boundary){for(;u>h.from;u--)if(this.boundary.test(h.text[u-1-h.from])){m=u;break}for(;f<d.to;f++)if(this.boundary.test(d.text[f-d.from])){p=f;break}}let v=[],y,S=(E,w,C)=>v.push(C.range(E,w));if(h==d)for(this.regexp.lastIndex=m-h.from;(y=this.regexp.exec(h.text))&&y.index<p-h.from;)this.addMatch(y,e,y.index+h.from,S);else Dv(e.state.doc,this.regexp,m,p,(E,w)=>this.addMatch(w,e,E,S));i=i.update({filterFrom:m,filterTo:p,filter:(E,w)=>E<m||w>p,add:v})}}return i}}const Dh=/x/.unicode!=null?"gu":"g",nM=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Dh),rM={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mh=null;function iM(){var s;if(Mh==null&&typeof document!="undefined"&&document.body){let e=document.body.style;Mh=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Mh||!1}const qa=ke.define({combine(s){let e=tr(s,{render:null,specialChars:nM,addSpecialChars:null});return(e.replaceTabs=!iM())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Dh)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Dh)),e}});function sM(s={}){return[qa.of(s),oM()]}let Mv=null;function oM(){return Mv||(Mv=Tt.fromClass(class{constructor(s){this.view=s,this.decorations=Me.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(qa)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new Ih({regexp:s.specialChars,decoration:(e,i,l)=>{let{doc:a}=i.state,c=Jt(e[0],0);if(c==9){let u=a.lineAt(l),f=i.state.tabSize,h=Ts(u.text,f,l-u.from);return Me.replace({widget:new uM((f-h%f)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[c]||(this.decorationCache[c]=Me.replace({widget:new cM(s,c)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(qa);s.startState.facet(qa)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const lM="\u2022";function aM(s){return s>=32?lM:s==10?"\u2424":String.fromCharCode(9216+s)}class cM extends vr{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=aM(this.code),l=e.state.phrase("Control character")+" "+(rM[this.code]||"0x"+this.code.toString(16)),a=this.options.render&&this.options.render(this.code,l,i);if(a)return a;let c=document.createElement("span");return c.textContent=i,c.title=l,c.setAttribute("aria-label",l),c.className="cm-specialChar",c}ignoreEvent(){return!1}}class uM extends vr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const Rv=null;function CB(){return[Rv,Wa.of(s=>{var e;return((e=s.plugin(Rv))===null||e===void 0?void 0:e.attrs)||null})]}function fM(){return dM}const hM=Me.line({class:"cm-activeLine"}),dM=Tt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,i=[];for(let l of s.state.selection.ranges){let a=s.lineBlockAt(l.head);a.from>e&&(i.push(hM.range(a.from)),e=a.from)}return Me.set(i)}},{decorations:s=>s.decorations});class mM extends vr{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let i=e.firstChild?Is(e.firstChild):[];if(!i.length)return null;let l=window.getComputedStyle(e.parentNode),a=Na(i[0],l.direction!="rtl"),c=parseInt(l.lineHeight);return a.bottom-a.top>c*1.5?{left:a.left,right:a.right,top:a.top,bottom:a.top+c}:a}ignoreEvent(){return!1}}function pM(s){return Tt.fromClass(class{constructor(e){this.view=e,this.placeholder=s?Me.set([Me.widget({widget:new mM(s),side:1}).range(0)]):Me.none}get decorations(){return this.view.state.doc.length?Me.none:this.placeholder}},{decorations:e=>e.decorations})}const Rh=2e3;function gM(s,e,i){let l=Math.min(e.line,i.line),a=Math.max(e.line,i.line),c=[];if(e.off>Rh||i.off>Rh||e.col<0||i.col<0){let u=Math.min(e.off,i.off),f=Math.max(e.off,i.off);for(let h=l;h<=a;h++){let d=s.doc.line(h);d.length<=f&&c.push(ae.range(d.from+u,d.to+f))}}else{let u=Math.min(e.col,i.col),f=Math.max(e.col,i.col);for(let h=l;h<=a;h++){let d=s.doc.line(h),m=Qf(d.text,u,s.tabSize,!0);if(m<0)c.push(ae.cursor(d.to));else{let p=Qf(d.text,f,s.tabSize);c.push(ae.range(d.from+m,d.from+p))}}}return c}function yM(s,e){let i=s.coordsAtPos(s.viewport.from);return i?Math.round(Math.abs((i.left-e)/s.defaultCharacterWidth)):-1}function Lv(s,e){let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1),l=s.state.doc.lineAt(i),a=i-l.from,c=a>Rh?-1:a==l.length?yM(s,e.clientX):Ts(l.text,s.state.tabSize,i-l.from);return{line:l.number,col:c,off:a}}function vM(s,e){let i=Lv(s,e),l=s.state.selection;return i?{update(a){if(a.docChanged){let c=a.changes.mapPos(a.startState.doc.line(i.line).from),u=a.state.doc.lineAt(c);i={line:u.number,col:i.col,off:Math.min(i.off,u.length)},l=l.map(a.changes)}},get(a,c,u){let f=Lv(s,a);if(!f)return l;let h=gM(s.state,i,f);return h.length?u?ae.create(h.concat(l.ranges)):ae.create(h):l}}:null}function bM(s){let e=(s==null?void 0:s.eventFilter)||(i=>i.altKey&&i.button==0);return we.mouseSelectionStyle.of((i,l)=>e(l)?vM(i,l):null)}const xM={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},SM={style:"cursor: crosshair"};function EM(s={}){let[e,i]=xM[s.key||"Alt"],l=Tt.fromClass(class{constructor(a){this.view=a,this.isDown=!1}set(a){this.isDown!=a&&(this.isDown=a,this.view.update([]))}},{eventObservers:{keydown(a){this.set(a.keyCode==e||i(a))},keyup(a){(a.keyCode==e||!i(a))&&this.set(!1)},mousemove(a){this.set(i(a))}}});return[l,we.contentAttributes.of(a=>{var c;return!((c=a.plugin(l))===null||c===void 0)&&c.isDown?SM:null})]}const al="-10000px";class Nv{constructor(e,i,l,a){this.facet=i,this.createTooltipView=l,this.removeTooltipView=a,this.input=e.state.facet(i),this.tooltips=this.input.filter(c=>c),this.tooltipViews=this.tooltips.map(l)}update(e,i){var l;let a=e.state.facet(this.facet),c=a.filter(h=>h);if(a===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let u=[],f=i?[]:null;for(let h=0;h<c.length;h++){let d=c[h],m=-1;if(d){for(let p=0;p<this.tooltips.length;p++){let v=this.tooltips[p];v&&v.create==d.create&&(m=p)}if(m<0)u[h]=this.createTooltipView(d),f&&(f[h]=!!d.above);else{let p=u[h]=this.tooltipViews[m];f&&(f[h]=i[m]),p.update&&p.update(e)}}}for(let h of this.tooltipViews)u.indexOf(h)<0&&(this.removeTooltipView(h),(l=h.destroy)===null||l===void 0||l.call(h));return i&&(f.forEach((h,d)=>i[d]=h),i.length=f.length),this.input=a,this.tooltips=c,this.tooltipViews=u,!0}}function OB(s={}){return ec.of(s)}function wM(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ec=ke.define({combine:s=>{var e,i,l;return{position:Ie.ios?"absolute":((e=s.find(a=>a.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=s.find(a=>a.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((l=s.find(a=>a.tooltipSpace))===null||l===void 0?void 0:l.tooltipSpace)||wM}}}),$v=new WeakMap,tc=Tt.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(ec);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Nv(s,nc,i=>this.createTooltip(i),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let i=e||s.geometryChanged,l=s.state.facet(ec);if(l.position!=this.position&&!this.madeAbsolute){this.position=l.position;for(let a of this.manager.tooltipViews)a.dom.style.position=this.position;i=!0}if(l.parent!=this.parent){this.parent&&this.container.remove(),this.parent=l.parent,this.createContainer();for(let a of this.manager.tooltipViews)this.container.appendChild(a.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",e.dom.appendChild(i)}return e.dom.style.position=this.position,e.dom.style.top=al,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var s,e,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let l of this.manager.tooltipViews)l.dom.remove(),(s=l.destroy)===null||s===void 0||s.call(l);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect(),e=1,i=1,l=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:a}=this.manager.tooltipViews[0];if(Ie.gecko)l=a.offsetParent!=this.container.ownerDocument.body;else if(a.style.top==al&&a.style.left=="0px"){let c=a.getBoundingClientRect();l=Math.abs(c.top+1e4)>1||Math.abs(c.left)>1}}if(l||this.position=="absolute")if(this.parent){let a=this.parent.getBoundingClientRect();a.width&&a.height&&(e=a.width/this.parent.offsetWidth,i=a.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:i}=this.view.viewState);return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((a,c)=>{let u=this.manager.tooltipViews[c];return u.getCoords?u.getCoords(a.pos):this.view.coordsAtPos(a.pos)}),size:this.manager.tooltipViews.map(({dom:a})=>a.getBoundingClientRect()),space:this.view.state.facet(ec).tooltipSpace(this.view),scaleX:e,scaleY:i,makeAbsolute:l}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let f of this.manager.tooltipViews)f.dom.style.position="absolute"}let{editor:i,space:l,scaleX:a,scaleY:c}=s,u=[];for(let f=0;f<this.manager.tooltips.length;f++){let h=this.manager.tooltips[f],d=this.manager.tooltipViews[f],{dom:m}=d,p=s.pos[f],v=s.size[f];if(!p||p.bottom<=Math.max(i.top,l.top)||p.top>=Math.min(i.bottom,l.bottom)||p.right<Math.max(i.left,l.left)-.1||p.left>Math.min(i.right,l.right)+.1){m.style.top=al;continue}let y=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,S=y?7:0,E=v.right-v.left,w=(e=$v.get(d))!==null&&e!==void 0?e:v.bottom-v.top,C=d.offset||OM,O=this.view.textDirection==dt.LTR,I=v.width>l.right-l.left?O?l.left:l.right-v.width:O?Math.min(p.left-(y?14:0)+C.x,l.right-E):Math.max(l.left,p.left-E+(y?14:0)-C.x),P=this.above[f];!h.strictSide&&(P?p.top-(v.bottom-v.top)-C.y<l.top:p.bottom+(v.bottom-v.top)+C.y>l.bottom)&&P==l.bottom-p.bottom>p.top-l.top&&(P=this.above[f]=!P);let M=(P?p.top-l.top:l.bottom-p.bottom)-S;if(M<w&&d.resize!==!1){if(M<this.view.defaultLineHeight){m.style.top=al;continue}$v.set(d,w),m.style.height=(w=M)/c+"px"}else m.style.height&&(m.style.height="");let $=P?p.top-w-S-C.y:p.bottom+S+C.y,N=I+E;if(d.overlap!==!0)for(let ne of u)ne.left<N&&ne.right>I&&ne.top<$+w&&ne.bottom>$&&($=P?ne.top-w-2-S:ne.bottom+S+2);if(this.position=="absolute"?(m.style.top=($-s.parent.top)/c+"px",m.style.left=(I-s.parent.left)/a+"px"):(m.style.top=$/c+"px",m.style.left=I/a+"px"),y){let ne=p.left+(O?C.x:-C.x)-(I+14-7);y.style.left=ne/a+"px"}d.overlap!==!0&&u.push({left:I,top:$,right:N,bottom:$+w}),m.classList.toggle("cm-tooltip-above",P),m.classList.toggle("cm-tooltip-below",!P),d.positioned&&d.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=al}},{eventObservers:{scroll(){this.maybeMeasure()}}}),CM=we.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),OM={x:0,y:0},nc=ke.define({enables:[tc,CM]}),cl=ke.define();class rc{static create(e){return new rc(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Nv(e,cl,i=>this.createHostedView(i),i=>i.dom.remove())}createHostedView(e){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(i.dom),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}passProp(e){let i;for(let l of this.manager.tooltipViews){let a=l[e];if(a!==void 0){if(i===void 0)i=a;else if(i!==a)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const AM=nc.compute([cl],s=>{let e=s.facet(cl).filter(i=>i);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.map(i=>{var l;return(l=i.end)!==null&&l!==void 0?l:i.pos})),create:rc.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class kM{constructor(e,i,l,a,c){this.view=e,this.source=i,this.field=l,this.setHover=a,this.hoverTime=c,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,l=e.docView.nearest(i.target);if(!l)return;let a,c=1;if(l instanceof Si)a=l.posAtStart;else{if(a=e.posAtCoords(i),a==null)return;let f=e.coordsAtPos(a);if(!f||i.y<f.top||i.y>f.bottom||i.x<f.left-e.defaultCharacterWidth||i.x>f.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(a)).find(m=>m.from<=a&&m.to>=a),d=h&&h.dir==dt.RTL?-1:1;c=i.x<f.left?-d:d}let u=this.source(e,a,c);if(u!=null&&u.then){let f=this.pending={pos:a};u.then(h=>{this.pending==f&&(this.pending=null,h&&e.dispatch({effects:this.setHover.of(h)}))},h=>Zn(e.state,h,"hover tooltip"))}else u&&e.dispatch({effects:this.setHover.of(u)})}get tooltip(){let e=this.view.plugin(tc),i=e?e.manager.tooltips.findIndex(l=>l.create==rc.create):-1;return i>-1?e.manager.tooltipViews[i]:null}mousemove(e){var i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:l,tooltip:a}=this;if(l&&a&&!PM(a.dom,e)||this.pending){let{pos:c}=l||this.pending,u=(i=l==null?void 0:l.end)!==null&&i!==void 0?i:c;(c==u?this.view.posAtCoords(this.lastMove)!=c:!TM(this.view,c,u,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i){let{tooltip:l}=this;l&&l.dom.contains(e.relatedTarget)?this.watchTooltipLeave(l.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let i=l=>{e.removeEventListener("mouseleave",i),this.active&&!this.view.dom.contains(l.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const ic=4;function PM(s,e){let i=s.getBoundingClientRect();return e.clientX>=i.left-ic&&e.clientX<=i.right+ic&&e.clientY>=i.top-ic&&e.clientY<=i.bottom+ic}function TM(s,e,i,l,a,c){let u=s.scrollDOM.getBoundingClientRect(),f=s.documentTop+s.documentPadding.top+s.contentHeight;if(u.left>l||u.right<l||u.top>a||Math.min(u.bottom,f)<a)return!1;let h=s.posAtCoords({x:l,y:a},!1);return h>=e&&h<=i}function IM(s,e={}){let i=ze.define(),l=Lt.define({create(){return null},update(a,c){if(a&&(e.hideOnChange&&(c.docChanged||c.selection)||e.hideOn&&e.hideOn(c,a)))return null;if(a&&c.docChanged){let u=c.changes.mapPos(a.pos,-1,hn.TrackDel);if(u==null)return null;let f=Object.assign(Object.create(null),a);f.pos=u,a.end!=null&&(f.end=c.changes.mapPos(a.end)),a=f}for(let u of c.effects)u.is(i)&&(a=u.value),u.is(DM)&&(a=null);return a},provide:a=>cl.from(a)});return[l,Tt.define(a=>new kM(a,s,l,i,e.hoverTime||300)),AM]}function Fv(s,e){let i=s.plugin(tc);if(!i)return null;let l=i.manager.tooltips.indexOf(e);return l<0?null:i.manager.tooltipViews[l]}function AB(s){return s.facet(cl).some(e=>e)}const DM=ze.define(),kB=null;function PB(s){let e=s.plugin(tc);e&&e.maybeMeasure()}const Lh=ke.define({combine(s){let e,i;for(let l of s)e=e||l.topContainer,i=i||l.bottomContainer;return{topContainer:e,bottomContainer:i}}});function TB(s){return s?[Lh.of(s)]:[]}function ul(s,e){let i=s.plugin(Bv),l=i?i.specs.indexOf(e):-1;return l>-1?i.panels[l]:null}const Bv=Tt.fromClass(class{constructor(s){this.input=s.state.facet(Qi),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(s));let e=s.state.facet(Lh);this.top=new sc(s,!0,e.topContainer),this.bottom=new sc(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(s){let e=s.state.facet(Lh);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new sc(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new sc(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=s.state.facet(Qi);if(i!=this.input){let l=i.filter(h=>h),a=[],c=[],u=[],f=[];for(let h of l){let d=this.specs.indexOf(h),m;d<0?(m=h(s.view),f.push(m)):(m=this.panels[d],m.update&&m.update(s)),a.push(m),(m.top?c:u).push(m)}this.specs=l,this.panels=a,this.top.sync(c),this.bottom.sync(u);for(let h of f)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let l of this.panels)l.update&&l.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>we.scrollMargins.of(e=>{let i=e.plugin(s);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class sc{constructor(e,i,l){this.view=e,this.top=i,this.container=l,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=jv(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=jv(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function jv(s){let e=s.nextSibling;return s.remove(),e}const Qi=ke.define({enables:Bv});class Sr extends Ji{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Sr.prototype.elementClass="",Sr.prototype.toDOM=void 0,Sr.prototype.mapMode=hn.TrackBefore,Sr.prototype.startSide=Sr.prototype.endSide=-1,Sr.prototype.point=!0;const oc=ke.define(),MM={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>_e.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},fl=ke.define();function Wv(s){return[Vv(),fl.of(Object.assign(Object.assign({},MM),s))]}const Nh=ke.define({combine:s=>s.some(e=>e)});function Vv(s){let e=[RM];return s&&s.fixed===!1&&e.push(Nh.of(!0)),e}const RM=Tt.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(fl).map(e=>new zv(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(Nh),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,i=s.view.viewport,l=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(l<(i.to-i.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Nh)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let i=_e.iter(this.view.state.facet(oc),this.view.viewport.from),l=[],a=this.gutters.map(c=>new LM(c,this.view.viewport,-this.view.documentPadding.top));for(let c of this.view.viewportLineBlocks)if(l.length&&(l=[]),Array.isArray(c.type)){let u=!0;for(let f of c.type)if(f.type==dn.Text&&u){$h(i,l,f.from);for(let h of a)h.line(this.view,f,l);u=!1}else if(f.widget)for(let h of a)h.widget(this.view,f)}else if(c.type==dn.Text){$h(i,l,c.from);for(let u of a)u.line(this.view,c,l)}else if(c.widget)for(let u of a)u.widget(this.view,c);for(let c of a)c.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(fl),i=s.state.facet(fl),l=s.docChanged||s.heightChanged||s.viewportChanged||!_e.eq(s.startState.facet(oc),s.state.facet(oc),s.view.viewport.from,s.view.viewport.to);if(e==i)for(let a of this.gutters)a.update(s)&&(l=!0);else{l=!0;let a=[];for(let c of i){let u=e.indexOf(c);u<0?a.push(new zv(this.view,c)):(this.gutters[u].update(s),a.push(this.gutters[u]))}for(let c of this.gutters)c.dom.remove(),a.indexOf(c)<0&&c.destroy();for(let c of a)this.dom.appendChild(c.dom);this.gutters=a}return l}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>we.scrollMargins.of(e=>{let i=e.plugin(s);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==dt.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function Zv(s){return Array.isArray(s)?s:[s]}function $h(s,e,i){for(;s.value&&s.from<=i;)s.from==i&&e.push(s.value),s.next()}class LM{constructor(e,i,l){this.gutter=e,this.height=l,this.i=0,this.cursor=_e.iter(e.markers,i.from)}addElement(e,i,l){let{gutter:a}=this,c=(i.top-this.height)/e.scaleY,u=i.height/e.scaleY;if(this.i==a.elements.length){let f=new Uv(e,u,c,l);a.elements.push(f),a.dom.appendChild(f.dom)}else a.elements[this.i].update(e,u,c,l);this.height=i.bottom,this.i++}line(e,i,l){let a=[];$h(this.cursor,a,i.from),l.length&&(a=a.concat(l));let c=this.gutter.config.lineMarker(e,i,a);c&&a.unshift(c);let u=this.gutter;a.length==0&&!u.config.renderEmptyElements||this.addElement(e,i,a)}widget(e,i){let l=this.gutter.config.widgetMarker(e,i.widget,i);l&&this.addElement(e,i,[l])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class zv{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let l in i.domEventHandlers)this.dom.addEventListener(l,a=>{let c=a.target,u;if(c!=this.dom&&this.dom.contains(c)){for(;c.parentNode!=this.dom;)c=c.parentNode;let h=c.getBoundingClientRect();u=(h.top+h.bottom)/2}else u=a.clientY;let f=e.lineBlockAtHeight(u-e.documentTop);i.domEventHandlers[l](e,f,a)&&a.preventDefault()});this.markers=Zv(i.markers(e)),i.initialSpacer&&(this.spacer=new Uv(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=Zv(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let a=this.config.updateSpacer(this.spacer.markers[0],e);a!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[a])}let l=e.view.viewport;return!_e.eq(this.markers,i,l.from,l.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Uv{constructor(e,i,l,a){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,l,a)}update(e,i,l,a){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=l&&(this.dom.style.marginTop=(this.above=l)?l+"px":""),NM(this.markers,a)||this.setMarkers(e,a)}setMarkers(e,i){let l="cm-gutterElement",a=this.dom.firstChild;for(let c=0,u=0;;){let f=u,h=c<i.length?i[c++]:null,d=!1;if(h){let m=h.elementClass;m&&(l+=" "+m);for(let p=u;p<this.markers.length;p++)if(this.markers[p].compare(h)){f=p,d=!0;break}}else f=this.markers.length;for(;u<f;){let m=this.markers[u++];if(m.toDOM){m.destroy(a);let p=a.nextSibling;a.remove(),a=p}}if(!h)break;h.toDOM&&(d?a=a.nextSibling:this.dom.insertBefore(h.toDOM(e),a)),d&&u++}this.dom.className=l,this.markers=i}destroy(){this.setMarkers(null,[])}}function NM(s,e){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!s[i].compare(e[i]))return!1;return!0}const $M=ke.define(),$s=ke.define({combine(s){return tr(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let l=Object.assign({},e);for(let a in i){let c=l[a],u=i[a];l[a]=c?(f,h,d)=>c(f,h,d)||u(f,h,d):u}return l}})}});class Fh extends Sr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Bh(s,e){return s.state.facet($s).formatNumber(e,s.state)}const FM=fl.compute([$s],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet($M)},lineMarker(e,i,l){return l.some(a=>a.toDOM)?null:new Fh(Bh(e,e.state.doc.lineAt(i.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet($s)!=e.state.facet($s),initialSpacer(e){return new Fh(Bh(e,Hv(e.state.doc.lines)))},updateSpacer(e,i){let l=Bh(i.view,Hv(i.view.state.doc.lines));return l==e.number?e:new Fh(l)},domEventHandlers:s.facet($s).domEventHandlers}));function BM(s={}){return[$s.of(s),Vv(),FM]}function Hv(s){let e=9;for(;e<s;)e=e*10+9;return e}const jM=new class extends Sr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},WM=oc.compute(["selection"],s=>{let e=[],i=-1;for(let l of s.selection.ranges){let a=s.doc.lineAt(l.head).from;a>i&&(i=a,e.push(jM.range(a)))}return _e.of(e)});function VM(){return WM}const Kv=new Map;function ZM(s){let e=Kv.get(s);return e||Kv.set(s,e=Me.mark({attributes:s==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":s.replace(/ /g,"\xB7")}})),e}function Gv(s){return Tt.define(e=>({decorations:s.createDeco(e),update(i){this.decorations=s.updateDeco(i,this.decorations)}}),{decorations:e=>e.decorations})}const zM=Gv(new Ih({regexp:/\t| +/g,decoration:s=>ZM(s[0]),boundary:/\S/}));function IB(){return zM}const UM=Gv(new Ih({regexp:/\s+$/g,decoration:Me.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function DB(){return UM}const MB={HeightMap:sn,HeightOracle:ov,MeasuredHeights:lv,QueryType:vt,ChangedRange:Rn,computeOrder:dy,moveVisually:gy};let HM=0;class Er{constructor(e,i,l){this.set=e,this.base=i,this.modified=l,this.id=HM++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let i=new Er([],null,[]);if(i.set.push(i),e)for(let l of e.set)i.set.push(l);return i}static defineModifier(){let e=new lc;return i=>i.modified.indexOf(e)>-1?i:lc.get(i.base||i,i.modified.concat(e).sort((l,a)=>l.id-a.id))}}let KM=0;class lc{constructor(){this.instances=[],this.id=KM++}static get(e,i){if(!i.length)return e;let l=i[0].instances.find(f=>f.base==e&&GM(i,f.modified));if(l)return l;let a=[],c=new Er(a,e,i);for(let f of i)f.instances.push(c);let u=JM(i);for(let f of e.set)if(!f.modified.length)for(let h of u)a.push(lc.get(f,h));return c}}function GM(s,e){return s.length==e.length&&s.every((i,l)=>i==e[l])}function JM(s){let e=[[]];for(let i=0;i<s.length;i++)for(let l=0,a=e.length;l<a;l++)e.push(e[l].concat(s[i]));return e.sort((i,l)=>l.length-i.length)}function YM(s){let e=Object.create(null);for(let i in s){let l=s[i];Array.isArray(l)||(l=[l]);for(let a of i.split(" "))if(a){let c=[],u=2,f=a;for(let p=0;;){if(f=="..."&&p>0&&p+3==a.length){u=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(f);if(!v)throw new RangeError("Invalid path: "+a);if(c.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),p+=v[0].length,p==a.length)break;let y=a[p++];if(p==a.length&&y=="!"){u=0;break}if(y!="/")throw new RangeError("Invalid path: "+a);f=a.slice(p)}let h=c.length-1,d=c[h];if(!d)throw new RangeError("Invalid path: "+a);let m=new ac(l,u,h>0?c.slice(0,h):null);e[d]=m.sort(e[d])}}return Jv.add(e)}const Jv=new Ge;class ac{constructor(e,i,l,a){this.tags=e,this.mode=i,this.context=l,this.next=a}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}ac.empty=new ac([],2,null);function Yv(s,e){let i=Object.create(null);for(let c of s)if(!Array.isArray(c.tag))i[c.tag.id]=c.class;else for(let u of c.tag)i[u.id]=c.class;let{scope:l,all:a=null}=e||{};return{style:c=>{let u=a;for(let f of c)for(let h of f.set){let d=i[h.id];if(d){u=u?u+" "+d:d;break}}return u},scope:l}}function XM(s,e){let i=null;for(let l of s){let a=l.style(e);a&&(i=i?i+" "+a:a)}return i}function Xv(s,e,i,l=0,a=s.length){let c=new QM(l,Array.isArray(e)?e:[e],i);c.highlightRange(s.cursor(),l,a,"",c.highlighters),c.flush(a)}function RB(s,e,i,l,a,c=0,u=s.length){let f=c;function h(d,m){if(!(d<=f)){for(let p=s.slice(f,d),v=0;;){let y=p.indexOf(`
`,v),S=y<0?p.length:y;if(S>v&&l(p.slice(v,S),m),y<0)break;a(),v=y+1}f=d}}Xv(e,i,(d,m,p)=>{h(d,""),h(m,p)},c,u),h(u,"")}class QM{constructor(e,i,l){this.at=e,this.highlighters=i,this.span=l,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,l,a,c){let{type:u,from:f,to:h}=e;if(f>=l||h<=i)return;u.isTop&&(c=this.highlighters.filter(y=>!y.scope||y.scope(u)));let d=a,m=_M(e)||ac.empty,p=XM(c,m.tags);if(p&&(d&&(d+=" "),d+=p,m.mode==1&&(a+=(a?" ":"")+p)),this.startSpan(Math.max(i,f),d),m.opaque)return;let v=e.tree&&e.tree.prop(Ge.mounted);if(v&&v.overlay){let y=e.node.enter(v.overlay[0].from+f,1),S=this.highlighters.filter(w=>!w.scope||w.scope(v.tree.type)),E=e.firstChild();for(let w=0,C=f;;w++){let O=w<v.overlay.length?v.overlay[w]:null,I=O?O.from+f:h,P=Math.max(i,C),M=Math.min(l,I);if(P<M&&E)for(;e.from<M&&(this.highlightRange(e,P,M,a,c),this.startSpan(Math.min(M,e.to),d),!(e.to>=I||!e.nextSibling())););if(!O||I>l)break;C=O.to+f,C>i&&(this.highlightRange(y.cursor(),Math.max(i,O.from+f),Math.min(l,C),"",S),this.startSpan(Math.min(l,C),d))}E&&e.parent()}else if(e.firstChild()){v&&(a="");do if(!(e.to<=i)){if(e.from>=l)break;this.highlightRange(e,i,l,a,c),this.startSpan(Math.min(l,e.to),d)}while(e.nextSibling());e.parent()}}}function _M(s){let e=s.type.prop(Jv);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Se=Er.define,cc=Se(),Ai=Se(),Qv=Se(Ai),_v=Se(Ai),ki=Se(),uc=Se(ki),jh=Se(ki),wr=Se(),_i=Se(wr),Cr=Se(),Or=Se(),Wh=Se(),hl=Se(Wh),fc=Se(),oe={comment:cc,lineComment:Se(cc),blockComment:Se(cc),docComment:Se(cc),name:Ai,variableName:Se(Ai),typeName:Qv,tagName:Se(Qv),propertyName:_v,attributeName:Se(_v),className:Se(Ai),labelName:Se(Ai),namespace:Se(Ai),macroName:Se(Ai),literal:ki,string:uc,docString:Se(uc),character:Se(uc),attributeValue:Se(uc),number:jh,integer:Se(jh),float:Se(jh),bool:Se(ki),regexp:Se(ki),escape:Se(ki),color:Se(ki),url:Se(ki),keyword:Cr,self:Se(Cr),null:Se(Cr),atom:Se(Cr),unit:Se(Cr),modifier:Se(Cr),operatorKeyword:Se(Cr),controlKeyword:Se(Cr),definitionKeyword:Se(Cr),moduleKeyword:Se(Cr),operator:Or,derefOperator:Se(Or),arithmeticOperator:Se(Or),logicOperator:Se(Or),bitwiseOperator:Se(Or),compareOperator:Se(Or),updateOperator:Se(Or),definitionOperator:Se(Or),typeOperator:Se(Or),controlOperator:Se(Or),punctuation:Wh,separator:Se(Wh),bracket:hl,angleBracket:Se(hl),squareBracket:Se(hl),paren:Se(hl),brace:Se(hl),content:wr,heading:_i,heading1:Se(_i),heading2:Se(_i),heading3:Se(_i),heading4:Se(_i),heading5:Se(_i),heading6:Se(_i),contentSeparator:Se(wr),list:Se(wr),quote:Se(wr),emphasis:Se(wr),strong:Se(wr),link:Se(wr),monospace:Se(wr),strikethrough:Se(wr),inserted:Se(),deleted:Se(),changed:Se(),invalid:Se(),meta:fc,documentMeta:Se(fc),annotation:Se(fc),processingInstruction:Se(fc),definition:Er.defineModifier(),constant:Er.defineModifier(),function:Er.defineModifier(),standard:Er.defineModifier(),local:Er.defineModifier(),special:Er.defineModifier()},LB=Yv([{tag:oe.link,class:"tok-link"},{tag:oe.heading,class:"tok-heading"},{tag:oe.emphasis,class:"tok-emphasis"},{tag:oe.strong,class:"tok-strong"},{tag:oe.keyword,class:"tok-keyword"},{tag:oe.atom,class:"tok-atom"},{tag:oe.bool,class:"tok-bool"},{tag:oe.url,class:"tok-url"},{tag:oe.labelName,class:"tok-labelName"},{tag:oe.inserted,class:"tok-inserted"},{tag:oe.deleted,class:"tok-deleted"},{tag:oe.literal,class:"tok-literal"},{tag:oe.string,class:"tok-string"},{tag:oe.number,class:"tok-number"},{tag:[oe.regexp,oe.escape,oe.special(oe.string)],class:"tok-string2"},{tag:oe.variableName,class:"tok-variableName"},{tag:oe.local(oe.variableName),class:"tok-variableName tok-local"},{tag:oe.definition(oe.variableName),class:"tok-variableName tok-definition"},{tag:oe.special(oe.variableName),class:"tok-variableName2"},{tag:oe.definition(oe.propertyName),class:"tok-propertyName tok-definition"},{tag:oe.typeName,class:"tok-typeName"},{tag:oe.namespace,class:"tok-namespace"},{tag:oe.className,class:"tok-className"},{tag:oe.macroName,class:"tok-macroName"},{tag:oe.propertyName,class:"tok-propertyName"},{tag:oe.operator,class:"tok-operator"},{tag:oe.comment,class:"tok-comment"},{tag:oe.meta,class:"tok-meta"},{tag:oe.invalid,class:"tok-invalid"},{tag:oe.punctuation,class:"tok-punctuation"}]);var Vh;const qi=new Ge;function qv(s){return ke.define({combine:s?e=>e.concat(s):void 0})}const qM=new Ge;class bn{constructor(e,i,l=[],a=""){this.data=e,this.name=a,Qe.prototype.hasOwnProperty("tree")||Object.defineProperty(Qe.prototype,"tree",{get(){return Nt(this)}}),this.parser=i,this.extension=[Pi.of(this),Qe.languageData.of((c,u,f)=>{let h=e1(c,u,f),d=h.type.prop(qi);if(!d)return[];let m=c.facet(d),p=h.type.prop(qM);if(p){let v=h.resolve(u-h.from,f);for(let y of p)if(y.test(v,c)){let S=c.facet(y.facet);return y.type=="replace"?S:S.concat(m)}}return m})].concat(l)}isActiveAt(e,i,l=-1){return e1(e,i,l).type.prop(qi)==this.data}findRegions(e){let i=e.facet(Pi);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let l=[],a=(c,u)=>{if(c.prop(qi)==this.data){l.push({from:u,to:u+c.length});return}let f=c.prop(Ge.mounted);if(f){if(f.tree.prop(qi)==this.data){if(f.overlay)for(let h of f.overlay)l.push({from:h.from+u,to:h.to+u});else l.push({from:u,to:u+c.length});return}else if(f.overlay){let h=l.length;if(a(f.tree,f.overlay[0].from+u),l.length>h)return}}for(let h=0;h<c.children.length;h++){let d=c.children[h];d instanceof yt&&a(d,c.positions[h]+u)}};return a(Nt(e),0),l}get allowsNesting(){return!0}}bn.setState=ze.define();function e1(s,e,i){let l=s.facet(Pi),a=Nt(s).topNode;if(!l||l.allowsNesting)for(let c=a;c;c=c.enter(e,i,Pt.ExcludeBuffers))c.type.isTop&&(a=c);return a}class Zh extends bn{constructor(e,i,l){super(e,i,[],l),this.parser=i}static define(e){let i=qv(e.languageData);return new Zh(i,e.parser.configure({props:[qi.add(l=>l.isTop?i:void 0)]}),e.name)}configure(e,i){return new Zh(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Nt(s){let e=s.field(bn.state,!1);return e?e.tree:yt.empty}function eR(s,e,i=50){var l;let a=(l=s.field(bn.state,!1))===null||l===void 0?void 0:l.context;if(!a)return null;let c=a.viewport;a.updateViewport({from:0,to:e});let u=a.isDone(e)||a.work(i,e)?a.tree:null;return a.updateViewport(c),u}function NB(s,e=s.doc.length){var i;return((i=s.field(bn.state,!1))===null||i===void 0?void 0:i.context.isDone(e))||!1}function $B(s,e=s.viewport.to,i=100){let l=eR(s.state,e,i);return l!=Nt(s.state)&&s.dispatch({}),!!l}function FB(s){var e;return((e=s.plugin(r1))===null||e===void 0?void 0:e.isWorking())||!1}class tR{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let l=this.cursorPos-this.string.length;return e<l||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-l,i-l)}}let dl=null;class Fs{constructor(e,i,l=[],a,c,u,f,h){this.parser=e,this.state=i,this.fragments=l,this.tree=a,this.treeLen=c,this.viewport=u,this.skipped=f,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,i,l){return new Fs(e,i,[],yt.empty,0,l,[],null)}startParse(){return this.parser.startParse(new tR(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=yt.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var l;if(typeof e=="number"){let a=Date.now()+e;e=()=>Date.now()>a}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let a=this.parse.advance();if(a)if(this.fragments=this.withoutTempSkipped(Ur.addTree(a,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(l=this.parse.stoppedAt)!==null&&l!==void 0?l:this.state.doc.length,this.tree=a,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(Ur.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=dl;dl=this;try{return e()}finally{dl=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=t1(e,i.from,i.to);return e}changes(e,i){let{fragments:l,tree:a,treeLen:c,viewport:u,skipped:f}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,m,p,v)=>h.push({fromA:d,toA:m,fromB:p,toB:v})),l=Ur.applyChanges(l,h),a=yt.empty,c=0,u={from:e.mapPos(u.from,-1),to:e.mapPos(u.to,1)},this.skipped.length){f=[];for(let d of this.skipped){let m=e.mapPos(d.from,1),p=e.mapPos(d.to,-1);m<p&&f.push({from:m,to:p})}}}return new Fs(this.parser,i,l,a,c,u,f,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let l=0;l<this.skipped.length;l++){let{from:a,to:c}=this.skipped[l];a<e.to&&c>e.from&&(this.fragments=t1(this.fragments,a,c),this.skipped.splice(l--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends a0{createParse(i,l,a){let c=a[0].from,u=a[a.length-1].to;return{parsedPos:c,advance(){let h=dl;if(h){for(let d of a)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=u,new yt(fn.none,[],[],u-c)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return dl}}function t1(s,e,i){return Ur.applyChanges(s,[{fromA:e,toA:i,fromB:e,toB:i}])}class Bs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),l=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,l)||i.takeTree(),new Bs(i)}static init(e){let i=Math.min(3e3,e.doc.length),l=Fs.create(e.facet(Pi).parser,e,{from:0,to:i});return l.work(20,i)||l.takeTree(),new Bs(l)}}bn.state=Lt.define({create:Bs.init,update(s,e){for(let i of e.effects)if(i.is(bn.setState))return i.value;return e.startState.facet(Pi)!=e.state.facet(Pi)?Bs.init(e.state):s.apply(e)}});let n1=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(n1=s=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const zh=typeof navigator!="undefined"&&(!((Vh=navigator.scheduling)===null||Vh===void 0)&&Vh.isInputPending)?()=>navigator.scheduling.isInputPending():null,r1=Tt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(bn.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(bn.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=n1(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:l,viewport:{to:a}}=this.view,c=l.field(bn.state);if(c.tree==c.context.tree&&c.context.isDone(a+1e5))return;let u=Date.now()+Math.min(this.chunkBudget,100,e&&!zh?Math.max(25,e.timeRemaining()-5):1e9),f=c.context.treeLen<a&&l.doc.length>a+1e3,h=c.context.work(()=>zh&&zh()||Date.now()>u,a+(f?0:1e5));this.chunkBudget-=Date.now()-i,(h||this.chunkBudget<=0)&&(c.context.takeTree(),this.view.dispatch({effects:bn.setState.of(new Bs(c.context))})),this.chunkBudget>0&&!(h&&!f)&&this.scheduleWork(),this.checkAsyncSchedule(c.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>Zn(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Pi=ke.define({combine(s){return s.length?s[0]:null},enables:s=>[bn.state,r1,we.contentAttributes.compute([s],e=>{let i=e.facet(s);return i&&i.name?{"data-language":i.name}:{}})]});class BB{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}class i1{constructor(e,i,l,a,c,u=void 0){this.name=e,this.alias=i,this.extensions=l,this.filename=a,this.loadFunc=c,this.support=u,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:i,support:l}=e;if(!i){if(!l)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");i=()=>Promise.resolve(l)}return new i1(e.name,(e.alias||[]).concat(e.name).map(a=>a.toLowerCase()),e.extensions||[],e.filename,i,l)}static matchFilename(e,i){for(let a of e)if(a.filename&&a.filename.test(i))return a;let l=/\.([^.]+)$/.exec(i);if(l){for(let a of e)if(a.extensions.indexOf(l[1])>-1)return a}return null}static matchLanguageName(e,i,l=!0){i=i.toLowerCase();for(let a of e)if(a.alias.some(c=>c==i))return a;if(l)for(let a of e)for(let c of a.alias){let u=i.indexOf(c);if(u>-1&&(c.length>2||!/\w/.test(i[u-1])&&!/\w/.test(i[u+c.length])))return a}return null}}const s1=ke.define(),hc=ke.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function es(s){let e=s.facet(hc);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function js(s,e){let i="",l=s.tabSize,a=s.facet(hc)[0];if(a=="	"){for(;e>=l;)i+="	",e-=l;a=" "}for(let c=0;c<e;c++)i+=a;return i}function dc(s,e){s instanceof Qe&&(s=new ml(s));for(let l of s.state.facet(s1)){let a=l(s,e);if(a!==void 0)return a}let i=Nt(s.state);return i.length>=e?rR(s,i,e):null}function jB(s,e,i){let l=Object.create(null),a=new ml(s,{overrideIndentation:u=>{var f;return(f=l[u])!==null&&f!==void 0?f:-1}}),c=[];for(let u=e;u<=i;){let f=s.doc.lineAt(u);u=f.to+1;let h=dc(a,f.from);if(h==null)continue;/\S/.test(f.text)||(h=0);let d=/^\s*/.exec(f.text)[0],m=js(s,h);d!=m&&(l[f.from]=h,c.push({from:f.from,to:f.from+d.length,insert:m}))}return s.changes(c)}class ml{constructor(e,i={}){this.state=e,this.options=i,this.unit=es(e)}lineAt(e,i=1){let l=this.state.doc.lineAt(e),{simulateBreak:a,simulateDoubleBreak:c}=this.options;return a!=null&&a>=l.from&&a<=l.to?c&&a==e?{text:"",from:e}:(i<0?a<e:a<=e)?{text:l.text.slice(a-l.from),from:a}:{text:l.text.slice(0,a-l.from),from:l.from}:l}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:l,from:a}=this.lineAt(e,i);return l.slice(e-a,Math.min(l.length,e+100-a))}column(e,i=1){let{text:l,from:a}=this.lineAt(e,i),c=this.countColumn(l,e-a),u=this.options.overrideIndentation?this.options.overrideIndentation(a):-1;return u>-1&&(c+=u-this.countColumn(l,l.search(/\S|$/))),c}countColumn(e,i=e.length){return Ts(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:l,from:a}=this.lineAt(e,i),c=this.options.overrideIndentation;if(c){let u=c(a);if(u>-1)return u}return this.countColumn(l,l.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const nR=new Ge;function rR(s,e,i){let l=e.resolveStack(i),a=l.node.enterUnfinishedNodesBefore(i);if(a!=l.node){let c=[];for(let u=a;u!=l.node;u=u.parent)c.push(u);for(let u=c.length-1;u>=0;u--)l={node:c[u],next:l}}return o1(l,s,i)}function o1(s,e,i){for(let l=s;l;l=l.next){let a=sR(l.node);if(a)return a(Uh.create(e,i,l))}return 0}function iR(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function sR(s){let e=s.type.prop(nR);if(e)return e;let i=s.firstChild,l;if(i&&(l=i.type.prop(Ge.closedBy))){let a=s.lastChild,c=a&&l.indexOf(a.name)>-1;return u=>l1(u,!0,1,void 0,c&&!iR(u)?a.from:void 0)}return s.parent==null?oR:null}function oR(){return 0}class Uh extends ml{constructor(e,i,l){super(e.state,e.options),this.base=e,this.pos=i,this.context=l}get node(){return this.context.node}static create(e,i,l){return new Uh(e,i,l)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let l=e.resolve(i.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if(lR(l,e))break;i=this.state.doc.lineAt(l.from)}return this.lineIndent(i.from)}continue(){return o1(this.context.next,this.base,this.pos)}}function lR(s,e){for(let i=e;i;i=i.parent)if(s==i)return!0;return!1}function aR(s){let e=s.node,i=e.childAfter(e.from),l=e.lastChild;if(!i)return null;let a=s.options.simulateBreak,c=s.state.doc.lineAt(i.from),u=a==null||a<=c.from?c.to:Math.min(c.to,a);for(let f=i.to;;){let h=e.childAfter(f);if(!h||h==l)return null;if(!h.type.isSkipped)return h.from<u?i:null;f=h.to}}function WB({closing:s,align:e=!0,units:i=1}){return l=>l1(l,e,i,s)}function l1(s,e,i,l,a){let c=s.textAfter,u=c.match(/^\s*/)[0].length,f=l&&c.slice(u,u+l.length)==l||a==s.pos+u,h=e?aR(s):null;return h?f?s.column(h.from):s.column(h.to):s.baseIndent+(f?0:s.unit*i)}const VB=s=>s.baseIndent;function ZB({except:s,units:e=1}={}){return i=>{let l=s&&s.test(i.textAfter);return i.baseIndent+(l?0:e*i.unit)}}const cR=200;function uR(){return Qe.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let i=s.newDoc,{head:l}=s.newSelection.main,a=i.lineAt(l);if(l>a.from+cR)return s;let c=i.sliceString(a.from,l);if(!e.some(d=>d.test(c)))return s;let{state:u}=s,f=-1,h=[];for(let{head:d}of u.selection.ranges){let m=u.doc.lineAt(d);if(m.from==f)continue;f=m.from;let p=dc(u,m.from);if(p==null)continue;let v=/^\s*/.exec(m.text)[0],y=js(u,p);v!=y&&h.push({from:m.from,to:m.from+v.length,insert:y})}return h.length?[s,{changes:h,sequential:!0}]:s})}const fR=ke.define(),hR=new Ge;function zB(s){let e=s.firstChild,i=s.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?s.to:i.from}:null}function dR(s,e,i){let l=Nt(s);if(l.length<i)return null;let a=l.resolveStack(i,1),c=null;for(let u=a;u;u=u.next){let f=u.node;if(f.to<=i||f.from>i)continue;if(c&&f.from<e)break;let h=f.type.prop(hR);if(h&&(f.to<l.length-50||l.length==s.doc.length||!mR(f))){let d=h(f,s);d&&d.from<=i&&d.from>=e&&d.to>i&&(c=d)}}return c}function mR(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function pl(s,e,i){for(let l of s.facet(fR)){let a=l(s,e,i);if(a)return a}return dR(s,e,i)}function a1(s,e){let i=e.mapPos(s.from,1),l=e.mapPos(s.to,-1);return i>=l?void 0:{from:i,to:l}}const gl=ze.define({map:a1}),Ws=ze.define({map:a1});function Hh(s){let e=[];for(let{head:i}of s.state.selection.ranges)e.some(l=>l.from<=i&&l.to>=i)||e.push(s.lineBlockAt(i));return e}const Ti=Lt.define({create(){return Me.none},update(s,e){s=s.map(e.changes);for(let i of e.effects)if(i.is(gl)&&!pR(s,i.value.from,i.value.to)){let{preparePlaceholder:l}=e.state.facet(Gh),a=l?Me.replace({widget:new wR(l(e.state,i.value))}):f1;s=s.update({add:[a.range(i.value.from,i.value.to)]})}else i.is(Ws)&&(s=s.update({filter:(l,a)=>i.value.from!=l||i.value.to!=a,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:l}=e.selection.main;s.between(l,l,(a,c)=>{a<l&&c>l&&(i=!0)}),i&&(s=s.update({filterFrom:l,filterTo:l,filter:(a,c)=>c<=l||a>=l}))}return s},provide:s=>we.decorations.from(s),toJSON(s,e){let i=[];return s.between(0,e.doc.length,(l,a)=>{i.push(l,a)}),i},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<s.length;){let l=s[i++],a=s[i++];if(typeof l!="number"||typeof a!="number")throw new RangeError("Invalid JSON for fold state");e.push(f1.range(l,a))}return Me.set(e,!0)}});function UB(s){return s.field(Ti,!1)||RangeSet.empty}function yl(s,e,i){var l;let a=null;return(l=s.field(Ti,!1))===null||l===void 0||l.between(e,i,(c,u)=>{(!a||a.from>c)&&(a={from:c,to:u})}),a}function pR(s,e,i){let l=!1;return s.between(e,e,(a,c)=>{a==e&&c==i&&(l=!0)}),l}function Kh(s,e){return s.field(Ti,!1)?e:e.concat(ze.appendConfig.of(c1()))}const gR=s=>{for(let e of Hh(s)){let i=pl(s.state,e.from,e.to);if(i)return s.dispatch({effects:Kh(s.state,[gl.of(i),mc(s,i)])}),!0}return!1},yR=s=>{if(!s.state.field(Ti,!1))return!1;let e=[];for(let i of Hh(s)){let l=yl(s.state,i.from,i.to);l&&e.push(Ws.of(l),mc(s,l,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function mc(s,e,i=!0){let l=s.state.doc.lineAt(e.from).number,a=s.state.doc.lineAt(e.to).number;return we.announce.of(`${s.state.phrase(i?"Folded lines":"Unfolded lines")} ${l} ${s.state.phrase("to")} ${a}.`)}const vR=s=>{let{state:e}=s,i=[];for(let l=0;l<e.doc.length;){let a=s.lineBlockAt(l),c=pl(e,a.from,a.to);c&&i.push(gl.of(c)),l=(c?s.lineBlockAt(c.to):a).to+1}return i.length&&s.dispatch({effects:Kh(s.state,i)}),!!i.length},bR=s=>{let e=s.state.field(Ti,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,s.state.doc.length,(l,a)=>{i.push(Ws.of({from:l,to:a}))}),s.dispatch({effects:i}),!0};function xR(s,e){for(let i=e;;){let l=pl(s.state,i.from,i.to);if(l&&l.to>e.from)return l;if(!i.from)return null;i=s.lineBlockAt(i.from-1)}}const HB=s=>{let e=[];for(let i of Hh(s)){let l=yl(s.state,i.from,i.to);if(l)e.push(Ws.of(l),mc(s,l,!1));else{let a=xR(s,i);a&&e.push(gl.of(a),mc(s,a))}}return e.length>0&&s.dispatch({effects:Kh(s.state,e)}),!!e.length},SR=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:gR},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:yR},{key:"Ctrl-Alt-[",run:vR},{key:"Ctrl-Alt-]",run:bR}],ER={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},Gh=ke.define({combine(s){return tr(s,ER)}});function c1(s){let e=[Ti,AR];return s&&e.push(Gh.of(s)),e}function u1(s,e){let{state:i}=s,l=i.facet(Gh),a=u=>{let f=s.lineBlockAt(s.posAtDOM(u.target)),h=yl(s.state,f.from,f.to);h&&s.dispatch({effects:Ws.of(h)}),u.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(s,a,e);let c=document.createElement("span");return c.textContent=l.placeholderText,c.setAttribute("aria-label",i.phrase("folded code")),c.title=i.phrase("unfold"),c.className="cm-foldPlaceholder",c.onclick=a,c}const f1=Me.replace({widget:new class extends vr{toDOM(s){return u1(s,null)}}});class wR extends vr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return u1(e,this.value)}}const CR={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Jh extends Sr{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function OR(s={}){let e=Object.assign(Object.assign({},CR),s),i=new Jh(e,!0),l=new Jh(e,!1),a=Tt.fromClass(class{constructor(u){this.from=u.viewport.from,this.markers=this.buildMarkers(u)}update(u){(u.docChanged||u.viewportChanged||u.startState.facet(Pi)!=u.state.facet(Pi)||u.startState.field(Ti,!1)!=u.state.field(Ti,!1)||Nt(u.startState)!=Nt(u.state)||e.foldingChanged(u))&&(this.markers=this.buildMarkers(u.view))}buildMarkers(u){let f=new Hr;for(let h of u.viewportLineBlocks){let d=yl(u.state,h.from,h.to)?l:pl(u.state,h.from,h.to)?i:null;d&&f.add(h.from,h.from,d)}return f.finish()}}),{domEventHandlers:c}=e;return[a,Wv({class:"cm-foldGutter",markers(u){var f;return((f=u.plugin(a))===null||f===void 0?void 0:f.markers)||_e.empty},initialSpacer(){return new Jh(e,!1)},domEventHandlers:Object.assign(Object.assign({},c),{click:(u,f,h)=>{if(c.click&&c.click(u,f,h))return!0;let d=yl(u.state,f.from,f.to);if(d)return u.dispatch({effects:Ws.of(d)}),!0;let m=pl(u.state,f.from,f.to);return m?(u.dispatch({effects:gl.of(m)}),!0):!1}})}),c1()]}const AR=we.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class vl{constructor(e,i){this.specs=e;let l;function a(f){let h=bi.newName();return(l||(l=Object.create(null)))["."+h]=f,h}const c=typeof i.all=="string"?i.all:i.all?a(i.all):void 0,u=i.scope;this.scope=u instanceof bn?f=>f.prop(qi)==u.data:u?f=>f==u:void 0,this.style=Yv(e.map(f=>({tag:f.tag,class:f.class||a(Object.assign({},f,{tag:null}))})),{all:c}).style,this.module=l?new bi(l):null,this.themeType=i.themeType}static define(e,i){return new vl(e,i||{})}}const Yh=ke.define(),h1=ke.define({combine(s){return s.length?[s[0]]:null}});function pc(s){let e=s.facet(Yh);return e.length?e:s.facet(h1)}function d1(s,e){let i=[PR],l;return s instanceof vl&&(s.module&&i.push(we.styleModule.of(s.module)),l=s.themeType),e!=null&&e.fallback?i.push(h1.of(s)):l?i.push(Yh.computeN([we.darkTheme],a=>a.facet(we.darkTheme)==(l=="dark")?[s]:[])):i.push(Yh.of(s)),i}function KB(s,e,i){let l=pc(s),a=null;if(l){for(let c of l)if(!c.scope||i&&c.scope(i)){let u=c.style(e);u&&(a=a?a+" "+u:u)}}return a}class kR{constructor(e){this.markCache=Object.create(null),this.tree=Nt(e.state),this.decorations=this.buildDeco(e,pc(e.state))}update(e){let i=Nt(e.state),l=pc(e.state),a=l!=pc(e.startState);i.length<e.view.viewport.to&&!a&&i.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(i!=this.tree||e.viewportChanged||a)&&(this.tree=i,this.decorations=this.buildDeco(e.view,l))}buildDeco(e,i){if(!i||!this.tree.length)return Me.none;let l=new Hr;for(let{from:a,to:c}of e.visibleRanges)Xv(this.tree,i,(u,f,h)=>{l.add(u,f,this.markCache[h]||(this.markCache[h]=Me.mark({class:h})))},a,c);return l.finish()}}const PR=vi.high(Tt.fromClass(kR,{decorations:s=>s.decorations})),TR=vl.define([{tag:oe.meta,color:"#404740"},{tag:oe.link,textDecoration:"underline"},{tag:oe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:oe.emphasis,fontStyle:"italic"},{tag:oe.strong,fontWeight:"bold"},{tag:oe.strikethrough,textDecoration:"line-through"},{tag:oe.keyword,color:"#708"},{tag:[oe.atom,oe.bool,oe.url,oe.contentSeparator,oe.labelName],color:"#219"},{tag:[oe.literal,oe.inserted],color:"#164"},{tag:[oe.string,oe.deleted],color:"#a11"},{tag:[oe.regexp,oe.escape,oe.special(oe.string)],color:"#e40"},{tag:oe.definition(oe.variableName),color:"#00f"},{tag:oe.local(oe.variableName),color:"#30a"},{tag:[oe.typeName,oe.namespace],color:"#085"},{tag:oe.className,color:"#167"},{tag:[oe.special(oe.variableName),oe.macroName],color:"#256"},{tag:oe.definition(oe.propertyName),color:"#00c"},{tag:oe.comment,color:"#940"},{tag:oe.invalid,color:"#f00"}]),IR=we.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),m1=1e4,p1="()[]{}",g1=ke.define({combine(s){return tr(s,{afterCursor:!0,brackets:p1,maxScanDistance:m1,renderMatch:RR})}}),DR=Me.mark({class:"cm-matchingBracket"}),MR=Me.mark({class:"cm-nonmatchingBracket"});function RR(s){let e=[],i=s.matched?DR:MR;return e.push(i.range(s.start.from,s.start.to)),s.end&&e.push(i.range(s.end.from,s.end.to)),e}const LR=[Lt.define({create(){return Me.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let i=[],l=e.state.facet(g1);for(let a of e.state.selection.ranges){if(!a.empty)continue;let c=Ar(e.state,a.head,-1,l)||a.head>0&&Ar(e.state,a.head-1,1,l)||l.afterCursor&&(Ar(e.state,a.head,1,l)||a.head<e.state.doc.length&&Ar(e.state,a.head+1,-1,l));c&&(i=i.concat(l.renderMatch(c,e.state)))}return Me.set(i,!0)},provide:s=>we.decorations.from(s)}),IR];function NR(s={}){return[g1.of(s),LR]}const $R=new Ge;function Xh(s,e,i){let l=s.prop(e<0?Ge.openedBy:Ge.closedBy);if(l)return l;if(s.name.length==1){let a=i.indexOf(s.name);if(a>-1&&a%2==(e<0?1:0))return[i[a+e]]}return null}function Qh(s){let e=s.type.prop($R);return e?e(s.node):s}function Ar(s,e,i,l={}){let a=l.maxScanDistance||m1,c=l.brackets||p1,u=Nt(s),f=u.resolveInner(e,i);for(let h=f;h;h=h.parent){let d=Xh(h.type,i,c);if(d&&h.from<h.to){let m=Qh(h);if(m&&(i>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return FR(s,e,i,h,m,d,c)}}return BR(s,e,i,u,f.type,a,c)}function FR(s,e,i,l,a,c,u){let f=l.parent,h={from:a.from,to:a.to},d=0,m=f==null?void 0:f.cursor();if(m&&(i<0?m.childBefore(l.from):m.childAfter(l.to)))do if(i<0?m.to<=l.from:m.from>=l.to){if(d==0&&c.indexOf(m.type.name)>-1&&m.from<m.to){let p=Qh(m);return{start:h,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(Xh(m.type,i,u))d++;else if(Xh(m.type,-i,u)){if(d==0){let p=Qh(m);return{start:h,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}d--}}while(i<0?m.prevSibling():m.nextSibling());return{start:h,matched:!1}}function BR(s,e,i,l,a,c,u){let f=i<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),h=u.indexOf(f);if(h<0||h%2==0!=i>0)return null;let d={from:i<0?e-1:e,to:i>0?e+1:e},m=s.doc.iterRange(e,i>0?s.doc.length:0),p=0;for(let v=0;!m.next().done&&v<=c;){let y=m.value;i<0&&(v+=y.length);let S=e+v*i;for(let E=i>0?0:y.length-1,w=i>0?y.length:-1;E!=w;E+=i){let C=u.indexOf(y[E]);if(!(C<0||l.resolveInner(S+E,1).type!=a))if(C%2==0==i>0)p++;else{if(p==1)return{start:d,end:{from:S+E,to:S+E+1},matched:C>>1==h>>1};p--}}i>0&&(v+=y.length)}return m.done?{start:d,matched:!1}:null}function y1(s,e,i,l=0,a=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let c=a;for(let u=l;u<e;u++)s.charCodeAt(u)==9?c+=i-c%i:c++;return c}class v1{constructor(e,i,l,a){this.string=e,this.tabSize=i,this.indentUnit=l,this.overrideIndent=a,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let i=this.string.charAt(this.pos),l;if(typeof e=="string"?l=i==e:l=i&&(e instanceof RegExp?e.test(i):e(i)),l)return++this.pos,i}eatWhile(e){let i=this.pos;for(;this.eat(e););return this.pos>i}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let i=this.string.indexOf(e,this.pos);if(i>-1)return this.pos=i,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=y1(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:y1(this.string,null,this.tabSize)}match(e,i,l){if(typeof e=="string"){let a=u=>l?u.toLowerCase():u,c=this.string.substr(this.pos,e.length);return a(c)==a(e)?(i!==!1&&(this.pos+=e.length),!0):null}else{let a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&i!==!1&&(this.pos+=a[0].length),a)}}current(){return this.string.slice(this.start,this.pos)}}function jR(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||WR,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||qh}}function WR(s){if(typeof s!="object")return s;let e={};for(let i in s){let l=s[i];e[i]=l instanceof Array?l.slice():l}return e}const b1=new WeakMap;class Vs extends bn{constructor(e){let i=qv(e.languageData),l=jR(e),a,c=new class extends a0{createParse(u,f,h){return new ZR(a,u,f,h)}};super(i,c,[s1.of((u,f)=>this.getIndent(u,f))],e.name),this.topNode=HR(i),a=this,this.streamParser=l,this.stateAfter=new Ge({perNode:!0}),this.tokenTable=e.tokenTable?new O1(l.tokenTable):UR}static define(e){return new Vs(e)}getIndent(e,i){let l=Nt(e.state),a=l.resolve(i);for(;a&&a.type!=this.topNode;)a=a.parent;if(!a)return null;let c,{overrideIndentation:u}=e.options;u&&(c=b1.get(e.state),c!=null&&c<i-1e4&&(c=void 0));let f=_h(this,l,0,a.from,c!=null?c:i),h,d;if(f?(d=f.state,h=f.pos+1):(d=this.streamParser.startState(e.unit),h=0),i-h>1e4)return null;for(;h<i;){let p=e.state.doc.lineAt(h),v=Math.min(i,p.to);if(p.length){let y=u?u(p.from):-1,S=new v1(p.text,e.state.tabSize,e.unit,y<0?void 0:y);for(;S.pos<v-p.from;)S1(this.streamParser.token,S,d)}else this.streamParser.blankLine(d,e.unit);if(v==i)break;h=p.to+1}let m=e.lineAt(i);return u&&c==null&&b1.set(e.state,m.from),this.streamParser.indent(d,/^\s*(.*)/.exec(m.text)[1],e)}get allowsNesting(){return!1}}function _h(s,e,i,l,a){let c=i>=l&&i+e.length<=a&&e.prop(s.stateAfter);if(c)return{state:s.streamParser.copyState(c),pos:i+e.length};for(let u=e.children.length-1;u>=0;u--){let f=e.children[u],h=i+e.positions[u],d=f instanceof yt&&h<a&&_h(s,f,h,l,a);if(d)return d}return null}function x1(s,e,i,l,a){if(a&&i<=0&&l>=e.length)return e;!a&&e.type==s.topNode&&(a=!0);for(let c=e.children.length-1;c>=0;c--){let u=e.positions[c],f=e.children[c],h;if(u<l&&f instanceof yt){if(!(h=x1(s,f,i-u,l-u,a)))break;return a?new yt(e.type,e.children.slice(0,c).concat(h),e.positions.slice(0,c+1),u+h.length):h}}return null}function VR(s,e,i,l){for(let a of e){let c=a.from+(a.openStart?25:0),u=a.to-(a.openEnd?25:0),f=c<=i&&u>i&&_h(s,a.tree,0-a.offset,i,u),h;if(f&&(h=x1(s,a.tree,i+a.offset,f.pos+a.offset,!1)))return{state:f.state,tree:h}}return{state:s.streamParser.startState(l?es(l):4),tree:yt.empty}}class ZR{constructor(e,i,l,a){this.lang=e,this.input=i,this.fragments=l,this.ranges=a,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=a[a.length-1].to;let c=Fs.get(),u=a[0].from,{state:f,tree:h}=VR(e,l,u,c==null?void 0:c.state);this.state=f,this.parsedPos=this.chunkStart=u+h.length;for(let d=0;d<h.children.length;d++)this.chunks.push(h.children[d]),this.chunkPos.push(h.positions[d]);c&&this.parsedPos<c.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(es(c.state)),c.skipUntilInView(this.parsedPos,c.viewport.from),this.parsedPos=c.viewport.from),this.moveRangeIndex()}advance(){let e=Fs.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),l=Math.min(i,this.chunkStart+2048);for(e&&(l=Math.min(l,e.viewport.to));this.parsedPos<l;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let i=this.input.chunk(e);if(this.input.lineChunks)i==`
`&&(i="");else{let l=i.indexOf(`
`);l>-1&&(i=i.slice(0,l))}return e+i.length<=this.to?i:i.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,i=this.lineAfter(e),l=e+i.length;for(let a=this.rangeIndex;;){let c=this.ranges[a].to;if(c>=l||(i=i.slice(0,c-(l-i.length)),a++,a==this.ranges.length))break;let u=this.ranges[a].from,f=this.lineAfter(u);i+=f,l=u+f.length}return{line:i,end:l}}skipGapsTo(e,i,l){for(;;){let a=this.ranges[this.rangeIndex].to,c=e+i;if(l>0?a>c:a>=c)break;let u=this.ranges[++this.rangeIndex].from;i+=u-a}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,i,l,a,c){if(this.ranges.length>1){c=this.skipGapsTo(i,c,1),i+=c;let u=this.chunk.length;c=this.skipGapsTo(l,c,-1),l+=c,a+=this.chunk.length-u}return this.chunk.push(e,i,l,a),c}parseLine(e){let{line:i,end:l}=this.nextLine(),a=0,{streamParser:c}=this.lang,u=new v1(i,e?e.state.tabSize:4,e?es(e.state):2);if(u.eol())c.blankLine(this.state,u.indentUnit);else for(;!u.eol();){let f=S1(c.token,u,this.state);if(f&&(a=this.emitToken(this.lang.tokenTable.resolve(f),this.parsedPos+u.start,this.parsedPos+u.pos,4,a)),u.start>1e4)break}this.parsedPos=l,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=yt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:zR,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new yt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new yt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function S1(s,e,i){e.start=e.pos;for(let l=0;l<10;l++){let a=s(e,i);if(e.pos>e.start)return a}throw new Error("Stream parser failed to advance stream.")}const qh=Object.create(null),bl=[fn.none],zR=new If(bl),E1=[],w1=Object.create(null),C1=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])C1[s]=A1(qh,e);class O1{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),C1)}resolve(e){return e?this.table[e]||(this.table[e]=A1(this.extra,e)):0}}const UR=new O1(qh);function ed(s,e){E1.indexOf(s)>-1||(E1.push(s),console.warn(e))}function A1(s,e){let i=[];for(let f of e.split(" ")){let h=[];for(let d of f.split(".")){let m=s[d]||oe[d];m?typeof m=="function"?h.length?h=h.map(m):ed(d,`Modifier ${d} used at start of tag`):h.length?ed(d,`Tag ${d} used as modifier`):h=Array.isArray(m)?m:[m]:ed(d,`Unknown highlighting tag ${d}`)}for(let d of h)i.push(d)}if(!i.length)return 0;let l=e.replace(/ /g,"_"),a=l+" "+i.map(f=>f.id),c=w1[a];if(c)return c.id;let u=w1[a]=fn.define({id:bl.length,name:l,props:[YM({[l]:i})]});return bl.push(u),u.id}function HR(s){let e=fn.define({id:bl.length,name:"Document",props:[qi.add(()=>s)],top:!0});return bl.push(e),e}function k1(s){return s.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(s)}function P1(s){for(let e=s.iter();!e.next().done;)if(k1(e.value))return!0;return!1}function KR(s){let e=!1;return s.iterChanges((i,l,a,c,u)=>{!e&&P1(u)&&(e=!0)}),e}const td=ke.define({combine:s=>s.some(e=>e)});function JB(s={}){let e=[GR];return s.alwaysIsolate&&e.push(td.of(!0)),e}const GR=Tt.fromClass(class{constructor(s){this.always=s.state.facet(td)||s.textDirection!=dt.LTR||s.state.facet(we.perLineTextDirection),this.hasRTL=!this.always&&P1(s.state.doc),this.tree=Nt(s.state),this.decorations=T1(s,this.tree,this.always)}update(s){let e=s.state.facet(td)||s.view.textDirection!=dt.LTR||s.state.facet(we.perLineTextDirection);if(!e&&!this.hasRTL&&KR(s.changes)&&(this.hasRTL=!0),!e&&!this.hasRTL)return;let i=Nt(s.state);(e!=this.always||i!=this.tree||s.docChanged||s.viewportChanged)&&(this.tree=i,this.always=e,this.decorations=T1(s.view,i,e))}},{provide:s=>{function e(i){var l,a;return(a=(l=i.plugin(s))===null||l===void 0?void 0:l.decorations)!==null&&a!==void 0?a:Me.none}return[we.outerDecorations.of(e),vi.lowest(we.bidiIsolatedRanges.of(e))]}});function T1(s,e,i){let l=new Hr,a=s.visibleRanges;i||(a=JR(a,s.state.doc));for(let{from:c,to:u}of a)e.iterate({enter:f=>{let h=f.type.prop(Ge.isolate);h&&l.add(f.from,f.to,YR[h])},from:c,to:u});return l.finish()}function JR(s,e){let i=e.iter(),l=0,a=[],c=null;for(let{from:u,to:f}of s)for(u!=l&&(l<u&&i.next(u-l),l=u);;){let h=l,d=l+i.value.length;if(!i.lineBreak&&k1(i.value)&&(c&&c.to>h-10?c.to=Math.min(f,d):a.push(c={from:h,to:Math.min(f,d)})),l>=f)break;l=d,i.next()}return a}const YR={rtl:Me.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:dt.RTL}),ltr:Me.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:dt.LTR}),auto:Me.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var XR=["true","false","on","off","yes","no"],QR=new RegExp("\\b(("+XR.join(")|(")+"))$","i");const gc={name:"yaml",token:function(s,e){var i=s.peek(),l=e.escaped;if(e.escaped=!1,i=="#"&&(s.pos==0||/\s/.test(s.string.charAt(s.pos-1))))return s.skipToEnd(),"comment";if(s.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(e.literal&&s.indentation()>e.keyCol)return s.skipToEnd(),"string";if(e.literal&&(e.literal=!1),s.sol()){if(e.keyCol=0,e.pair=!1,e.pairStart=!1,s.match("---")||s.match("..."))return"def";if(s.match(/^\s*-\s+/))return"meta"}if(s.match(/^(\{|\}|\[|\])/))return i=="{"?e.inlinePairs++:i=="}"?e.inlinePairs--:i=="["?e.inlineList++:e.inlineList--,"meta";if(e.inlineList>0&&!l&&i==",")return s.next(),"meta";if(e.inlinePairs>0&&!l&&i==",")return e.keyCol=0,e.pair=!1,e.pairStart=!1,s.next(),"meta";if(e.pairStart){if(s.match(/^\s*(\||\>)\s*/))return e.literal=!0,"meta";if(s.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(e.inlinePairs==0&&s.match(/^\s*-?[0-9\.\,]+\s?$/)||e.inlinePairs>0&&s.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(s.match(QR))return"keyword"}return!e.pair&&s.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(e.pair=!0,e.keyCol=s.indentation(),"atom"):e.pair&&s.match(/^:\s*/)?(e.pairStart=!0,"meta"):(e.pairStart=!1,e.escaped=i=="\\",s.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};var I1=x(32552),D1=x(73698),nd=x(87685),Yr=x(7896),_R=x(31461);const qR=s=>{let{state:e}=s,i=e.doc.lineAt(e.selection.main.from),l=id(s.state,i.from);return l.line?eL(s):l.block?nL(s):!1};function rd(s,e){return({state:i,dispatch:l})=>{if(i.readOnly)return!1;let a=s(e,i);return a?(l(i.update(a)),!0):!1}}const eL=rd(sL,0),YB=null,XB=null,tL=rd(M1,0),QB=null,_B=null,nL=rd((s,e)=>M1(s,e,iL(e)),0);function id(s,e){let i=s.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const xl=50;function rL(s,{open:e,close:i},l,a){let c=s.sliceDoc(l-xl,l),u=s.sliceDoc(a,a+xl),f=/\s*$/.exec(c)[0].length,h=/^\s*/.exec(u)[0].length,d=c.length-f;if(c.slice(d-e.length,d)==e&&u.slice(h,h+i.length)==i)return{open:{pos:l-f,margin:f&&1},close:{pos:a+h,margin:h&&1}};let m,p;a-l<=2*xl?m=p=s.sliceDoc(l,a):(m=s.sliceDoc(l,l+xl),p=s.sliceDoc(a-xl,a));let v=/^\s*/.exec(m)[0].length,y=/\s*$/.exec(p)[0].length,S=p.length-y-i.length;return m.slice(v,v+e.length)==e&&p.slice(S,S+i.length)==i?{open:{pos:l+v+e.length,margin:/\s/.test(m.charAt(v+e.length))?1:0},close:{pos:a-y-i.length,margin:/\s/.test(p.charAt(S-1))?1:0}}:null}function iL(s){let e=[];for(let i of s.selection.ranges){let l=s.doc.lineAt(i.from),a=i.to<=l.to?l:s.doc.lineAt(i.to),c=e.length-1;c>=0&&e[c].to>l.from?e[c].to=a.to:e.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:a.to})}return e}function M1(s,e,i=e.selection.ranges){let l=i.map(c=>id(e,c.from).block);if(!l.every(c=>c))return null;let a=i.map((c,u)=>rL(e,l[u],c.from,c.to));if(s!=2&&!a.every(c=>c))return{changes:e.changes(i.map((c,u)=>a[u]?[]:[{from:c.from,insert:l[u].open+" "},{from:c.to,insert:" "+l[u].close}]))};if(s!=1&&a.some(c=>c)){let c=[];for(let u=0,f;u<a.length;u++)if(f=a[u]){let h=l[u],{open:d,close:m}=f;c.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:m.pos-m.margin,to:m.pos+h.close.length})}return{changes:c}}return null}function sL(s,e,i=e.selection.ranges){let l=[],a=-1;for(let{from:c,to:u}of i){let f=l.length,h=1e9,d=id(e,c).line;if(d){for(let m=c;m<=u;){let p=e.doc.lineAt(m);if(p.from>a&&(c==u||u>p.from)){a=p.from;let v=/^\s*/.exec(p.text)[0].length,y=v==p.length,S=p.text.slice(v,v+d.length)==d?v:-1;v<p.text.length&&v<h&&(h=v),l.push({line:p,comment:S,token:d,indent:v,empty:y,single:!1})}m=p.to+1}if(h<1e9)for(let m=f;m<l.length;m++)l[m].indent<l[m].line.text.length&&(l[m].indent=h);l.length==f+1&&(l[f].single=!0)}}if(s!=2&&l.some(c=>c.comment<0&&(!c.empty||c.single))){let c=[];for(let{line:f,token:h,indent:d,empty:m,single:p}of l)(p||!m)&&c.push({from:f.from+d,insert:h+" "});let u=e.changes(c);return{changes:u,selection:e.selection.map(u,1)}}else if(s!=1&&l.some(c=>c.comment>=0)){let c=[];for(let{line:u,comment:f,token:h}of l)if(f>=0){let d=u.from+f,m=d+h.length;u.text[m-u.from]==" "&&m++,c.push({from:d,to:m})}return{changes:c}}return null}const sd=yr.define(),oL=yr.define(),lL=ke.define(),R1=ke.define({combine(s){return tr(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(l,a)=>e(l,a)||i(l,a)})}}),od=Lt.define({create(){return kr.empty},update(s,e){let i=e.state.facet(R1),l=e.annotation(sd);if(l){let h=xn.fromTransaction(e,l.selection),d=l.side,m=d==0?s.undone:s.done;return h?m=vc(m,m.length,i.minDepth,h):m=$1(m,e.startState.selection),new kr(d==0?l.rest:m,d==0?m:l.rest)}let a=e.annotation(oL);if((a=="full"||a=="before")&&(s=s.isolate()),e.annotation(zt.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let c=xn.fromTransaction(e),u=e.annotation(zt.time),f=e.annotation(zt.userEvent);return c?s=s.addChanges(c,u,f,i,e):e.selection&&(s=s.addSelection(e.startState.selection,u,f,i.newGroupDelay)),(a=="full"||a=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new kr(s.done.map(xn.fromJSON),s.undone.map(xn.fromJSON))}});function aL(s={}){return[od,R1.of(s),we.domEventHandlers({beforeinput(e,i){let l=e.inputType=="historyUndo"?L1:e.inputType=="historyRedo"?ld:null;return l?(e.preventDefault(),l(i)):!1}})]}const qB=null;function yc(s,e){return function({state:i,dispatch:l}){if(!e&&i.readOnly)return!1;let a=i.field(od,!1);if(!a)return!1;let c=a.pop(s,i,e);return c?(l(c),!0):!1}}const L1=yc(0,!1),ld=yc(1,!1),cL=yc(0,!0),uL=yc(1,!0);function e9(s){return function(e){let i=e.field(od,!1);if(!i)return 0;let l=s==0?i.done:i.undone;return l.length-(l.length&&!l[0].changes?1:0)}}const t9=null,n9=null;class xn{constructor(e,i,l,a,c){this.changes=e,this.effects=i,this.mapped=l,this.startSelection=a,this.selectionsAfter=c}setSelAfter(e){return new xn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,l;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(l=this.startSelection)===null||l===void 0?void 0:l.toJSON(),selectionsAfter:this.selectionsAfter.map(a=>a.toJSON())}}static fromJSON(e){return new xn(e.changes&&Zt.fromJSON(e.changes),[],e.mapped&&gr.fromJSON(e.mapped),e.startSelection&&ae.fromJSON(e.startSelection),e.selectionsAfter.map(ae.fromJSON))}static fromTransaction(e,i){let l=zn;for(let a of e.startState.facet(lL)){let c=a(e);c.length&&(l=l.concat(c))}return!l.length&&e.changes.empty?null:new xn(e.changes.invert(e.startState.doc),l,void 0,i||e.startState.selection,zn)}static selection(e){return new xn(void 0,zn,void 0,void 0,e)}}function vc(s,e,i,l){let a=e+1>i+20?e-i-1:0,c=s.slice(a,e);return c.push(l),c}function fL(s,e){let i=[],l=!1;return s.iterChangedRanges((a,c)=>i.push(a,c)),e.iterChangedRanges((a,c,u,f)=>{for(let h=0;h<i.length;){let d=i[h++],m=i[h++];f>=d&&u<=m&&(l=!0)}}),l}function hL(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((i,l)=>i.empty!=e.ranges[l].empty).length===0}function N1(s,e){return s.length?e.length?s.concat(e):s:e}const zn=[],dL=200;function $1(s,e){if(s.length){let i=s[s.length-1],l=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-dL));return l.length&&l[l.length-1].eq(e)?s:(l.push(e),vc(s,s.length-1,1e9,i.setSelAfter(l)))}else return[xn.selection([e])]}function mL(s){let e=s[s.length-1],i=s.slice();return i[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function ad(s,e){if(!s.length)return s;let i=s.length,l=zn;for(;i;){let a=pL(s[i-1],e,l);if(a.changes&&!a.changes.empty||a.effects.length){let c=s.slice(0,i);return c[i-1]=a,c}else e=a.mapped,i--,l=a.selectionsAfter}return l.length?[xn.selection(l)]:zn}function pL(s,e,i){let l=N1(s.selectionsAfter.length?s.selectionsAfter.map(f=>f.map(e)):zn,i);if(!s.changes)return xn.selection(l);let a=s.changes.map(e),c=e.mapDesc(s.changes,!0),u=s.mapped?s.mapped.composeDesc(c):c;return new xn(a,ze.mapEffects(s.effects,e),u,s.startSelection.map(c),l)}const gL=/^(input\.type|delete)($|\.)/;class kr{constructor(e,i,l=0,a=void 0){this.done=e,this.undone=i,this.prevTime=l,this.prevUserEvent=a}isolate(){return this.prevTime?new kr(this.done,this.undone):this}addChanges(e,i,l,a,c){let u=this.done,f=u[u.length-1];return f&&f.changes&&!f.changes.empty&&e.changes&&(!l||gL.test(l))&&(!f.selectionsAfter.length&&i-this.prevTime<a.newGroupDelay&&a.joinToEvent(c,fL(f.changes,e.changes))||l=="input.type.compose")?u=vc(u,u.length-1,a.minDepth,new xn(e.changes.compose(f.changes),N1(e.effects,f.effects),f.mapped,f.startSelection,zn)):u=vc(u,u.length,a.minDepth,e),new kr(u,zn,i,l)}addSelection(e,i,l,a){let c=this.done.length?this.done[this.done.length-1].selectionsAfter:zn;return c.length>0&&i-this.prevTime<a&&l==this.prevUserEvent&&l&&/^select($|\.)/.test(l)&&hL(c[c.length-1],e)?this:new kr($1(this.done,e),this.undone,i,l)}addMapping(e){return new kr(ad(this.done,e),ad(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,l){let a=e==0?this.done:this.undone;if(a.length==0)return null;let c=a[a.length-1],u=c.selectionsAfter[0]||i.selection;if(l&&c.selectionsAfter.length)return i.update({selection:c.selectionsAfter[c.selectionsAfter.length-1],annotations:sd.of({side:e,rest:mL(a),selection:u}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(c.changes){let f=a.length==1?zn:a.slice(0,a.length-1);return c.mapped&&(f=ad(f,c.mapped)),i.update({changes:c.changes,selection:c.startSelection,effects:c.effects,annotations:sd.of({side:e,rest:f,selection:u}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}kr.empty=new kr(zn,zn);const yL=[{key:"Mod-z",run:L1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ld,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ld,preventDefault:!0},{key:"Mod-u",run:cL,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:uL,preventDefault:!0}];function Zs(s,e){return ae.create(s.ranges.map(e),s.mainIndex)}function Pr(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Un({state:s,dispatch:e},i){let l=Zs(s.selection,i);return l.eq(s.selection,!0)?!1:(e(Pr(s,l)),!0)}function Sl(s,e){return ae.cursor(e?s.to:s.from)}function bc(s,e){return Un(s,i=>i.empty?s.moveByChar(i,e):Sl(i,e))}function on(s){return s.textDirectionAt(s.state.selection.main.head)==dt.LTR}const F1=s=>bc(s,!on(s)),B1=s=>bc(s,on(s)),r9=s=>bc(s,!0),i9=s=>bc(s,!1);function xc(s,e){return Un(s,i=>i.empty?s.moveByGroup(i,e):Sl(i,e))}const vL=s=>xc(s,!on(s)),bL=s=>xc(s,on(s)),s9=s=>xc(s,!0),o9=s=>xc(s,!1),j1=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function W1(s,e,i){let l=s.state.charCategorizer(e.from),a=CharCategory.Space,c=e.from,u=0,f=!1,h=!1,d=!1,m=v=>{if(f)return!1;c+=i?v.length:-v.length;let y=l(v),S;if(y==CharCategory.Word&&v.charCodeAt(0)<128&&/[\W_]/.test(v)&&(y=-1),a==CharCategory.Space&&(a=y),a!=y)return!1;if(a==CharCategory.Word)if(v.toLowerCase()==v){if(!i&&h)return!1;d=!0}else if(d){if(i)return!1;f=!0}else{if(h&&i&&l(S=s.state.sliceDoc(c,c+1))==CharCategory.Word&&S.toLowerCase()==S)return!1;h=!0}return u++,!0},p=s.moveByChar(e,i,v=>(m(v),m));if(j1&&a==CharCategory.Word&&p.from==e.from+u*(i?1:-1)){let v=Math.min(e.head,p.head),y=Math.max(e.head,p.head),S=s.state.sliceDoc(v,y);if(S.length>1&&/[\u4E00-\uffff]/.test(S)){let E=Array.from(j1.segment(S));if(E.length>1)return i?EditorSelection.cursor(e.head+E[1].index,-1):EditorSelection.cursor(p.head+E[E.length-1].index,1)}}return p}function V1(s,e){return Un(s,i=>i.empty?W1(s,i,e):Sl(i,e))}const l9=s=>V1(s,!0),a9=s=>V1(s,!1);function xL(s,e,i){if(e.type.prop(i))return!0;let l=e.to-e.from;return l&&(l>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Sc(s,e,i){let l=Nt(s).resolveInner(e.head),a=i?Ge.closedBy:Ge.openedBy;for(let h=e.head;;){let d=i?l.childAfter(h):l.childBefore(h);if(!d)break;xL(s,d,a)?l=d:h=i?d.to:d.from}let c=l.type.prop(a),u,f;return c&&(u=i?Ar(s,l.from,1):Ar(s,l.to,-1))&&u.matched?f=i?u.end.to:u.end.from:f=i?l.to:l.from,ae.cursor(f,i?-1:1)}const SL=s=>Un(s,e=>Sc(s.state,e,!on(s))),EL=s=>Un(s,e=>Sc(s.state,e,on(s)));function Z1(s,e){return Un(s,i=>{if(!i.empty)return Sl(i,e);let l=s.moveVertically(i,e);return l.head!=i.head?l:s.moveToLineBoundary(i,e)})}const z1=s=>Z1(s,!1),U1=s=>Z1(s,!0);function H1(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,i=0,l=0,a;if(e){for(let c of s.state.facet(we.scrollMargins)){let u=c(s);u!=null&&u.top&&(i=Math.max(u==null?void 0:u.top,i)),u!=null&&u.bottom&&(l=Math.max(u==null?void 0:u.bottom,l))}a=s.scrollDOM.clientHeight-i-l}else a=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:l,selfScroll:e,height:Math.max(s.defaultLineHeight,a-5)}}function K1(s,e){let i=H1(s),{state:l}=s,a=Zs(l.selection,u=>u.empty?s.moveVertically(u,e,i.height):Sl(u,e));if(a.eq(l.selection))return!1;let c;if(i.selfScroll){let u=s.coordsAtPos(l.selection.main.head),f=s.scrollDOM.getBoundingClientRect(),h=f.top+i.marginTop,d=f.bottom-i.marginBottom;u&&u.top>h&&u.bottom<d&&(c=we.scrollIntoView(a.main.head,{y:"start",yMargin:u.top-h}))}return s.dispatch(Pr(l,a),{effects:c}),!0}const G1=s=>K1(s,!1),cd=s=>K1(s,!0);function Ii(s,e,i){let l=s.lineBlockAt(e.head),a=s.moveToLineBoundary(e,i);if(a.head==e.head&&a.head!=(i?l.to:l.from)&&(a=s.moveToLineBoundary(e,i,!1)),!i&&a.head==l.from&&l.length){let c=/^\s*/.exec(s.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;c&&e.head!=l.from+c&&(a=ae.cursor(l.from+c))}return a}const wL=s=>Un(s,e=>Ii(s,e,!0)),CL=s=>Un(s,e=>Ii(s,e,!1)),OL=s=>Un(s,e=>Ii(s,e,!on(s))),AL=s=>Un(s,e=>Ii(s,e,on(s))),kL=s=>Un(s,e=>ae.cursor(s.lineBlockAt(e.head).from,1)),PL=s=>Un(s,e=>ae.cursor(s.lineBlockAt(e.head).to,-1));function J1(s,e,i){let l=!1,a=Zs(s.selection,c=>{let u=Ar(s,c.head,-1)||Ar(s,c.head,1)||c.head>0&&Ar(s,c.head-1,1)||c.head<s.doc.length&&Ar(s,c.head+1,-1);if(!u||!u.end)return c;l=!0;let f=u.start.from==c.head?u.end.to:u.end.from;return i?ae.range(c.anchor,f):ae.cursor(f)});return l?(e(Pr(s,a)),!0):!1}const TL=({state:s,dispatch:e})=>J1(s,e,!1),c9=({state:s,dispatch:e})=>J1(s,e,!0);function Nn(s,e){let i=Zs(s.state.selection,l=>{let a=e(l);return ae.range(l.anchor,a.head,a.goalColumn,a.bidiLevel||void 0)});return i.eq(s.state.selection)?!1:(s.dispatch(Pr(s.state,i)),!0)}function Ec(s,e){return Nn(s,i=>s.moveByChar(i,e))}const Y1=s=>Ec(s,!on(s)),X1=s=>Ec(s,on(s)),u9=s=>Ec(s,!0),f9=s=>Ec(s,!1);function wc(s,e){return Nn(s,i=>s.moveByGroup(i,e))}const IL=s=>wc(s,!on(s)),DL=s=>wc(s,on(s)),h9=s=>wc(s,!0),d9=s=>wc(s,!1);function Q1(s,e){return Nn(s,i=>W1(s,i,e))}const m9=s=>Q1(s,!0),p9=s=>Q1(s,!1),ML=s=>Nn(s,e=>Sc(s.state,e,!on(s))),RL=s=>Nn(s,e=>Sc(s.state,e,on(s)));function _1(s,e){return Nn(s,i=>s.moveVertically(i,e))}const q1=s=>_1(s,!1),eb=s=>_1(s,!0);function tb(s,e){return Nn(s,i=>s.moveVertically(i,e,H1(s).height))}const nb=s=>tb(s,!1),rb=s=>tb(s,!0),LL=s=>Nn(s,e=>Ii(s,e,!0)),NL=s=>Nn(s,e=>Ii(s,e,!1)),$L=s=>Nn(s,e=>Ii(s,e,!on(s))),FL=s=>Nn(s,e=>Ii(s,e,on(s))),BL=s=>Nn(s,e=>ae.cursor(s.lineBlockAt(e.head).from)),jL=s=>Nn(s,e=>ae.cursor(s.lineBlockAt(e.head).to)),ib=({state:s,dispatch:e})=>(e(Pr(s,{anchor:0})),!0),sb=({state:s,dispatch:e})=>(e(Pr(s,{anchor:s.doc.length})),!0),ob=({state:s,dispatch:e})=>(e(Pr(s,{anchor:s.selection.main.anchor,head:0})),!0),lb=({state:s,dispatch:e})=>(e(Pr(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),WL=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),VL=({state:s,dispatch:e})=>{let i=Oc(s).map(({from:l,to:a})=>ae.range(l,Math.min(a+1,s.doc.length)));return e(s.update({selection:ae.create(i),userEvent:"select"})),!0},ZL=({state:s,dispatch:e})=>{let i=Zs(s.selection,l=>{var a;let c=Nt(s).resolveStack(l.from,1);for(let u=c;u;u=u.next){let{node:f}=u;if((f.from<l.from&&f.to>=l.to||f.to>l.to&&f.from<=l.from)&&(!((a=f.parent)===null||a===void 0)&&a.parent))return ae.range(f.to,f.from)}return l});return e(Pr(s,i)),!0},zL=({state:s,dispatch:e})=>{let i=s.selection,l=null;return i.ranges.length>1?l=ae.create([i.main]):i.main.empty||(l=ae.create([ae.cursor(i.main.head)])),l?(e(Pr(s,l)),!0):!1};function zs(s,e){if(s.state.readOnly)return!1;let i="delete.selection",{state:l}=s,a=l.changeByRange(c=>{let{from:u,to:f}=c;if(u==f){let h=e(c);h<u?(i="delete.backward",h=Cc(s,h,!1)):h>u&&(i="delete.forward",h=Cc(s,h,!0)),u=Math.min(u,h),f=Math.max(f,h)}else u=Cc(s,u,!1),f=Cc(s,f,!0);return u==f?{range:c}:{changes:{from:u,to:f},range:ae.cursor(u,u<c.head?-1:1)}});return a.changes.empty?!1:(s.dispatch(l.update(a,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?we.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function Cc(s,e,i){if(s instanceof we)for(let l of s.state.facet(we.atomicRanges).map(a=>a(s)))l.between(e,e,(a,c)=>{a<e&&c>e&&(e=i?c:a)});return e}const ab=(s,e)=>zs(s,i=>{let l=i.from,{state:a}=s,c=a.doc.lineAt(l),u,f;if(!e&&l>c.from&&l<c.from+200&&!/[^ \t]/.test(u=c.text.slice(0,l-c.from))){if(u[u.length-1]=="	")return l-1;let h=Ts(u,a.tabSize),d=h%es(a)||es(a);for(let m=0;m<d&&u[u.length-1-m]==" ";m++)l--;f=l}else f=Gt(c.text,l-c.from,e,e)+c.from,f==l&&c.number!=(e?a.doc.lines:1)?f+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(f-c.from,l-c.from))&&(f=Gt(c.text,f-c.from,!1,!1)+c.from);return f}),ud=s=>ab(s,!1),cb=s=>ab(s,!0),ub=(s,e)=>zs(s,i=>{let l=i.head,{state:a}=s,c=a.doc.lineAt(l),u=a.charCategorizer(l);for(let f=null;;){if(l==(e?c.to:c.from)){l==i.head&&c.number!=(e?a.doc.lines:1)&&(l+=e?1:-1);break}let h=Gt(c.text,l-c.from,e)+c.from,d=c.text.slice(Math.min(l,h)-c.from,Math.max(l,h)-c.from),m=u(d);if(f!=null&&m!=f)break;(d!=" "||l!=i.head)&&(f=m),l=h}return l}),fb=s=>ub(s,!1),UL=s=>ub(s,!0),HL=s=>zs(s,e=>{let i=s.lineBlockAt(e.head).to;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),g9=s=>zs(s,e=>{let i=s.lineBlockAt(e.head).from;return e.head>i?i:Math.max(0,e.head-1)}),KL=s=>zs(s,e=>{let i=s.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),GL=s=>zs(s,e=>{let i=s.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(s.state.doc.length,e.head+1)}),y9=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=[];for(let l=0,a="",c=s.doc.iter();;){if(c.next(),c.lineBreak||c.done){let u=a.search(/\s+$/);if(u>-1&&i.push({from:l-(a.length-u),to:l}),c.done)break;a=""}else a=c.value;l+=c.value.length}return i.length?(e(s.update({changes:i,userEvent:"delete"})),!0):!1},JL=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(l=>({changes:{from:l.from,to:l.to,insert:ct.of(["",""])},range:ae.cursor(l.from)}));return e(s.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},YL=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=s.changeByRange(l=>{if(!l.empty||l.from==0||l.from==s.doc.length)return{range:l};let a=l.from,c=s.doc.lineAt(a),u=a==c.from?a-1:Gt(c.text,a-c.from,!1)+c.from,f=a==c.to?a+1:Gt(c.text,a-c.from,!0)+c.from;return{changes:{from:u,to:f,insert:s.doc.slice(a,f).append(s.doc.slice(u,a))},range:ae.cursor(f)}});return i.changes.empty?!1:(e(s.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Oc(s){let e=[],i=-1;for(let l of s.selection.ranges){let a=s.doc.lineAt(l.from),c=s.doc.lineAt(l.to);if(!l.empty&&l.to==c.from&&(c=s.doc.lineAt(l.to-1)),i>=a.number){let u=e[e.length-1];u.to=c.to,u.ranges.push(l)}else e.push({from:a.from,to:c.to,ranges:[l]});i=c.number+1}return e}function hb(s,e,i){if(s.readOnly)return!1;let l=[],a=[];for(let c of Oc(s)){if(i?c.to==s.doc.length:c.from==0)continue;let u=s.doc.lineAt(i?c.to+1:c.from-1),f=u.length+1;if(i){l.push({from:c.to,to:u.to},{from:c.from,insert:u.text+s.lineBreak});for(let h of c.ranges)a.push(ae.range(Math.min(s.doc.length,h.anchor+f),Math.min(s.doc.length,h.head+f)))}else{l.push({from:u.from,to:c.from},{from:c.to,insert:s.lineBreak+u.text});for(let h of c.ranges)a.push(ae.range(h.anchor-f,h.head-f))}}return l.length?(e(s.update({changes:l,scrollIntoView:!0,selection:ae.create(a,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const XL=({state:s,dispatch:e})=>hb(s,e,!1),QL=({state:s,dispatch:e})=>hb(s,e,!0);function db(s,e,i){if(s.readOnly)return!1;let l=[];for(let a of Oc(s))i?l.push({from:a.from,insert:s.doc.slice(a.from,a.to)+s.lineBreak}):l.push({from:a.to,insert:s.lineBreak+s.doc.slice(a.from,a.to)});return e(s.update({changes:l,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const _L=({state:s,dispatch:e})=>db(s,e,!1),qL=({state:s,dispatch:e})=>db(s,e,!0),eN=s=>{if(s.state.readOnly)return!1;let{state:e}=s,i=e.changes(Oc(e).map(({from:a,to:c})=>(a>0?a--:c<e.doc.length&&c++,{from:a,to:c}))),l=Zs(e.selection,a=>s.moveVertically(a,!0)).map(i);return s.dispatch({changes:i,selection:l,scrollIntoView:!0,userEvent:"delete.line"}),!0},v9=({state:s,dispatch:e})=>(e(s.update(s.replaceSelection(s.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0);function tN(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=Nt(s).resolveInner(e),l=i.childBefore(e),a=i.childAfter(e),c;return l&&a&&l.to<=e&&a.from>=e&&(c=l.type.prop(Ge.closedBy))&&c.indexOf(a.name)>-1&&s.doc.lineAt(l.to).from==s.doc.lineAt(a.from).from&&!/\S/.test(s.sliceDoc(l.to,a.from))?{from:l.to,to:a.from}:null}const nN=mb(!1),rN=mb(!0);function mb(s){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let l=e.changeByRange(a=>{let{from:c,to:u}=a,f=e.doc.lineAt(c),h=!s&&c==u&&tN(e,c);s&&(c=u=(u<=f.to?f:e.doc.lineAt(u)).to);let d=new ml(e,{simulateBreak:c,simulateDoubleBreak:!!h}),m=dc(d,c);for(m==null&&(m=Ts(/^\s*/.exec(e.doc.lineAt(c).text)[0],e.tabSize));u<f.to&&/\s/.test(f.text[u-f.from]);)u++;h?{from:c,to:u}=h:c>f.from&&c<f.from+100&&!/\S/.test(f.text.slice(0,c))&&(c=f.from);let p=["",js(e,m)];return h&&p.push(js(e,d.lineIndent(f.from,-1))),{changes:{from:c,to:u,insert:ct.of(p)},range:ae.cursor(c+1+p[1].length)}});return i(e.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function fd(s,e){let i=-1;return s.changeByRange(l=>{let a=[];for(let u=l.from;u<=l.to;){let f=s.doc.lineAt(u);f.number>i&&(l.empty||l.to>f.from)&&(e(f,a,l),i=f.number),u=f.to+1}let c=s.changes(a);return{changes:a,range:ae.range(c.mapPos(l.anchor,1),c.mapPos(l.head,1))}})}const iN=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=Object.create(null),l=new ml(s,{overrideIndentation:c=>{let u=i[c];return u==null?-1:u}}),a=fd(s,(c,u,f)=>{let h=dc(l,c.from);if(h==null)return;/\S/.test(c.text)||(h=0);let d=/^\s*/.exec(c.text)[0],m=js(s,h);(d!=m||f.from<c.from+d.length)&&(i[c.from]=h,u.push({from:c.from,to:c.from+d.length,insert:m}))});return a.changes.empty||e(s.update(a,{userEvent:"indent"})),!0},hd=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(fd(s,(i,l)=>{l.push({from:i.from,insert:s.facet(hc)})}),{userEvent:"input.indent"})),!0),pb=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(fd(s,(i,l)=>{let a=/^\s*/.exec(i.text)[0];if(!a)return;let c=Ts(a,s.tabSize),u=0,f=js(s,Math.max(0,c-es(s)));for(;u<a.length&&u<f.length&&a.charCodeAt(u)==f.charCodeAt(u);)u++;l.push({from:i.from+u,to:i.from+a.length,insert:f.slice(u)})}),{userEvent:"delete.dedent"})),!0),b9=({state:s,dispatch:e})=>s.selection.ranges.some(i=>!i.empty)?hd({state:s,dispatch:e}):(e(s.update(s.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),sN=[{key:"Ctrl-b",run:F1,shift:Y1,preventDefault:!0},{key:"Ctrl-f",run:B1,shift:X1},{key:"Ctrl-p",run:z1,shift:q1},{key:"Ctrl-n",run:U1,shift:eb},{key:"Ctrl-a",run:kL,shift:BL},{key:"Ctrl-e",run:PL,shift:jL},{key:"Ctrl-d",run:cb},{key:"Ctrl-h",run:ud},{key:"Ctrl-k",run:HL},{key:"Ctrl-Alt-h",run:fb},{key:"Ctrl-o",run:JL},{key:"Ctrl-t",run:YL},{key:"Ctrl-v",run:cd}],oN=[{key:"ArrowLeft",run:F1,shift:Y1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:vL,shift:IL,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:OL,shift:$L,preventDefault:!0},{key:"ArrowRight",run:B1,shift:X1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:bL,shift:DL,preventDefault:!0},{mac:"Cmd-ArrowRight",run:AL,shift:FL,preventDefault:!0},{key:"ArrowUp",run:z1,shift:q1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ib,shift:ob},{mac:"Ctrl-ArrowUp",run:G1,shift:nb},{key:"ArrowDown",run:U1,shift:eb,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sb,shift:lb},{mac:"Ctrl-ArrowDown",run:cd,shift:rb},{key:"PageUp",run:G1,shift:nb},{key:"PageDown",run:cd,shift:rb},{key:"Home",run:CL,shift:NL,preventDefault:!0},{key:"Mod-Home",run:ib,shift:ob},{key:"End",run:wL,shift:LL,preventDefault:!0},{key:"Mod-End",run:sb,shift:lb},{key:"Enter",run:nN},{key:"Mod-a",run:WL},{key:"Backspace",run:ud,shift:ud},{key:"Delete",run:cb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:fb},{key:"Mod-Delete",mac:"Alt-Delete",run:UL},{mac:"Mod-Backspace",run:KL},{mac:"Mod-Delete",run:GL}].concat(sN.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),lN=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:SL,shift:ML},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:EL,shift:RL},{key:"Alt-ArrowUp",run:XL},{key:"Shift-Alt-ArrowUp",run:_L},{key:"Alt-ArrowDown",run:QL},{key:"Shift-Alt-ArrowDown",run:qL},{key:"Escape",run:zL},{key:"Mod-Enter",run:rN},{key:"Alt-l",mac:"Ctrl-l",run:VL},{key:"Mod-i",run:ZL,preventDefault:!0},{key:"Mod-[",run:pb},{key:"Mod-]",run:hd},{key:"Mod-Alt-\\",run:iN},{key:"Shift-Mod-k",run:eN},{key:"Shift-Mod-\\",run:TL},{key:"Mod-/",run:qR},{key:"Alt-A",run:tL}].concat(oN),aN={key:"Tab",run:hd,shift:pb};function bt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){var a=i[l];typeof a=="string"?s.setAttribute(l,a):a!=null&&(s[l]=a)}e++}for(;e<arguments.length;e++)gb(s,arguments[e]);return s}function gb(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)gb(s,e[i]);else throw new RangeError("Unsupported child node: "+e)}const yb=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Us{constructor(e,i,l=0,a=e.length,c,u){this.test=u,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(l,a),this.bufferStart=l,this.normalize=c?f=>c(yb(f)):yb,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Jt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=$f(e),l=this.bufferStart+this.bufferPos;this.bufferPos+=Vn(e);let a=this.normalize(i);for(let c=0,u=l;;c++){let f=a.charCodeAt(c),h=this.match(f,u);if(c==a.length-1){if(h)return this.value=h,this;break}u==l&&c<i.length&&i.charCodeAt(c)==f&&u++}}}match(e,i){let l=null;for(let a=0;a<this.matches.length;a+=2){let c=this.matches[a],u=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?l={from:this.matches[a+1],to:i+1}:(this.matches[a]++,u=!0)),u||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?l={from:i,to:i+1}:this.matches.push(1,i)),l&&this.test&&!this.test(l.from,l.to,this.buffer,this.bufferStart)&&(l=null),l}}typeof Symbol!="undefined"&&(Us.prototype[Symbol.iterator]=function(){return this});const vb={from:-1,to:-1,match:/.*/.exec("")},dd="gm"+(/x/.unicode==null?"":"u");class bb{constructor(e,i,l,a=0,c=e.length){if(this.text=e,this.to=c,this.curLine="",this.done=!1,this.value=vb,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new xb(e,i,l,a,c);this.re=new RegExp(i,dd+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.iter=e.iter();let u=e.lineAt(a);this.curLineStart=u.from,this.matchPos=Ac(e,a),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let l=this.curLineStart+i.index,a=l+i[0].length;if(this.matchPos=Ac(this.text,a+(l==a?1:0)),l==this.curLineStart+this.curLine.length&&this.nextLine(),(l<a||l>this.value.to)&&(!this.test||this.test(l,a,i)))return this.value={from:l,to:a,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const md=new WeakMap;class Hs{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,l){let a=md.get(e);if(!a||a.from>=l||a.to<=i){let f=new Hs(i,e.sliceString(i,l));return md.set(e,f),f}if(a.from==i&&a.to==l)return a;let{text:c,from:u}=a;return u>i&&(c=e.sliceString(i,u)+c,u=i),a.to<l&&(c+=e.sliceString(a.to,l)),md.set(e,new Hs(u,c)),new Hs(i,c.slice(i-u,l-u))}}class xb{constructor(e,i,l,a,c){this.text=e,this.to=c,this.done=!1,this.value=vb,this.matchPos=Ac(e,a),this.re=new RegExp(i,dd+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.flat=Hs.get(e,a,this.chunkEnd(a+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let l=this.flat.from+i.index,a=l+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(l,a,i)))return this.value={from:l,to:a,match:i},this.matchPos=Ac(this.text,a+(l==a?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Hs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(bb.prototype[Symbol.iterator]=xb.prototype[Symbol.iterator]=function(){return this});function cN(s){try{return new RegExp(s,dd),!0}catch{return!1}}function Ac(s,e){if(e>=s.length)return e;let i=s.lineAt(e),l;for(;e<i.to&&(l=i.text.charCodeAt(e-i.from))>=56320&&l<57344;)e++;return e}function pd(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),i=bt("input",{class:"cm-textfield",name:"line",value:e}),l=bt("form",{class:"cm-gotoLine",onkeydown:c=>{c.keyCode==27?(c.preventDefault(),s.dispatch({effects:kc.of(!1)}),s.focus()):c.keyCode==13&&(c.preventDefault(),a())},onsubmit:c=>{c.preventDefault(),a()}},bt("label",s.state.phrase("Go to line"),": ",i)," ",bt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function a(){let c=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!c)return;let{state:u}=s,f=u.doc.lineAt(u.selection.main.head),[,h,d,m,p]=c,v=m?+m.slice(1):0,y=d?+d:f.number;if(d&&p){let w=y/100;h&&(w=w*(h=="-"?-1:1)+f.number/u.doc.lines),y=Math.round(u.doc.lines*w)}else d&&h&&(y=y*(h=="-"?-1:1)+f.number);let S=u.doc.line(Math.max(1,Math.min(u.doc.lines,y))),E=ae.cursor(S.from+Math.max(0,Math.min(v,S.length)));s.dispatch({effects:[kc.of(!1),we.scrollIntoView(E.from,{y:"center"})],selection:E}),s.focus()}return{dom:l}}const kc=ze.define(),Sb=Lt.define({create(){return!0},update(s,e){for(let i of e.effects)i.is(kc)&&(s=i.value);return s},provide:s=>Qi.from(s,e=>e?pd:null)}),uN=s=>{let e=ul(s,pd);if(!e){let i=[kc.of(!0)];s.state.field(Sb,!1)==null&&i.push(ze.appendConfig.of([Sb,fN])),s.dispatch({effects:i}),e=ul(s,pd)}return e&&e.dom.querySelector("input").select(),!0},fN=we.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),hN={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Eb=ke.define({combine(s){return tr(s,hN,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function dN(s){let e=[vN,yN];return s&&e.push(Eb.of(s)),e}const mN=Me.mark({class:"cm-selectionMatch"}),pN=Me.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function wb(s,e,i,l){return(i==0||s(e.sliceDoc(i-1,i))!=wt.Word)&&(l==e.doc.length||s(e.sliceDoc(l,l+1))!=wt.Word)}function gN(s,e,i,l){return s(e.sliceDoc(i,i+1))==wt.Word&&s(e.sliceDoc(l-1,l))==wt.Word}const yN=Tt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(Eb),{state:i}=s,l=i.selection;if(l.ranges.length>1)return Me.none;let a=l.main,c,u=null;if(a.empty){if(!e.highlightWordAroundCursor)return Me.none;let h=i.wordAt(a.head);if(!h)return Me.none;u=i.charCategorizer(a.head),c=i.sliceDoc(h.from,h.to)}else{let h=a.to-a.from;if(h<e.minSelectionLength||h>200)return Me.none;if(e.wholeWords){if(c=i.sliceDoc(a.from,a.to),u=i.charCategorizer(a.head),!(wb(u,i,a.from,a.to)&&gN(u,i,a.from,a.to)))return Me.none}else if(c=i.sliceDoc(a.from,a.to).trim(),!c)return Me.none}let f=[];for(let h of s.visibleRanges){let d=new Us(i.doc,c,h.from,h.to);for(;!d.next().done;){let{from:m,to:p}=d.value;if((!u||wb(u,i,m,p))&&(a.empty&&m<=a.from&&p>=a.to?f.push(pN.range(m,p)):(m>=a.to||p<=a.from)&&f.push(mN.range(m,p)),f.length>e.maxMatches))return Me.none}}return Me.set(f)}},{decorations:s=>s.decorations}),vN=we.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),bN=({state:s,dispatch:e})=>{let{selection:i}=s,l=ae.create(i.ranges.map(a=>s.wordAt(a.head)||ae.cursor(a.head)),i.mainIndex);return l.eq(i)?!1:(e(s.update({selection:l})),!0)};function xN(s,e){let{main:i,ranges:l}=s.selection,a=s.wordAt(i.head),c=a&&a.from==i.from&&a.to==i.to;for(let u=!1,f=new Us(s.doc,e,l[l.length-1].to);;)if(f.next(),f.done){if(u)return null;f=new Us(s.doc,e,0,Math.max(0,l[l.length-1].from-1)),u=!0}else{if(u&&l.some(h=>h.from==f.value.from))continue;if(c){let h=s.wordAt(f.value.from);if(!h||h.from!=f.value.from||h.to!=f.value.to)continue}return f.value}}const SN=({state:s,dispatch:e})=>{let{ranges:i}=s.selection;if(i.some(c=>c.from===c.to))return bN({state:s,dispatch:e});let l=s.sliceDoc(i[0].from,i[0].to);if(s.selection.ranges.some(c=>s.sliceDoc(c.from,c.to)!=l))return!1;let a=xN(s,l);return a?(e(s.update({selection:s.selection.addRange(ae.range(a.from,a.to),!1),effects:we.scrollIntoView(a.to)})),!0):!1},ts=ke.define({combine(s){return tr(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new RN(e),scrollToMatch:e=>we.scrollIntoView(e)})}});function x9(s){return s?[ts.of(s),xd]:xd}class Cb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||cN(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,l)=>l=="n"?`
`:l=="r"?"\r":l=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ON(this):new wN(this)}getCursor(e,i=0,l){let a=e.doc?e:Qe.create({doc:e});return l==null&&(l=a.doc.length),this.regexp?Gs(this,a,i,l):Ks(this,a,i,l)}}class Ob{constructor(e){this.spec=e}}function Ks(s,e,i,l){return new Us(e.doc,s.unquoted,i,l,s.caseSensitive?void 0:a=>a.toLowerCase(),s.wholeWord?EN(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function EN(s,e){return(i,l,a,c)=>((c>i||c+a.length<l)&&(c=Math.max(0,i-2),a=s.sliceString(c,Math.min(s.length,l+2))),(e(Pc(a,i-c))!=wt.Word||e(Tc(a,i-c))!=wt.Word)&&(e(Tc(a,l-c))!=wt.Word||e(Pc(a,l-c))!=wt.Word))}class wN extends Ob{constructor(e){super(e)}nextMatch(e,i,l){let a=Ks(this.spec,e,l,e.doc.length).nextOverlapping();return a.done&&(a=Ks(this.spec,e,0,i).nextOverlapping()),a.done?null:a.value}prevMatchInRange(e,i,l){for(let a=l;;){let c=Math.max(i,a-1e4-this.spec.unquoted.length),u=Ks(this.spec,e,c,a),f=null;for(;!u.nextOverlapping().done;)f=u.value;if(f)return f;if(c==i)return null;a-=1e4}}prevMatch(e,i,l){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let l=Ks(this.spec,e,0,e.doc.length),a=[];for(;!l.next().done;){if(a.length>=i)return null;a.push(l.value)}return a}highlight(e,i,l,a){let c=Ks(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(l+this.spec.unquoted.length,e.doc.length));for(;!c.next().done;)a(c.value.from,c.value.to)}}function Gs(s,e,i,l){return new bb(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?CN(e.charCategorizer(e.selection.main.head)):void 0},i,l)}function Pc(s,e){return s.slice(Gt(s,e,!1),e)}function Tc(s,e){return s.slice(e,Gt(s,e))}function CN(s){return(e,i,l)=>!l[0].length||(s(Pc(l.input,l.index))!=wt.Word||s(Tc(l.input,l.index))!=wt.Word)&&(s(Tc(l.input,l.index+l[0].length))!=wt.Word||s(Pc(l.input,l.index+l[0].length))!=wt.Word)}class ON extends Ob{nextMatch(e,i,l){let a=Gs(this.spec,e,l,e.doc.length).next();return a.done&&(a=Gs(this.spec,e,0,i).next()),a.done?null:a.value}prevMatchInRange(e,i,l){for(let a=1;;a++){let c=Math.max(i,l-a*1e4),u=Gs(this.spec,e,c,l),f=null;for(;!u.next().done;)f=u.value;if(f&&(c==i||f.from>c+10))return f;if(c==i)return null}}prevMatch(e,i,l){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,l)=>l=="$"?"$":l=="&"?e.match[0]:l!="0"&&+l<e.match.length?e.match[l]:i)}matchAll(e,i){let l=Gs(this.spec,e,0,e.doc.length),a=[];for(;!l.next().done;){if(a.length>=i)return null;a.push(l.value)}return a}highlight(e,i,l,a){let c=Gs(this.spec,e,Math.max(0,i-250),Math.min(l+250,e.doc.length));for(;!c.next().done;)a(c.value.from,c.value.to)}}const El=ze.define(),gd=ze.define(),Tr=Lt.define({create(s){return new yd(Mc(s).create(),null)},update(s,e){for(let i of e.effects)i.is(El)?s=new yd(i.value.create(),s.panel):i.is(gd)&&(s=new yd(s.query,i.value?vd:null));return s},provide:s=>Qi.from(s,e=>e.panel)});function S9(s){let e=s.field(Tr,!1);return e?e.query.spec:Mc(s)}function E9(s){var e;return((e=s.field(Tr,!1))===null||e===void 0?void 0:e.panel)!=null}class yd{constructor(e,i){this.query=e,this.panel=i}}const AN=Me.mark({class:"cm-searchMatch"}),kN=Me.mark({class:"cm-searchMatch cm-searchMatch-selected"}),PN=Tt.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(Tr))}update(s){let e=s.state.field(Tr);(e!=s.startState.field(Tr)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Me.none;let{view:i}=this,l=new Hr;for(let a=0,c=i.visibleRanges,u=c.length;a<u;a++){let{from:f,to:h}=c[a];for(;a<u-1&&h>c[a+1].from-2*250;)h=c[++a].to;s.highlight(i.state,f,h,(d,m)=>{let p=i.state.selection.ranges.some(v=>v.from==d&&v.to==m);l.add(d,m,p?kN:AN)})}return l.finish()}},{decorations:s=>s.decorations});function wl(s){return e=>{let i=e.state.field(Tr,!1);return i&&i.query.spec.valid?s(e,i):Tb(e)}}const Ic=wl((s,{query:e})=>{let{to:i}=s.state.selection.main,l=e.nextMatch(s.state,i,i);if(!l)return!1;let a=ae.single(l.from,l.to),c=s.state.facet(ts);return s.dispatch({selection:a,effects:[bd(s,l),c.scrollToMatch(a.main,s)],userEvent:"select.search"}),Pb(s),!0}),Dc=wl((s,{query:e})=>{let{state:i}=s,{from:l}=i.selection.main,a=e.prevMatch(i,l,l);if(!a)return!1;let c=ae.single(a.from,a.to),u=s.state.facet(ts);return s.dispatch({selection:c,effects:[bd(s,a),u.scrollToMatch(c.main,s)],userEvent:"select.search"}),Pb(s),!0}),TN=wl((s,{query:e})=>{let i=e.matchAll(s.state,1e3);return!i||!i.length?!1:(s.dispatch({selection:ae.create(i.map(l=>ae.range(l.from,l.to))),userEvent:"select.search.matches"}),!0)}),IN=({state:s,dispatch:e})=>{let i=s.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:l,to:a}=i.main,c=[],u=0;for(let f=new Us(s.doc,s.sliceDoc(l,a));!f.next().done;){if(c.length>1e3)return!1;f.value.from==l&&(u=c.length),c.push(ae.range(f.value.from,f.value.to))}return e(s.update({selection:ae.create(c,u),userEvent:"select.search.matches"})),!0},Ab=wl((s,{query:e})=>{let{state:i}=s,{from:l,to:a}=i.selection.main;if(i.readOnly)return!1;let c=e.nextMatch(i,l,l);if(!c)return!1;let u=[],f,h,d=[];if(c.from==l&&c.to==a&&(h=i.toText(e.getReplacement(c)),u.push({from:c.from,to:c.to,insert:h}),c=e.nextMatch(i,c.from,c.to),d.push(we.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(l).number)+"."))),c){let m=u.length==0||u[0].from>=c.to?0:c.to-c.from-h.length;f=ae.single(c.from-m,c.to-m),d.push(bd(s,c)),d.push(i.facet(ts).scrollToMatch(f.main,s))}return s.dispatch({changes:u,selection:f,effects:d,userEvent:"input.replace"}),!0}),DN=wl((s,{query:e})=>{if(s.state.readOnly)return!1;let i=e.matchAll(s.state,1e9).map(a=>{let{from:c,to:u}=a;return{from:c,to:u,insert:e.getReplacement(a)}});if(!i.length)return!1;let l=s.state.phrase("replaced $ matches",i.length)+".";return s.dispatch({changes:i,effects:we.announce.of(l),userEvent:"input.replace.all"}),!0});function vd(s){return s.state.facet(ts).createPanel(s)}function Mc(s,e){var i,l,a,c,u;let f=s.selection.main,h=f.empty||f.to>f.from+100?"":s.sliceDoc(f.from,f.to);if(e&&!h)return e;let d=s.facet(ts);return new Cb({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(l=e==null?void 0:e.caseSensitive)!==null&&l!==void 0?l:d.caseSensitive,literal:(a=e==null?void 0:e.literal)!==null&&a!==void 0?a:d.literal,regexp:(c=e==null?void 0:e.regexp)!==null&&c!==void 0?c:d.regexp,wholeWord:(u=e==null?void 0:e.wholeWord)!==null&&u!==void 0?u:d.wholeWord})}function kb(s){let e=ul(s,vd);return e&&e.dom.querySelector("[main-field]")}function Pb(s){let e=kb(s);e&&e==s.root.activeElement&&e.select()}const Tb=s=>{let e=s.state.field(Tr,!1);if(e&&e.panel){let i=kb(s);if(i&&i!=s.root.activeElement){let l=Mc(s.state,e.query.spec);l.valid&&s.dispatch({effects:El.of(l)}),i.focus(),i.select()}}else s.dispatch({effects:[gd.of(!0),e?El.of(Mc(s.state,e.query.spec)):ze.appendConfig.of(xd)]});return!0},Ib=s=>{let e=s.state.field(Tr,!1);if(!e||!e.panel)return!1;let i=ul(s,vd);return i&&i.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:gd.of(!1)}),!0},MN=[{key:"Mod-f",run:Tb,scope:"editor search-panel"},{key:"F3",run:Ic,shift:Dc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ic,shift:Dc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ib,scope:"editor search-panel"},{key:"Mod-Shift-l",run:IN},{key:"Mod-Alt-g",run:uN},{key:"Mod-d",run:SN,preventDefault:!0}];class RN{constructor(e){this.view=e;let i=this.query=e.state.field(Tr).query.spec;this.commit=this.commit.bind(this),this.searchField=bt("input",{value:i.search,placeholder:$n(e,"Find"),"aria-label":$n(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=bt("input",{value:i.replace,placeholder:$n(e,"Replace"),"aria-label":$n(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=bt("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=bt("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=bt("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function l(a,c,u){return bt("button",{class:"cm-button",name:a,onclick:c,type:"button"},u)}this.dom=bt("div",{onkeydown:a=>this.keydown(a),class:"cm-search"},[this.searchField,l("next",()=>Ic(e),[$n(e,"next")]),l("prev",()=>Dc(e),[$n(e,"previous")]),l("select",()=>TN(e),[$n(e,"all")]),bt("label",null,[this.caseField,$n(e,"match case")]),bt("label",null,[this.reField,$n(e,"regexp")]),bt("label",null,[this.wordField,$n(e,"by word")]),...e.state.readOnly?[]:[bt("br"),this.replaceField,l("replace",()=>Ab(e),[$n(e,"replace")]),l("replaceAll",()=>DN(e),[$n(e,"replace all")])],bt("button",{name:"close",onclick:()=>Ib(e),"aria-label":$n(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Cb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:El.of(e)}))}keydown(e){zD(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Dc:Ic)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Ab(this.view))}update(e){for(let i of e.transactions)for(let l of i.effects)l.is(El)&&!l.value.eq(this.query)&&this.setQuery(l.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ts).top}}function $n(s,e){return s.state.phrase(e)}const Rc=30,Lc=/[\s\.,:;?!]/;function bd(s,{from:e,to:i}){let l=s.state.doc.lineAt(e),a=s.state.doc.lineAt(i).to,c=Math.max(l.from,e-Rc),u=Math.min(a,i+Rc),f=s.state.sliceDoc(c,u);if(c!=l.from){for(let h=0;h<Rc;h++)if(!Lc.test(f[h+1])&&Lc.test(f[h])){f=f.slice(h);break}}if(u!=a){for(let h=f.length-1;h>f.length-Rc;h--)if(!Lc.test(f[h-1])&&Lc.test(f[h])){f=f.slice(0,h);break}}return we.announce.of(`${s.state.phrase("current match")}. ${f} ${s.state.phrase("on line")} ${l.number}.`)}const LN=we.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),xd=[Tr,vi.low(PN),LN];class Db{constructor(e,i,l){this.state=e,this.pos=i,this.explicit=l,this.abortListeners=[]}tokenBefore(e){let i=Nt(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),l=Math.max(i.from,this.pos-250),a=i.text.slice(l-i.from,this.pos-i.from),c=a.search(Lb(e,!1));return c<0?null:{from:l+c,to:this.pos,text:a.slice(c)}}get aborted(){return this.abortListeners==null}addEventListener(e,i){e=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function Mb(s){let e=Object.keys(s).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function NN(s){let e=Object.create(null),i=Object.create(null);for(let{label:a}of s){e[a[0]]=!0;for(let c=1;c<a.length;c++)i[a[c]]=!0}let l=Mb(e)+Mb(i)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function $N(s){let e=s.map(a=>typeof a=="string"?{label:a}:a),[i,l]=e.every(a=>/^\w+$/.test(a.label))?[/\w*$/,/\w+$/]:NN(e);return a=>{let c=a.matchBefore(l);return c||a.explicit?{from:c?c.from:a.pos,options:e,validFor:i}:null}}function w9(s,e){return i=>{for(let l=syntaxTree(i.state).resolveInner(i.pos,-1);l;l=l.parent){if(s.indexOf(l.name)>-1)return e(i);if(l.type.isTop)break}return null}}function C9(s,e){return i=>{for(let l=syntaxTree(i.state).resolveInner(i.pos,-1);l;l=l.parent){if(s.indexOf(l.name)>-1)return null;if(l.type.isTop)break}return e(i)}}class Rb{constructor(e,i,l,a){this.completion=e,this.source=i,this.match=l,this.score=a}}function Di(s){return s.selection.main.from}function Lb(s,e){var i;let{source:l}=s,a=e&&l[0]!="^",c=l[l.length-1]!="$";return!a&&!c?s:new RegExp(`${a?"^":""}(?:${l})${c?"$":""}`,(i=s.flags)!==null&&i!==void 0?i:s.ignoreCase?"i":"")}const Nb=yr.define();function FN(s,e,i,l){let{main:a}=s.selection,c=i-a.from,u=l-a.from;return Object.assign(Object.assign({},s.changeByRange(f=>f!=a&&i!=l&&s.sliceDoc(f.from+c,f.from+u)!=s.sliceDoc(i,l)?{range:f}:{changes:{from:f.from+c,to:l==a.from?f.to:f.from+u,insert:e},range:ae.cursor(f.from+c+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const $b=new WeakMap;function BN(s){if(!Array.isArray(s))return s;let e=$b.get(s);return e||$b.set(s,e=$N(s)),e}const Nc=ze.define(),Cl=ze.define();class jN{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let l=Jt(e,i),a=Vn(l);this.chars.push(l);let c=e.slice(i,i+a),u=c.toUpperCase();this.folded.push(Jt(u==c?c.toLowerCase():u,0)),i+=a}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:i,folded:l,any:a,precise:c,byWord:u}=this;if(i.length==1){let O=Jt(e,0),I=Vn(O),P=I==e.length?0:-100;if(O!=i[0])if(O==l[0])P+=-200;else return!1;return this.ret(P,[0,I])}let f=e.indexOf(this.pattern);if(f==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=i.length,d=0;if(f<0){for(let O=0,I=Math.min(e.length,200);O<I&&d<h;){let P=Jt(e,O);(P==i[d]||P==l[d])&&(a[d++]=O),O+=Vn(P)}if(d<h)return!1}let m=0,p=0,v=!1,y=0,S=-1,E=-1,w=/[a-z]/.test(e),C=!0;for(let O=0,I=Math.min(e.length,200),P=0;O<I&&p<h;){let M=Jt(e,O);f<0&&(m<h&&M==i[m]&&(c[m++]=O),y<h&&(M==i[y]||M==l[y]?(y==0&&(S=O),E=O+1,y++):y=0));let $,N=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:($=$f(M))!=$.toLowerCase()?1:$!=$.toUpperCase()?2:0;(!O||N==1&&w||P==0&&N!=0)&&(i[p]==M||l[p]==M&&(v=!0)?u[p++]=O:u.length&&(C=!1)),P=N,O+=Vn(M)}return p==h&&u[0]==0&&C?this.result(-100+(v?-200:0),u,e):y==h&&S==0?this.ret(-200-e.length+(E==e.length?0:-100),[0,E]):f>-1?this.ret(-700-e.length,[f,f+this.pattern.length]):y==h?this.ret(-900-e.length,[S,E]):p==h?this.result(-100+(v?-200:0)+-700+(C?0:-1100),u,e):i.length==2?!1:this.result((a[0]?-700:0)+-200+-1100,a,e)}result(e,i,l){let a=[],c=0;for(let u of i){let f=u+(this.astral?Vn(Jt(l,u)):1);c&&a[c-1]==u?a[c-1]=f:(a[c++]=u,a[c++]=f)}return this.ret(e-l.length,a)}}const Qt=ke.define({combine(s){return tr(s,{activateOnTyping:!0,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:WN,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>l=>Fb(e(l),i(l)),optionClass:(e,i)=>l=>Fb(e(l),i(l)),addToOptions:(e,i)=>e.concat(i)})}});function Fb(s,e){return s?e?s+" "+e:s:e}function WN(s,e,i,l,a,c){let u=s.textDirection==dt.RTL,f=u,h=!1,d="top",m,p,v=e.left-a.left,y=a.right-e.right,S=l.right-l.left,E=l.bottom-l.top;if(f&&v<Math.min(S,y)?f=!1:!f&&y<Math.min(S,v)&&(f=!0),S<=(f?v:y))m=Math.max(a.top,Math.min(i.top,a.bottom-E))-e.top,p=Math.min(400,f?v:y);else{h=!0,p=Math.min(400,(u?e.right:a.right-e.left)-30);let O=a.bottom-e.bottom;O>=E||O>e.top?m=i.bottom-e.top:(d="bottom",m=e.bottom-i.top)}let w=(e.bottom-e.top)/c.offsetHeight,C=(e.right-e.left)/c.offsetWidth;return{style:`${d}: ${m/w}px; max-width: ${p/C}px`,class:"cm-completionInfo-"+(h?u?"left-narrow":"right-narrow":f?"left":"right")}}function VN(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(i){let l=document.createElement("div");return l.classList.add("cm-completionIcon"),i.type&&l.classList.add(...i.type.split(/\s+/g).map(a=>"cm-completionIcon-"+a)),l.setAttribute("aria-hidden","true"),l},position:20}),e.push({render(i,l,a,c){let u=document.createElement("span");u.className="cm-completionLabel";let f=i.displayLabel||i.label,h=0;for(let d=0;d<c.length;){let m=c[d++],p=c[d++];m>h&&u.appendChild(document.createTextNode(f.slice(h,m)));let v=u.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(f.slice(m,p))),v.className="cm-completionMatchedText",h=p}return h<f.length&&u.appendChild(document.createTextNode(f.slice(h))),u},position:50},{render(i){if(!i.detail)return null;let l=document.createElement("span");return l.className="cm-completionDetail",l.textContent=i.detail,l},position:80}),e.sort((i,l)=>i.position-l.position).map(i=>i.render)}function Sd(s,e,i){if(s<=i)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let a=Math.floor(e/i);return{from:a*i,to:(a+1)*i}}let l=Math.floor((s-e)/i);return{from:s-(l+1)*i,to:s-l*i}}class ZN{constructor(e,i,l){this.view=e,this.stateField=i,this.applyCompletion=l,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let a=e.state.field(i),{options:c,selected:u}=a.open,f=e.state.facet(Qt);this.optionContent=VN(f),this.optionClass=f.optionClass,this.tooltipClass=f.tooltipClass,this.range=Sd(c.length,u,f.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:d}=e.state.field(i).open;for(let m=h.target,p;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(p=/-(\d+)$/.exec(m.id))&&+p[1]<d.length){this.applyCompletion(e,d[+p[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Qt).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:Cl.of(null)})}),this.showOptions(c,a.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let l=e.state.field(this.stateField),a=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),l!=a){let{options:c,selected:u,disabled:f}=l.open;(!a.open||a.open.options!=c)&&(this.range=Sd(c.length,u,e.state.facet(Qt).maxRenderedOptions),this.showOptions(c,l.id)),this.updateSel(),f!=((i=a.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!f)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let l of this.currentClass.split(" "))l&&this.dom.classList.remove(l);for(let l of i.split(" "))l&&this.dom.classList.add(l);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=Sd(i.options.length,i.selected,this.view.state.facet(Qt).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:l}=i.options[i.selected],{info:a}=l;if(!a)return;let c=typeof a=="string"?document.createTextNode(a):a(l);if(!c)return;"then"in c?c.then(u=>{u&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(u,l)}).catch(u=>Zn(this.view.state,u,"completion info")):this.addInfoPane(c,l)}}addInfoPane(e,i){this.destroyInfo();let l=this.info=document.createElement("div");if(l.className="cm-tooltip cm-completionInfo",e.nodeType!=null)l.appendChild(e),this.infoDestroy=null;else{let{dom:a,destroy:c}=e;l.appendChild(a),this.infoDestroy=c||null}this.dom.appendChild(l),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let l=this.list.firstChild,a=this.range.from;l;l=l.nextSibling,a++)l.nodeName!="LI"||!l.id?a--:a==e?l.hasAttribute("aria-selected")||(l.setAttribute("aria-selected","true"),i=l):l.hasAttribute("aria-selected")&&l.removeAttribute("aria-selected");return i&&UN(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),l=this.info.getBoundingClientRect(),a=e.getBoundingClientRect(),c=this.space;if(!c){let u=this.dom.ownerDocument.defaultView||window;c={left:0,top:0,right:u.innerWidth,bottom:u.innerHeight}}return a.top>Math.min(c.bottom,i.bottom)-10||a.bottom<Math.max(c.top,i.top)+10?null:this.view.state.facet(Qt).positionInfo(this.view,i,a,l,c,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,l){const a=document.createElement("ul");a.id=i,a.setAttribute("role","listbox"),a.setAttribute("aria-expanded","true"),a.setAttribute("aria-label",this.view.state.phrase("Completions"));let c=null;for(let u=l.from;u<l.to;u++){let{completion:f,match:h}=e[u],{section:d}=f;if(d){let v=typeof d=="string"?d:d.name;if(v!=c&&(u>l.from||l.from==0))if(c=v,typeof d!="string"&&d.header)a.appendChild(d.header(d));else{let y=a.appendChild(document.createElement("completion-section"));y.textContent=v}}const m=a.appendChild(document.createElement("li"));m.id=i+"-"+u,m.setAttribute("role","option");let p=this.optionClass(f);p&&(m.className=p);for(let v of this.optionContent){let y=v(f,this.view.state,this.view,h);y&&m.appendChild(y)}}return l.from&&a.classList.add("cm-completionListIncompleteTop"),l.to<e.length&&a.classList.add("cm-completionListIncompleteBottom"),a}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function zN(s,e){return i=>new ZN(i,s,e)}function UN(s,e){let i=s.getBoundingClientRect(),l=e.getBoundingClientRect(),a=i.height/s.offsetHeight;l.top<i.top?s.scrollTop-=(i.top-l.top)/a:l.bottom>i.bottom&&(s.scrollTop+=(l.bottom-i.bottom)/a)}function Bb(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function HN(s,e){let i=[],l=null,a=h=>{i.push(h);let{section:d}=h.completion;if(d){l||(l=[]);let m=typeof d=="string"?d:d.name;l.some(p=>p.name==m)||l.push(typeof d=="string"?{name:m}:d)}};for(let h of s)if(h.hasResult()){let d=h.result.getMatch;if(h.result.filter===!1)for(let m of h.result.options)a(new Rb(m,h.source,d?d(m):[],1e9-i.length));else{let m=new jN(e.sliceDoc(h.from,h.to));for(let p of h.result.options)if(m.match(p.label)){let v=p.displayLabel?d?d(p,m.matched):[]:m.matched;a(new Rb(p,h.source,v,m.score+(p.boost||0)))}}}if(l){let h=Object.create(null),d=0,m=(p,v)=>{var y,S;return((y=p.rank)!==null&&y!==void 0?y:1e9)-((S=v.rank)!==null&&S!==void 0?S:1e9)||(p.name<v.name?-1:1)};for(let p of l.sort(m))d-=1e5,h[p.name]=d;for(let p of i){let{section:v}=p.completion;v&&(p.score+=h[typeof v=="string"?v:v.name])}}let c=[],u=null,f=e.facet(Qt).compareCompletions;for(let h of i.sort((d,m)=>m.score-d.score||f(d.completion,m.completion))){let d=h.completion;!u||u.label!=d.label||u.detail!=d.detail||u.type!=null&&d.type!=null&&u.type!=d.type||u.apply!=d.apply||u.boost!=d.boost?c.push(h):Bb(h.completion)>Bb(u)&&(c[c.length-1]=h),u=h.completion}return c}class Js{constructor(e,i,l,a,c,u){this.options=e,this.attrs=i,this.tooltip=l,this.timestamp=a,this.selected=c,this.disabled=u}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new Js(this.options,jb(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,l,a,c){let u=HN(e,i);if(!u.length)return a&&e.some(h=>h.state==1)?new Js(a.options,a.attrs,a.tooltip,a.timestamp,a.selected,!0):null;let f=i.facet(Qt).selectOnOpen?0:-1;if(a&&a.selected!=f&&a.selected!=-1){let h=a.options[a.selected].completion;for(let d=0;d<u.length;d++)if(u[d].completion==h){f=d;break}}return new Js(u,jb(l,f),{pos:e.reduce((h,d)=>d.hasResult()?Math.min(h,d.from):h,1e8),create:XN,above:c.aboveCursor},a?a.timestamp:Date.now(),f,!1)}map(e){return new Js(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class $c{constructor(e,i,l){this.active=e,this.id=i,this.open=l}static start(){return new $c(JN,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,l=i.facet(Qt),c=(l.override||i.languageDataAt("autocomplete",Di(i)).map(BN)).map(f=>(this.active.find(d=>d.source==f)||new Sn(f,this.active.some(d=>d.state!=0)?1:0)).update(e,l));c.length==this.active.length&&c.every((f,h)=>f==this.active[h])&&(c=this.active);let u=this.open;u&&e.docChanged&&(u=u.map(e.changes)),e.selection||c.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!KN(c,this.active)?u=Js.build(c,i,this.id,u,l):u&&u.disabled&&!c.some(f=>f.state==1)&&(u=null),!u&&c.every(f=>f.state!=1)&&c.some(f=>f.hasResult())&&(c=c.map(f=>f.hasResult()?new Sn(f.source,0):f));for(let f of e.effects)f.is(wd)&&(u=u&&u.setSelected(f.value,this.id));return c==this.active&&u==this.open?this:new $c(c,this.id,u)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:GN}}function KN(s,e){if(s==e)return!0;for(let i=0,l=0;;){for(;i<s.length&&!s[i].hasResult;)i++;for(;l<e.length&&!e[l].hasResult;)l++;let a=i==s.length,c=l==e.length;if(a||c)return a==c;if(s[i++].result!=e[l++].result)return!1}}const GN={"aria-autocomplete":"list"};function jb(s,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(i["aria-activedescendant"]=s+"-"+e),i}const JN=[];function Ed(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class Sn{constructor(e,i,l=-1){this.source=e,this.state=i,this.explicitPos=l}hasResult(){return!1}update(e,i){let l=Ed(e),a=this;l?a=a.handleUserEvent(e,l,i):e.docChanged?a=a.handleChange(e):e.selection&&a.state!=0&&(a=new Sn(a.source,0));for(let c of e.effects)if(c.is(Nc))a=new Sn(a.source,1,c.value?Di(e.state):-1);else if(c.is(Cl))a=new Sn(a.source,0);else if(c.is(Wb))for(let u of c.value)u.source==a.source&&(a=u);return a}handleUserEvent(e,i,l){return i=="delete"||!l.activateOnTyping?this.map(e.changes):new Sn(this.source,1)}handleChange(e){return e.changes.touchesRange(Di(e.startState))?new Sn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Sn(this.source,this.state,e.mapPos(this.explicitPos))}}class Ys extends Sn{constructor(e,i,l,a,c){super(e,2,i),this.result=l,this.from=a,this.to=c}hasResult(){return!0}handleUserEvent(e,i,l){var a;let c=e.changes.mapPos(this.from),u=e.changes.mapPos(this.to,1),f=Di(e.state);if((this.explicitPos<0?f<=c:f<this.from)||f>u||i=="delete"&&Di(e.startState)==this.from)return new Sn(this.source,i=="input"&&l.activateOnTyping?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),d;return YN(this.result.validFor,e.state,c,u)?new Ys(this.source,h,this.result,c,u):this.result.update&&(d=this.result.update(this.result,c,u,new Db(e.state,f,h>=0)))?new Ys(this.source,h,d,d.from,(a=d.to)!==null&&a!==void 0?a:Di(e.state)):new Sn(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Sn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ys(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function YN(s,e,i,l){if(!s)return!1;let a=e.sliceDoc(i,l);return typeof s=="function"?s(a,i,l,e):Lb(s,!0).test(a)}const Wb=ze.define({map(s,e){return s.map(i=>i.map(e))}}),wd=ze.define(),_t=Lt.define({create(){return $c.start()},update(s,e){return s.update(e)},provide:s=>[nc.from(s,e=>e.tooltip),we.contentAttributes.from(s,e=>e.attrs)]});function Vb(s,e){const i=e.completion.apply||e.completion.label;let l=s.state.field(_t).active.find(a=>a.source==e.source);return l instanceof Ys?(typeof i=="string"?s.dispatch(Object.assign(Object.assign({},FN(s.state,i,l.from,l.to)),{annotations:Nb.of(e.completion)})):i(s,e.completion,l.from,l.to),!0):!1}const XN=zN(_t,Vb);function Fc(s,e="option"){return i=>{let l=i.state.field(_t,!1);if(!l||!l.open||l.open.disabled||Date.now()-l.open.timestamp<i.state.facet(Qt).interactionDelay)return!1;let a=1,c;e=="page"&&(c=Fv(i,l.open.tooltip))&&(a=Math.max(2,Math.floor(c.dom.offsetHeight/c.dom.querySelector("li").offsetHeight)-1));let{length:u}=l.open.options,f=l.open.selected>-1?l.open.selected+a*(s?1:-1):s?0:u-1;return f<0?f=e=="page"?0:u-1:f>=u&&(f=e=="page"?u-1:0),i.dispatch({effects:wd.of(f)}),!0}}const QN=s=>{let e=s.state.field(_t,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(Qt).interactionDelay?!1:Vb(s,e.open.options[e.open.selected])},_N=s=>s.state.field(_t,!1)?(s.dispatch({effects:Nc.of(!0)}),!0):!1,qN=s=>{let e=s.state.field(_t,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(s.dispatch({effects:Cl.of(null)}),!0)};class e${constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const t$=50,n$=1e3,r$=Tt.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(_t).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(_t);if(!s.selectionSet&&!s.docChanged&&s.startState.field(_t)==e)return;let i=s.transactions.some(a=>(a.selection||a.docChanged)&&!Ed(a));for(let a=0;a<this.running.length;a++){let c=this.running[a];if(i||c.updates.length+s.transactions.length>t$&&Date.now()-c.time>n$){for(let u of c.context.abortListeners)try{u()}catch(f){Zn(this.view.state,f)}c.context.abortListeners=null,this.running.splice(a--,1)}else c.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(a=>a.effects.some(c=>c.is(Nc)))&&(this.pendingStart=!0);let l=this.pendingStart?50:s.state.facet(Qt).activateOnTypingDelay;if(this.debounceUpdate=e.active.some(a=>a.state==1&&!this.running.some(c=>c.active.source==a.source))?setTimeout(()=>this.startUpdate(),l):-1,this.composing!=0)for(let a of s.transactions)Ed(a)=="input"?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(_t);for(let i of e.active)i.state==1&&!this.running.some(l=>l.active.source==i.source)&&this.startQuery(i)}startQuery(s){let{state:e}=this.view,i=Di(e),l=new Db(e,i,s.explicitPos==i),a=new e$(s,l);this.running.push(a),Promise.resolve(s.source(l)).then(c=>{a.context.aborted||(a.done=c||null,this.scheduleAccept())},c=>{this.view.dispatch({effects:Cl.of(null)}),Zn(this.view.state,c)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Qt).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(Qt);for(let l=0;l<this.running.length;l++){let a=this.running[l];if(a.done===void 0)continue;if(this.running.splice(l--,1),a.done){let u=new Ys(a.active.source,a.active.explicitPos,a.done,a.done.from,(s=a.done.to)!==null&&s!==void 0?s:Di(a.updates.length?a.updates[0].startState:this.view.state));for(let f of a.updates)u=u.update(f,i);if(u.hasResult()){e.push(u);continue}}let c=this.view.state.field(_t).active.find(u=>u.source==a.active.source);if(c&&c.state==1)if(a.done==null){let u=new Sn(a.active.source,0);for(let f of a.updates)u=u.update(f,i);u.state!=1&&e.push(u)}else this.startQuery(c)}e.length&&this.view.dispatch({effects:Wb.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(_t,!1);if(e&&e.tooltip&&this.view.state.facet(Qt).closeOnBlur){let i=e.open&&Fv(this.view,e.open.tooltip);(!i||!i.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Cl.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Nc.of(!1)}),20),this.composing=0}}}),Zb=we.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class i${constructor(e,i,l,a){this.field=e,this.line=i,this.from=l,this.to=a}}class Cd{constructor(e,i,l){this.field=e,this.from=i,this.to=l}map(e){let i=e.mapPos(this.from,-1,MapMode.TrackDel),l=e.mapPos(this.to,1,MapMode.TrackDel);return i==null||l==null?null:new Cd(this.field,i,l)}}class Od{constructor(e,i){this.lines=e,this.fieldPositions=i}instantiate(e,i){let l=[],a=[i],c=e.doc.lineAt(i),u=/^\s*/.exec(c.text)[0];for(let h of this.lines){if(l.length){let d=u,m=/^\t*/.exec(h)[0].length;for(let p=0;p<m;p++)d+=e.facet(indentUnit);a.push(i+d.length-m),h=d+h.slice(m)}l.push(h),i+=h.length+1}let f=this.fieldPositions.map(h=>new Cd(h.field,a[h.line]+h.from,a[h.line]+h.to));return{text:l,ranges:f}}static parse(e){let i=[],l=[],a=[],c;for(let u of e.split(/\r\n?|\n/)){for(;c=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(u);){let f=c[1]?+c[1]:null,h=c[2]||c[3]||"",d=-1;for(let m=0;m<i.length;m++)(f!=null?i[m].seq==f:h&&i[m].name==h)&&(d=m);if(d<0){let m=0;for(;m<i.length&&(f==null||i[m].seq!=null&&i[m].seq<f);)m++;i.splice(m,0,{seq:f,name:h}),d=m;for(let p of a)p.field>=d&&p.field++}a.push(new i$(d,l.length,c.index,c.index+h.length)),u=u.slice(0,c.index)+h+u.slice(c.index+c[0].length)}for(let f;f=/\\([{}])/.exec(u);){u=u.slice(0,f.index)+f[1]+u.slice(f.index+f[0].length);for(let h of a)h.line==l.length&&h.from>f.index&&(h.from--,h.to--)}l.push(u)}return new Od(l,a)}}let s$=Me.widget({widget:new class extends vr{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),o$=Me.mark({class:"cm-snippetField"});class Xs{constructor(e,i){this.ranges=e,this.active=i,this.deco=Me.set(e.map(l=>(l.from==l.to?s$:o$).range(l.from,l.to)))}map(e){let i=[];for(let l of this.ranges){let a=l.map(e);if(!a)return null;i.push(a)}return new Xs(i,this.active)}selectionInsideField(e){return e.ranges.every(i=>this.ranges.some(l=>l.field==this.active&&l.from<=i.from&&l.to>=i.to))}}const Ol=ze.define({map(s,e){return s&&s.map(e)}}),l$=ze.define(),ns=Lt.define({create(){return null},update(s,e){for(let i of e.effects){if(i.is(Ol))return i.value;if(i.is(l$)&&s)return new Xs(s.ranges,i.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>we.decorations.from(s,e=>e?e.deco:Me.none)});function Ad(s,e){return ae.create(s.filter(i=>i.field==e).map(i=>ae.range(i.from,i.to)))}function a$(s){let e=Od.parse(s);return(i,l,a,c)=>{let{text:u,ranges:f}=e.instantiate(i.state,a),h={changes:{from:a,to:c,insert:Text.of(u)},scrollIntoView:!0,annotations:l?[Nb.of(l),Transaction.userEvent.of("input.complete")]:void 0};if(f.length&&(h.selection=Ad(f,0)),f.some(d=>d.field>0)){let d=new Xs(f,0),m=h.effects=[Ol.of(d)];i.state.field(ns,!1)===void 0&&m.push(StateEffect.appendConfig.of([ns,d$,m$,Zb]))}i.dispatch(i.state.update(h))}}function zb(s){return({state:e,dispatch:i})=>{let l=e.field(ns,!1);if(!l||s<0&&l.active==0)return!1;let a=l.active+s,c=s>0&&!l.ranges.some(u=>u.field==a+s);return i(e.update({selection:Ad(l.ranges,a),effects:Ol.of(c?null:new Xs(l.ranges,a)),scrollIntoView:!0})),!0}}const c$=({state:s,dispatch:e})=>s.field(ns,!1)?(e(s.update({effects:Ol.of(null)})),!0):!1,u$=zb(1),f$=zb(-1);function O9(s){let e=s.field(ns,!1);return!!(e&&e.ranges.some(i=>i.field==e.active+1))}function A9(s){let e=s.field(ns,!1);return!!(e&&e.active>0)}const h$=[{key:"Tab",run:u$,shift:f$},{key:"Escape",run:c$}],Ub=ke.define({combine(s){return s.length?s[0]:h$}}),d$=vi.highest(sl.compute([Ub],s=>s.facet(Ub)));function k9(s,e){return Object.assign(Object.assign({},e),{apply:a$(s)})}const m$=we.domEventHandlers({mousedown(s,e){let i=e.state.field(ns,!1),l;if(!i||(l=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let a=i.ranges.find(c=>c.from<=l&&c.to>=l);return!a||a.field==i.active?!1:(e.dispatch({selection:Ad(i.ranges,a.field),effects:Ol.of(i.ranges.some(c=>c.field>a.field)?new Xs(i.ranges,a.field):null),scrollIntoView:!0}),!0)}});function p$(s){let e=s.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${e}]+`,"ug")}catch{return new RegExp(`[w${e}]`,"g")}}function Hb(s,e){return new RegExp(e(s.source),s.unicode?"u":"")}const Kb=null;function g$(s){return Kb[s]||(Kb[s]=new WeakMap)}function Gb(s,e,i,l,a){for(let c=s.iterLines(),u=0;!c.next().done;){let{value:f}=c,h;for(e.lastIndex=0;h=e.exec(f);)if(!l[h[0]]&&u+h.index!=a&&(i.push({type:"text",label:h[0]}),l[h[0]]=!0,i.length>=2e3))return;u+=f.length+1}}function Jb(s,e,i,l,a){let c=s.length>=1e3,u=c&&e.get(s);if(u)return u;let f=[],h=Object.create(null);if(s.children){let d=0;for(let m of s.children){if(m.length>=1e3)for(let p of Jb(m,e,i,l-d,a-d))h[p.label]||(h[p.label]=!0,f.push(p));else Gb(m,i,f,h,a-d);d+=m.length+1}}else Gb(s,i,f,h,a);return c&&f.length<2e3&&e.set(s,f),f}const P9=s=>{let e=s.state.languageDataAt("wordChars",s.pos).join(""),i=p$(e),l=s.matchBefore(Hb(i,u=>u+"$"));if(!l&&!s.explicit)return null;let a=l?l.from:s.pos,c=Jb(s.state.doc,g$(e),i,5e4,a);return{from:a,options:c,validFor:Hb(i,u=>"^"+u)}},Al={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},rs=ze.define({map(s,e){let i=e.mapPos(s,-1,hn.TrackAfter);return i==null?void 0:i}}),kd=new class extends Ji{};kd.startSide=1,kd.endSide=-1;const Yb=Lt.define({create(){return _e.empty},update(s,e){if(s=s.map(e.changes),e.selection){let i=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:l=>l>=i.from&&l<=i.to})}for(let i of e.effects)i.is(rs)&&(s=s.update({add:[kd.range(i.value,i.value+1)]}));return s}});function y$(){return[b$,Yb]}const Pd="()[]{}<>";function Xb(s){for(let e=0;e<Pd.length;e+=2)if(Pd.charCodeAt(e)==s)return Pd.charAt(e+1);return $f(s<128?s:s+1)}function Qb(s,e){return s.languageDataAt("closeBrackets",e)[0]||Al}const v$=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),b$=we.inputHandler.of((s,e,i,l)=>{if((v$?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let a=s.state.selection.main;if(l.length>2||l.length==2&&Vn(Jt(l,0))==1||e!=a.from||i!=a.to)return!1;let c=S$(s.state,l);return c?(s.dispatch(c),!0):!1}),x$=[{key:"Backspace",run:({state:s,dispatch:e})=>{if(s.readOnly)return!1;let l=Qb(s,s.selection.main.head).brackets||Al.brackets,a=null,c=s.changeByRange(u=>{if(u.empty){let f=E$(s.doc,u.head);for(let h of l)if(h==f&&Bc(s.doc,u.head)==Xb(Jt(h,0)))return{changes:{from:u.head-h.length,to:u.head+h.length},range:ae.cursor(u.head-h.length)}}return{range:a=u}});return a||e(s.update(c,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function S$(s,e){let i=Qb(s,s.selection.main.head),l=i.brackets||Al.brackets;for(let a of l){let c=Xb(Jt(a,0));if(e==a)return c==a?O$(s,a,l.indexOf(a+a+a)>-1,i):w$(s,a,c,i.before||Al.before);if(e==c&&_b(s,s.selection.main.from))return C$(s,a,c)}return null}function _b(s,e){let i=!1;return s.field(Yb).between(0,s.doc.length,l=>{l==e&&(i=!0)}),i}function Bc(s,e){let i=s.sliceString(e,e+2);return i.slice(0,Vn(Jt(i,0)))}function E$(s,e){let i=s.sliceString(e-2,e);return Vn(Jt(i,0))==i.length?i:i.slice(1)}function w$(s,e,i,l){let a=null,c=s.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:i,from:u.to}],effects:rs.of(u.to+e.length),range:ae.range(u.anchor+e.length,u.head+e.length)};let f=Bc(s.doc,u.head);return!f||/\s/.test(f)||l.indexOf(f)>-1?{changes:{insert:e+i,from:u.head},effects:rs.of(u.head+e.length),range:ae.cursor(u.head+e.length)}:{range:a=u}});return a?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function C$(s,e,i){let l=null,a=s.changeByRange(c=>c.empty&&Bc(s.doc,c.head)==i?{changes:{from:c.head,to:c.head+i.length,insert:i},range:ae.cursor(c.head+i.length)}:l={range:c});return l?null:s.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function O$(s,e,i,l){let a=l.stringPrefixes||Al.stringPrefixes,c=null,u=s.changeByRange(f=>{if(!f.empty)return{changes:[{insert:e,from:f.from},{insert:e,from:f.to}],effects:rs.of(f.to+e.length),range:ae.range(f.anchor+e.length,f.head+e.length)};let h=f.head,d=Bc(s.doc,h),m;if(d==e){if(qb(s,h))return{changes:{insert:e+e,from:h},effects:rs.of(h+e.length),range:ae.cursor(h+e.length)};if(_b(s,h)){let v=i&&s.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+v.length,insert:v},range:ae.cursor(h+v.length)}}}else{if(i&&s.sliceDoc(h-2*e.length,h)==e+e&&(m=ex(s,h-2*e.length,a))>-1&&qb(s,m))return{changes:{insert:e+e+e+e,from:h},effects:rs.of(h+e.length),range:ae.cursor(h+e.length)};if(s.charCategorizer(h)(d)!=wt.Word&&ex(s,h,a)>-1&&!A$(s,h,e,a))return{changes:{insert:e+e,from:h},effects:rs.of(h+e.length),range:ae.cursor(h+e.length)}}return{range:c=f}});return c?null:s.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function qb(s,e){let i=Nt(s).resolveInner(e+1);return i.parent&&i.from==e}function A$(s,e,i,l){let a=Nt(s).resolveInner(e,-1),c=l.reduce((u,f)=>Math.max(u,f.length),0);for(let u=0;u<5;u++){let f=s.sliceDoc(a.from,Math.min(a.to,a.from+i.length+c)),h=f.indexOf(i);if(!h||h>-1&&l.indexOf(f.slice(0,h))>-1){let m=a.firstChild;for(;m&&m.from==a.from&&m.to-m.from>i.length+h;){if(s.sliceDoc(m.to-i.length,m.to)==i)return!1;m=m.firstChild}return!0}let d=a.to==e&&a.parent;if(!d)break;a=d}return!1}function ex(s,e,i){let l=s.charCategorizer(e);if(l(s.sliceDoc(e-1,e))!=wt.Word)return e;for(let a of i){let c=e-a.length;if(s.sliceDoc(c,e)==a&&l(s.sliceDoc(c-1,c))!=wt.Word)return c}return-1}function k$(s={}){return[_t,Qt.of(s),r$,P$,Zb]}const tx=[{key:"Ctrl-Space",run:_N},{key:"Escape",run:qN},{key:"ArrowDown",run:Fc(!0)},{key:"ArrowUp",run:Fc(!1)},{key:"PageDown",run:Fc(!0,"page")},{key:"PageUp",run:Fc(!1,"page")},{key:"Enter",run:QN}],P$=vi.highest(sl.computeN([Qt],s=>s.facet(Qt).defaultKeymap?[tx]:[]));function I9(s){let e=s.field(_t,!1);return e&&e.active.some(i=>i.state==1)?"pending":e&&e.active.some(i=>i.state!=0)?"active":null}const nx=new WeakMap;function D9(s){var e;let i=(e=s.field(_t,!1))===null||e===void 0?void 0:e.open;if(!i||i.disabled)return[];let l=nx.get(i.options);return l||nx.set(i.options,l=i.options.map(a=>a.completion)),l}function M9(s){var e;let i=(e=s.field(_t,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.options[i.selected].completion:null}function R9(s){var e;let i=(e=s.field(_t,!1))===null||e===void 0?void 0:e.open;return i&&!i.disabled&&i.selected>=0?i.selected:null}function L9(s){return wd.of(s)}class T${constructor(e,i,l){this.from=e,this.to=i,this.diagnostic=l}}class is{constructor(e,i,l){this.diagnostics=e,this.panel=i,this.selected=l}static init(e,i,l){let a=e,c=l.facet(Id).markerFilter;c&&(a=c(a));let u=Me.set(a.map(f=>f.from==f.to||f.from==f.to-1&&l.doc.lineAt(f.from).to==f.from?Me.widget({widget:new N$(f),diagnostic:f}).range(f.from):Me.mark({attributes:{class:"cm-lintRange cm-lintRange-"+f.severity+(f.markClass?" "+f.markClass:"")},diagnostic:f}).range(f.from,f.to)),!0);return new is(u,i,Qs(u))}}function Qs(s,e=null,i=0){let l=null;return s.between(i,1e9,(a,c,{spec:u})=>{if(!(e&&u.diagnostic!=e))return l=new T$(a,c,u.diagnostic),!1}),l}function rx(s,e){let i=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(l=>l.is(jc))||s.changes.touchesRange(i.from,i.to))}function ix(s,e){return s.field(ln,!1)?e:e.concat(ze.appendConfig.of(px))}function N9(s,e){return{effects:ix(s,[jc.of(e)])}}const jc=ze.define(),Td=ze.define(),sx=ze.define(),ln=Lt.define({create(){return new is(Me.none,null,null)},update(s,e){if(e.docChanged){let i=s.diagnostics.map(e.changes),l=null;if(s.selected){let a=e.changes.mapPos(s.selected.from,1);l=Qs(i,s.selected.diagnostic,a)||Qs(i,null,a)}s=new is(i,s.panel,l)}for(let i of e.effects)i.is(jc)?s=is.init(i.value,s.panel,e.state):i.is(Td)?s=new is(s.diagnostics,i.value?Wc.open:null,s.selected):i.is(sx)&&(s=new is(s.diagnostics,s.panel,i.value));return s},provide:s=>[Qi.from(s,e=>e.panel),we.decorations.from(s,e=>e.diagnostics)]});function $9(s){let e=s.field(ln,!1);return e?e.diagnostics.size:0}const I$=Me.mark({class:"cm-lintRange cm-lintRange-active"});function D$(s,e,i){let{diagnostics:l}=s.state.field(ln),a=[],c=2e8,u=0;l.between(e-(i<0?1:0),e+(i>0?1:0),(h,d,{spec:m})=>{e>=h&&e<=d&&(h==d||(e>h||i>0)&&(e<d||i<0))&&(a.push(m.diagnostic),c=Math.min(h,c),u=Math.max(d,u))});let f=s.state.facet(Id).tooltipFilter;return f&&(a=f(a)),a.length?{pos:c,end:u,above:s.state.doc.lineAt(c).to<u,create(){return{dom:ox(s,a)}}}:null}function ox(s,e){return bt("ul",{class:"cm-tooltip-lint"},e.map(i=>ux(s,i,!1)))}const M$=s=>{let e=s.state.field(ln,!1);(!e||!e.panel)&&s.dispatch({effects:ix(s.state,[Td.of(!0)])});let i=ul(s,Wc.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},lx=s=>{let e=s.state.field(ln,!1);return!e||!e.panel?!1:(s.dispatch({effects:Td.of(!1)}),!0)},R$=s=>{let e=s.state.field(ln,!1);if(!e)return!1;let i=s.state.selection.main,l=e.diagnostics.iter(i.to+1);return!l.value&&(l=e.diagnostics.iter(0),!l.value||l.from==i.from&&l.to==i.to)?!1:(s.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0}),!0)},F9=s=>{let{state:e}=s,i=e.field(ln,!1);if(!i)return!1;let l=e.selection.main,a,c,u,f;return i.diagnostics.between(0,e.doc.length,(h,d)=>{d<l.to&&(a==null||a<h)&&(a=h,c=d),(u==null||h>u)&&(u=h,f=d)}),u==null||a==null&&u==l.from?!1:(s.dispatch({selection:{anchor:a!=null?a:u,head:c!=null?c:f},scrollIntoView:!0}),!0)},L$=[{key:"Mod-Shift-m",run:M$,preventDefault:!0},{key:"F8",run:R$}],ax=null,Id=ke.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},tr(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,i)=>e?i?l=>e(l)||i(l):e:i}))}});function B9(s,e={}){return[Id.of({source:s,config:e}),ax,px]}function j9(s){let e=s.plugin(ax);e&&e.force()}function cx(s){let e=[];if(s)e:for(let{name:i}of s){for(let l=0;l<i.length;l++){let a=i[l];if(/[a-zA-Z]/.test(a)&&!e.some(c=>c.toLowerCase()==a.toLowerCase())){e.push(a);continue e}}e.push("")}return e}function ux(s,e,i){var l;let a=i?cx(e.actions):[];return bt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},bt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(l=e.actions)===null||l===void 0?void 0:l.map((c,u)=>{let f=!1,h=v=>{if(v.preventDefault(),f)return;f=!0;let y=Qs(s.state.field(ln).diagnostics,e);y&&c.apply(s,y.from,y.to)},{name:d}=c,m=a[u]?d.indexOf(a[u]):-1,p=m<0?d:[d.slice(0,m),bt("u",d.slice(m,m+1)),d.slice(m+1)];return bt("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${d}${m<0?"":` (access key "${a[u]})"`}.`},p)}),e.source&&bt("div",{class:"cm-diagnosticSource"},e.source))}class N$ extends vr{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return bt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class fx{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=ux(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Wc{constructor(e){this.view=e,this.items=[];let i=a=>{if(a.keyCode==27)lx(this.view),this.view.focus();else if(a.keyCode==38||a.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(a.keyCode==40||a.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(a.keyCode==36)this.moveSelection(0);else if(a.keyCode==35)this.moveSelection(this.items.length-1);else if(a.keyCode==13)this.view.focus();else if(a.keyCode>=65&&a.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:c}=this.items[this.selectedIndex],u=cx(c.actions);for(let f=0;f<u.length;f++)if(u[f].toUpperCase().charCodeAt(0)==a.keyCode){let h=Qs(this.view.state.field(ln).diagnostics,c);h&&c.actions[f].apply(e,h.from,h.to)}}else return;a.preventDefault()},l=a=>{for(let c=0;c<this.items.length;c++)this.items[c].dom.contains(a.target)&&this.moveSelection(c)};this.list=bt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:l}),this.dom=bt("div",{class:"cm-panel-lint"},this.list,bt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>lx(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(ln).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(ln),l=0,a=!1,c=null;for(e.between(0,this.view.state.doc.length,(u,f,{spec:h})=>{let d=-1,m;for(let p=l;p<this.items.length;p++)if(this.items[p].diagnostic==h.diagnostic){d=p;break}d<0?(m=new fx(this.view,h.diagnostic),this.items.splice(l,0,m),a=!0):(m=this.items[d],d>l&&(this.items.splice(l,d-l),a=!0)),i&&m.diagnostic==i.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),c=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),l++});l<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)a=!0,this.items.pop();this.items.length==0&&(this.items.push(new fx(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),a=!0),c?(this.list.setAttribute("aria-activedescendant",c.id),this.view.requestMeasure({key:this,read:()=>({sel:c.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:f})=>{let h=f.height/this.list.offsetHeight;u.top<f.top?this.list.scrollTop-=(f.top-u.top)/h:u.bottom>f.bottom&&(this.list.scrollTop+=(u.bottom-f.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),a&&this.sync()}sync(){let e=this.list.firstChild;function i(){let l=e;e=l.nextSibling,l.remove()}for(let l of this.items)if(l.dom.parentNode==this.list){for(;e!=l.dom;)i();e=l.dom.nextSibling}else this.list.insertBefore(l.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(ln),l=Qs(i.diagnostics,this.items[e].diagnostic);l&&this.view.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0,effects:sx.of(l)})}static open(e){return new Wc(e)}}function Vc(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Zc(s){return Vc(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const $$=we.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Zc("#d11")},".cm-lintRange-warning":{backgroundImage:Zc("orange")},".cm-lintRange-info":{backgroundImage:Zc("#999")},".cm-lintRange-hint":{backgroundImage:Zc("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function hx(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}class F$ extends Sr{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((i,l)=>hx(i)<hx(l.severity)?l.severity:i,"hint")}toDOM(e){let i=document.createElement("div");i.className="cm-lint-marker cm-lint-marker-"+this.severity;let l=this.diagnostics,a=e.state.facet(zc).tooltipFilter;return a&&(l=a(l)),l.length&&(i.onmouseover=()=>j$(e,i,l)),i}}function B$(s,e){let i=l=>{let a=e.getBoundingClientRect();if(!(l.clientX>a.left-10&&l.clientX<a.right+10&&l.clientY>a.top-10&&l.clientY<a.bottom+10)){for(let c=l.target;c;c=c.parentNode)if(c.nodeType==1&&c.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),s.state.field(mx)&&s.dispatch({effects:Dd.of(null)})}};window.addEventListener("mousemove",i)}function j$(s,e,i){function l(){let u=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(u.from)&&s.dispatch({effects:Dd.of({pos:u.from,above:!1,create(){return{dom:ox(s,i),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,B$(s,e)}let{hoverTime:a}=s.state.facet(zc),c=setTimeout(l,a);e.onmouseout=()=>{clearTimeout(c),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(c),c=setTimeout(l,a)}}function W$(s,e){let i=Object.create(null);for(let a of e){let c=s.lineAt(a.from);(i[c.from]||(i[c.from]=[])).push(a)}let l=[];for(let a in i)l.push(new F$(i[a]).range(+a));return _e.of(l,!0)}const V$=Wv({class:"cm-gutter-lint",markers:s=>s.state.field(dx)}),dx=Lt.define({create(){return _e.empty},update(s,e){s=s.map(e.changes);let i=e.state.facet(zc).markerFilter;for(let l of e.effects)if(l.is(jc)){let a=l.value;i&&(a=i(a||[])),s=W$(e.state.doc,a.slice(0))}return s}}),Dd=ze.define(),mx=Lt.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=rx(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((i,l)=>l.is(Dd)?l.value:i,s)},provide:s=>nc.from(s)}),Z$=we.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Vc('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Vc('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Vc('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),px=[ln,we.decorations.compute([ln],s=>{let{selected:e,panel:i}=s.field(ln);return!e||!i||e.from==e.to?Me.none:Me.set([I$.range(e.from,e.to)])}),IM(D$,{hideOn:rx}),$$],zc=ke.define({combine(s){return tr(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function W9(s={}){return[zc.of(s),dx,V$,Z$,mx]}function V9(s,e){let i=s.field(ln,!1);if(i&&i.diagnostics.size)for(let l=RangeSet.iter([i.diagnostics]);l.value;l.next())e(l.value.spec.diagnostic,l.from,l.to)}var gx=function(e){e===void 0&&(e={});var{crosshairCursor:i=!1}=e,l=[];e.closeBracketsKeymap!==!1&&(l=l.concat(x$)),e.defaultKeymap!==!1&&(l=l.concat(lN)),e.searchKeymap!==!1&&(l=l.concat(MN)),e.historyKeymap!==!1&&(l=l.concat(yL)),e.foldKeymap!==!1&&(l=l.concat(SR)),e.completionKeymap!==!1&&(l=l.concat(tx)),e.lintKeymap!==!1&&(l=l.concat(L$));var a=[];return e.lineNumbers!==!1&&a.push(BM()),e.highlightActiveLineGutter!==!1&&a.push(VM()),e.highlightSpecialChars!==!1&&a.push(sM()),e.history!==!1&&a.push(aL()),e.foldGutter!==!1&&a.push(OR()),e.drawSelection!==!1&&a.push(YD()),e.dropCursor!==!1&&a.push(eM()),e.allowMultipleSelections!==!1&&a.push(Qe.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&a.push(uR()),e.syntaxHighlighting!==!1&&a.push(d1(TR,{fallback:!0})),e.bracketMatching!==!1&&a.push(NR()),e.closeBrackets!==!1&&a.push(y$()),e.autocompletion!==!1&&a.push(k$()),e.rectangularSelection!==!1&&a.push(bM()),i!==!1&&a.push(EM()),e.highlightActiveLine!==!1&&a.push(fM()),e.highlightSelectionMatches!==!1&&a.push(dN()),e.tabSize&&typeof e.tabSize=="number"&&a.push(hc.of(" ".repeat(e.tabSize))),a.concat([sl.of(l.flat())]).filter(Boolean)},Z9=function(e){e===void 0&&(e={});var i=[];e.defaultKeymap!==!1&&(i=i.concat(defaultKeymap)),e.historyKeymap!==!1&&(i=i.concat(historyKeymap));var l=[];return e.highlightSpecialChars!==!1&&l.push(highlightSpecialChars()),e.history!==!1&&l.push(history()),e.drawSelection!==!1&&l.push(drawSelection()),e.syntaxHighlighting!==!1&&l.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),l.concat([keymap.of(i.flat())]).filter(Boolean)};const yx="#e5c07b",Md="#e06c75",vx="#56b6c2",bx="#ffffff",kl="#abb2bf",Uc="#7d8799",xx="#61afef",Sx="#98c379",Rd="#d19a66",Ex="#c678dd",wx="#21252b",Ld="#2c313a",Nd="#282c34",Hc="#353a42",Cx="#3E4451",$d="#528bff",z9={chalky:yx,coral:Md,cyan:vx,invalid:bx,ivory:kl,stone:Uc,malibu:xx,sage:Sx,whiskey:Rd,violet:Ex,darkBackground:wx,highlightBackground:Ld,background:Nd,tooltipBackground:Hc,selection:Cx,cursor:$d},z$=we.theme({"&":{color:kl,backgroundColor:Nd},".cm-content":{caretColor:$d},".cm-cursor, .cm-dropCursor":{borderLeftColor:$d},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Cx},".cm-panels":{backgroundColor:wx,color:kl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Nd,color:Uc,border:"none"},".cm-activeLineGutter":{backgroundColor:Ld},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Hc},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Hc,borderBottomColor:Hc},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ld,color:kl}}},{dark:!0}),U$=vl.define([{tag:oe.keyword,color:Ex},{tag:[oe.name,oe.deleted,oe.character,oe.propertyName,oe.macroName],color:Md},{tag:[oe.function(oe.variableName),oe.labelName],color:xx},{tag:[oe.color,oe.constant(oe.name),oe.standard(oe.name)],color:Rd},{tag:[oe.definition(oe.name),oe.separator],color:kl},{tag:[oe.typeName,oe.className,oe.number,oe.changed,oe.annotation,oe.modifier,oe.self,oe.namespace],color:yx},{tag:[oe.operator,oe.operatorKeyword,oe.url,oe.escape,oe.regexp,oe.link,oe.special(oe.string)],color:vx},{tag:[oe.meta,oe.comment],color:Uc},{tag:oe.strong,fontWeight:"bold"},{tag:oe.emphasis,fontStyle:"italic"},{tag:oe.strikethrough,textDecoration:"line-through"},{tag:oe.link,color:Uc,textDecoration:"underline"},{tag:oe.heading,fontWeight:"bold",color:Md},{tag:[oe.atom,oe.bool,oe.special(oe.variableName)],color:Rd},{tag:[oe.processingInstruction,oe.string,oe.inserted],color:Sx},{tag:oe.invalid,color:bx}]),H$=[z$,d1(U$)];var K$=we.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),G$=function(e){e===void 0&&(e={});var{indentWithTab:i=!0,editable:l=!0,readOnly:a=!1,theme:c="light",placeholder:u="",basicSetup:f=!0}=e,h=[];switch(i&&h.unshift(sl.of([aN])),f&&(typeof f=="boolean"?h.unshift(gx()):h.unshift(gx(f))),u&&h.unshift(pM(u)),c){case"light":h.push(K$);break;case"dark":h.push(H$);break;case"none":break;default:h.push(c);break}return l===!1&&h.push(we.editable.of(!1)),a&&h.push(Qe.readOnly.of(!0)),[...h]},J$=s=>({line:s.state.doc.lineAt(s.state.selection.main.from),lineCount:s.state.doc.lines,lineBreak:s.state.lineBreak,length:s.state.doc.length,readOnly:s.state.readOnly,tabSize:s.state.tabSize,selection:s.state.selection,selectionAsSingle:s.state.selection.asSingle().main,ranges:s.state.selection.ranges,selectionCode:s.state.sliceDoc(s.state.selection.main.from,s.state.selection.main.to),selections:s.state.selection.ranges.map(e=>s.state.sliceDoc(e.from,e.to)),selectedText:s.state.selection.ranges.some(e=>!e.empty)}),Ox=yr.define(),Y$=[];function X$(s){var{value:e,selection:i,onChange:l,onStatistics:a,onCreateEditor:c,onUpdate:u,extensions:f=Y$,autoFocus:h,theme:d="light",height:m=null,minHeight:p=null,maxHeight:v=null,width:y=null,minWidth:S=null,maxWidth:E=null,placeholder:w="",editable:C=!0,readOnly:O=!1,indentWithTab:I=!0,basicSetup:P=!0,root:M,initialState:$}=s,[N,ne]=(0,g.useState)(),[ie,fe]=(0,g.useState)(),[ye,ve]=(0,g.useState)(),pe=we.theme({"&":{height:m,minHeight:p,maxHeight:v,width:y,minWidth:S,maxWidth:E},"& .cm-scroller":{height:"100% !important"}}),xe=we.updateListener.of(Re=>{if(Re.docChanged&&typeof l=="function"&&!Re.transactions.some(Be=>Be.annotation(Ox))){var Oe=Re.state.doc,be=Oe.toString();l(be,Re)}a&&a(J$(Re))}),me=G$({theme:d,editable:C,readOnly:O,placeholder:w,indentWithTab:I,basicSetup:P}),Pe=[xe,pe,...me];return u&&typeof u=="function"&&Pe.push(we.updateListener.of(u)),Pe=Pe.concat(f),(0,g.useEffect)(()=>{if(N&&!ye){var Re={doc:e,selection:i,extensions:Pe},Oe=$?Qe.fromJSON($.json,Re,$.fields):Qe.create(Re);if(ve(Oe),!ie){var be=new we({state:Oe,parent:N,root:M});fe(be),c&&c(be,Oe)}}return()=>{ie&&(ve(void 0),fe(void 0))}},[N,ye]),(0,g.useEffect)(()=>ne(s.container),[s.container]),(0,g.useEffect)(()=>()=>{ie&&(ie.destroy(),fe(void 0))},[ie]),(0,g.useEffect)(()=>{h&&ie&&ie.focus()},[h,ie]),(0,g.useEffect)(()=>{ie&&ie.dispatch({effects:ze.reconfigure.of(Pe)})},[d,f,m,p,v,y,S,E,w,C,O,I,P,l,u]),(0,g.useEffect)(()=>{if(e!==void 0){var Re=ie?ie.state.doc.toString():"";ie&&e!==Re&&ie.dispatch({changes:{from:0,to:Re.length,insert:e||""},annotations:[Ox.of(!0)]})}},[e,ie]),{state:ye,setState:ve,view:ie,setView:fe,container:N,setContainer:ne}}var Q$=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Ax=(0,g.forwardRef)((s,e)=>{var{className:i,value:l="",selection:a,extensions:c=[],onChange:u,onStatistics:f,onCreateEditor:h,onUpdate:d,autoFocus:m,theme:p="light",height:v,minHeight:y,maxHeight:S,width:E,minWidth:w,maxWidth:C,basicSetup:O,placeholder:I,indentWithTab:P,editable:M,readOnly:$,root:N,initialState:ne}=s,ie=(0,_R.Z)(s,Q$),fe=(0,g.useRef)(null),{state:ye,view:ve,container:pe}=X$({container:fe.current,root:N,value:l,autoFocus:m,theme:p,height:v,minHeight:y,maxHeight:S,width:E,minWidth:w,maxWidth:C,basicSetup:O,placeholder:I,indentWithTab:P,editable:M,readOnly:$,selection:a,onChange:u,onStatistics:f,onCreateEditor:h,onUpdate:d,extensions:c,initialState:ne});if((0,g.useImperativeHandle)(e,()=>({editor:fe.current,state:ye,view:ve}),[fe,pe,ye,ve]),typeof l!="string")throw new Error("value must be typeof string but got "+typeof l);var xe=typeof p=="string"?"cm-theme-"+p:"cm-theme";return(0,T.jsx)("div",(0,Yr.Z)({ref:fe,className:""+xe+(i?" "+i:"")},ie))});Ax.displayName="CodeMirror";const Kc=Ax;var Gc=x(10921),_$=x(98331);const q$=64*1024,kx=32*1024,Px=(0,g.createContext)(void 0);function eF(s){if(s.length>q$)return window.btoa("<file too large>");try{return window.btoa(s)}catch{const i=new TextEncoder().encode(s),l=new Array;for(let a=0;a<i.length;a+=kx)l.push(String.fromCharCode(...i.slice(a,a+kx)));return window.btoa(l.join(""))}}function tF(s){const e=(0,at.h_)(Gn.l),[i,l]=(0,g.useState)({results:[],selectedResult:void 0}),a=(0,g.useRef)(1),c=(0,g.useCallback)(d=>{l(m=>{const p=m.results.find(v=>v.id===d);return p===m.selectedResult?m:{results:m.results,selectedResult:p}})},[]),u=(0,g.useCallback)(d=>{l(m=>{var S;const p=m.results.findIndex(E=>E.id===d);if(p===-1)return m;const v=m.results.slice(),[y]=v.splice(p,1);return{results:v,selectedResult:((S=m.selectedResult)==null?void 0:S.id)===y.id?v[0]:m.selectedResult}})},[]),f=(0,g.useCallback)(async d=>{if(!e.dryRun)throw new Error("Scaffolder API does not support dry-run");const m=Gc.ZP.parse(d.templateContent),v={...await e.dryRun({template:m,values:d.values,secrets:{},directoryContents:d.files.map(y=>({path:y.path,base64Content:eF(y.content)}))}),id:a.current++};l(y=>{var S;return{results:[...y.results,v],selectedResult:(S=y.selectedResult)!=null?S:v}})},[e]),h=(0,g.useMemo)(()=>({...i,selectResult:c,deleteResult:u,execute:f}),[i,c,u,f]);return g.createElement(Px.Provider,{value:h},s.children)}function _s(){const s=(0,g.useContext)(Px);if(!s)throw new Error("must be used within a DryRunProvider");return s}const nF=s=>(s+1)%Number.MAX_SAFE_INTEGER;function rF(){const[,s]=(0,g.useState)(0);return(0,g.useCallback)(()=>{s(nF)},[])}const iF=1024*1024,sF="This file is too large to be displayed";class oF{constructor(e,i){Dr(this,ss);Dr(this,Mi);Dr(this,En);Dr(this,os);lr(this,ss,e),lr(this,Mi,i)}get path(){return st(this,ss).path}get content(){var e;return(e=st(this,En))!=null?e:sF}updateContent(e){st(this,En)!==void 0&&(lr(this,En,e),st(this,Mi).call(this))}get dirty(){return st(this,En)!==st(this,os)}async save(){st(this,En)!==void 0&&(await st(this,ss).save(st(this,En)),lr(this,os,st(this,En)),st(this,Mi).call(this))}async reload(){const e=await st(this,ss).file();if(e.size>iF){st(this,En)!==void 0&&(lr(this,En,void 0),lr(this,os,void 0),st(this,Mi).call(this));return}const i=await e.text();st(this,En)!==i&&(lr(this,En,i),lr(this,os,i),st(this,Mi).call(this))}}ss=new WeakMap,Mi=new WeakMap,En=new WeakMap,os=new WeakMap;class lF{constructor(e){Dr(this,Il);Dr(this,eo,new Set);Dr(this,Xr,[]);Dr(this,ls);Jd(this,"setSelectedFile",e=>{const i=st(this,ls),l=st(this,Xr).find(a=>a.path===e);i!==l&&(lr(this,ls,l),st(this,to).call(this))});Dr(this,to,()=>{st(this,eo).forEach(e=>e())});lr(this,Il,e)}get files(){return st(this,Xr)}get selectedFile(){return st(this,ls)}get dirty(){return st(this,Xr).some(e=>e.dirty)}async save(){await Promise.all(st(this,Xr).map(e=>e.save()))}async reload(){var a;const e=(a=st(this,ls))==null?void 0:a.path,i=await st(this,Il).listFiles(),l=await Promise.all(i.map(async c=>{const u=new oF(c,st(this,to));return await u.reload(),u}));st(this,Xr).length=0,st(this,Xr).push(...l),this.setSelectedFile(e),st(this,to).call(this)}subscribe(e){return st(this,eo).add(e),()=>{st(this,eo).delete(e)}}}Il=new WeakMap,eo=new WeakMap,Xr=new WeakMap,ls=new WeakMap,to=new WeakMap;const Tx=(0,g.createContext)(void 0);function Fd(){const s=(0,g.useContext)(Tx),e=rF();if((0,g.useEffect)(()=>s==null?void 0:s.subscribe(e),[s,e]),!s)throw new Error("must be used within a DirectoryEditorProvider");return s}function aF(s){const{directory:e}=s,[{result:i,error:l},{execute:a}]=(0,kf.r)(async c=>{const u=new lF(c);await u.reload();const f=u.files.find(h=>h.path.match(/\.ya?ml$/));return f&&u.setSelectedFile(f.path),u});return(0,g.useEffect)(()=>{a(e)},[a,e]),l?g.createElement(hs.y,{error:l}):i?g.createElement(Tx.Provider,{value:i},s.children):g.createElement(ei.E,null)}const cF=(0,Y.Z)({containerWrapper:{position:"relative",width:"100%",height:"100%"},container:{position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto"}});class uF extends g.Component{constructor(){super(...arguments);Jd(this,"state",{shouldRender:!0})}componentDidUpdate(i){i.invalidator!==this.props.invalidator&&this.setState({shouldRender:!0})}componentDidCatch(i){this.props.setErrorText(i.message),this.setState({shouldRender:!1})}render(){return this.state.shouldRender?this.props.children:null}}function Bd(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Pl(s){const{content:e,contentIsSpec:i,onDryRun:l,setErrorText:a,fieldExtensions:c=[],layouts:u=[]}=s,f=cF(),h=(0,at.I_)(),[d,m]=(0,g.useState)(),p=(0,g.useMemo)(()=>Object.fromEntries(c.map(({name:v,component:y})=>[v,y])),[c]);return(0,_$.Z)(()=>{try{if(!e){m(void 0);return}const v=Gc.ZP.parseAllDocuments(e).filter(w=>w).map(w=>w.toJSON())[0];if(!Bd(v)){m(void 0);return}let y=v;if(!i){if(!(String(v.kind).toLocaleLowerCase("en-US")==="template")){m(void 0);return}y=Bd(v.spec)?v.spec:{}}const{parameters:S}=y;if(!Array.isArray(S)){a("Template parameters must be an array"),m(void 0);return}const E=Object.fromEntries(c.map(({name:w,validation:C})=>[w,C]));a(),m(S.flatMap(w=>Bd(w)?[{title:String(w.title),schema:w,validate:Sp(w,E,{apiHolder:h})}]:[]))}catch(v){a(v.message)}},250,[i,e,h]),d?g.createElement("div",{className:f.containerWrapper},g.createElement("div",{className:f.container},g.createElement(uF,{invalidator:d,setErrorText:a},g.createElement(jg,{manifest:{steps:d,title:"Template Editor"},extensions:c,components:p,onCreate:async v=>{await(l==null?void 0:l(v))},layouts:u})))):null}function fF(s){const{setErrorText:e,fieldExtensions:i=[],layouts:l}=s,a=_s(),c=Fd(),{selectedFile:u}=c,f=async d=>{if(u)try{await a.execute({templateContent:u.content,values:d,files:c.files}),e()}catch(m){throw e(String(m.cause||m)),m}},h=u&&u.path.match(/\.ya?ml$/)?u.content:void 0;return g.createElement(Pl,{onDryRun:f,fieldExtensions:i,setErrorText:e,content:h,layouts:l})}Pl.DirectoryEditorDryRun=fF;const hF=(0,Y.Z)(s=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "fieldForm preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:s.spacing(1)},fieldForm:{gridArea:"fieldForm"},preview:{gridArea:"preview"}})),dF=({customFieldExtensions:s=[],onClose:e})=>{var S,E;const i=hF(),l=s.filter(w=>!!w.schema),[a,c]=(0,g.useState)(l[0]),[u,f]=(0,g.useState)({}),[h,d]=(0,g.useState)(Date.now()),m=(0,g.useMemo)(()=>{var w,C;return Gc.ZP.stringify({parameters:[{title:`${a.name} Example`,properties:{[a.name]:{type:(C=(w=a.schema)==null?void 0:w.returnValue)==null?void 0:C.type,"ui:field":a.name,"ui:options":u}}}]})},[u,a]),p=(0,g.useMemo)(()=>Object.fromEntries(s.map(({name:w,component:C})=>[w,C])),[s]),v=(0,g.useCallback)(w=>{c(w),f({})},[f,c]),y=(0,g.useCallback)(w=>{f(w),d(Date.now())},[f,d]);return g.createElement("main",{className:i.root},g.createElement("div",{className:i.controls},g.createElement(Z.Z,{variant:"outlined",size:"small",fullWidth:!0},g.createElement(ce.Z,{id:"select-field-label"},"Choose Custom Field Extension"),g.createElement(D1.Z,{value:a,label:"Choose Custom Field Extension",labelId:"select-field-label",onChange:w=>v(w.target.value)},l.map((w,C)=>g.createElement(An.Z,{key:C,value:w},w.name)))),g.createElement(an.Z,{size:"medium",onClick:e,"aria-label":"Close"},g.createElement(nd.Z,null))),g.createElement("div",{className:i.fieldForm},g.createElement(ti.Z,null,g.createElement(I1.Z,{title:"Field Options"}),g.createElement(gs.Z,null,g.createElement(Bg,{showErrorList:!1,fields:{...p},noHtml5Validate:!0,formData:u,formContext:{fieldFormState:u},onSubmit:w=>y(w.formData),validator:eg,schema:((S=a.schema)==null?void 0:S.uiOptions)||{},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}},g.createElement(kn.Z,{variant:"contained",color:"primary",type:"submit",disabled:!((E=a.schema)!=null&&E.uiOptions)},"Apply"))))),g.createElement("div",{className:i.preview},g.createElement(ti.Z,null,g.createElement(I1.Z,{title:"Example Template Spec"}),g.createElement(gs.Z,null,g.createElement(Kc,{readOnly:!0,theme:"dark",height:"100%",extensions:[Vs.define(gc)],value:m}))),g.createElement(Pl,{key:h,content:m,contentIsSpec:!0,fieldExtensions:s,setErrorText:()=>null})))};var qs=x(80030),Ix=x(49423),Dx=x(96401),Mx=x(96234),Rx=x(59740),Lx=x(6277),Nx=x(15459),$x=x(24514),mF=g.createContext({});const Fx=mF;var pF={root:{padding:0,margin:0,listStyle:"none"}};function gF(s,e){if(s.length!==e.length)return!0;for(var i=0;i<s.length;i+=1)if(s[i]!==e[i])return!0;return!1}var Bx=function(e,i,l){for(var a=i;a<e.length;a+=1)if(l===e[a])return a;return-1},yF=[],vF=[],bF=g.forwardRef(function(e,i){var l=e.children,a=e.classes,c=e.className,u=e.defaultCollapseIcon,f=e.defaultEndIcon,h=e.defaultExpanded,d=h===void 0?yF:h,m=e.defaultExpandIcon,p=e.defaultParentIcon,v=e.defaultSelected,y=v===void 0?vF:v,S=e.disableSelection,E=S===void 0?!1:S,w=e.multiSelect,C=w===void 0?!1:w,O=e.expanded,I=e.onNodeSelect,P=e.onNodeToggle,M=e.selected,$=(0,Rx.Z)(e,["children","classes","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disableSelection","multiSelect","expanded","onNodeSelect","onNodeToggle","selected"]),N=g.useState(null),ne=N[0],ie=N[1],fe=g.useState(null),ye=fe[0],ve=fe[1],pe=g.useRef({}),xe=g.useRef({}),me=g.useRef([]),Pe=(0,$x.Z)({controlled:O,default:d,name:"TreeView",state:"expanded"}),Re=(0,Mx.Z)(Pe,2),Oe=Re[0],be=Re[1],Be=(0,$x.Z)({controlled:M,default:y,name:"TreeView",state:"selected"}),lt=(0,Mx.Z)(Be,2),Je=lt[0],ut=lt[1],ht=g.useCallback(function(We){return Array.isArray(Oe)?Oe.indexOf(We)!==-1:!1},[Oe]),pt=g.useCallback(function(We){return Array.isArray(Je)?Je.indexOf(We)!==-1:Je===We},[Je]),St=function(Ce){return ne===Ce},$t=function(Ce){return ye===Ce},Hn=function(Ce){var Ee=me.current.indexOf(Ce);return Ee!==-1&&Ee+1<me.current.length?me.current[Ee+1]:null},Ri=function(Ce){var Ee=me.current.indexOf(Ce);return Ee!==-1&&Ee-1>=0?me.current[Ee-1]:null},Qr=function(){return me.current[me.current.length-1]},_r=function(){return me.current[0]},Li=function(Ce){return pe.current[Ce].parent},no=function(Ce,Ee){var $e=me.current.indexOf(Ce),He=me.current.indexOf(Ee),Ye=Math.min($e,He),Ot=Math.max($e,He);return me.current.slice(Ye,Ot+1)},ir=function(Ce){Ce&&(ie(Ce),ve(Ce))},qt=function(Ce){return ir(Hn(Ce))},qr=function(Ce){return ir(Ri(Ce))},Ir=function(){return ir(_r())},as=function(){return ir(Qr())},zd=function(Ce,Ee){var $e,He,Ye=Ee.toLowerCase(),Ot=[],Mt=[];Object.keys(xe.current).forEach(function(or){var Gd=xe.current[or],Yx=pe.current[or],A4=Yx.parent?ht(Yx.parent):!0;A4&&(Ot.push(or),Mt.push(Gd))}),$e=Ot.indexOf(Ce)+1,$e===pe.current.length&&($e=0),He=Bx(Mt,$e,Ye),He===-1&&(He=Bx(Mt,0,Ye)),He>-1&&ir(Ot[He])},Dl=function(Ce){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye,$e;Oe.indexOf(Ee)!==-1?($e=Oe.filter(function(He){return He!==Ee}),ie(function(He){var Ye=pe.current[He];return He&&(Ye&&Ye.parent?Ye.parent.id:null)===Ee?Ee:He})):$e=[Ee].concat(Oe),P&&P(Ce,$e),be($e)},ro=function(Ce,Ee){var $e=pe.current[Ee],He=pe.current[$e.parent],Ye;if(He)Ye=He.children.filter(function(or){return!ht(or)});else{var Ot=pe.current[-1].children;Ye=Ot.filter(function(or){return!ht(or)})}var Mt=Oe.concat(Ye);Ye.length>0&&(be(Mt),P&&P(Ce,Mt))},sr=g.useRef(null),Ni=g.useRef(!1),Kn=g.useRef([]),Yc=function(Ce,Ee){var $e=Je,He=Ee.start,Ye=Ee.next,Ot=Ee.current;!Ye||!Ot||(Kn.current.indexOf(Ot)===-1&&(Kn.current=[]),Ni.current?Kn.current.indexOf(Ye)!==-1?($e=$e.filter(function(Mt){return Mt===He||Mt!==Ot}),Kn.current=Kn.current.filter(function(Mt){return Mt===He||Mt!==Ot})):($e.push(Ye),Kn.current.push(Ye)):($e.push(Ye),Kn.current.push(Ot,Ye)),I&&I(Ce,$e),ut($e))},Xc=function(Ce,Ee){var $e=Je,He=Ee.start,Ye=Ee.end;Ni.current&&($e=Je.filter(function(or){return Kn.current.indexOf(or)===-1}));var Ot=no(He,Ye);Kn.current=Ot;var Mt=$e.concat(Ot);Mt=Mt.filter(function(or,Gd){return Mt.indexOf(or)===Gd}),I&&I(Ce,Mt),ut(Mt)},Ud=function(Ce,Ee){var $e=[];Je.indexOf(Ee)!==-1?$e=Je.filter(function(He){return He!==Ee}):$e=[Ee].concat(Je),I&&I(Ce,$e),ut($e)},Hd=function(Ce,Ee){var $e=C?[Ee]:Ee;I&&I(Ce,$e),ut($e)},Ml=function(Ce,Ee){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Ee?($e?Ud(Ce,Ee):Hd(Ce,Ee),sr.current=Ee,Ni.current=!1,Kn.current=[],!0):!1},mn=function(Ce,Ee){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,He=Ee.start,Ye=He===void 0?sr.current:He,Ot=Ee.end,Mt=Ee.current;return $e?Yc(Ce,{start:Ye,next:Ot,current:Mt}):Xc(Ce,{start:Ye,end:Ot}),Ni.current=!0,!0},Te=function(Ce,Ee){sr.current||(sr.current=Ee);var $e=Ni.current?sr.current:Ee;return mn(Ce,{start:$e,end:_r()})},Ct=function(Ce,Ee){sr.current||(sr.current=Ee);var $e=Ni.current?sr.current:Ee;return mn(Ce,{start:$e,end:Qr()})},cs=function(Ce,Ee){return mn(Ce,{end:Hn(Ee),current:Ee},!0)},io=function(Ce,Ee){return mn(Ce,{end:Ri(Ee),current:Ee},!0)},S4=function(Ce){return mn(Ce,{start:_r(),end:Qr()})},E4=function(Ce,Ee){var $e=pe.current[Ce];pe.current[Ce]=(0,Yr.Z)({},$e,{children:Ee,id:Ce}),Ee.forEach(function(He){var Ye=pe.current[He];pe.current[He]=(0,Yr.Z)({},Ye,{parent:Ce,id:He})})},Kd=g.useCallback(function(We){var Ce=pe.current[We],Ee=[];return Ce&&(Ee.push(We),Ce.children&&(Ee.concat(Ce.children),Ce.children.forEach(function($e){Ee.concat(Kd($e))}))),Ee},[]),Hx=g.useCallback(function(We){var Ce=(0,Yr.Z)({},xe.current);We.forEach(function(Ee){Ce[Ee]&&delete Ce[Ee]}),xe.current=Ce},[]),w4=g.useCallback(function(We){var Ce=Kd(We);Hx(Ce);var Ee=(0,Yr.Z)({},pe.current);Ce.forEach(function($e){var He=Ee[$e];if(He){if(He.parent){var Ye=Ee[He.parent];if(Ye&&Ye.children){var Ot=Ye.children.filter(function(Mt){return Mt!==$e});Ee[He.parent]=(0,Yr.Z)({},Ye,{children:Ot})}}delete Ee[$e]}}),pe.current=Ee,ve(function($e){return $e===We?null:$e})},[Kd,Hx]),C4=function(Ce,Ee){xe.current[Ce]=Ee},Kx=g.useRef([]),Gx=g.useState(!1),Jx=Gx[0],O4=Gx[1];g.useEffect(function(){var We=[];g.Children.forEach(l,function(Ce){g.isValidElement(Ce)&&Ce.props.nodeId&&We.push(Ce.props.nodeId)}),gF(Kx.current,We)&&(pe.current[-1]={parent:null,children:We},We.forEach(function(Ce,Ee){Ee===0&&ie(Ce)}),me.current=pe.current[-1].children,Kx.current=We,O4(!0))},[l]),g.useEffect(function(){var We=function Ce(Ee){for(var $e=[],He=0;He<Ee.length;He+=1){var Ye=Ee[He];$e.push(Ye);var Ot=pe.current[Ye].children;ht(Ye)&&Ot&&($e=$e.concat(Ce(Ot)))}return $e};Jx&&(me.current=We(pe.current[-1].children))},[Oe,Jx,ht,l]);var us=function(){return!1};return g.createElement(Fx.Provider,{value:{icons:{defaultCollapseIcon:u,defaultExpandIcon:m,defaultParentIcon:p,defaultEndIcon:f},focus:ir,focusFirstNode:Ir,focusLastNode:as,focusNextNode:qt,focusPreviousNode:qr,focusByFirstCharacter:zd,expandAllSiblings:ro,toggleExpansion:Dl,isExpanded:ht,isFocused:$t,isSelected:pt,selectNode:E?us:Ml,selectRange:E?us:mn,selectNextNode:E?us:cs,selectPreviousNode:E?us:io,rangeSelectToFirst:E?us:Te,rangeSelectToLast:E?us:Ct,selectAllNodes:E?us:S4,isTabbable:St,multiSelect:C,getParent:Li,mapFirstChar:C4,addNodeToNodeMap:E4,removeNodeFromNodeMap:w4}},g.createElement("ul",(0,Yr.Z)({role:"tree","aria-multiselectable":C,className:(0,Lx.default)(a.root,c),ref:i},$),l))});const xF=(0,Nx.Z)(pF,{name:"MuiTreeView"})(bF);var SF=x(51209),jx=x(41128),EF=x(85974),wF=function(e){return{root:{listStyle:"none",margin:0,padding:0,outline:0,WebkitTapHighlightColor:"transparent","&:focus > $content $label":{backgroundColor:e.palette.action.hover},"&$selected > $content $label":{backgroundColor:(0,jx.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&$selected > $content $label:hover, &$selected:focus > $content $label":{backgroundColor:(0,jx.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},expanded:{},selected:{},group:{margin:0,padding:0,marginLeft:17},content:{width:"100%",display:"flex",alignItems:"center",cursor:"pointer"},iconContainer:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},label:{width:"100%",paddingLeft:4,position:"relative","&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}}},CF=function(e){return e&&e.length===1&&e.match(/\S/)},OF=g.forwardRef(function(e,i){var l=e.children,a=e.classes,c=e.className,u=e.collapseIcon,f=e.endIcon,h=e.expandIcon,d=e.icon,m=e.label,p=e.nodeId,v=e.onClick,y=e.onLabelClick,S=e.onIconClick,E=e.onFocus,w=e.onKeyDown,C=e.onMouseDown,O=e.TransitionComponent,I=O===void 0?je.Z:O,P=e.TransitionProps,M=(0,Rx.Z)(e,["children","classes","className","collapseIcon","endIcon","expandIcon","icon","label","nodeId","onClick","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","TransitionComponent","TransitionProps"]),$=g.useContext(Fx),N=$.icons,ne=$.focus,ie=$.focusFirstNode,fe=$.focusLastNode,ye=$.focusNextNode,ve=$.focusPreviousNode,pe=$.focusByFirstCharacter,xe=$.selectNode,me=$.selectRange,Pe=$.selectNextNode,Re=$.selectPreviousNode,Oe=$.rangeSelectToFirst,be=$.rangeSelectToLast,Be=$.selectAllNodes,lt=$.expandAllSiblings,Je=$.toggleExpansion,ut=$.isExpanded,ht=$.isFocused,pt=$.isSelected,St=$.isTabbable,$t=$.multiSelect,Hn=$.getParent,Ri=$.mapFirstChar,Qr=$.addNodeToNodeMap,_r=$.removeNodeFromNodeMap,Li=g.useRef(null),no=g.useRef(null),ir=(0,EF.Z)(Li,i),qt=d,qr=!!(Array.isArray(l)?l.length:l),Ir=ut?ut(p):!1,as=ht?ht(p):!1,zd=St?St(p):!1,Dl=pt?pt(p):!1,ro=N||{},sr=(0,su.Z)();qt||(qr?(Ir?qt=u||ro.defaultCollapseIcon:qt=h||ro.defaultExpandIcon,qt||(qt=ro.defaultParentIcon)):qt=f||ro.defaultEndIcon);var Ni=function(Te){as||ne(p);var Ct=$t&&(Te.shiftKey||Te.ctrlKey||Te.metaKey);qr&&!Te.defaultPrevented&&!(Ct&&ut(p))&&Je(Te,p),Ct?Te.shiftKey?me(Te,{end:p}):xe(Te,p,!0):xe(Te,p),v&&v(Te)},Kn=function(Te){(Te.shiftKey||Te.ctrlKey||Te.metaKey)&&Te.preventDefault(),C&&C(Te)},Yc=function(Te){return qr&&(Ir?ye(p):Je(Te)),!0},Xc=function(Te){if(Ir)return Je(Te,p),!0;var Ct=Hn(p);return Ct?(ne(Ct),!0):!1},Ud=function(Te){var Ct=!1,cs=Te.key;if(!(Te.altKey||Te.currentTarget!==Te.target)){var io=Te.ctrlKey||Te.metaKey;switch(cs){case" ":Li.current===Te.currentTarget&&($t&&Te.shiftKey?Ct=me(Te,{end:p}):$t?Ct=xe(Te,p,!0):Ct=xe(Te,p)),Te.stopPropagation();break;case"Enter":Li.current===Te.currentTarget&&qr&&(Je(Te),Ct=!0),Te.stopPropagation();break;case"ArrowDown":$t&&Te.shiftKey&&Pe(Te,p),ye(p),Ct=!0;break;case"ArrowUp":$t&&Te.shiftKey&&Re(Te,p),ve(p),Ct=!0;break;case"ArrowRight":sr.direction==="rtl"?Ct=Xc(Te):Ct=Yc(Te);break;case"ArrowLeft":sr.direction==="rtl"?Ct=Yc(Te):Ct=Xc(Te);break;case"Home":$t&&io&&Te.shiftKey&&Oe(Te,p),ie(),Ct=!0;break;case"End":$t&&io&&Te.shiftKey&&be(Te,p),fe(),Ct=!0;break;default:cs==="*"?(lt(Te,p),Ct=!0):$t&&io&&cs.toLowerCase()==="a"?Ct=Be(Te):!io&&!Te.shiftKey&&CF(cs)&&(pe(p,cs),Ct=!0)}Ct&&(Te.preventDefault(),Te.stopPropagation()),w&&w(Te)}},Hd=function(Te){!as&&Te.currentTarget===Te.target&&ne(p),E&&E(Te)};g.useEffect(function(){if(Qr){var mn=[];g.Children.forEach(l,function(Te){g.isValidElement(Te)&&Te.props.nodeId&&mn.push(Te.props.nodeId)}),Qr(p,mn)}},[l,p,Qr]),g.useEffect(function(){if(_r)return function(){_r(p)}},[p,_r]),g.useEffect(function(){Ri&&m&&Ri(p,no.current.textContent.substring(0,1).toLowerCase())},[Ri,p,m]),g.useEffect(function(){as&&Li.current.focus()},[as]);var Ml;return $t?Ml=Dl:Dl&&(Ml=!0),g.createElement("li",(0,Yr.Z)({className:(0,Lx.default)(a.root,c,Ir&&a.expanded,Dl&&a.selected),role:"treeitem",onKeyDown:Ud,onFocus:Hd,"aria-expanded":qr?Ir:null,"aria-selected":Ml,ref:ir,tabIndex:zd?0:-1},M),g.createElement("div",{className:a.content,onClick:Ni,onMouseDown:Kn,ref:no},g.createElement("div",{onClick:S,className:a.iconContainer},qt),g.createElement(Ve.Z,{onClick:y,component:"div",className:a.label},m)),l&&g.createElement(I,(0,Yr.Z)({unmountOnExit:!0,className:a.group,in:Ir,component:"ul",role:"group"},P),l))});const Wx=(0,Nx.Z)(wF,{name:"MuiTreeItem"})(OF),AF=(0,Y.Z)({root:{whiteSpace:"nowrap",overflowY:"auto"}});function kF(s){const e={type:"directory",name:"",path:"",children:[]};for(const i of s.slice().sort()){const l=i.split("/");let a=e;for(let c=0;c<l.length;c++){const u=l[c];if(u==="")throw new Error("Invalid path part: ''");const f=l.slice(0,c+1).join("/"),h=a.children.find(d=>d.name===u);if((h==null?void 0:h.type)==="file")throw new Error(`Duplicate filename at '${f}'`);if(h)a=h;else if(c<l.length-1){const d={type:"directory",name:u,path:f,children:[]},m=a.children.findIndex(p=>p.type==="file");a.children.splice(m,0,d),a=d}else a.children.push({type:"file",name:u,path:f})}}return e.children}function Vx({entry:s}){return s.type==="file"?g.createElement(Wx,{nodeId:s.path,label:s.name}):g.createElement(Wx,{nodeId:s.path,label:s.name},s.children.map(e=>g.createElement(Vx,{key:e.path,entry:e})))}function Zx(s){const e=AF(),i=(0,g.useMemo)(()=>kF(s.filePaths),[s.filePaths]);return g.createElement(xF,{selected:s.selected,className:e.root,defaultCollapseIcon:g.createElement(ot.Z,null),defaultExpandIcon:g.createElement(SF.Z,null),onNodeSelect:(l,a)=>{s.onSelect&&s.filePaths.includes(a)&&s.onSelect(a)}},i.map(l=>g.createElement(Vx,{key:l.path,entry:l})))}const PF=(0,Y.Z)(s=>({button:{padding:s.spacing(1)},buttons:{display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"flex-start"},buttonsGap:{flex:"1 1 auto"},buttonsDivider:{marginBottom:s.spacing(1)}}));function TF(s){var c,u;const e=PF(),i=Fd(),l=i.files.filter(f=>f.dirty),a=()=>{s.onClose&&(l.length>0&&!window.confirm("Are you sure? Unsaved changes will be lost")||s.onClose())};return g.createElement(g.Fragment,null,g.createElement("div",{className:e.buttons},g.createElement(qs.ZP,{title:"Save all files"},g.createElement(an.Z,{className:e.button,disabled:i.files.every(f=>!f.dirty),onClick:()=>i.save()},g.createElement(Dx.Z,null))),g.createElement(qs.ZP,{title:"Reload directory"},g.createElement(an.Z,{className:e.button,onClick:()=>i.reload()},g.createElement(Ix.Z,null))),g.createElement("div",{className:e.buttonsGap}),g.createElement(qs.ZP,{title:"Close directory"},g.createElement(an.Z,{className:e.button,onClick:a},g.createElement(nd.Z,null)))),g.createElement(Rr.Z,{className:e.buttonsDivider}),g.createElement(Zx,{selected:(u=(c=i.selectedFile)==null?void 0:c.path)!=null?u:"",onSelect:i.setSelectedFile,filePaths:i.files.map(f=>f.path)}))}function IF(s=!1){const e=(0,g.useRef)(s),i=(0,g.useCallback)(()=>e.current,[]);return(0,g.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),i}var zx=x(2465),Tl=x(21313);function DF(s,...e){const i=IF(),l=(0,zx.x)(e[1]),a=(0,g.useMemo)(()=>function(...c){i()&&(typeof l.current=="function"?l.current.apply(this,c):typeof l.current.handleEvent=="function"&&l.current.handleEvent.apply(this,c))},[]);(0,g.useEffect)(()=>{const c=MF(s)?s.current:s;if(!c)return;const u=e.slice(2);return(0,Tl.on)(c,e[0],a,...u),()=>{(0,Tl.S1)(c,e[0],a,...u)}},[s,e[0]])}function MF(s){return s!==null&&typeof s=="object"&&(0,Tl.nr)(s,"current")}var RF=x(55656);const LF=s=>typeof s=="function"?s:typeof s=="string"?e=>e.key===s:s?Tl.cI:Tl.Vp,NF=RF.jU?window:null;function $F(s,e,i=[],l={}){const{event:a="keydown",target:c=NF,eventOptions:u}=l,f=(0,zx.x)(e),h=(0,g.useMemo)(()=>{const d=LF(s);return function(m){d(m)&&f.current.call(this,m)}},i);DF(c,a,h,u)}const FF=(0,Y.Z)(s=>({container:{position:"relative",width:"100%",height:"100%"},codeMirror:{position:"absolute",top:0,bottom:0,left:0,right:0},errorPanel:{color:s.palette.error.main,lineHeight:2,margin:s.spacing(0,1)},floatingButtons:{position:"absolute",top:s.spacing(1),right:s.spacing(3)},floatingButton:{padding:s.spacing(1)}}));function Jc(s){const{errorText:e}=s,i=FF(),l=(0,g.useMemo)(()=>{if(!e)return Qi.of(null);const a=document.createElement("div");return a.classList.add(i.errorPanel),a.textContent=e,Qi.of(()=>({dom:a,bottom:!0}))},[i,e]);return $F(a=>a.key==="s"&&(a.ctrlKey||a.metaKey),a=>{a.preventDefault(),s.onSave&&s.onSave()}),g.createElement("div",{className:i.container},g.createElement(Kc,{className:i.codeMirror,theme:"dark",height:"100%",extensions:[Vs.define(gc),l],value:s.content,onChange:s.onUpdate}),(s.onSave||s.onReload)&&g.createElement("div",{className:i.floatingButtons},g.createElement(et.Z,null,s.onSave&&g.createElement(qs.ZP,{title:"Save file"},g.createElement(an.Z,{className:i.floatingButton,onClick:()=>{var a;return(a=s.onSave)==null?void 0:a.call(s)}},g.createElement(Dx.Z,null))),s.onReload&&g.createElement(qs.ZP,{title:"Reload file"},g.createElement(an.Z,{className:i.floatingButton,onClick:()=>{var a;return(a=s.onReload)==null?void 0:a.call(s)}},g.createElement(Ix.Z,null))))))}function BF(s){var l,a;const e=Fd(),i=(l=e.selectedFile)!=null&&l.dirty?{onSave:()=>e.save(),onReload:()=>e.reload()}:{onReload:()=>e.reload()};return g.createElement(Jc,{errorText:s.errorText,content:(a=e.selectedFile)==null?void 0:a.content,onUpdate:c=>{var u;return(u=e.selectedFile)==null?void 0:u.updateContent(c)},...i})}Jc.DirectoryEditor=BF;function jF(s){const e=(0,g.useRef)();return(0,g.useEffect)(()=>{e.current=s}),e.current}var WF=x(9520),Ux=x(98281),VF=x(22983),ZF=x(28113);function zF(s,e){const i=document.createElement("a");i.href=URL.createObjectURL(s),i.download=e,i.click(),URL.revokeObjectURL(i.href),i.remove()}const UF=(0,Y.Z)(s=>({root:{overflowY:"auto",background:s.palette.background.default},iconSuccess:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.ok},iconFailure:{minWidth:0,marginRight:s.spacing(1),color:s.palette.status.error}}));function HF(){const s=UF(),e=_s();return g.createElement(oo.Z,{className:s.root,dense:!0},e.results.map(i=>{var u;const l=i.log.some(f=>f.body.status==="failed");let a=!1;async function c(){a=!0,await KF(i.directoryContents,`dry-run-result-${i.id}.zip`),a=!1}return g.createElement(ma.Z,{button:!0,key:i.id,selected:((u=e.selectedResult)==null?void 0:u.id)===i.id,onClick:()=>e.selectResult(i.id)},g.createElement(Cn.Z,{className:l?s.iconFailure:s.iconSuccess},l?g.createElement(Pf.Z,null):g.createElement(Ux.Z,null)),g.createElement(On.Z,{primary:`Result ${i.id}`}),g.createElement(WF.Z,null,g.createElement(an.Z,{edge:"end","aria-label":"download",title:"Download as .zip",disabled:a,onClick:()=>c()},g.createElement(ZF.Z,null)),g.createElement(an.Z,{edge:"end","aria-label":"delete",title:"Delete result",onClick:()=>e.deleteResult(i.id)},g.createElement(VF.Z,null))))}))}async function KF(s,e){const{default:i}=await x.e(1297).then(x.t.bind(x,1297,23)),l=new i;for(const c of s){const u=atob(c.base64Content);await l.file(c.path,u)}const a=await l.generateAsync({type:"blob"});zF(a,e)}var jd=x(6487),GF=x(99152);const JF=(0,Y.Z)(s=>({root:{display:"grid",gridTemplateColumns:"280px auto 3fr",gridTemplateRows:"1fr"},child:{overflowY:"auto",height:"100%",minHeight:0},firstChild:{background:s.palette.background.paper}}));function Wd(s){const e=JF(),i=g.Children.toArray(s.children);if(i.length!==2)throw new Error("must have exactly 2 children");return g.createElement("div",{className:e.root},g.createElement("div",{className:wn()(e.child,e.firstChild)},i[0]),g.createElement(Rr.Z,{orientation:"horizontal"}),g.createElement("div",{className:e.child},i[1]))}const YF=(0,Y.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),XF=s=>{const{href:e,text:i,Icon:l,...a}=s,c=YF();return g.createElement(Ae.Z,{container:!0,direction:"row",spacing:1},g.createElement(Ae.Z,{item:!0},g.createElement(Ve.Z,{component:"div",className:c.svgIcon},l?g.createElement(l,null):g.createElement(co.Z,null))),g.createElement(Ae.Z,{item:!0},g.createElement(so.rU,{to:e,...a},i||e)))},QF=({output:s})=>{const{links:e=[]}=s,i=(0,lo.q)(),l=(0,ft.t)(Xg.w),a=c=>{var u;return c&&(u=i.getSystemIcon(c))!=null?u:co.Z};return g.createElement(he.Z,{px:3,pb:3},e.filter(({url:c,entityRef:u})=>c||u).map(({url:c,entityRef:u,title:f,icon:h})=>{if(u){const d=(0,Xn.of)(u,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),m=l(d);return{title:f,icon:h,url:m}}return{title:f,icon:h,url:c}}).map(({url:c,title:u,icon:f},h)=>g.createElement(XF,{key:`output-link-${h}`,href:c,text:u!=null?u:c,Icon:a(f),target:"_blank"})))};var _F=x(16874);const qF=(0,Y.Z)(s=>(0,mf.Z)({root:{width:"100%"},button:{marginBottom:s.spacing(2),marginLeft:s.spacing(2)},actionsContainer:{marginBottom:s.spacing(2)},resetContainer:{padding:s.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),e4=(0,Y.Z)(s=>(0,mf.Z)({root:{color:s.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:s.palette.status.ok},error:{color:s.palette.status.error}})),t4=({step:s})=>{const[e,i]=(0,g.useState)("");return qg(()=>{if(!s.startedAt){i("");return}const l=s.endedAt?Fn.ou.fromISO(s.endedAt):Fn.ou.local(),a=Fn.ou.fromISO(s.startedAt),c=Fn.Xp.fromDateTimes(a,l).toDuration().valueOf();i(nu()(c,{round:!0}))},1e3),g.createElement(Ve.Z,{variant:"caption"},e)};function n4(s){const e=e4(),{active:i,completed:l,error:a}=s,c=()=>i?g.createElement(_g.Z,{size:"24px"}):l?g.createElement(Ux.Z,null):a?g.createElement(Pf.Z,null):g.createElement(_F.Z,null);return g.createElement("div",{className:wn()(e.root,{[e.completed]:l,[e.error]:a})},c())}const r4=(0,g.memo)(s=>{const{steps:e,currentStepId:i,onUserStepChange:l}=s,a=qF(s);return g.createElement("div",{className:a.root},g.createElement(ou.Z,{activeStep:e.findIndex(c=>c.id===i),orientation:"vertical",nonLinear:!0},e.map((c,u)=>{const f=c.status==="cancelled",h=c.status==="processing",d=c.status==="completed",m=c.status==="failed",p=c.status==="skipped";return g.createElement(Bl.Z,{key:String(u),expanded:!0},g.createElement(Qg.Z,{onClick:()=>l(c.id)},g.createElement(jl.Z,{StepIconProps:{completed:d,error:m||f,active:h},StepIconComponent:n4,className:a.stepWrapper},g.createElement("div",{className:a.labelWrapper},g.createElement(Ve.Z,{variant:"subtitle2"},c.name),p?g.createElement(Ve.Z,{variant:"caption"},"Skipped"):g.createElement(t4,{step:c})))))})))}),Vd=(0,Y.Z)({root:{display:"flex",flexFlow:"column nowrap"},contentWrapper:{flex:1,position:"relative"},content:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex","& > *":{flex:1}},codeMirror:{height:"100%",overflowY:"auto"}});function i4(){const s=Vd(),{selectedResult:e}=_s(),[i,l]=(0,g.useState)(""),a=e==null?void 0:e.directoryContents.find(c=>c.path===i);return(0,g.useEffect)(()=>{if(e){const[c]=e.directoryContents;l(c?c.path:"")}},[e]),e?g.createElement(Wd,null,g.createElement(Zx,{selected:i,onSelect:l,filePaths:e.directoryContents.map(c=>c.path)}),g.createElement(Kc,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[Vs.define(gc)],readOnly:!0,value:a!=null&&a.base64Content?atob(a.base64Content):""})):null}function s4(){var c,u;const{selectedResult:s}=_s(),[e,i]=(0,g.useState)(),l=(0,g.useMemo)(()=>{var f;return s?(f=s.steps.map(h=>{var m,p;const d=s.log.filter(v=>v.body.stepId===h.id);return{id:h.id,name:h.name,logString:d.map(v=>v.body.message).join(`
`),status:(p=(m=d[d.length-1])==null?void 0:m.body.status)!=null?p:"completed"}}))!=null?f:[]:[]},[s]);if(!s)return null;const a=(c=l.find(f=>f.id===e))!=null?c:l[0];return g.createElement(Wd,null,g.createElement(r4,{steps:l,currentStepId:a.id,onUserStepChange:i}),g.createElement(e0.n,{text:(u=a==null?void 0:a.logString)!=null?u:""}))}function o4(){var i,l;const s=Vd(),{selectedResult:e}=_s();return e?g.createElement(Wd,null,g.createElement(he.Z,{pt:2},((l=(i=e.output)==null?void 0:i.links)==null?void 0:l.length)&&g.createElement(QF,{output:e.output})),g.createElement(Kc,{className:s.codeMirror,theme:"dark",height:"100%",extensions:[Vs.define(gc)],readOnly:!0,value:JSON.stringify(e.output,null,2)})):null}function l4(){const s=Vd(),[e,i]=(0,g.useState)("files");return g.createElement("div",{className:s.root},g.createElement(GF.Z,{value:e,onChange:(l,a)=>i(a)},g.createElement(jd.Z,{value:"files",label:"Files"}),g.createElement(jd.Z,{value:"log",label:"Log"}),g.createElement(jd.Z,{value:"output",label:"Output"})),g.createElement(Rr.Z,null),g.createElement("div",{className:s.contentWrapper},g.createElement("div",{className:s.content},e==="files"&&g.createElement(i4,null),e==="log"&&g.createElement(s4,null),e==="output"&&g.createElement(o4,null))))}const a4=(0,Y.Z)(s=>({header:{height:48,minHeight:0,"&.Mui-expanded":{height:48,minHeight:0}},content:{display:"grid",background:s.palette.background.default,gridTemplateColumns:"180px auto 1fr",gridTemplateRows:"1fr",padding:0,height:400}}));function c4(){const s=a4(),e=_s(),[i,l]=(0,g.useState)(!1),[a,c]=(0,g.useState)(!0),u=e.results.length,f=jF(u);return(0,g.useEffect)(()=>{f===0&&u===1?(c(!1),l(!0)):f===1&&u===0&&l(!1)},[f,u]),g.createElement(g.Fragment,null,g.createElement(qe.Z,{variant:"outlined",expanded:i,hidden:u===0&&a,onChange:(h,d)=>l(d),onTransitionEnd:()=>u===0&&c(!0)},g.createElement(fs.Z,{className:s.header,expandIcon:g.createElement(ar.Z,null)},g.createElement(Ve.Z,null,"Dry-run results")),g.createElement(Rr.Z,{orientation:"horizontal"}),g.createElement(Rl.Z,{className:s.content},g.createElement(HF,null),g.createElement(Rr.Z,{orientation:"horizontal"}),g.createElement(l4,null))))}const u4=(0,Y.Z)({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "browser editor preview"
      "results results results"
    `,gridTemplateColumns:"1fr 3fr 2fr",gridTemplateRows:"1fr auto"},browser:{gridArea:"browser",overflow:"auto"},editor:{gridArea:"editor",overflow:"auto"},preview:{gridArea:"preview",overflow:"auto"},results:{gridArea:"results"}}),f4=s=>{const e=u4(),[i,l]=(0,g.useState)();return g.createElement(aF,{directory:s.directory},g.createElement(tF,null,g.createElement("main",{className:e.root},g.createElement("section",{className:e.browser},g.createElement(TF,{onClose:s.onClose})),g.createElement("section",{className:e.editor},g.createElement(Jc.DirectoryEditor,{errorText:i})),g.createElement("section",{className:e.preview},g.createElement(Pl.DirectoryEditorDryRun,{setErrorText:l,fieldExtensions:s.fieldExtensions,layouts:s.layouts})),g.createElement("section",{className:e.results},g.createElement(c4,null)))))};var h4=x(51847);const d4=`# Edit the template parameters below to see how they will render in the scaffolder form UI
parameters:
  - title: Fill in some steps
    required:
      - name
    properties:
      name:
        title: Name
        type: string
        description: Unique name of the component
      owner:
        title: Owner
        type: string
        description: Owner of the component
        ui:field: OwnerPicker
        ui:options:
          catalogFilter:
            kind: Group
  - title: Choose a location
    required:
      - repoUrl
    properties:
      repoUrl:
        title: Repository Location
        type: string
        ui:field: RepoUrlPicker
        ui:options:
          allowedHosts:
            - github.com
steps:
  - id: fetch-base
    name: Fetch Base
    action: fetch:template
    input:
      url: ./template
      values:
        name: \${{parameters.name}}
`,m4=(0,Y.Z)(s=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "textArea preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:s.spacing(1)},textArea:{gridArea:"textArea"},preview:{gridArea:"preview"}})),p4=({defaultPreviewTemplate:s=d4,customFieldExtensions:e=[],onClose:i,layouts:l=[]})=>{const a=m4(),c=(0,at.h_)(rm.$),u=(0,at.h_)(Nl.A),[f,h]=(0,g.useState)(""),[d,m]=(0,g.useState)(),[p,v]=(0,g.useState)([]),[y,S]=(0,g.useState)(s),{loading:E}=(0,Mr.Z)(()=>u.getEntities({filter:{kind:"template"},fields:["kind","metadata.namespace","metadata.name","metadata.title","spec.parameters","spec.steps","spec.output"]}).then(({items:C})=>v(C.map(O=>{var I;return{label:(I=O.metadata.title)!=null?I:(0,h4.$)(O,{defaultKind:"template"}),value:O}}))).catch(C=>c.post({message:`Error loading exisiting templates: ${C.message}`,severity:"error"})),[u]),w=(0,g.useCallback)(C=>{h(C),S(Gc.ZP.stringify(C.spec))},[S]);return g.createElement(g.Fragment,null,E&&g.createElement(Wl.Z,null),g.createElement("main",{className:a.root},g.createElement("div",{className:a.controls},g.createElement(Z.Z,{variant:"outlined",size:"small",fullWidth:!0},g.createElement(ce.Z,{id:"select-template-label"},"Load Existing Template"),g.createElement(D1.Z,{value:f,label:"Load Existing Template",labelId:"select-template-label",onChange:C=>w(C.target.value)},p.map((C,O)=>g.createElement(An.Z,{key:O,value:C.value},C.label)))),g.createElement(an.Z,{size:"medium",onClick:i},g.createElement(nd.Z,null))),g.createElement("div",{className:a.textArea},g.createElement(Jc,{content:y,onUpdate:S,errorText:d})),g.createElement("div",{className:a.preview},g.createElement(Pl,{content:y,contentIsSpec:!0,fieldExtensions:e,setErrorText:m,layouts:l}))))};var Zd=x(25417),g4=x(82726);const y4=(0,Y.Z)(s=>({introText:{textAlign:"center",marginTop:s.spacing(2)},card:{position:"relative",maxWidth:340,marginTop:s.spacing(4),margin:s.spacing(0,2)},infoIcon:{position:"absolute",top:s.spacing(1),right:s.spacing(1)}}));function v4(s){const e=y4(),i=t0.isSupported(),l=g.createElement(ti.Z,{className:e.card,elevation:4},g.createElement(Zd.Z,{disabled:!i,onClick:()=>{var u;return(u=s.onSelect)==null?void 0:u.call(s,"local")}},g.createElement(gs.Z,null,g.createElement(Ve.Z,{variant:"h4",component:"h3",gutterBottom:!0,color:i?void 0:"textSecondary",style:{display:"flex",flexFlow:"row nowrap"}},"Load Template Directory"),g.createElement(Ve.Z,{variant:"body1",color:i?void 0:"textSecondary"},"Load a local template directory, allowing you to both edit and try executing your own template."))),!i&&g.createElement("div",{className:e.infoIcon},g.createElement(qs.ZP,{placement:"top",title:"Only supported in some Chromium-based browsers"},g.createElement(g4.Z,null)))),a=g.createElement(ti.Z,{className:e.card,elevation:4},g.createElement(Zd.Z,{onClick:()=>{var u;return(u=s.onSelect)==null?void 0:u.call(s,"form")}},g.createElement(gs.Z,null,g.createElement(Ve.Z,{variant:"h4",component:"h3",gutterBottom:!0},"Edit Template Form"),g.createElement(Ve.Z,{variant:"body1"},"Preview and edit a template form, either using a sample template or by loading a template from the catalog.")))),c=g.createElement(ti.Z,{className:e.card,elevation:4},g.createElement(Zd.Z,{onClick:()=>{var u;return(u=s.onSelect)==null?void 0:u.call(s,"field-explorer")}},g.createElement(gs.Z,null,g.createElement(Ve.Z,{variant:"h4",component:"h3",gutterBottom:!0},"Custom Field Explorer"),g.createElement(Ve.Z,{variant:"body1"},"View and play around with available installed custom field extensions."))));return g.createElement("div",{style:s.style},g.createElement(Ve.Z,{variant:"h4",component:"h2",className:e.introText},"Get started by choosing one of the options below"),g.createElement("div",{style:{display:"flex",flexFlow:"row wrap",alignItems:"flex-start",justifyContent:"center",alignContent:"flex-start"}},i&&l,a,!i&&l,c))}function b4(s){const[e,i]=(0,g.useState)(),l=(0,F.s0)(),a=(0,ft.t)(rt._H),c=(0,ft.t)(rt.p3),u=(0,ft.t)(rt._Z),f={onEditorClicked:void 0,onActionsClicked:()=>l(a()),onTasksClicked:()=>l(c()),onCreateClicked:()=>l(u())};let h=null;return(e==null?void 0:e.type)==="local"?h=g.createElement(f4,{directory:e.directory,fieldExtensions:s.customFieldExtensions,onClose:()=>i(void 0),layouts:s.layouts}):(e==null?void 0:e.type)==="form"?h=g.createElement(p4,{defaultPreviewTemplate:s.defaultPreviewTemplate,customFieldExtensions:s.customFieldExtensions,onClose:()=>i(void 0),layouts:s.layouts}):(e==null?void 0:e.type)==="field-explorer"?h=g.createElement(dF,{customFieldExtensions:s.customFieldExtensions,onClose:()=>i(void 0)}):h=g.createElement(Fi.V,null,g.createElement(v4,{onSelect:d=>{d==="local"?t0.requestDirectoryAccess().then(m=>i({type:"local",directory:m})).catch(()=>{}):d==="form"?i({type:"form"}):d==="field-explorer"&&i({type:"field-explorer"})}})),g.createElement(ds.T,{themeId:"home"},g.createElement(ms.h,{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms"},g.createElement(Ll,{...f})),h)}const x4=s=>{const{components:{TemplateCardComponent:e,TaskPageComponent:i=FT,ReviewStepComponent:l,EXPERIMENTAL_TemplateOutputsComponent:a,EXPERIMENTAL_TemplateListPageComponent:c=_S,EXPERIMENTAL_TemplateWizardPageComponent:u=QP}={}}=s,f=(0,F.pC)()||s.children,h=J(f),d=[...h,...Et.filter(({name:p})=>!h.some(v=>v.name===p))],m=k(f);return g.createElement(F.Z5,null,g.createElement(F.AW,{path:"/",element:g.createElement(c,{TemplateCardComponent:e,contextMenu:s.contextMenu,groups:s.groups,templateFilter:s.templateFilter,headerOptions:s.headerOptions})}),g.createElement(F.AW,{path:rt.QQ.path,element:g.createElement(L.A,null,g.createElement(u,{headerOptions:s.headerOptions,customFieldExtensions:d,layouts:m,components:{ReviewStepComponent:l},formProps:s.formProps}))}),g.createElement(F.AW,{path:rt.gV.path,element:g.createElement(i,{TemplateOutputsComponent:a})}),g.createElement(F.AW,{path:rt.Wp.path,element:g.createElement(L.A,null,g.createElement(b4,{customFieldExtensions:d,layouts:m}))}),g.createElement(F.AW,{path:rt._H.path,element:g.createElement(rS,null)}),g.createElement(F.AW,{path:rt.p3.path,element:g.createElement(gS,null)}),g.createElement(F.AW,{path:"*",element:g.createElement($i.m,{status:"404",statusMessage:"Page not found"})}))}},70595:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");B.Z=J},15026:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint");B.Z=J},22983:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");B.Z=J},16715:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");B.Z=J},84905:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");B.Z=J},16874:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");B.Z=J},28113:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp");B.Z=J},82726:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");B.Z=J},5075:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");B.Z=J},34063:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"PanoramaFishEye");B.Z=J},49423:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");B.Z=J},71140:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");B.Z=J},93269:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}),"Repeat");B.Z=J},96401:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");B.Z=J},8198:(Q,B,x)=>{"use strict";var j,g=x(71600),F=x(34590);j={value:!0},B.Z=void 0;var A=F(x(2784)),z=g(x(50175)),J=(0,z.default)(A.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");B.Z=J},67142:function(Q){(function(B,x){Q.exports=x()})(typeof self!="undefined"?self:this,()=>(()=>{"use strict";var B={d:(U,se)=>{for(var de in se)B.o(se,de)&&!B.o(U,de)&&Object.defineProperty(U,de,{enumerable:!0,get:se[de]})},o:(U,se)=>Object.prototype.hasOwnProperty.call(U,se),r:U=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})}},x={};function j(U){return U==="#"||U===""||Array.isArray(U)&&U.length===0||!1}B.r(x),B.d(x,{default:()=>ce,get:()=>k,isRoot:()=>j,join:()=>ee,remove:()=>X,removeUndefinedItems:()=>G,set:()=>q,split:()=>R,splitLast:()=>le});const g=/~1/g,F=/~0/g,A=/\/+/g,z=/(^[#/]*|\/+$)/g;function J(U){return U.replace(g,"/").replace(F,"~")}function D(U){return J(decodeURIComponent(U))}function R(U){if(U==null||typeof U!="string"||j(U))return Array.isArray(U)?U:[];const se=U.indexOf("#")>=0?D:J,de=(U=(U=U.replace(A,"/")).replace(z,"")).split("/");for(let ue=0,te=de.length;ue<te;ue+=1)de[ue]=se(de[ue]);return de}function k(U,se,de=void 0){if(se==null||U==null)return de;if(j(se))return U;const ue=L(U,R(se));return ue===void 0?de:ue}function L(U,se){const de=se.shift();if(U!==void 0)return de!==void 0?L(U[de],se):U}const W=/^\[.*\]$/,K=/^\[(.+)\]$/;function H(U,se){return U==="__proto__"||U=="constructor"&&se.length>0&&se[0]=="prototype"}function q(U,se,de){if(se==null)return U;const ue=R(se);if(ue.length===0)return U;U==null&&(U=W.test(ue[0])?[]:{});let te,ge,Ze=U;for(;ue.length>1;)te=ue.shift(),ge=W.test(ue[0]),H(te,ue)||(Ze=V(Ze,te,ge));return te=ue.pop(),re(Ze,te,de),U}function re(U,se,de){let ue;const te=se.match(K);se==="[]"&&Array.isArray(U)?U.push(de):te?(ue=te.pop(),U[ue]=de):U[se]=de}function V(U,se,de){if(U[se]!=null)return U[se];const ue=de?[]:{};return re(U,se,ue),ue}function G(U){let se=0,de=0;for(;se+de<U.length;)U[se+de]===void 0&&(de+=1),U[se]=U[se+de],se+=1;return U.length=U.length-de,U}function X(U,se,de){const ue=R(se),te=ue.pop(),ge=k(U,ue);return ge&&delete ge[te],Array.isArray(ge)&&de!==!0&&G(ge),U}const _=/\/+/g,b=/~/g,Z=/\//g;function Y(U,se){if(U.length===0)return se?"#":"";for(let de=0,ue=U.length;de<ue;de+=1)U[de]=U[de].replace(b,"~0").replace(Z,"~1"),se&&(U[de]=encodeURIComponent(U[de]));return((se?"#/":"/")+U.join("/")).replace(_,"/")}function ee(U,...se){const de=[];if(Array.isArray(U))return Y(U,arguments[1]===!0);const ue=arguments[arguments.length-1],te=typeof ue=="boolean"?ue:U&&U[0]==="#";for(let Ze=0,Xe=arguments.length;Ze<Xe;Ze+=1)de.push.apply(de,R(arguments[Ze]));const ge=[];for(let Ze=0,Xe=de.length;Ze<Xe;Ze+=1)if(de[Ze]===".."){if(ge.length===0)return te?"#":"";ge.pop()}else ge.push(de[Ze]);return Y(ge,te)}function le(U){const se=R(U);if(se.length===0)return typeof U=="string"&&U[0]==="#"?["#",se[0]]:["",void 0];if(se.length===1)return U[0]==="#"?["#",se[0]]:["",se[0]];const de=se.pop();return[ee(se,U[0]==="#"),de]}const ce={get:k,set:q,remove:X,join:ee,split:R,splitLast:le,isRoot:j,removeUndefinedItems:G};return x})())},95694:(Q,B)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.formatNames=B.fastFormats=B.fullFormats=void 0;function x(le,ce){return{validate:le,compare:ce}}B.fullFormats={date:x(A,z),time:x(D,R),"date-time":x(L,W),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:q,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:ee,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:V,int32:{type:"number",validate:_},int64:{type:"number",validate:b},float:{type:"number",validate:Z},double:{type:"number",validate:Z},password:!0,binary:!0},B.fastFormats={...B.fullFormats,date:x(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,z),time:x(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,R),"date-time":x(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,W),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},B.formatNames=Object.keys(B.fullFormats);function j(le){return le%4===0&&(le%100!==0||le%400===0)}const g=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,F=[0,31,28,31,30,31,30,31,31,30,31,30,31];function A(le){const ce=g.exec(le);if(!ce)return!1;const U=+ce[1],se=+ce[2],de=+ce[3];return se>=1&&se<=12&&de>=1&&de<=(se===2&&j(U)?29:F[se])}function z(le,ce){if(le&&ce)return le>ce?1:le<ce?-1:0}const J=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function D(le,ce){const U=J.exec(le);if(!U)return!1;const se=+U[1],de=+U[2],ue=+U[3],te=U[5];return(se<=23&&de<=59&&ue<=59||se===23&&de===59&&ue===60)&&(!ce||te!=="")}function R(le,ce){if(!(le&&ce))return;const U=J.exec(le),se=J.exec(ce);if(U&&se)return le=U[1]+U[2]+U[3]+(U[4]||""),ce=se[1]+se[2]+se[3]+(se[4]||""),le>ce?1:le<ce?-1:0}const k=/t|\s/i;function L(le){const ce=le.split(k);return ce.length===2&&A(ce[0])&&D(ce[1],!0)}function W(le,ce){if(!(le&&ce))return;const[U,se]=le.split(k),[de,ue]=ce.split(k),te=z(U,de);if(te!==void 0)return te||R(se,ue)}const K=/\/|:/,H=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function q(le){return K.test(le)&&H.test(le)}const re=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function V(le){return re.lastIndex=0,re.test(le)}const G=-(2**31),X=2**31-1;function _(le){return Number.isInteger(le)&&le<=X&&le>=G}function b(le){return Number.isInteger(le)}function Z(){return!0}const Y=/[^\\]\\Z/;function ee(le){if(Y.test(le))return!1;try{return new RegExp(le),!0}catch{return!1}}},75289:(Q,B,x)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});const j=x(95694),g=x(57951),F=x(15923),A=new F.Name("fullFormats"),z=new F.Name("fastFormats"),J=(R,k={keywords:!0})=>{if(Array.isArray(k))return D(R,k,j.fullFormats,A),R;const[L,W]=k.mode==="fast"?[j.fastFormats,z]:[j.fullFormats,A],K=k.formats||j.formatNames;return D(R,K,L,W),k.keywords&&g.default(R),R};J.get=(R,k="full")=>{const W=(k==="fast"?j.fastFormats:j.fullFormats)[R];if(!W)throw new Error(`Unknown format "${R}"`);return W};function D(R,k,L,W){var K,H;(K=(H=R.opts.code).formats)!==null&&K!==void 0||(H.formats=F._`require("ajv-formats/dist/formats").${W}`);for(const q of k)R.addFormat(q,L[q])}Q.exports=B=J,Object.defineProperty(B,"__esModule",{value:!0}),B.default=J},57951:(Q,B,x)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.formatLimitDefinition=void 0;const j=x(27991),g=x(15923),F=g.operators,A={formatMaximum:{okStr:"<=",ok:F.LTE,fail:F.GT},formatMinimum:{okStr:">=",ok:F.GTE,fail:F.LT},formatExclusiveMaximum:{okStr:"<",ok:F.LT,fail:F.GTE},formatExclusiveMinimum:{okStr:">",ok:F.GT,fail:F.LTE}},z={message:({keyword:D,schemaCode:R})=>g.str`should be ${A[D].okStr} ${R}`,params:({keyword:D,schemaCode:R})=>g._`{comparison: ${A[D].okStr}, limit: ${R}}`};B.formatLimitDefinition={keyword:Object.keys(A),type:"string",schemaType:"string",$data:!0,error:z,code(D){const{gen:R,data:k,schemaCode:L,keyword:W,it:K}=D,{opts:H,self:q}=K;if(!H.validateFormats)return;const re=new j.KeywordCxt(K,q.RULES.all.format.definition,"format");re.$data?V():G();function V(){const _=R.scopeValue("formats",{ref:q.formats,code:H.code.formats}),b=R.const("fmt",g._`${_}[${re.schemaCode}]`);D.fail$data(g.or(g._`typeof ${b} != "object"`,g._`${b} instanceof RegExp`,g._`typeof ${b}.compare != "function"`,X(b)))}function G(){const _=re.schema,b=q.formats[_];if(!b||b===!0)return;if(typeof b!="object"||b instanceof RegExp||typeof b.compare!="function")throw new Error(`"${W}": format "${_}" does not define "compare" function`);const Z=R.scopeValue("formats",{key:_,ref:b,code:H.code.formats?g._`${H.code.formats}${g.getProperty(_)}`:void 0});D.fail$data(X(Z))}function X(_){return g._`${_}.compare(${k}, ${L}) ${A[W].fail} 0`}},dependencies:["format"]};const J=D=>(D.addKeyword(B.formatLimitDefinition),D);B.default=J},93948:(Q,B,x)=>{"use strict";var j=x(87245),g=x(63772),F=x(8615),A=Math.pow(2,31)-1;function z(R,k){var L=1,W;if(R===0)return k;if(k===0)return R;for(;R%2===0&&k%2===0;)R=R/2,k=k/2,L=L*2;for(;R%2===0;)R=R/2;for(;k;){for(;k%2===0;)k=k/2;R>k&&(W=k,k=R,R=W),k=k-R}return L*R}function J(R,k){var L=0,W;if(R===0)return k;if(k===0)return R;for(;!(R&1)&&!(k&1);)R>>>=1,k>>>=1,L++;for(;!(R&1);)R>>>=1;for(;k;){for(;!(k&1);)k>>>=1;R>k&&(W=k,k=R,R=W),k=k-R}return R<<L}function D(){var R=arguments.length,k,L,W,K,H,q,re;for(k=new Array(R),re=0;re<R;re++)k[re]=arguments[re];if(g(k)){if(R===2)return H=k[0],q=k[1],H<0&&(H=-H),q<0&&(q=-q),H<=A&&q<=A?J(H,q):z(H,q);W=k}else if(j(k[0]))if(R>1){if(W=k[0],L=k[1],!F(L))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+L+"`.")}else W=k[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+k[0]+"`.");if(K=W.length,K<2)return null;if(L){for(H=new Array(K),re=0;re<K;re++)H[re]=L(W[re],re);W=H}if(R<3&&!g(W))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+W+"`.");for(re=0;re<K;re++)H=W[re],H<0&&(W[re]=-H);for(H=W[0],re=1;re<K;re++)q=W[re],q<=A&&H<=A?H=J(H,q):H=z(H,q);return H}Q.exports=D},90852:(Q,B,x)=>{"use strict";var j=x(93948),g=x(87245),F=x(63772),A=x(8615);function z(){var J=arguments.length,D,R,k,L,W,K,H;for(D=new Array(J),H=0;H<J;H++)D[H]=arguments[H];if(F(D)){if(J===2)return W=D[0],K=D[1],W<0&&(W=-W),K<0&&(K=-K),W===0||K===0?0:W/j(W,K)*K;k=D}else if(g(D[0]))if(J>1){if(k=D[0],R=D[1],!A(R))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+R+"`.")}else k=D[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+D[0]+"`.");if(L=k.length,L<2)return null;if(R){for(W=new Array(L),H=0;H<L;H++)W[H]=R(k[H],H);k=W}if(J<3&&!F(k))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+k+"`.");for(H=0;H<L;H++)W=k[H],W<0&&(k[H]=-W);for(W=k[0],H=1;H<L;H++){if(K=k[H],W===0||K===0)return 0;W=W/j(W,K)*K}return W}Q.exports=z},39714:Q=>{"use strict";var B=function(G){return x(G)&&!j(G)};function x(V){return!!V&&typeof V=="object"}function j(V){var G=Object.prototype.toString.call(V);return G==="[object RegExp]"||G==="[object Date]"||A(V)}var g=typeof Symbol=="function"&&Symbol.for,F=g?Symbol.for("react.element"):60103;function A(V){return V.$$typeof===F}function z(V){return Array.isArray(V)?[]:{}}function J(V,G){return G.clone!==!1&&G.isMergeableObject(V)?q(z(V),V,G):V}function D(V,G,X){return V.concat(G).map(function(_){return J(_,X)})}function R(V,G){if(!G.customMerge)return q;var X=G.customMerge(V);return typeof X=="function"?X:q}function k(V){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(V).filter(function(G){return Object.propertyIsEnumerable.call(V,G)}):[]}function L(V){return Object.keys(V).concat(k(V))}function W(V,G){try{return G in V}catch{return!1}}function K(V,G){return W(V,G)&&!(Object.hasOwnProperty.call(V,G)&&Object.propertyIsEnumerable.call(V,G))}function H(V,G,X){var _={};return X.isMergeableObject(V)&&L(V).forEach(function(b){_[b]=J(V[b],X)}),L(G).forEach(function(b){K(V,b)||(W(V,b)&&X.isMergeableObject(G[b])?_[b]=R(b,X)(V[b],G[b],X):_[b]=J(G[b],X))}),_}function q(V,G,X){X=X||{},X.arrayMerge=X.arrayMerge||D,X.isMergeableObject=X.isMergeableObject||B,X.cloneUnlessOtherwiseSpecified=J;var _=Array.isArray(G),b=Array.isArray(V),Z=_===b;return Z?_?X.arrayMerge(V,G,X):H(V,G,X):J(G,X)}q.all=function(G,X){if(!Array.isArray(G))throw new Error("first argument should be an array");return G.reduce(function(_,b){return q(_,b,X)},{})};var re=q;Q.exports=re},44091:(Q,B,x)=>{"use strict";var j;j={value:!0};const g=x(73961);var F;(function(A){A.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],A.defaultParser=new g.Parser(A.RULES,{debug:!1});const z=/^(!|&)/,J=/(\?|\+|\*)$/,D=/^%/;function R(Z,Y){if(typeof Z=="string"){if(z.test(Z))return"";if(D.test(Z)){let le=J.exec(Z),ce=le?le[0]+" ":"";return k(Z,Y)?W(Z,Y)+ce:"("+W(Z,Y)+")"+ce}return Z}else return Z.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function k(Z,Y){let ee=g.findRuleByName(Z,Y);return ee&&ee.bnf.length==1&&ee.bnf[0].length==1&&(ee.bnf[0][0]instanceof RegExp||ee.bnf[0][0][0]=='"'||ee.bnf[0][0][0]=="'")}function L(Z,Y){return Z.map(ee=>R(ee,Y)).join(" ")}function W(Z,Y){let ee=g.findRuleByName(Z,Y);return ee?ee.bnf.map(le=>L(le,Y)).join(" | "):"RULE_NOT_FOUND {"+Z+"}"}function K(Z){let Y=[];return Z.grammarRules.forEach(ee=>{if(!/^%/.test(ee.name)){let le=ee.recover?" /* { recoverUntil="+ee.recover+" } */":"";Y.push(ee.name+" ::= "+W(ee.name,Z)+le)}}),Y.join(`
`)}A.emit=K;let H=0;function q(Z,Y){throw console.log("reberia restar "+Y+" a "+Z),new Error("Difference not supported yet")}function re(Z){return new RegExp(Z.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function V(Z,Y,ee){let le=null,ce=[];return Y.children.forEach((U,se)=>{U.type=="Minus"&&q(le,U);let de=Y.children[se+1];de=de&&de.type=="PrimaryDecoration"&&de.text||"";let ue="";switch(U.type){case"SubItem":let te="%"+(ee+H++);G(Z,U,te),ce.push(ue+te+de);break;case"NCName":case"StringLiteral":ce.push(ue+U.text+de);break;case"CharCode":case"CharClass":if(de||ue){let ge={name:"%"+(ee+H++),bnf:[[re(U.text)]]};Z.push(ge),ce.push(ue+ge.name+de)}else ce.push(re(U.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+U.type+" -> "+JSON.stringify(U.text))}le=U}),ce}function G(Z,Y,ee){let le=Y.children.filter(se=>se.type=="SequenceOrDifference").map(se=>V(Z,se,ee)),ce={name:ee,bnf:le},U=null;le.forEach(se=>{U=U||se.recover,delete se.recover}),ee.indexOf("%")==0&&(ce.fragment=!0),U&&(ce.recover=U),Z.push(ce)}function X(Z,Y=A.defaultParser){let ee=Y.getAST(Z);if(!ee)throw new Error("Could not parse "+Z);if(ee.errors&&ee.errors.length)throw ee.errors[0];let le=[];return ee.children.filter(ce=>ce.type=="Production").map(ce=>{let U=ce.children.filter(se=>se.type=="NCName")[0].text;G(le,ce,U)}),le}A.getRules=X;function _(Z,Y=A.defaultParser){return X(Z.join(""),Y)}A.Transform=_;class b extends g.Parser{constructor(Y,ee){const le=ee&&ee.debugRulesParser===!0?new g.Parser(A.RULES,{debug:!0}):A.defaultParser;super(X(Y,le),ee)}emitSource(){return K(this)}}A.Parser=b})(F||(F={})),B.Z=F},73961:(Q,B,x)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.Parser=B.findRuleByName=B.parseRuleName=B.escapeRegExp=B.readToken=void 0;const j=/^[A-Z0-9_]+$/,g=/(\?|\+|\*)$/,F=/^(@|&|!)/,A="WS",z=x(80707);function J(V,G){let X=G.exec(V);return X&&X.index==0?X[0].length==0&&G.source.length>0?null:{type:null,text:X[0],rest:V.substr(X[0].length),start:0,end:X[0].length-1,fullText:X[0],errors:[],children:[],parent:null}:null}B.readToken=J;function D(V){return V.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}B.escapeRegExp=D;function R(V){V.rest="",V.children&&V.children.forEach(G=>R(G))}function k(V,G){V.start+=G,V.end+=G,V.children&&V.children.forEach(X=>k(X,V.start))}function L(V,G){G.errors&&G.errors.length&&G.errors.forEach(X=>V.push(X)),G.children&&G.children.forEach(X=>L(V,X))}function W(V){let G=g.exec(V),X=F.exec(V),_=G&&G[0]||"",b=X&&X[0]||"",Z={raw:V,name:V.replace(g,"").replace(F,""),isOptional:_=="?"||_=="*",allowRepetition:_=="+"||_=="*",atLeastOne:_=="+",lookupPositive:b=="&",lookupNegative:b=="!",pinned:b=="@",lookup:!1,isLiteral:!1};return Z.isLiteral=Z.name[0]=="'"||Z.name[0]=='"',Z.lookup=Z.lookupNegative||Z.lookupPositive,Z}B.parseRuleName=W;function K(V,G){let X=W(V);return G.cachedRules[X.name]||null}B.findRuleByName=K;function H(V,G){if(V.children){let X=V.children.filter(_=>_.type&&G.test(_.type));for(let _=0;_<X.length;_++){let b=V.children.indexOf(X[_]);b!=-1&&V.children.splice(b,1)}V.children.forEach(_=>H(_,G))}}const q=["EOF"];class re{constructor(G,X){this.grammarRules=G,this.options=X,this.cachedRules={},this.debug=X?X.debug===!0:!1;let _=[],b=[];if(G.forEach(Z=>{let Y=W(Z.name);if(Y.name in this.cachedRules){_.push("Duplicated rule "+Y.name);return}else this.cachedRules[Y.name]=Z;if(!Z.bnf||!Z.bnf.length){let ee="Missing rule content, rule: "+Z.name;_.indexOf(ee)==-1&&_.push(ee)}else Z.bnf.forEach(ee=>{if(typeof ee[0]=="string"&&W(ee[0]).name==Z.name){let ce="Left recursion is not allowed, rule: "+Z.name;_.indexOf(ce)==-1&&_.push(ce)}ee.forEach(le=>{if(typeof le=="string"){let ce=W(le);!ce.isLiteral&&b.indexOf(ce.name)==-1&&q.indexOf(ce.name)==-1&&b.push(ce.name)}})});A==Z.name&&(Z.implicitWs=!1),Z.implicitWs&&b.indexOf(A)==-1&&b.push(A),Z.recover&&b.indexOf(Z.recover)==-1&&b.push(Z.recover)}),b.forEach(Z=>{Z in this.cachedRules||_.push("Missing rule "+Z)}),_.length)throw new Error(_.join(`
`))}getAST(G,X){X||(X=this.grammarRules.filter(b=>!b.fragment&&b.name.indexOf("%")!=0)[0].name);let _=this.parse(G,X);if(_){L(_.errors,_),k(_,0),H(_,/^%/),(!this.options||!this.options.keepUpperRules)&&H(_,j);let b=_.rest;b&&new z.TokenError(`Unexpected end of input: 
`+b,_),R(_),_.rest=b}return _}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(G,X,_=0){let b=null,Z=W(X),Y,ee=this.debug&&!j.test(Z.name);ee&&console.log(new Array(_).join("\u2502  ")+"Trying to get "+X+" from "+JSON.stringify(G.split(`
`)[0]));let le=Z.name,ce=K(Z.name,this);if(Z.name=="EOF"){if(G.length)return null;if(G.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!ce&&Z.isLiteral){let U=Z.name.trim();if(U.startsWith('"')?U=JSON.parse(U):U.startsWith("'")&&(U=U.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),U==="")return{type:"%%EMPTY%%",text:"",rest:G,start:0,end:0,fullText:"",errors:[],children:[],parent:null};Y=new RegExp(D(U)),le=null}}catch(U){return U instanceof ReferenceError&&console.error(U),null}if(Y){let U=J(G,Y);if(U)return U.type=le,U}else{let U=ce.bnf;U instanceof Array&&U.forEach(se=>{if(b)return;let de=null,ue={type:Z.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:G};ce.fragment&&(ue.fragment=!0);let te=G,ge=0,Ze=se.length>0,Xe=!1;for(let gt=0;gt<se.length;gt++)if(typeof se[gt]=="string"){let Fe=W(se[gt]);Ze=Ze&&Fe.isOptional;let De,Ft=!1;do{if(De=null,ce.implicitWs&&(De=this.parse(te,Fe.name,_+1),!De)){let Et;do if(Et=this.parse(te,A,_+1),Et)ue.text=ue.text+Et.text,ue.end=ue.text.length,Et.parent=ue,ue.children.push(Et),te=te.substr(Et.text.length),ge+=Et.text.length;else break;while(Et&&Et.text.length)}if(De=De||this.parse(te,Fe.name,_+1),Fe.lookupNegative){if(De)return;break}if(Fe.lookupPositive&&!De)return;if(!De&&(Fe.isOptional||Fe.atLeastOne&&Ft))break;if(De&&ce.pinned==gt+1&&(de=De,ee&&console.log(new Array(_+1).join("\u2502  ")+"\u2514\u2500 "+De.type+" PINNED")),De||(De=this.parseRecovery(ce,te,_+1)),!De)if(de)b=ue,De={type:"SyntaxError",text:te,children:[],end:te.length,errors:[],fullText:"",parent:null,start:0,rest:""},te.length?new z.TokenError(`Unexpected end of input. Expecting ${Fe.name} Got: ${te}`,De):new z.TokenError(`Unexpected end of input. Missing ${Fe.name}`,De),ee&&console.log(new Array(_+1).join("\u2502  ")+"\u2514\u2500 "+De.type+" "+JSON.stringify(De.text));else return;if(Ft=!0,Xe=!0,De.type=="%%EMPTY%%")break;De.start+=ge,De.end+=ge,!Fe.lookupPositive&&De.type&&(De.fragment?De.children&&De.children.forEach(Et=>{Et.start+=ge,Et.end+=ge,Et.parent=ue,ue.children.push(Et)}):(De.parent=ue,ue.children.push(De))),Fe.lookup&&(De.lookup=!0),ee&&console.log(new Array(_+1).join("\u2502  ")+"\u2514\u2500 "+De.type+" "+JSON.stringify(De.text)),!Fe.lookup&&!De.lookup&&(ue.text=ue.text+De.text,ue.end=ue.text.length,te=te.substr(De.text.length),ge+=De.text.length),ue.rest=te}while(De&&Fe.allowRepetition&&te.length&&!De.lookup)}else{let Fe=J(te,se[gt]);if(!Fe)return;ee&&console.log(new Array(_+1).join("\u2502  ")+"\u2514> "+JSON.stringify(Fe.text)+se[gt].source),Xe=!0,Fe.start+=ge,Fe.end+=ge,ue.text=ue.text+Fe.text,ue.end=ue.text.length,te=te.substr(Fe.text.length),ge+=Fe.text.length,ue.rest=te}Xe&&(b=ue,ee&&console.log(new Array(_).join("\u2502  ")+"\u251C<\u2500\u2534< PUSHING "+b.type+" "+JSON.stringify(b.text)))}),b&&ce.simplifyWhenOneChildren&&b.children.length==1&&(b=b.children[0])}return b||ee&&console.log(X+" NOT RESOLVED FROM "+G),b}parseRecovery(G,X,_){if(G.recover&&X.length){let b=this.debug;b&&console.log(new Array(_+1).join("\u2502  ")+"Trying to recover until token "+G.recover+" from "+JSON.stringify(X.split(`
`)[0]+X.split(`
`)[1]));let Z={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},Y;do if(Y=this.parse(X,G.recover,_+1),Y){new z.TokenError('Unexpected input: "'+Z.text+`" Expecting: ${G.name}`,Z);break}else Z.text=Z.text+X[0],Z.end=Z.text.length,X=X.substr(1);while(!Y&&X.length>0);if(Z.text.length>0&&Y)return b&&console.log(new Array(_+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(Z.text)),Z}return null}}B.Parser=re,B.default=re},80707:(Q,B)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.TokenError=void 0;class x extends Error{constructor(g,F){if(super(g),this.message=g,this.token=F,F&&F.errors)F.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}B.TokenError=x},75951:(Q,B,x)=>{var j;(function(){var g=A(function(b){return b===1?"\u03C7\u03C1\u03CC\u03BD\u03BF\u03C2":"\u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"},function(b){return b===1?"\u03BC\u03AE\u03BD\u03B1\u03C2":"\u03BC\u03AE\u03BD\u03B5\u03C2"},function(b){return b===1?"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1":"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"},function(b){return b===1?"\u03BC\u03AD\u03C1\u03B1":"\u03BC\u03AD\u03C1\u03B5\u03C2"},function(b){return b===1?"\u03CE\u03C1\u03B1":"\u03CE\u03C1\u03B5\u03C2"},function(b){return b===1?"\u03BB\u03B5\u03C0\u03C4\u03CC":"\u03BB\u03B5\u03C0\u03C4\u03AC"},function(b){return b===1?"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03BF":"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"},function(b){return(b===1?"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03CC":"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03AC")+" \u03C4\u03BF\u03C5 \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03BF\u03BB\u03AD\u03C0\u03C4\u03BF\u03C5"},","),F={af:A("jaar",function(b){return"maand"+(b===1?"":"e")},function(b){return b===1?"week":"weke"},function(b){return b===1?"dag":"dae"},function(b){return b===1?"uur":"ure"},function(b){return b===1?"minuut":"minute"},function(b){return"sekonde"+(b===1?"":"s")},function(b){return"millisekonde"+(b===1?"":"s")},","),ar:W(A(function(b){return["\u0633\u0646\u0629","\u0633\u0646\u062A\u0627\u0646","\u0633\u0646\u0648\u0627\u062A"][z(b)]},function(b){return["\u0634\u0647\u0631","\u0634\u0647\u0631\u0627\u0646","\u0623\u0634\u0647\u0631"][z(b)]},function(b){return["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","\u0623\u0633\u0627\u0628\u064A\u0639"][z(b)]},function(b){return["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","\u0623\u064A\u0627\u0645"][z(b)]},function(b){return["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","\u0633\u0627\u0639\u0627\u062A"][z(b)]},function(b){return["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u0627\u0646","\u062F\u0642\u0627\u0626\u0642"][z(b)]},function(b){return["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u0627\u0646","\u062B\u0648\u0627\u0646\u064A"][z(b)]},function(b){return["\u062C\u0632\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u062C\u0632\u0622\u0646 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u0623\u062C\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629"][z(b)]},","),{delimiter:" \uFEED ",_digitReplacements:["\u06F0","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"]}),bg:A(function(b){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][D(b)]},function(b){return["\u043C\u0435\u0441\u0435\u0446\u0430","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][D(b)]},function(b){return["\u0441\u0435\u0434\u043C\u0438\u0446\u0438","\u0441\u0435\u0434\u043C\u0438\u0446\u0430","\u0441\u0435\u0434\u043C\u0438\u0446\u0438"][D(b)]},function(b){return["\u0434\u043D\u0438","\u0434\u0435\u043D","\u0434\u043D\u0438"][D(b)]},function(b){return["\u0447\u0430\u0441\u0430","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][D(b)]},function(b){return["\u043C\u0438\u043D\u0443\u0442\u0438","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u0438"][D(b)]},function(b){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(b)]},function(b){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(b)]},","),bn:A("\u09AC\u099B\u09B0","\u09AE\u09BE\u09B8","\u09B8\u09AA\u09CD\u09A4\u09BE\u09B9","\u09A6\u09BF\u09A8","\u0998\u09A8\u09CD\u099F\u09BE","\u09AE\u09BF\u09A8\u09BF\u099F","\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1","\u09AE\u09BF\u09B2\u09BF\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1"),ca:A(function(b){return"any"+(b===1?"":"s")},function(b){return"mes"+(b===1?"":"os")},function(b){return"setman"+(b===1?"a":"es")},function(b){return"di"+(b===1?"a":"es")},function(b){return"hor"+(b===1?"a":"es")},function(b){return"minut"+(b===1?"":"s")},function(b){return"segon"+(b===1?"":"s")},function(b){return"milisegon"+(b===1?"":"s")},","),ckb:A("\u0633\u0627\u06B5","\u0645\u0627\u0646\u06AF","\u0647\u06D5\u0641\u062A\u06D5","\u0695\u06C6\u0698","\u06A9\u0627\u0698\u06CE\u0631","\u062E\u0648\u0644\u06D5\u06A9","\u0686\u0631\u06A9\u06D5","\u0645\u06CC\u0644\u06CC \u0686\u0631\u06A9\u06D5","."),cs:A(function(b){return["rok","roku","roky","let"][R(b)]},function(b){return["m\u011Bs\xEDc","m\u011Bs\xEDce","m\u011Bs\xEDce","m\u011Bs\xEDc\u016F"][R(b)]},function(b){return["t\xFDden","t\xFDdne","t\xFDdny","t\xFDdn\u016F"][R(b)]},function(b){return["den","dne","dny","dn\xED"][R(b)]},function(b){return["hodina","hodiny","hodiny","hodin"][R(b)]},function(b){return["minuta","minuty","minuty","minut"][R(b)]},function(b){return["sekunda","sekundy","sekundy","sekund"][R(b)]},function(b){return["milisekunda","milisekundy","milisekundy","milisekund"][R(b)]},","),cy:A("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:A("\xE5r",function(b){return"m\xE5ned"+(b===1?"":"er")},function(b){return"uge"+(b===1?"":"r")},function(b){return"dag"+(b===1?"":"e")},function(b){return"time"+(b===1?"":"r")},function(b){return"minut"+(b===1?"":"ter")},function(b){return"sekund"+(b===1?"":"er")},function(b){return"millisekund"+(b===1?"":"er")},","),de:A(function(b){return"Jahr"+(b===1?"":"e")},function(b){return"Monat"+(b===1?"":"e")},function(b){return"Woche"+(b===1?"":"n")},function(b){return"Tag"+(b===1?"":"e")},function(b){return"Stunde"+(b===1?"":"n")},function(b){return"Minute"+(b===1?"":"n")},function(b){return"Sekunde"+(b===1?"":"n")},function(b){return"Millisekunde"+(b===1?"":"n")},","),el:g,en:A(function(b){return"year"+(b===1?"":"s")},function(b){return"month"+(b===1?"":"s")},function(b){return"week"+(b===1?"":"s")},function(b){return"day"+(b===1?"":"s")},function(b){return"hour"+(b===1?"":"s")},function(b){return"minute"+(b===1?"":"s")},function(b){return"second"+(b===1?"":"s")},function(b){return"millisecond"+(b===1?"":"s")}),eo:A(function(b){return"jaro"+(b===1?"":"j")},function(b){return"monato"+(b===1?"":"j")},function(b){return"semajno"+(b===1?"":"j")},function(b){return"tago"+(b===1?"":"j")},function(b){return"horo"+(b===1?"":"j")},function(b){return"minuto"+(b===1?"":"j")},function(b){return"sekundo"+(b===1?"":"j")},function(b){return"milisekundo"+(b===1?"":"j")},","),es:A(function(b){return"a\xF1o"+(b===1?"":"s")},function(b){return"mes"+(b===1?"":"es")},function(b){return"semana"+(b===1?"":"s")},function(b){return"d\xEDa"+(b===1?"":"s")},function(b){return"hora"+(b===1?"":"s")},function(b){return"minuto"+(b===1?"":"s")},function(b){return"segundo"+(b===1?"":"s")},function(b){return"milisegundo"+(b===1?"":"s")},","),et:A(function(b){return"aasta"+(b===1?"":"t")},function(b){return"kuu"+(b===1?"":"d")},function(b){return"n\xE4dal"+(b===1?"":"at")},function(b){return"p\xE4ev"+(b===1?"":"a")},function(b){return"tund"+(b===1?"":"i")},function(b){return"minut"+(b===1?"":"it")},function(b){return"sekund"+(b===1?"":"it")},function(b){return"millisekund"+(b===1?"":"it")},","),eu:A("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:A("\u0633\u0627\u0644","\u0645\u0627\u0647","\u0647\u0641\u062A\u0647","\u0631\u0648\u0632","\u0633\u0627\u0639\u062A","\u062F\u0642\u06CC\u0642\u0647","\u062B\u0627\u0646\u06CC\u0647","\u0645\u06CC\u0644\u06CC \u062B\u0627\u0646\u06CC\u0647"),fi:A(function(b){return b===1?"vuosi":"vuotta"},function(b){return b===1?"kuukausi":"kuukautta"},function(b){return"viikko"+(b===1?"":"a")},function(b){return"p\xE4iv\xE4"+(b===1?"":"\xE4")},function(b){return"tunti"+(b===1?"":"a")},function(b){return"minuutti"+(b===1?"":"a")},function(b){return"sekunti"+(b===1?"":"a")},function(b){return"millisekunti"+(b===1?"":"a")},","),fo:A("\xE1r",function(b){return b===1?"m\xE1na\xF0ur":"m\xE1na\xF0ir"},function(b){return b===1?"vika":"vikur"},function(b){return b===1?"dagur":"dagar"},function(b){return b===1?"t\xEDmi":"t\xEDmar"},function(b){return b===1?"minuttur":"minuttir"},"sekund","millisekund",","),fr:A(function(b){return"an"+(b>=2?"s":"")},"mois",function(b){return"semaine"+(b>=2?"s":"")},function(b){return"jour"+(b>=2?"s":"")},function(b){return"heure"+(b>=2?"s":"")},function(b){return"minute"+(b>=2?"s":"")},function(b){return"seconde"+(b>=2?"s":"")},function(b){return"milliseconde"+(b>=2?"s":"")},","),gr:g,he:A(function(b){return b===1?"\u05E9\u05E0\u05D4":"\u05E9\u05E0\u05D9\u05DD"},function(b){return b===1?"\u05D7\u05D5\u05D3\u05E9":"\u05D7\u05D5\u05D3\u05E9\u05D9\u05DD"},function(b){return b===1?"\u05E9\u05D1\u05D5\u05E2":"\u05E9\u05D1\u05D5\u05E2\u05D5\u05EA"},function(b){return b===1?"\u05D9\u05D5\u05DD":"\u05D9\u05DE\u05D9\u05DD"},function(b){return b===1?"\u05E9\u05E2\u05D4":"\u05E9\u05E2\u05D5\u05EA"},function(b){return b===1?"\u05D3\u05E7\u05D4":"\u05D3\u05E7\u05D5\u05EA"},function(b){return b===1?"\u05E9\u05E0\u05D9\u05D4":"\u05E9\u05E0\u05D9\u05D5\u05EA"},function(b){return b===1?"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D9\u05D4":"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D5\u05EA"}),hr:A(function(b){return b%10===2||b%10===3||b%10===4?"godine":"godina"},function(b){return b===1?"mjesec":b===2||b===3||b===4?"mjeseca":"mjeseci"},function(b){return b%10===1&&b!==11?"tjedan":"tjedna"},function(b){return b===1?"dan":"dana"},function(b){return b===1?"sat":b===2||b===3||b===4?"sata":"sati"},function(b){var Z=b%10;return(Z===2||Z===3||Z===4)&&(b<10||b>14)?"minute":"minuta"},function(b){var Z=b%10;return Z===5||Math.floor(b)===b&&b>=10&&b<=19?"sekundi":Z===1?"sekunda":Z===2||Z===3||Z===4?"sekunde":"sekundi"},function(b){return b===1?"milisekunda":b%10===2||b%10===3||b%10===4?"milisekunde":"milisekundi"},","),hi:A("\u0938\u093E\u0932",function(b){return b===1?"\u092E\u0939\u0940\u0928\u093E":"\u092E\u0939\u0940\u0928\u0947"},function(b){return b===1?"\u0939\u095E\u094D\u0924\u093E":"\u0939\u092B\u094D\u0924\u0947"},"\u0926\u093F\u0928",function(b){return b===1?"\u0918\u0902\u091F\u093E":"\u0918\u0902\u091F\u0947"},"\u092E\u093F\u0928\u091F","\u0938\u0947\u0915\u0902\u0921","\u092E\u093F\u0932\u0940\u0938\u0947\u0915\u0902\u0921"),hu:A("\xE9v","h\xF3nap","h\xE9t","nap","\xF3ra","perc","m\xE1sodperc","ezredm\xE1sodperc",","),id:A("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:A("\xE1r",function(b){return"m\xE1nu\xF0"+(b===1?"ur":"ir")},function(b){return"vik"+(b===1?"a":"ur")},function(b){return"dag"+(b===1?"ur":"ar")},function(b){return"klukkut\xEDm"+(b===1?"i":"ar")},function(b){return"m\xEDn\xFAt"+(b===1?"a":"ur")},function(b){return"sek\xFAnd"+(b===1?"a":"ur")},function(b){return"millisek\xFAnd"+(b===1?"a":"ur")}),it:A(function(b){return"ann"+(b===1?"o":"i")},function(b){return"mes"+(b===1?"e":"i")},function(b){return"settiman"+(b===1?"a":"e")},function(b){return"giorn"+(b===1?"o":"i")},function(b){return"or"+(b===1?"a":"e")},function(b){return"minut"+(b===1?"o":"i")},function(b){return"second"+(b===1?"o":"i")},function(b){return"millisecond"+(b===1?"o":"i")},","),ja:A("\u5E74","\u30F6\u6708","\u9031","\u65E5","\u6642\u9593","\u5206","\u79D2","\u30DF\u30EA\u79D2"),km:A("\u1786\u17D2\u1793\u17B6\u17C6","\u1781\u17C2","\u179F\u1794\u17D2\u178F\u17B6\u17A0\u17CD","\u1790\u17D2\u1784\u17C3","\u1798\u17C9\u17C4\u1784","\u1793\u17B6\u1791\u17B8","\u179C\u17B7\u1793\u17B6\u1791\u17B8","\u1798\u17B7\u179B\u17D2\u179B\u17B8\u179C\u17B7\u1793\u17B6\u1791\u17B8"),kn:A(function(b){return b===1?"\u0CB5\u0CB0\u0CCD\u0CB7":"\u0CB5\u0CB0\u0CCD\u0CB7\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1":"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0CB5\u0CBE\u0CB0":"\u0CB5\u0CBE\u0CB0\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0CA6\u0CBF\u0CA8":"\u0CA6\u0CBF\u0CA8\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0C97\u0C82\u0C9F\u0CC6":"\u0C97\u0C82\u0C9F\u0CC6\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7":"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"},function(b){return b===1?"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"}),ko:A("\uB144","\uAC1C\uC6D4","\uC8FC\uC77C","\uC77C","\uC2DC\uAC04","\uBD84","\uCD08","\uBC00\uB9AC \uCD08"),ku:A("sal","meh","hefte","roj","seet","deqe","saniye","m\xEEl\xEE\xE7irk",","),lo:A("\u0E9B\u0EB5","\u0EC0\u0E94\u0EB7\u0EAD\u0E99","\u0EAD\u0EB2\u0E97\u0EB4\u0E94","\u0EA1\u0EB7\u0EC9","\u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87","\u0E99\u0EB2\u0E97\u0EB5","\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5","\u0EA1\u0EB4\u0E99\u0EA5\u0EB4\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5",","),lt:A(function(b){return b%10===0||b%100>=10&&b%100<=20?"met\u0173":"metai"},function(b){return["m\u0117nuo","m\u0117nesiai","m\u0117nesi\u0173"][k(b)]},function(b){return["savait\u0117","savait\u0117s","savai\u010Di\u0173"][k(b)]},function(b){return["diena","dienos","dien\u0173"][k(b)]},function(b){return["valanda","valandos","valand\u0173"][k(b)]},function(b){return["minut\u0117","minut\u0117s","minu\u010Di\u0173"][k(b)]},function(b){return["sekund\u0117","sekund\u0117s","sekund\u017Ei\u0173"][k(b)]},function(b){return["milisekund\u0117","milisekund\u0117s","milisekund\u017Ei\u0173"][k(b)]},","),lv:A(function(b){return L(b)?"gads":"gadi"},function(b){return L(b)?"m\u0113nesis":"m\u0113ne\u0161i"},function(b){return L(b)?"ned\u0113\u013Ca":"ned\u0113\u013Cas"},function(b){return L(b)?"diena":"dienas"},function(b){return L(b)?"stunda":"stundas"},function(b){return L(b)?"min\u016Bte":"min\u016Btes"},function(b){return L(b)?"sekunde":"sekundes"},function(b){return L(b)?"milisekunde":"milisekundes"},","),mk:A(function(b){return b===1?"\u0433\u043E\u0434\u0438\u043D\u0430":"\u0433\u043E\u0434\u0438\u043D\u0438"},function(b){return b===1?"\u043C\u0435\u0441\u0435\u0446":"\u043C\u0435\u0441\u0435\u0446\u0438"},function(b){return b===1?"\u043D\u0435\u0434\u0435\u043B\u0430":"\u043D\u0435\u0434\u0435\u043B\u0438"},function(b){return b===1?"\u0434\u0435\u043D":"\u0434\u0435\u043D\u0430"},function(b){return b===1?"\u0447\u0430\u0441":"\u0447\u0430\u0441\u0430"},function(b){return b===1?"\u043C\u0438\u043D\u0443\u0442\u0430":"\u043C\u0438\u043D\u0443\u0442\u0438"},function(b){return b===1?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},function(b){return b===1?"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},","),mn:A("\u0436\u0438\u043B","\u0441\u0430\u0440","\u0434\u043E\u043B\u043E\u043E \u0445\u043E\u043D\u043E\u0433","\u04E9\u0434\u04E9\u0440","\u0446\u0430\u0433","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),mr:A(function(b){return b===1?"\u0935\u0930\u094D\u0937":"\u0935\u0930\u094D\u0937\u0947"},function(b){return b===1?"\u092E\u0939\u093F\u0928\u093E":"\u092E\u0939\u093F\u0928\u0947"},function(b){return b===1?"\u0906\u0920\u0935\u0921\u093E":"\u0906\u0920\u0935\u0921\u0947"},"\u0926\u093F\u0935\u0938","\u0924\u093E\u0938",function(b){return b===1?"\u092E\u093F\u0928\u093F\u091F":"\u092E\u093F\u0928\u093F\u091F\u0947"},"\u0938\u0947\u0915\u0902\u0926","\u092E\u093F\u0932\u093F\u0938\u0947\u0915\u0902\u0926"),ms:A("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:A("jaar",function(b){return b===1?"maand":"maanden"},function(b){return b===1?"week":"weken"},function(b){return b===1?"dag":"dagen"},"uur",function(b){return b===1?"minuut":"minuten"},function(b){return b===1?"seconde":"seconden"},function(b){return b===1?"milliseconde":"milliseconden"},","),no:A("\xE5r",function(b){return"m\xE5ned"+(b===1?"":"er")},function(b){return"uke"+(b===1?"":"r")},function(b){return"dag"+(b===1?"":"er")},function(b){return"time"+(b===1?"":"r")},function(b){return"minutt"+(b===1?"":"er")},function(b){return"sekund"+(b===1?"":"er")},function(b){return"millisekund"+(b===1?"":"er")},","),pl:A(function(b){return["rok","roku","lata","lat"][J(b)]},function(b){return["miesi\u0105c","miesi\u0105ca","miesi\u0105ce","miesi\u0119cy"][J(b)]},function(b){return["tydzie\u0144","tygodnia","tygodnie","tygodni"][J(b)]},function(b){return["dzie\u0144","dnia","dni","dni"][J(b)]},function(b){return["godzina","godziny","godziny","godzin"][J(b)]},function(b){return["minuta","minuty","minuty","minut"][J(b)]},function(b){return["sekunda","sekundy","sekundy","sekund"][J(b)]},function(b){return["milisekunda","milisekundy","milisekundy","milisekund"][J(b)]},","),pt:A(function(b){return"ano"+(b===1?"":"s")},function(b){return b===1?"m\xEAs":"meses"},function(b){return"semana"+(b===1?"":"s")},function(b){return"dia"+(b===1?"":"s")},function(b){return"hora"+(b===1?"":"s")},function(b){return"minuto"+(b===1?"":"s")},function(b){return"segundo"+(b===1?"":"s")},function(b){return"milissegundo"+(b===1?"":"s")},","),ro:A(function(b){return b===1?"an":"ani"},function(b){return b===1?"lun\u0103":"luni"},function(b){return b===1?"s\u0103pt\u0103m\xE2n\u0103":"s\u0103pt\u0103m\xE2ni"},function(b){return b===1?"zi":"zile"},function(b){return b===1?"or\u0103":"ore"},function(b){return b===1?"minut":"minute"},function(b){return b===1?"secund\u0103":"secunde"},function(b){return b===1?"milisecund\u0103":"milisecunde"},","),ru:A(function(b){return["\u043B\u0435\u0442","\u0433\u043E\u0434","\u0433\u043E\u0434\u0430"][D(b)]},function(b){return["\u043C\u0435\u0441\u044F\u0446\u0435\u0432","\u043C\u0435\u0441\u044F\u0446","\u043C\u0435\u0441\u044F\u0446\u0430"][D(b)]},function(b){return["\u043D\u0435\u0434\u0435\u043B\u044C","\u043D\u0435\u0434\u0435\u043B\u044F","\u043D\u0435\u0434\u0435\u043B\u0438"][D(b)]},function(b){return["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"][D(b)]},function(b){return["\u0447\u0430\u0441\u043E\u0432","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][D(b)]},function(b){return["\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u044B"][D(b)]},function(b){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][D(b)]},function(b){return["\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][D(b)]},","),sq:A(function(b){return b===1?"vit":"vjet"},"muaj","jav\xEB","dit\xEB","or\xEB",function(b){return"minut"+(b===1?"\xEB":"a")},function(b){return"sekond"+(b===1?"\xEB":"a")},function(b){return"milisekond"+(b===1?"\xEB":"a")},","),sr:A(function(b){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0435"][D(b)]},function(b){return["\u043C\u0435\u0441\u0435\u0446\u0438","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][D(b)]},function(b){return["\u043D\u0435\u0434\u0435\u0459\u0438","\u043D\u0435\u0434\u0435\u0459\u0430","\u043D\u0435\u0434\u0435\u0459\u0435"][D(b)]},function(b){return["\u0434\u0430\u043D\u0438","\u0434\u0430\u043D","\u0434\u0430\u043D\u0430"][D(b)]},function(b){return["\u0441\u0430\u0442\u0438","\u0441\u0430\u0442","\u0441\u0430\u0442\u0430"][D(b)]},function(b){return["\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430"][D(b)]},function(b){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][D(b)]},function(b){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][D(b)]},","),ta:A(function(b){return b===1?"\u0BB5\u0BB0\u0BC1\u0B9F\u0BAE\u0BCD":"\u0B86\u0BA3\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD"},function(b){return b===1?"\u0BAE\u0BBE\u0BA4\u0BAE\u0BCD":"\u0BAE\u0BBE\u0BA4\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(b){return b===1?"\u0BB5\u0BBE\u0BB0\u0BAE\u0BCD":"\u0BB5\u0BBE\u0BB0\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(b){return b===1?"\u0BA8\u0BBE\u0BB3\u0BCD":"\u0BA8\u0BBE\u0B9F\u0BCD\u0B95\u0BB3\u0BCD"},function(b){return b===1?"\u0BAE\u0BA3\u0BBF":"\u0BAE\u0BA3\u0BBF\u0BA8\u0BC7\u0BB0\u0BAE\u0BCD"},function(b){return"\u0BA8\u0BBF\u0BAE\u0BBF\u0B9F"+(b===1?"\u0BAE\u0BCD":"\u0B99\u0BCD\u0B95\u0BB3\u0BCD")},function(b){return"\u0BB5\u0BBF\u0BA9\u0BBE\u0B9F\u0BBF"+(b===1?"":"\u0B95\u0BB3\u0BCD")},function(b){return"\u0BAE\u0BBF\u0BB2\u0BCD\u0BB2\u0BBF \u0BB5\u0BBF\u0BA8\u0BBE\u0B9F\u0BBF"+(b===1?"":"\u0B95\u0BB3\u0BCD")}),te:A(function(b){return"\u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38"+(b===1?"\u0C30\u0C02":"\u0C30\u0C3E\u0C32")},function(b){return"\u0C28\u0C46\u0C32"+(b===1?"":"\u0C32")},function(b){return b===1?"\u0C35\u0C3E\u0C30\u0C02":"\u0C35\u0C3E\u0C30\u0C3E\u0C32\u0C41"},function(b){return"\u0C30\u0C4B\u0C1C\u0C41"+(b===1?"":"\u0C32\u0C41")},function(b){return"\u0C17\u0C02\u0C1F"+(b===1?"":"\u0C32\u0C41")},function(b){return b===1?"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C02":"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C3E\u0C32\u0C41"},function(b){return b===1?"\u0C38\u0C46\u0C15\u0C28\u0C41":"\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"},function(b){return b===1?"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D":"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"}),uk:A(function(b){return["\u0440\u043E\u043A\u0456\u0432","\u0440\u0456\u043A","\u0440\u043E\u043A\u0438"][D(b)]},function(b){return["\u043C\u0456\u0441\u044F\u0446\u0456\u0432","\u043C\u0456\u0441\u044F\u0446\u044C","\u043C\u0456\u0441\u044F\u0446\u0456"][D(b)]},function(b){return["\u0442\u0438\u0436\u043D\u0456\u0432","\u0442\u0438\u0436\u0434\u0435\u043D\u044C","\u0442\u0438\u0436\u043D\u0456"][D(b)]},function(b){return["\u0434\u043D\u0456\u0432","\u0434\u0435\u043D\u044C","\u0434\u043D\u0456"][D(b)]},function(b){return["\u0433\u043E\u0434\u0438\u043D","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][D(b)]},function(b){return["\u0445\u0432\u0438\u043B\u0438\u043D","\u0445\u0432\u0438\u043B\u0438\u043D\u0430","\u0445\u0432\u0438\u043B\u0438\u043D\u0438"][D(b)]},function(b){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(b)]},function(b){return["\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][D(b)]},","),ur:A("\u0633\u0627\u0644",function(b){return b===1?"\u0645\u06C1\u06CC\u0646\u06C1":"\u0645\u06C1\u06CC\u0646\u06D2"},function(b){return b===1?"\u06C1\u0641\u062A\u06C1":"\u06C1\u0641\u062A\u06D2"},"\u062F\u0646",function(b){return b===1?"\u06AF\u06BE\u0646\u0679\u06C1":"\u06AF\u06BE\u0646\u0679\u06D2"},"\u0645\u0646\u0679","\u0633\u06CC\u06A9\u0646\u0688","\u0645\u0644\u06CC \u0633\u06CC\u06A9\u0646\u0688"),sk:A(function(b){return["rok","roky","roky","rokov"][R(b)]},function(b){return["mesiac","mesiace","mesiace","mesiacov"][R(b)]},function(b){return["t\xFD\u017Ede\u0148","t\xFD\u017Edne","t\xFD\u017Edne","t\xFD\u017Ed\u0148ov"][R(b)]},function(b){return["de\u0148","dni","dni","dn\xED"][R(b)]},function(b){return["hodina","hodiny","hodiny","hod\xEDn"][R(b)]},function(b){return["min\xFAta","min\xFAty","min\xFAty","min\xFAt"][R(b)]},function(b){return["sekunda","sekundy","sekundy","sek\xFAnd"][R(b)]},function(b){return["milisekunda","milisekundy","milisekundy","milisek\xFAnd"][R(b)]},","),sl:A(function(b){return b%10===1?"leto":b%100===2?"leti":b%100===3||b%100===4||Math.floor(b)!==b&&b%100<=5?"leta":"let"},function(b){return b%10===1?"mesec":b%100===2||Math.floor(b)!==b&&b%100<=5?"meseca":b%10===3||b%10===4?"mesece":"mesecev"},function(b){return b%10===1?"teden":b%10===2||Math.floor(b)!==b&&b%100<=4?"tedna":b%10===3||b%10===4?"tedne":"tednov"},function(b){return b%100===1?"dan":"dni"},function(b){return b%10===1?"ura":b%100===2?"uri":b%10===3||b%10===4||Math.floor(b)!==b?"ure":"ur"},function(b){return b%10===1?"minuta":b%10===2?"minuti":b%10===3||b%10===4||Math.floor(b)!==b&&b%100<=4?"minute":"minut"},function(b){return b%10===1?"sekunda":b%100===2?"sekundi":b%100===3||b%100===4||Math.floor(b)!==b?"sekunde":"sekund"},function(b){return b%10===1?"milisekunda":b%100===2?"milisekundi":b%100===3||b%100===4||Math.floor(b)!==b?"milisekunde":"milisekund"},","),sv:A("\xE5r",function(b){return"m\xE5nad"+(b===1?"":"er")},function(b){return"veck"+(b===1?"a":"or")},function(b){return"dag"+(b===1?"":"ar")},function(b){return"timm"+(b===1?"e":"ar")},function(b){return"minut"+(b===1?"":"er")},function(b){return"sekund"+(b===1?"":"er")},function(b){return"millisekund"+(b===1?"":"er")},","),sw:W(A(function(b){return b===1?"mwaka":"miaka"},function(b){return b===1?"mwezi":"miezi"},"wiki",function(b){return b===1?"siku":"masiku"},function(b){return b===1?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:A("y\u0131l","ay","hafta","g\xFCn","saat","dakika","saniye","milisaniye",","),th:A("\u0E1B\u0E35","\u0E40\u0E14\u0E37\u0E2D\u0E19","\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C","\u0E27\u0E31\u0E19","\u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07","\u0E19\u0E32\u0E17\u0E35","\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35","\u0E21\u0E34\u0E25\u0E25\u0E34\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"),uz:A("yil","oy","hafta","kun","soat","minut","sekund","millisekund"),uz_CYR:A("\u0439\u0438\u043B","\u043E\u0439","\u04B3\u0430\u0444\u0442\u0430","\u043A\u0443\u043D","\u0441\u043E\u0430\u0442","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),vi:A("n\u0103m","th\xE1ng","tu\u1EA7n","ng\xE0y","gi\u1EDD","ph\xFAt","gi\xE2y","mili gi\xE2y",","),zh_CN:A("\u5E74","\u4E2A\u6708","\u5468","\u5929","\u5C0F\u65F6","\u5206\u949F","\u79D2","\u6BEB\u79D2"),zh_TW:A("\u5E74","\u500B\u6708","\u5468","\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2","\u6BEB\u79D2")};function A(b,Z,Y,ee,le,ce,U,se,de){var ue={y:b,mo:Z,w:Y,d:ee,h:le,m:ce,s:U,ms:se};return typeof de!="undefined"&&(ue.decimal=de),ue}function z(b){return b===2?1:b>2&&b<11?2:0}function J(b){return b===1?0:Math.floor(b)!==b?1:b%10>=2&&b%10<=4&&!(b%100>10&&b%100<20)?2:3}function D(b){return Math.floor(b)!==b?2:b%100>=5&&b%100<=20||b%10>=5&&b%10<=9||b%10===0?0:b%10===1?1:b>1?2:0}function R(b){return b===1?0:Math.floor(b)!==b?1:b%10>=2&&b%10<=4&&b%100<10?2:3}function k(b){return b===1||b%10===1&&b%100>20?0:Math.floor(b)!==b||b%10>=2&&b%100>20||b%10>=2&&b%100<10?1:2}function L(b){return b%10===1&&b%100!==11}function W(b){for(var Z,Y=1;Y<arguments.length;Y++){Z=arguments[Y];for(var ee in Z)H(Z,ee)&&(b[ee]=Z[ee])}return b}var K=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"};function H(b,Z){return Object.prototype.hasOwnProperty.call(b,Z)}function q(b){var Z=[b.language];if(H(b,"fallbacks"))if(K(b.fallbacks)&&b.fallbacks.length)Z=Z.concat(b.fallbacks);else throw new Error("fallbacks must be an array with at least one element");for(var Y=0;Y<Z.length;Y++){var ee=Z[Y];if(H(b.languages,ee))return b.languages[ee];if(H(F,ee))return F[ee]}throw new Error("No language found.")}function re(b,Z,Y){var ee=b.unitName,le=b.unitCount,ce=Y.spacer,U=Y.maxDecimalPoints,se;H(Y,"decimal")?se=Y.decimal:H(Z,"decimal")?se=Z.decimal:se=".";var de;"digitReplacements"in Y?de=Y.digitReplacements:"_digitReplacements"in Z&&(de=Z._digitReplacements);var ue,te=U===void 0?le:Math.floor(le*Math.pow(10,U))/Math.pow(10,U),ge=te.toString();if(de){ue="";for(var Ze=0;Ze<ge.length;Ze++){var Xe=ge[Ze];Xe==="."?ue+=se:ue+=de[Xe]}}else ue=ge.replace(".",se);var gt=Z[ee],Fe;return typeof gt=="function"?Fe=gt(le):Fe=gt,Z._numberFirst?Fe+ce+ue:ue+ce+Fe}function V(b,Z){var Y,ee,le,ce,U=Z.units,se=Z.unitMeasures,de="largest"in Z?Z.largest:1/0;if(!U.length)return[];var ue={};for(ce=b,ee=0;ee<U.length;ee++){Y=U[ee];var te=se[Y],ge=ee===U.length-1;le=ge?ce/te:Math.floor(ce/te),ue[Y]=le,ce-=le*te}if(Z.round){var Ze=de;for(ee=0;ee<U.length;ee++)if(Y=U[ee],le=ue[Y],le!==0&&(Ze--,Ze===0)){for(var Xe=ee+1;Xe<U.length;Xe++){var gt=U[Xe],Fe=ue[gt];ue[Y]+=Fe*se[gt]/se[Y],ue[gt]=0}break}for(ee=U.length-1;ee>=0;ee--)if(Y=U[ee],le=ue[Y],le!==0){var De=Math.round(le);if(ue[Y]=De,ee===0)break;var Ft=U[ee-1],Et=se[Ft],rt=Math.floor(De*se[Y]/Et);if(rt)ue[Ft]+=rt,ue[Y]=0;else break}}var $i=[];for(ee=0;ee<U.length&&$i.length<de;ee++)Y=U[ee],le=ue[Y],le&&$i.push({unitName:Y,unitCount:le});return $i}function G(b,Z){var Y=q(Z);if(!b.length){var ee=Z.units,le=ee[ee.length-1];return re({unitName:le,unitCount:0},Y,Z)}var ce=Z.conjunction,U=Z.serialComma,se;H(Z,"delimiter")?se=Z.delimiter:H(Y,"delimiter")?se=Y.delimiter:se=", ";for(var de=[],ue=0;ue<b.length;ue++)de.push(re(b[ue],Y,Z));return!ce||b.length===1?de.join(se):b.length===2?de.join(ce):de.slice(0,-1).join(se)+(U?",":"")+ce+de.slice(-1)}function X(b){var Z=function(ee,le){ee=Math.abs(ee);var ce=W({},Z,le||{}),U=V(ee,ce);return G(U,ce)};return W(Z,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},b)}var _=X({});_.getSupportedLanguages=function(){var Z=[];for(var Y in F)H(F,Y)&&Y!=="gr"&&Z.push(Y);return Z},_.humanizer=X,j=function(){return _}.call(B,x,B,Q),j!==void 0&&(Q.exports=j)})()},93503:(Q,B,x)=>{var j=x(18149),g=x(829),F=x(75652),A=x(49599),z=x(84573),J=x(74186),D=x(97030),R=x(4335),k=te=>Array.isArray(te)?te:[te],L=te=>te===void 0,W=te=>D(te)||Array.isArray(te)?Object.keys(te):[],K=(te,ge)=>te.hasOwnProperty(ge),H=te=>g(F(te)),q=te=>L(te)||Array.isArray(te)&&te.length===0,re=(te,ge,Ze,Xe)=>ge&&K(ge,Ze)&&te&&K(te,Ze)&&Xe(te[Ze],ge[Ze]),V=(te,ge)=>L(te)&&ge===0||L(ge)&&te===0||j(te,ge),G=(te,ge)=>L(te)&&ge===!1||L(ge)&&te===!1||j(te,ge),X=te=>L(te)||j(te,{})||te===!0,_=te=>L(te)||j(te,{}),b=te=>L(te)||D(te)||te===!0||te===!1;function Z(te,ge){return q(te)&&q(ge)?!0:j(H(te),H(ge))}function Y(te,ge){return te=k(te),ge=k(ge),j(H(te),H(ge))}function ee(te,ge,Ze,Xe){var gt=F(W(te).concat(W(ge)));return _(te)&&_(ge)?!0:_(te)&&W(ge).length||_(ge)&&W(te).length?!1:gt.every(function(Fe){var De=te[Fe],Ft=ge[Fe];return Array.isArray(De)&&Array.isArray(Ft)?j(H(te),H(ge)):Array.isArray(De)&&!Array.isArray(Ft)||Array.isArray(Ft)&&!Array.isArray(De)?!1:re(te,ge,Fe,Xe)})}function le(te,ge,Ze,Xe){return D(te)&&D(ge)?Xe(te,ge):Array.isArray(te)&&Array.isArray(ge)?ee(te,ge,Ze,Xe):j(te,ge)}function ce(te,ge,Ze,Xe){var gt=A(te,Xe),Fe=A(ge,Xe),De=J(gt,Fe,Xe);return De.length===Math.max(gt.length,Fe.length)}var U={title:j,uniqueItems:G,minLength:V,minItems:V,minProperties:V,required:Z,enum:Z,type:Y,items:le,anyOf:ce,allOf:ce,oneOf:ce,properties:ee,patternProperties:ee,dependencies:ee},se=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],de=["additionalProperties","additionalItems","contains","propertyNames","not"];function ue(te,ge,Ze){if(Ze=z(Ze,{ignore:[]}),X(te)&&X(ge))return!0;if(!b(te)||!b(ge))throw new Error("Either of the values are not a JSON schema.");if(te===ge)return!0;if(R(te)&&R(ge))return te===ge;if(te===void 0&&ge===!1||ge===void 0&&te===!1||L(te)&&!L(ge)||!L(te)&&L(ge))return!1;var Xe=F(Object.keys(te).concat(Object.keys(ge)));if(Ze.ignore.length&&(Xe=Xe.filter(Fe=>Ze.ignore.indexOf(Fe)===-1)),!Xe.length)return!0;function gt(Fe,De){return ue(Fe,De,Ze)}return Xe.every(function(Fe){var De=te[Fe],Ft=ge[Fe];if(de.indexOf(Fe)!==-1)return ue(De,Ft,Ze);var Et=U[Fe];if(Et||(Et=j),j(De,Ft))return!0;if(se.indexOf(Fe)===-1&&(!K(te,Fe)&&K(ge,Fe)||K(te,Fe)&&!K(ge,Fe)))return De===Ft;var rt=Et(De,Ft,Fe,gt);if(!R(rt))throw new Error("Comparer must return true or false");return rt})}Q.exports=ue},81995:(Q,B,x)=>{const j=x(35676),g=x(68632),F=x(97030),A=x(75652),z=x(49599),J=x(67304);function D(V){for(const G in V)L(V,G)&&q(V[G])&&delete V[G];return V}const R=V=>A(g(V.map(W))),k=(V,G)=>V.map(X=>X&&X[G]),L=(V,G)=>Object.prototype.hasOwnProperty.call(V,G),W=V=>F(V)||Array.isArray(V)?Object.keys(V):[],K=V=>V!==void 0,H=V=>F(V)||V===!0||V===!1,q=V=>!W(V).length&&V!==!1&&V!==!0,re=(V,...G)=>J.apply(null,[V].concat(j(G)));Q.exports={allUniqueKeys:R,deleteUndefinedProps:D,getValues:k,has:L,isEmptySchema:q,isSchema:H,keys:W,notUndefined:K,uniqWith:z,withoutArr:re}},16430:(Q,B,x)=>{const j=x(93503),g=x(59756),{allUniqueKeys:F,deleteUndefinedProps:A,has:z,isSchema:J,notUndefined:D,uniqWith:R}=x(81995);function k(H){g(H,function(q,re){q===!1&&H.splice(re,1)})}function L(H,q){return H.map(function(re){if(re)if(Array.isArray(re.items)){const V=re.items[q];if(J(V))return V;if(z(re,"additionalItems"))return re.additionalItems}else return re.items})}function W(H){return H.map(function(q){if(q)return Array.isArray(q.items)?q.additionalItems:q.items})}function K(H,q,re){return F(re).reduce(function(G,X){const _=L(H,X),b=R(_.filter(D),j);return G[X]=q(b,X),G},[])}Q.exports={keywords:["items","additionalItems"],resolver(H,q,re){const V=H.map(b=>b.items),G=V.filter(D),X={};G.every(J)?X.items=re.items(V):X.items=K(H,re.items,V);let _;return G.every(Array.isArray)?_=H.map(b=>b.additionalItems):G.some(Array.isArray)&&(_=W(H)),_&&(X.additionalItems=re.additionalItems(_)),X.additionalItems===!1&&Array.isArray(X.items)&&k(X.items),A(X)}}},67953:(Q,B,x)=>{const j=x(93503),g=x(59756),{allUniqueKeys:F,deleteUndefinedProps:A,getValues:z,keys:J,notUndefined:D,uniqWith:R,withoutArr:k}=x(81995);function L(K){g(K,function(H,q){H===!1&&delete K[q]})}function W(K,H){return F(K).reduce(function(re,V){const G=z(K,V),X=R(G.filter(D),j);return re[V]=H(X,V),re},{})}Q.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(K,H,q,re){re.ignoreAdditionalProperties||(K.forEach(function(G){const X=K.filter(Y=>Y!==G),_=J(G.properties),Z=J(G.patternProperties).map(Y=>new RegExp(Y));X.forEach(function(Y){const ee=J(Y.properties),le=ee.filter(U=>Z.some(se=>se.test(U)));k(ee,_,le).forEach(function(U){Y.properties[U]=q.properties([Y.properties[U],G.additionalProperties],U)})})}),K.forEach(function(G){const X=K.filter(b=>b!==G),_=J(G.patternProperties);G.additionalProperties===!1&&X.forEach(function(b){const Z=J(b.patternProperties);k(Z,_).forEach(ee=>delete b.patternProperties[ee])})}));const V={additionalProperties:q.additionalProperties(K.map(G=>G.additionalProperties)),patternProperties:W(K.map(G=>G.patternProperties),q.patternProperties),properties:W(K.map(G=>G.properties),q.properties)};return V.additionalProperties===!1&&L(V.properties),A(V)}}},33372:(Q,B,x)=>{const j=x(9850),g=x(93503),F=x(90852),A=x(19003),z=x(35676),J=x(68632),D=x(30898),R=x(74186),k=x(18149),L=x(97030),W=x(78911),K=x(829),H=x(75652),q=x(49599),re=x(67953),V=x(16430),G=(he,je)=>he.indexOf(je)!==-1,X=he=>L(he)||he===!0||he===!1,_=he=>he===!1,b=he=>he===!0,Z=(he,je,Ae)=>Ae(he),Y=he=>K(H(J(he))),ee=he=>he!==void 0,le=he=>H(J(he.map(Fe))),ce=he=>he[0],U=he=>Y(he),se=he=>Math.max.apply(Math,he),de=he=>Math.min.apply(Math,he),ue=he=>he.some(b),te=he=>q(z(he),k);function ge(he){return function(je,Ae){return g({[he]:je},{[he]:Ae})}}function Ze(he){let{allOf:je=[],...Ae}=he;return Ae=L(he)?Ae:he,[Ae,...je.map(Ze)]}function Xe(he,je){return he.map(Ae=>Ae&&Ae[je])}function gt(he,je){return he.map(function(Ae,et){try{return je(Ae,et)}catch{return}}).filter(ee)}function Fe(he){return L(he)||Array.isArray(he)?Object.keys(he):[]}function De(he,je){if(je=je||[],!he.length)return je;const Ae=he.slice(0).shift(),et=he.slice(1);return je.length?De(et,z(je.map(It=>Ae.map(Bt=>[Bt].concat(It))))):De(et,Ae.map(It=>It))}function Ft(he,je){let Ae;try{Ae=he.map(function(et){return JSON.stringify(et,null,2)}).join(`
`)}catch{Ae=he.join(", ")}throw new Error('Could not resolve values for path:"'+je.join(".")+`". They are probably incompatible. Values: 
`+Ae)}function Et(he,je,Ae,et,It,Bt){if(he.length){const Kt=It.complexResolvers[je];if(!Kt||!Kt.resolver)throw new Error("No resolver found for "+je);const At=Ae.map(Yn=>he.reduce((wn,ot)=>(Yn[ot]!==void 0&&(wn[ot]=Yn[ot]),wn),{})),Jn=q(At,g),pn=Kt.keywords.reduce((Yn,wn)=>({...Yn,[wn]:(ot,ar=[])=>et(ot,null,Bt.concat(wn,ar))}),{}),Ve=Kt.resolver(Jn,Bt.concat(je),pn,It);return L(Ve)||Ft(Jn,Bt.concat(je)),Ve}}function rt(he){return{required:he}}const $i=["properties","patternProperties","definitions","dependencies"],Mr=["anyOf","oneOf"],Gn=["additionalProperties","additionalItems","contains","propertyNames","not","items"],qe={type(he){if(he.some(Array.isArray)){const je=he.map(function(et){return Array.isArray(et)?et:[et]}),Ae=D.apply(null,je);if(Ae.length===1)return Ae[0];if(Ae.length>1)return H(Ae)}},dependencies(he,je,Ae){return le(he).reduce(function(It,Bt){const Kt=Xe(he,Bt);let At=q(Kt.filter(ee),k);const Jn=At.filter(Array.isArray);if(Jn.length){if(Jn.length===At.length)It[Bt]=Y(At);else{const pn=At.filter(X),Ve=Jn.map(rt);It[Bt]=Ae(pn.concat(Ve),Bt)}return It}return At=q(At,g),It[Bt]=Ae(At,Bt),It},{})},oneOf(he,je,Ae){const et=De(j(he)),It=gt(et,Ae),Bt=q(It,g);if(Bt.length)return Bt},not(he){return{anyOf:he}},pattern(he){return he.map(je=>"(?="+je+")").join("")},multipleOf(he){let je=he.slice(0),Ae=1;for(;je.some(et=>!Number.isInteger(et));)je=je.map(et=>et*10),Ae=Ae*10;return F(je)/Ae},enum(he){const je=R.apply(null,he.concat(k));if(je.length)return K(je)}};qe.$id=ce,qe.$ref=ce,qe.$schema=ce,qe.additionalItems=Z,qe.additionalProperties=Z,qe.anyOf=qe.oneOf,qe.contains=Z,qe.default=ce,qe.definitions=qe.dependencies,qe.description=ce,qe.examples=te,qe.exclusiveMaximum=de,qe.exclusiveMinimum=se,qe.items=V,qe.maximum=de,qe.maxItems=de,qe.maxLength=de,qe.maxProperties=de,qe.minimum=se,qe.minItems=se,qe.minLength=se,qe.minProperties=se,qe.properties=re,qe.propertyNames=Z,qe.required=U,qe.title=ce,qe.uniqueItems=ue;const Rl={properties:re,items:V};function fs(he,je,Ae){Ae=Ae||[],je=A(je,{ignoreAdditionalProperties:!1,resolvers:qe,complexResolvers:Rl,deep:!0});const et=Object.entries(je.complexResolvers);function It(At,Jn,pn){At=j(At.filter(ee)),pn=pn||[];const Ve=L(Jn)?Jn:{};if(!At.length)return;if(At.some(_))return!1;if(At.every(b))return!0;At=At.filter(L);const Yn=le(At);if(je.deep&&G(Yn,"allOf"))return fs({allOf:At},je,Ae);const wn=et.map(([ot,ar])=>Yn.filter(at=>ar.keywords.includes(at)));return wn.forEach(ot=>W(Yn,ot)),Yn.forEach(function(ot){const ar=Xe(At,ot),at=q(ar.filter(ee),ge(ot));if(at.length===1&&G(Mr,ot))Ve[ot]=at[0].map(ft=>It([ft],ft));else if(at.length===1&&!G($i,ot)&&!G(Gn,ot))Ve[ot]=at[0];else{const ft=je.resolvers[ot]||je.resolvers.defaultResolver;if(!ft)throw new Error("No resolver found for key "+ot+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const Qc=(ei,hs=[])=>It(ei,null,pn.concat(ot,hs));Ve[ot]=ft(at,pn.concat(ot),Qc,je),Ve[ot]===void 0?Ft(at,pn.concat(ot)):Ve[ot]===void 0&&delete Ve[ot]}}),et.reduce((ot,[ar,at],ft)=>({...ot,...Et(wn[ft],ar,At,It,je,pn)}),Ve)}const Bt=J(Ze(he));return It(Bt)}fs.options={resolvers:qe},Q.exports=fs},404:(Q,B)=>{var x=/~/,j=/~[01]/g;function g(k){switch(k){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+k)}function F(k){return x.test(k)?k.replace(j,g):k}function A(k,L,W){for(var K,H,q=1,re=L.length;q<re;){if(L[q]==="constructor"||L[q]==="prototype"||L[q]==="__proto__")return k;if(K=F(L[q++]),H=re>q,typeof k[K]=="undefined"&&(Array.isArray(k)&&K==="-"&&(K=k.length),H&&(L[q]!==""&&L[q]<1/0||L[q]==="-"?k[K]=[]:k[K]={})),!H)break;k=k[K]}var V=k[K];return W===void 0?delete k[K]:k[K]=W,V}function z(k){if(typeof k=="string"){if(k=k.split("/"),k[0]==="")return k;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(k)){for(const L of k)if(typeof L!="string"&&typeof L!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return k}throw new Error("Invalid JSON pointer.")}function J(k,L){if(typeof k!="object")throw new Error("Invalid input object.");L=z(L);var W=L.length;if(W===1)return k;for(var K=1;K<W;){if(k=k[F(L[K++])],W===K)return k;if(typeof k!="object"||k===null)return}}function D(k,L,W){if(typeof k!="object")throw new Error("Invalid input object.");if(L=z(L),L.length===0)throw new Error("Invalid JSON pointer for set.");return A(k,L,W)}function R(k){var L=z(k);return{get:function(W){return J(W,L)},set:function(W,K){return D(W,L,K)}}}B.get=J,B.set=D,B.compile=R},85246:(Q,B,x)=>{var j=x(45386),g=x(38333),F=x(34893),A=x(50343),z=x(47826),J=x(59950),D=200;function R(k,L,W,K){var H=-1,q=g,re=!0,V=k.length,G=[],X=L.length;if(!V)return G;W&&(L=A(L,z(W))),K?(q=F,re=!1):L.length>=D&&(q=J,re=!1,L=new j(L));e:for(;++H<V;){var _=k[H],b=W==null?_:W(_);if(_=K||_!==0?_:0,re&&b===b){for(var Z=X;Z--;)if(L[Z]===b)continue e;G.push(_)}else q(L,b,K)||G.push(_)}return G}Q.exports=R},84190:Q=>{function B(x,j,g,F){for(var A=g-1,z=x.length;++A<z;)if(F(x[A],j))return A;return-1}Q.exports=B},88390:(Q,B,x)=>{var j=x(45386),g=x(38333),F=x(34893),A=x(50343),z=x(47826),J=x(59950),D=Math.min;function R(k,L,W){for(var K=W?F:g,H=k[0].length,q=k.length,re=q,V=Array(q),G=1/0,X=[];re--;){var _=k[re];re&&L&&(_=A(_,z(L))),G=D(_.length,G),V[re]=!W&&(L||H>=120&&_.length>=120)?new j(re&&_):void 0}_=k[0];var b=-1,Z=V[0];e:for(;++b<H&&X.length<G;){var Y=_[b],ee=L?L(Y):Y;if(Y=W||Y!==0?Y:0,!(Z?J(Z,ee):K(X,ee,W))){for(re=q;--re;){var le=V[re];if(!(le?J(le,ee):K(k[re],ee,W)))continue e}Z&&Z.push(ee),X.push(Y)}}return X}Q.exports=R},45169:(Q,B,x)=>{var j=x(50343),g=x(77832),F=x(84190),A=x(47826),z=x(51522),J=Array.prototype,D=J.splice;function R(k,L,W,K){var H=K?F:g,q=-1,re=L.length,V=k;for(k===L&&(L=z(L)),W&&(V=j(k,A(W)));++q<re;)for(var G=0,X=L[q],_=W?W(X):X;(G=H(V,_,G,K))>-1;)V!==k&&D.call(V,G,1),D.call(k,G,1);return k}Q.exports=R},29078:(Q,B,x)=>{var j=x(17297),g=x(56974),F=x(62721),A=x(33812);function z(J,D){return D=j(D,J),J=F(J,D),J==null||delete J[A(g(D))]}Q.exports=z},5642:(Q,B,x)=>{var j=x(93746);function g(F){return j(F)?F:[]}Q.exports=g},88302:(Q,B,x)=>{var j=x(84565),g=x(29259);function F(A,z,J,D,R,k){return g(A)&&g(z)&&(k.set(z,A),j(A,z,void 0,F,k),k.delete(z)),A}Q.exports=F},48642:(Q,B,x)=>{var j=x(97030);function g(F){return j(F)?void 0:F}Q.exports=g},62721:(Q,B,x)=>{var j=x(13324),g=x(39872);function F(A,z){return z.length<2?A:j(A,g(z,0,-1))}Q.exports=F},82108:(Q,B,x)=>{var j=x(66188),g=x(23779);function F(A){return g(j(A).toLowerCase())}Q.exports=F},19003:(Q,B,x)=>{var j=x(49432),g=x(36060),F=x(88302),A=x(12782),z=g(function(J){return J.push(void 0,F),j(A,void 0,J)});Q.exports=z},68632:(Q,B,x)=>{var j=x(62034),g=1/0;function F(A){var z=A==null?0:A.length;return z?j(A,g):[]}Q.exports=F},30898:(Q,B,x)=>{var j=x(50343),g=x(88390),F=x(36060),A=x(5642),z=F(function(J){var D=j(J,A);return D.length&&D[0]===J[0]?g(D):[]});Q.exports=z},74186:(Q,B,x)=>{var j=x(50343),g=x(88390),F=x(36060),A=x(5642),z=x(56974),J=F(function(D){var R=z(D),k=j(D,A);return R=typeof R=="function"?R:void 0,R&&k.pop(),k.length&&k[0]===D[0]?g(k,void 0,R):[]});Q.exports=J},4335:(Q,B,x)=>{var j=x(53366),g=x(15125),F="[object Boolean]";function A(z){return z===!0||z===!1||g(z)&&j(z)==F}Q.exports=A},13383:(Q,B,x)=>{var j=x(88746);function g(F,A,z){z=typeof z=="function"?z:void 0;var J=z?z(F,A):void 0;return J===void 0?j(F,A,void 0,z):!!J}Q.exports=g},1842:Q=>{function B(x){return x==null}Q.exports=B},80537:(Q,B,x)=>{var j=x(53366),g=x(15125),F="[object Number]";function A(z){return typeof z=="number"||g(z)&&j(z)==F}Q.exports=A},12782:(Q,B,x)=>{var j=x(84565),g=x(97263),F=g(function(A,z,J,D){j(A,z,J,D)});Q.exports=F},17620:(Q,B,x)=>{var j=x(50343),g=x(18874),F=x(29078),A=x(17297),z=x(752),J=x(48642),D=x(29097),R=x(76939),k=1,L=2,W=4,K=D(function(H,q){var re={};if(H==null)return re;var V=!1;q=j(q,function(X){return X=A(X,H),V||(V=X.length>1),X}),z(H,R(H),re),V&&(re=g(re,k|L|W,J));for(var G=q.length;G--;)F(re,q[G]);return re});Q.exports=K},78911:(Q,B,x)=>{var j=x(45169);function g(F,A){return F&&F.length&&A&&A.length?j(F,A):F}Q.exports=g},16765:(Q,B,x)=>{var j=x(82857);function g(F,A,z){return F==null?F:j(F,A,z)}Q.exports=g},61258:(Q,B,x)=>{var j=x(36473),g=x(89419),F=x(38101),A=9007199254740991,z=4294967295,J=Math.min;function D(R,k){if(R=F(R),R<1||R>A)return[];var L=z,W=J(R,z);k=g(k),R-=z;for(var K=j(W,k);++L<R;)k(L);return K}Q.exports=D},25497:(Q,B,x)=>{var j=x(50343),g=x(51522),F=x(86152),A=x(4795),z=x(54452),J=x(33812),D=x(66188);function R(k){return F(k)?j(k,J):A(k)?[k]:g(z(D(k)))}Q.exports=R},75652:(Q,B,x)=>{var j=x(67326);function g(F){return F&&F.length?j(F):[]}Q.exports=g},49599:(Q,B,x)=>{var j=x(67326);function g(F,A){return A=typeof A=="function"?A:void 0,F&&F.length?j(F,void 0,A):[]}Q.exports=g},17195:(Q,B,x)=>{var j=x(29078);function g(F,A){return F==null?!0:j(F,A)}Q.exports=g},67304:(Q,B,x)=>{var j=x(85246),g=x(36060),F=x(93746),A=g(function(z,J){return F(z)?j(z,J):[]});Q.exports=A},43614:function(Q){(function(B,x){Q.exports?Q.exports=x():B.nearley=x()})(this,function(){function B(D,R,k){return this.id=++B.highestId,this.name=D,this.symbols=R,this.postprocess=k,this}B.highestId=0,B.prototype.toString=function(D){var R=typeof D=="undefined"?this.symbols.map(J).join(" "):this.symbols.slice(0,D).map(J).join(" ")+" \u25CF "+this.symbols.slice(D).map(J).join(" ");return this.name+" \u2192 "+R};function x(D,R,k,L){this.rule=D,this.dot=R,this.reference=k,this.data=[],this.wantedBy=L,this.isComplete=this.dot===D.symbols.length}x.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},x.prototype.nextState=function(D){var R=new x(this.rule,this.dot+1,this.reference,this.wantedBy);return R.left=this,R.right=D,R.isComplete&&(R.data=R.build(),R.right=void 0),R},x.prototype.build=function(){var D=[],R=this;do D.push(R.right.data),R=R.left;while(R.left);return D.reverse(),D},x.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,A.fail))};function j(D,R){this.grammar=D,this.index=R,this.states=[],this.wants={},this.scannable=[],this.completed={}}j.prototype.process=function(D){for(var R=this.states,k=this.wants,L=this.completed,W=0;W<R.length;W++){var K=R[W];if(K.isComplete){if(K.finish(),K.data!==A.fail){for(var H=K.wantedBy,q=H.length;q--;){var re=H[q];this.complete(re,K)}if(K.reference===this.index){var V=K.rule.name;(this.completed[V]=this.completed[V]||[]).push(K)}}}else{var V=K.rule.symbols[K.dot];if(typeof V!="string"){this.scannable.push(K);continue}if(k[V]){if(k[V].push(K),L.hasOwnProperty(V))for(var G=L[V],q=0;q<G.length;q++){var X=G[q];this.complete(K,X)}}else k[V]=[K],this.predict(V)}}},j.prototype.predict=function(D){for(var R=this.grammar.byName[D]||[],k=0;k<R.length;k++){var L=R[k],W=this.wants[D],K=new x(L,0,this.index,W);this.states.push(K)}},j.prototype.complete=function(D,R){var k=D.nextState(R);this.states.push(k)};function g(D,R){this.rules=D,this.start=R||this.rules[0].name;var k=this.byName={};this.rules.forEach(function(L){k.hasOwnProperty(L.name)||(k[L.name]=[]),k[L.name].push(L)})}g.fromCompiled=function(L,R){var k=L.Lexer;L.ParserStart&&(R=L.ParserStart,L=L.ParserRules);var L=L.map(function(K){return new B(K.name,K.symbols,K.postprocess)}),W=new g(L,R);return W.lexer=k,W};function F(){this.reset("")}F.prototype.reset=function(D,R){this.buffer=D,this.index=0,this.line=R?R.line:1,this.lastLineBreak=R?-R.col:0},F.prototype.next=function(){if(this.index<this.buffer.length){var D=this.buffer[this.index++];return D===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:D}}},F.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},F.prototype.formatError=function(D,R){var k=this.buffer;if(typeof k=="string"){var L=k.split(`
`).slice(Math.max(0,this.line-5),this.line),W=k.indexOf(`
`,this.index);W===-1&&(W=k.length);var K=this.index-this.lastLineBreak,H=String(this.line).length;return R+=" at line "+this.line+" col "+K+`:

`,R+=L.map(function(re,V){return q(this.line-L.length+V+1,H)+" "+re},this).join(`
`),R+=`
`+q("",H+K)+`^
`,R}else return R+" at index "+(this.index-1);function q(re,V){var G=String(re);return Array(V-G.length+1).join(" ")+G}};function A(D,R,k){if(D instanceof g)var L=D,k=R;else var L=g.fromCompiled(D,R);this.grammar=L,this.options={keepHistory:!1,lexer:L.lexer||new F};for(var W in k||{})this.options[W]=k[W];this.lexer=this.options.lexer,this.lexerState=void 0;var K=new j(L,0),H=this.table=[K];K.wants[L.start]=[],K.predict(L.start),K.process(),this.current=0}A.fail={},A.prototype.feed=function(D){var R=this.lexer;R.reset(D,this.lexerState);for(var k;;){try{if(k=R.next(),!k)break}catch(Z){var H=new j(this.grammar,this.current+1);this.table.push(H);var L=new Error(this.reportLexerError(Z));throw L.offset=this.current,L.token=Z.token,L}var W=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var K=this.current+1,H=new j(this.grammar,K);this.table.push(H);for(var q=k.text!==void 0?k.text:k.value,re=R.constructor===F?k.value:k,V=W.scannable,G=V.length;G--;){var X=V[G],_=X.rule.symbols[X.dot];if(_.test?_.test(re):_.type?_.type===k.type:_.literal===q){var b=X.nextState({data:re,token:k,isToken:!0,reference:K-1});H.states.push(b)}}if(H.process(),H.states.length===0){var L=new Error(this.reportError(k));throw L.offset=this.current,L.token=k,L}this.options.keepHistory&&(W.lexerState=R.save()),this.current++}return W&&(this.lexerState=R.save()),this.results=this.finish(),this},A.prototype.reportLexerError=function(D){var R,k,L=D.token;return L?(R="input "+JSON.stringify(L.text[0])+" (lexer error)",k=this.lexer.formatError(L,"Syntax error")):(R="input (lexer error)",k=D.message),this.reportErrorCommon(k,R)},A.prototype.reportError=function(D){var R=(D.type?D.type+" token: ":"")+JSON.stringify(D.value!==void 0?D.value:D),k=this.lexer.formatError(D,"Syntax error");return this.reportErrorCommon(k,R)},A.prototype.reportErrorCommon=function(D,R){var k=[];k.push(D);var L=this.table.length-2,W=this.table[L],K=W.states.filter(function(q){var re=q.rule.symbols[q.dot];return re&&typeof re!="string"});if(K.length===0)k.push("Unexpected "+R+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(W.states,k);else{k.push("Unexpected "+R+`. Instead, I was expecting to see one of the following:
`);var H=K.map(function(q){return this.buildFirstStateStack(q,[])||[q]},this);H.forEach(function(q){var re=q[0],V=re.rule.symbols[re.dot],G=this.getSymbolDisplay(V);k.push("A "+G+" based on:"),this.displayStateStack(q,k)},this)}return k.push(""),k.join(`
`)},A.prototype.displayStateStack=function(D,R){for(var k,L=0,W=0;W<D.length;W++){var K=D[W],H=K.rule.toString(K.dot);H===k?L++:(L>0&&R.push("    ^ "+L+" more lines identical to this"),L=0,R.push("    "+H)),k=H}},A.prototype.getSymbolDisplay=function(D){return z(D)},A.prototype.buildFirstStateStack=function(D,R){if(R.indexOf(D)!==-1)return null;if(D.wantedBy.length===0)return[D];var k=D.wantedBy[0],L=[D].concat(R),W=this.buildFirstStateStack(k,L);return W===null?null:[D].concat(W)},A.prototype.save=function(){var D=this.table[this.current];return D.lexerState=this.lexerState,D},A.prototype.restore=function(D){var R=D.index;this.current=R,this.table[R]=D,this.table.splice(R+1),this.lexerState=D.lexerState,this.results=this.finish()},A.prototype.rewind=function(D){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[D])},A.prototype.finish=function(){var D=[],R=this.grammar.start,k=this.table[this.table.length-1];return k.states.forEach(function(L){L.rule.name===R&&L.dot===L.rule.symbols.length&&L.reference===0&&L.data!==A.fail&&D.push(L)}),D.map(function(L){return L.data})};function z(D){var R=typeof D;if(R==="string")return D;if(R==="object"){if(D.literal)return JSON.stringify(D.literal);if(D instanceof RegExp)return"character matching "+D;if(D.type)return D.type+" token";if(D.test)return"token matching "+String(D.test);throw new Error("Unknown symbol type: "+D)}}function J(D){var R=typeof D;if(R==="string")return D;if(R==="object"){if(D.literal)return JSON.stringify(D.literal);if(D instanceof RegExp)return D.toString();if(D.type)return"%"+D.type;if(D.test)return"<"+String(D.test)+">";throw new Error("Unknown symbol type: "+D)}}return{Parser:A,Grammar:g,Rule:B}})},48760:(Q,B,x)=>{"use strict";var j;j={value:!0};var g=x(22970),F=x(2784),A=g.__importDefault(x(27618));function z(J,D,R){D===void 0&&(D=0),R===void 0&&(R=[]);var k=A.default(J,D),L=k[0],W=k[1],K=k[2];return F.useEffect(K,R),[L,W]}B.Z=z},27618:(Q,B,x)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});var j=x(2784);function g(F,A){A===void 0&&(A=0);var z=j.useRef(!1),J=j.useRef(),D=j.useRef(F),R=j.useCallback(function(){return z.current},[]),k=j.useCallback(function(){z.current=!1,J.current&&clearTimeout(J.current),J.current=setTimeout(function(){z.current=!0,D.current()},A)},[A]),L=j.useCallback(function(){z.current=null,J.current&&clearTimeout(J.current)},[]);return j.useEffect(function(){D.current=F},[F]),j.useEffect(function(){return k(),L},[A]),[R,L,k]}B.default=g},62935:(Q,B)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});function x(A){return A[0]}const j=A=>[].concat(...A.map(z=>Array.isArray(z)?j(z):z));function g(A){return A?Array.isArray(A)?j(A).join(""):A:""}const F={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:A=>A.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(A){return A.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(A){return A.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:x},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:A=>A[0].concat([A[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:A=>A[0].concat([A[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:x},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:A=>A[0].concat([A[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:x},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:A=>A[0].concat([A[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:x},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(A){return{DomainName:g(A[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(A){return{AddressLiteral:g(A[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(A){return{localPart:g(A[0]),domainPart:g(A[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(A){return{DotString:g(A[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(A){return{QuotedString:g(A[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:A=>A[0].concat([A[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:A=>A[0].concat([A[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:A=>A[0].concat([A[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:x},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(A){return A.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:A=>A[0].concat([A[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:x},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:x},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:A=>A.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:x},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:x},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:A=>A.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:x},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:x},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:x},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:x},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:x},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:x},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:x},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:x}],ParserStart:"Reverse_path"};B.default=F},21391:function(Q,B,x){"use strict";var j=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(B,"__esModule",{value:!0}),B.canonicalize=B.canonicalize_quoted_string=B.normalize=B.normalize_dot_string=B.parse=void 0;const g=x(43614),F=j(x(62935));F.default.ParserStart="Mailbox";const A=g.Grammar.fromCompiled(F.default);function z(L){const W=new g.Parser(A);if(W.feed(L),W.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return W.results[0]}B.parse=z;function J(L){return function(){const H=L.indexOf("+");return H===-1?L:L.substr(0,H)}().replace(/\./g,"").toLowerCase()}B.normalize_dot_string=J;function D(L){var W,K;const H=z(L),q=(W=H.domainPart.AddressLiteral)!==null&&W!==void 0?W:H.domainPart.DomainName.toLowerCase();return`${(K=H.localPart.QuotedString)!==null&&K!==void 0?K:J(H.localPart.DotString)}@${q}`}B.normalize=D;function R(L){return`"${L.substr(1).substr(0,L.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}B.canonicalize_quoted_string=R;function k(L){var W;const K=z(L),H=(W=K.domainPart.AddressLiteral)!==null&&W!==void 0?W:K.domainPart.DomainName.toLowerCase();return`${K.localPart.QuotedString?R(K.localPart.QuotedString):K.localPart.DotString}@${H}`}B.canonicalize=k},1170:(Q,B,x)=>{Q=x.nmd(Q),function(j){"use strict";j.exports.is_uri=F,j.exports.is_http_uri=A,j.exports.is_https_uri=z,j.exports.is_web_uri=J,j.exports.isUri=F,j.exports.isHttpUri=A,j.exports.isHttpsUri=z,j.exports.isWebUri=J;var g=function(D){var R=D.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return R};function F(D){if(D&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(D)&&!/%[^0-9a-f]/i.test(D)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(D)){var R=[],k="",L="",W="",K="",H="",q="";if(R=g(D),k=R[1],L=R[2],W=R[3],K=R[4],H=R[5],!!(k&&k.length&&W.length>=0)){if(L&&L.length){if(!(W.length===0||/^\//.test(W)))return}else if(/^\/\//.test(W))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(k.toLowerCase()))return q+=k+":",L&&L.length&&(q+="//"+L),q+=W,K&&K.length&&(q+="?"+K),H&&H.length&&(q+="#"+H),q}}}function A(D,R){if(F(D)){var k=[],L="",W="",K="",H="",q="",re="",V="";if(k=g(D),L=k[1],W=k[2],K=k[3],q=k[4],re=k[5],!!L){if(R){if(L.toLowerCase()!="https")return}else if(L.toLowerCase()!="http")return;if(W)return/:(\d+)$/.test(W)&&(H=W.match(/:(\d+)$/)[0],W=W.replace(/:\d+$/,"")),V+=L+":",V+="//"+W,H&&(V+=H),V+=K,q&&q.length&&(V+="?"+q),re&&re.length&&(V+="#"+re),V}}}function z(D){return A(D,!0)}function J(D){return A(D)||z(D)}}(Q)},87245:Q=>{"use strict";function B(x){return Object.prototype.toString.call(x)==="[object Array]"}Q.exports=Array.isArray||B},8615:Q=>{"use strict";function B(x){return typeof x=="function"}Q.exports=B},63772:(Q,B,x)=>{"use strict";var j=x(87245),g=x(45002);function F(A){var z;if(!j(A)||(z=A.length,!z))return!1;for(var J=0;J<z;J++)if(!g(A[J]))return!1;return!0}Q.exports=F},45002:(Q,B,x)=>{"use strict";var j=x(87040);function g(F){return j(F)&&F%1===0}Q.exports=g},87040:Q=>{"use strict";function B(x){return(typeof x=="number"||Object.prototype.toString.call(x)==="[object Number]")&&x.valueOf()===x.valueOf()}Q.exports=B},28235:(Q,B,x)=>{"use strict";x.d(B,{r:()=>F});var j=x(2784),g=x(2465);function F(A,z){const[J,D]=(0,j.useState)({status:"not-executed",error:void 0,result:z}),R=(0,j.useRef)(),k=(0,j.useRef)(),L=(0,g.x)({execute(...W){k.current=W;const K=A(...W);return R.current=K,D(H=>({...H,status:"loading"})),K.then(H=>{K===R.current&&D(q=>({...q,status:"success",error:void 0,result:H}))},H=>{K===R.current&&D(q=>({...q,status:"error",error:H}))}),K},reset(){D({status:"not-executed",error:void 0,result:z}),R.current=void 0,k.current=void 0}});return[J,(0,j.useMemo)(()=>({reset(){L.current.reset()},execute:(...W)=>L.current.execute(...W)}),[]),{promise:R.current,lastArgs:k.current}]}}}]);})();

//# sourceMappingURL=8157.fec86b97.chunk.js.map